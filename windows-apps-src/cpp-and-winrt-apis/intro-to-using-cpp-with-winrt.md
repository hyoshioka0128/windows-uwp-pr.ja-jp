---
description: C++/WinRT の紹介 &mdash; Windows ランタイム API 用の標準的な C++ 言語プロジェクション。
title: C++/WinRT の概要
ms.date: 04/02/2019
ms.topic: article
keywords: windows 10, uwp, 標準, c++, cpp, winrt, プロジェクション, 概要
ms.localizationpriority: medium
ms.openlocfilehash: e9e84370f0503a8f361df9b43b60a2870be745a3
ms.sourcegitcommit: 940645c705865ba9635ccae2da9d917420faf608
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/02/2019
ms.locfileid: "58812601"
---
# <a name="introduction-to-cwinrt"></a><span data-ttu-id="8cc99-104">C++/WinRT の概要</span><span class="sxs-lookup"><span data-stu-id="8cc99-104">Introduction to C++/WinRT</span></span>
&nbsp;
> [!VIDEO https://www.youtube.com/embed/nOFNc2uTmGs]

<span data-ttu-id="8cc99-105">C++/WinRT は Windows ランタイム (WinRT) API の標準的な最新の C++17 言語プロジェクションで、ヘッダー ファイル ベースのライブラリとして実装され、最新の Windows API への最上位アクセス権を提供するように設計されています。</span><span class="sxs-lookup"><span data-stu-id="8cc99-105">C++/WinRT is an entirely standard modern C++17 language projection for Windows Runtime (WinRT) APIs, implemented as a header-file-based library, and designed to provide you with first-class access to the modern Windows API.</span></span> <span data-ttu-id="8cc99-106">C++/WinRT の場合、標準に準拠した C++17 のコンパイラを使用して Windows ランタイム API を作成および使用できます。</span><span class="sxs-lookup"><span data-stu-id="8cc99-106">With C++/WinRT, you can author and consume Windows Runtime APIs using any standards-compliant C++17 compiler.</span></span> <span data-ttu-id="8cc99-107">Windows SDK には C++/WinRT が含まれます。バージョン 10.0.17134.0 (Windows 10、バージョン 1803) で導入されました。</span><span class="sxs-lookup"><span data-stu-id="8cc99-107">The Windows SDK includes C++/WinRT; it was introduced in version 10.0.17134.0 (Windows 10, version 1803).</span></span>

<span data-ttu-id="8cc99-108">C +/cli WinRT は Microsoft の推奨される代替、 [C +/cli CX](/cpp/cppcx/visual-c-language-reference-c-cx?branch=live)言語プロジェクションでは、および[Windows ランタイム C++ テンプレート ライブラリ (WRL)](/cpp/windows/windows-runtime-cpp-template-library-wrl?branch=live)します。</span><span class="sxs-lookup"><span data-stu-id="8cc99-108">C++/WinRT is Microsoft's recommended replacement for the [C++/CX](/cpp/cppcx/visual-c-language-reference-c-cx?branch=live) language projection, and the [Windows Runtime C++ Template Library (WRL)](/cpp/windows/windows-runtime-cpp-template-library-wrl?branch=live).</span></span> <span data-ttu-id="8cc99-109">完全な一覧[について C +/cli WinRT](index.md#topics-about-cwinrt)との相互運用とからの移植、C + の両方に関する情報が含まれます/cli CX および WRL します。</span><span class="sxs-lookup"><span data-stu-id="8cc99-109">The full list of [topics about C++/WinRT](index.md#topics-about-cwinrt) includes info about both interoperating with, and porting from, C++/CX and WRL.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="8cc99-110">いくつかの最も重要な情報のC++注意すべき WinRT のセクションで説明されている/ [SDK サポートC++/WinRT](#sdk-support-for-cwinrt)と[Visual Studio のサポートC++/WinRT、XAML、VSIX 拡張機能、および NuGetパッケージ](intro-to-using-cpp-with-winrt.md#visual-studio-support-for-cwinrt-xaml-the-vsix-extension-and-the-nuget-package)します。</span><span class="sxs-lookup"><span data-stu-id="8cc99-110">Some of the most important pieces of C++/WinRT to be aware of are described in the sections [SDK support for C++/WinRT](#sdk-support-for-cwinrt) and [Visual Studio support for C++/WinRT, XAML, the VSIX extension, and the NuGet package](intro-to-using-cpp-with-winrt.md#visual-studio-support-for-cwinrt-xaml-the-vsix-extension-and-the-nuget-package).</span></span>

## <a name="language-projections"></a><span data-ttu-id="8cc99-111">言語プロジェクション</span><span class="sxs-lookup"><span data-stu-id="8cc99-111">Language projections</span></span>
<span data-ttu-id="8cc99-112">Windows ランタイムは、コンポーネント オブジェクト モデル (COM) API に基づいており、*言語プロジェクション*を使用してアクセスするよう設計されています。</span><span class="sxs-lookup"><span data-stu-id="8cc99-112">The Windows Runtime is based on Component Object Model (COM) APIs, and it's designed to be accessed through *language projections*.</span></span> <span data-ttu-id="8cc99-113">プロジェクションは、COM の詳細を隠し、特定の言語により自然なプログラミング エクスペリエンスを提供します。</span><span class="sxs-lookup"><span data-stu-id="8cc99-113">A projection hides the COM details, and provides a more natural programming experience for a given language.</span></span>

### <a name="the-cwinrt-language-projection-in-the-windows-uwp-api-reference-content"></a><span data-ttu-id="8cc99-114">Windows UWP API リファレンス コンテンツにおける C++/WinRT 言語プロジェクション</span><span class="sxs-lookup"><span data-stu-id="8cc99-114">The C++/WinRT language projection in the Windows UWP API reference content</span></span>
<span data-ttu-id="8cc99-115">[Windows UWP API](https://docs.microsoft.com/uwp/api/) の閲覧中に、右上隅の **[言語] (Language)** コンボ ボックスをクリックして **[C++/WinRT]** を選択し、API 構文ブロックを C++/WinRT 言語プロジェクションで表示されるように表示します。</span><span class="sxs-lookup"><span data-stu-id="8cc99-115">When you're browsing [Windows UWP APIs](https://docs.microsoft.com/uwp/api/), click the **Language** combo box in the upper right, and select **C++/WinRT** to view API syntax blocks as they appear in the C++/WinRT language projection.</span></span>

## <a name="sdk-support-for-cwinrt"></a><span data-ttu-id="8cc99-116">C++/WinRT の SDK サポート</span><span class="sxs-lookup"><span data-stu-id="8cc99-116">SDK support for C++/WinRT</span></span>
<span data-ttu-id="8cc99-117">バージョン 10.0.17134.0 (Windows 10 バージョン 1803) の時点で、Windows SDK には、ファーストパーティ Windows API (Windows 名前空間の Windows ランタイム API) を使用するためのヘッダー ファイル ベースの標準的な C++ ライブラリが含まれています。</span><span class="sxs-lookup"><span data-stu-id="8cc99-117">As of version 10.0.17134.0 (Windows 10, version 1803), the Windows SDK contains a header-file-based standard C++ library for consuming first-party Windows APIs (Windows Runtime APIs in Windows namespaces).</span></span>

<span data-ttu-id="8cc99-118">互換性のため、Windows SDK も付属しています、`cppwinrt.exe`ツール。</span><span class="sxs-lookup"><span data-stu-id="8cc99-118">For compatibility, the Windows SDK also comes with the `cppwinrt.exe` tool.</span></span> <span data-ttu-id="8cc99-119">ただし、お勧めする代わりにインストールして使用する最新バージョンの`cppwinrt.exe`に含まれている、 **Microsoft.Windows.CppWinRT** NuGet パッケージ。</span><span class="sxs-lookup"><span data-stu-id="8cc99-119">However, we recommend that you instead install and use the most recent version of `cppwinrt.exe`, which is included with the **Microsoft.Windows.CppWinRT** NuGet package.</span></span> <span data-ttu-id="8cc99-120">そのパッケージと`cppwinrt.exe`は、次のセクションで説明します。</span><span class="sxs-lookup"><span data-stu-id="8cc99-120">That package, and `cppwinrt.exe`, are described in the next section.</span></span>

## <a name="visual-studio-support-for-cwinrt-xaml-the-vsix-extension-and-the-nuget-package"></a><span data-ttu-id="8cc99-121">Visual Studio のサポートの C +/cli WinRT、XAML、VSIX 拡張機能と NuGet パッケージ</span><span class="sxs-lookup"><span data-stu-id="8cc99-121">Visual Studio support for C++/WinRT, XAML, the VSIX extension, and the NuGet package</span></span>
<span data-ttu-id="8cc99-122">Visual Studio サポートについては、10.0.17134.0 (Windows 10、バージョン 1803) の最小の SDK の Windows ターゲット バージョンに加えて、または必要な Visual Studio 2019 Visual Studio 2017 (少なくともバージョン 15.6; 15.7 では、少なくともお勧めします)。</span><span class="sxs-lookup"><span data-stu-id="8cc99-122">For Visual Studio support, in addition to a minimum Windows SDK target version of 10.0.17134.0 (Windows 10, version 1803), you'll need Visual Studio 2019 or Visual Studio 2017 (at least version 15.6; we recommend at least 15.7).</span></span> <span data-ttu-id="8cc99-123">まだインストールしていない場合、インストールする必要があります、 **C++ ユニバーサル Windows プラットフォーム ツール**オプションを Visual Studio インストーラー内で。</span><span class="sxs-lookup"><span data-stu-id="8cc99-123">If you haven't already installed it, you'll need to install the **C++ Universal Windows Platform tools** option from within the Visual Studio Installer.</span></span> <span data-ttu-id="8cc99-124">Windows**設定** > **Update\&セキュリティ** > **開発者向け**、選択、**開発者モード**オプションではなく、**アプリのサイドロード**オプション。</span><span class="sxs-lookup"><span data-stu-id="8cc99-124">And, in Windows **Settings** > **Update \& Security** > **For developers**, choose the **Developer mode** option rather than the **Sideload apps** option.</span></span>

<span data-ttu-id="8cc99-125">ダウンロードしての最新バージョンをインストールする必要があります、 [C +/cli WinRT Visual Studio Extension (VSIX)](https://aka.ms/cppwinrt/vsix)から、 [Visual Studio Marketplace](https://marketplace.visualstudio.com/)します。</span><span class="sxs-lookup"><span data-stu-id="8cc99-125">You'll need to download and install the latest version of the [C++/WinRT Visual Studio Extension (VSIX)](https://aka.ms/cppwinrt/vsix) from the [Visual Studio Marketplace](https://marketplace.visualstudio.com/).</span></span>

- <span data-ttu-id="8cc99-126">VSIX 拡張機能を提供する C +/cli Visual Studio で、WinRT プロジェクトと項目テンプレート C + で始めることができるように/cli WinRT 開発します。</span><span class="sxs-lookup"><span data-stu-id="8cc99-126">The VSIX extension gives you C++/WinRT project and item templates in Visual Studio, so that you can get started with C++/WinRT development.</span></span>
- <span data-ttu-id="8cc99-127">さらに、使用すると Visual Studio のネイティブのデバッグの視覚化 (natvis) of C/cli WinRT の型を射影します。ような体験C#デバッグします。</span><span class="sxs-lookup"><span data-stu-id="8cc99-127">In addition, it gives you Visual Studio native debug visualization (natvis) of C++/WinRT projected types; providing an experience similar to C# debugging.</span></span> <span data-ttu-id="8cc99-128">Natvis はデバッグ ビルドで自動で行われます。</span><span class="sxs-lookup"><span data-stu-id="8cc99-128">Natvis is automatic for debug builds.</span></span> <span data-ttu-id="8cc99-129">シンボル WINRT_NATVIS を定義することで、リリース ビルドを選択できます。</span><span class="sxs-lookup"><span data-stu-id="8cc99-129">You can opt into it release builds by defining the symbol WINRT_NATVIS.</span></span>

<span data-ttu-id="8cc99-130">Visual Studio のプロジェクト テンプレートの C +/cli WinRT は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="8cc99-130">The Visual Studio project templates for C++/WinRT are described below.</span></span> <span data-ttu-id="8cc99-131">作成すると新しい C +/cli WinRT プロジェクトは最新の VSIX 拡張機能をインストールして、新しい C +/cli WinRT プロジェクトは自動的にインストール、 [Microsoft.Windows.CppWinRT NuGet パッケージ](https://www.nuget.org/packages/Microsoft.Windows.CppWinRT/)します。</span><span class="sxs-lookup"><span data-stu-id="8cc99-131">When you create a new C++/WinRT project with the latest version of the VSIX extension installed, the new C++/WinRT project automatically installs the [Microsoft.Windows.CppWinRT NuGet package](https://www.nuget.org/packages/Microsoft.Windows.CppWinRT/).</span></span> <span data-ttu-id="8cc99-132">**Microsoft.Windows.CppWinRT** NuGet パッケージは、C +/cli WinRT のビルド (MSBuild のプロパティとターゲット) のサポート、開発用コンピューターからビルド エージェントの間で移植可能なプロジェクトを作成 (を NuGet パッケージとVSIX 拡張子ではなくがインストールされている)。</span><span class="sxs-lookup"><span data-stu-id="8cc99-132">The **Microsoft.Windows.CppWinRT** NuGet package provides C++/WinRT build support (MSBuild properties and targets), making your project portable between a development machine and a build agent (on which only the NuGet package, and not the VSIX extension, is installed).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="8cc99-133">使用して作成された (またはアップグレードを使用する) プロジェクトがあるかどうかは VSIX 拡張機能を以前のバージョンより 1.0.190128.4、しを参照してください[VSIX 拡張機能の以前のバージョン](#earlier-versions-of-the-vsix-extension)します。</span><span class="sxs-lookup"><span data-stu-id="8cc99-133">If you have projects that were created with (or upgraded to work with) a version of the VSIX extension earlier than 1.0.190128.4, then see [Earlier versions of the VSIX extension](#earlier-versions-of-the-vsix-extension).</span></span> <span data-ttu-id="8cc99-134">そのセクションには、VSIX 拡張機能の最新バージョンを使用するようにアップグレードするために知っておく必要がありますプロジェクトの構成に関する重要な情報が含まれています。</span><span class="sxs-lookup"><span data-stu-id="8cc99-134">That section contains important info about the configuration of your projects, which you'll need to know to upgrade them to use the latest version of the VSIX extension.</span></span>

> [!NOTE]
> <span data-ttu-id="8cc99-135">C++/WinRT は、標準の c++ 17 から機能を使用して、NuGet パッケージがプロジェクトのプロパティを設定**C/C++** > **言語** >   **C++言語標準** > **ISO c++ 17 標準 (//std:c + + 17)** Visual Studio でします。</span><span class="sxs-lookup"><span data-stu-id="8cc99-135">Because C++/WinRT uses features from the C++17 standard, the NuGet package sets project property **C/C++** > **Language** > **C++ Language Standard** > **ISO C++17 Standard (/std:c++17)** in Visual Studio.</span></span> <span data-ttu-id="8cc99-136">また、 [/bigobj](/cpp/build/reference/bigobj-increase-number-of-sections-in-dot-obj-file)コンパイラ オプション。</span><span class="sxs-lookup"><span data-stu-id="8cc99-136">It also adds the [/bigobj](/cpp/build/reference/bigobj-increase-number-of-sections-in-dot-obj-file) compiler option.</span></span>
> 
> <span data-ttu-id="8cc99-137">設定することがありますも**準拠モード。[はい] (/permissive -)** 標準に準拠したコードをさらに制限します。</span><span class="sxs-lookup"><span data-stu-id="8cc99-137">You might also want to set **Conformance mode: Yes (/permissive-)**, which further constrains your code to be standards-compliant.</span></span> <span data-ttu-id="8cc99-138">注意すべきもう 1 つのプロジェクト プロパティは、**[C/C++]** > **[全般]** > **[警告をエラーとして扱う]** です。</span><span class="sxs-lookup"><span data-stu-id="8cc99-138">Another project property to be aware of is **C/C++** > **General** > **Treat Warnings As Errors**.</span></span> <span data-ttu-id="8cc99-139">これをユーザーの好みに合わせて **[はい (/WX)]** または **[いいえ (/WX-)]** に設定します。</span><span class="sxs-lookup"><span data-stu-id="8cc99-139">Set this to **Yes(/WX)** or **No (/WX-)** to taste.</span></span> <span data-ttu-id="8cc99-140">場合によっては、`cppwinrt.exe` ツールによって生成されたソース ファイルは、それらに実装を追加するまで警告を生成します。</span><span class="sxs-lookup"><span data-stu-id="8cc99-140">Sometimes, source files generated by the `cppwinrt.exe` tool generate warnings until you add your implementation to them.</span></span>

<span data-ttu-id="8cc99-141">上記で説明した、システムにことができますを作成し、ビルド、または開くには、c++/cli WinRT は Visual Studio でプロジェクトし、デプロイします。</span><span class="sxs-lookup"><span data-stu-id="8cc99-141">With your system set up as described above, you'll be able to create and build, or open, a C++/WinRT project in Visual Studio, and deploy it.</span></span>

<span data-ttu-id="8cc99-142">または、手動でインストールすることで、既存のプロジェクトを変換、 **Microsoft.Windows.CppWinRT** NuGet パッケージ。</span><span class="sxs-lookup"><span data-stu-id="8cc99-142">Alternatively, you can convert an existing project by manually installing the **Microsoft.Windows.CppWinRT** NuGet package.</span></span> <span data-ttu-id="8cc99-143">後にインストール (または更新) VSIX 拡張機能の最新バージョンの Visual Studio で既存のプロジェクトを開く **プロジェクト** \> **NuGet パッケージの管理.**\> **参照**入力するか貼り付けて**Microsoft.Windows.CppWinRT**検索ボックスに、検索結果の項目を選択し、順にクリックします**インストール**そのプロジェクトのパッケージをインストールします。</span><span class="sxs-lookup"><span data-stu-id="8cc99-143">After installing (or updating to) the latest version of the VSIX extension, open the existing project in Visual Studio, click **Project** \> **Manage NuGet Packages...** \> **Browse**, type or paste **Microsoft.Windows.CppWinRT** in the search box, select the item in search results, and then click **Install** to install the package for that project.</span></span> <span data-ttu-id="8cc99-144">パッケージを追加すると表示されます C +/cli の呼び出しを含む、プロジェクトの WinRT MSBuild のサポート、`cppwinrt.exe`ツール。</span><span class="sxs-lookup"><span data-stu-id="8cc99-144">Once you've added the package, you'll get C++/WinRT MSBuild support for the project, including invoking the `cppwinrt.exe` tool.</span></span> <span data-ttu-id="8cc99-145">バージョン 2.0 では、時点で、 **Microsoft.Windows.CppWinRT** NuGet パッケージに含まれる、`cppwinrt.exe`ツール。</span><span class="sxs-lookup"><span data-stu-id="8cc99-145">As of version 2.0, the **Microsoft.Windows.CppWinRT** NuGet package includes the `cppwinrt.exe` tool.</span></span>

<span data-ttu-id="8cc99-146">ポイントすることができます、 `cppwinrt.exe` Windows ランタイム メタデータ ツール (`.winmd`) ヘッダー ファイル ベースの標準を生成するファイルC++ライブラリを*プロジェクト*から消費のメタデータで記述された Api C++/WinRT コードです。</span><span class="sxs-lookup"><span data-stu-id="8cc99-146">You can point the `cppwinrt.exe` tool at a Windows Runtime metadata (`.winmd`) file to generate a header-file-based standard C++ library that *projects* the APIs described in the metadata for consumption from C++/WinRT code.</span></span> <span data-ttu-id="8cc99-147">Windows ランタイム メタデータ (`.winmd`) ファイルは、Windows ランタイム API サーフェスを記述する正規の方法を提供します。</span><span class="sxs-lookup"><span data-stu-id="8cc99-147">Windows Runtime metadata (`.winmd`) files provide a canonical way of describing a Windows Runtime API surface.</span></span> <span data-ttu-id="8cc99-148">メタデータで `cppwinrt.exe` をポイントすることで、セカンド パーティまたはサード パーティの Windows ランタイム コンポーネントに実装された、または独自のアプリケーションに実装された任意のランタイム クラスで使用するためのライブラリを生成することができます。</span><span class="sxs-lookup"><span data-stu-id="8cc99-148">By pointing `cppwinrt.exe` at metadata, you can generate a library for use with any runtime class implemented in a second- or third-party Windows Runtime component, or implemented in your own application.</span></span> <span data-ttu-id="8cc99-149">詳細については、「[C++/WinRT での API の使用](consume-apis.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8cc99-149">For more info, see [Consume APIs with C++/WinRT](consume-apis.md).</span></span>

<span data-ttu-id="8cc99-150">C++/WinRT では、COM スタイルのプログラミングを使用せずに、標準的な C++ を使用して独自のランタイム クラスを実装することもできます。</span><span class="sxs-lookup"><span data-stu-id="8cc99-150">With C++/WinRT, you can also implement your own runtime classes using standard C++, without resorting to COM-style programming.</span></span> <span data-ttu-id="8cc99-151">ランタイム クラスでは、IDL ファイルで型を記述するだけです。`midl.exe` および `cppwinrt.exe` が実装のスケルトン ソース コード ファイルを自動的に作成します。</span><span class="sxs-lookup"><span data-stu-id="8cc99-151">For a runtime class, you just describe your types in an IDL file, and `midl.exe` and `cppwinrt.exe` generate your implementation boilerplate source code files for you.</span></span> <span data-ttu-id="8cc99-152">または、C++/WinRT の基本クラスから派生することでインターフェイスを実装することもできます。</span><span class="sxs-lookup"><span data-stu-id="8cc99-152">You can alternatively just implement interfaces by deriving from a C++/WinRT base class.</span></span> <span data-ttu-id="8cc99-153">詳細については、「[C++/WinRT での API の作成](author-apis.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="8cc99-153">For more info, see [Author APIs with C++/WinRT](author-apis.md).</span></span>

<span data-ttu-id="8cc99-154">C + を使用してプロジェクトを特定する/cli WinRT の MSBuild のサポートの有無によって、 **Microsoft.Windows.CppWinRT** NuGet パッケージをプロジェクト内でインストールします。</span><span class="sxs-lookup"><span data-stu-id="8cc99-154">You can identify a project that uses the C++/WinRT MSBuild support by the presence of the **Microsoft.Windows.CppWinRT** NuGet package installed within the project.</span></span>

<span data-ttu-id="8cc99-155">ここで、VSIX 拡張機能によって提供される Visual Studio プロジェクト テンプレートです。</span><span class="sxs-lookup"><span data-stu-id="8cc99-155">Here are the Visual Studio project templates provided by the VSIX extension.</span></span>

### <a name="windows-console-application-cwinrt"></a><span data-ttu-id="8cc99-156">Windows コンソール アプリケーション (C++/WinRT)</span><span class="sxs-lookup"><span data-stu-id="8cc99-156">Windows Console Application (C++/WinRT)</span></span>
<span data-ttu-id="8cc99-157">コンソールのユーザー インターフェイスを含む、Windows デスクトップの C++/WinRT クライアント アプリケーションのプロジェクト テンプレートです。</span><span class="sxs-lookup"><span data-stu-id="8cc99-157">A project template for a C++/WinRT client application for Windows Desktop, with a console user-interface.</span></span>

### <a name="blank-app-cwinrt"></a><span data-ttu-id="8cc99-158">空のアプリ (C++/WinRT)</span><span class="sxs-lookup"><span data-stu-id="8cc99-158">Blank App (C++/WinRT)</span></span>
<span data-ttu-id="8cc99-159">XAML ユーザー インターフェイスを持つユニバーサル Windows プラットフォーム (UWP) アプリのプロジェクト テンプレートです。</span><span class="sxs-lookup"><span data-stu-id="8cc99-159">A project template for a Universal Windows Platform (UWP) app that has a XAML user-interface.</span></span>

<span data-ttu-id="8cc99-160">Visual Studio では、各 XAML マークアップ ファイルの背後にあるインターフェイス定義言語 (IDL) (`.idl`) ファイルから実装とヘッダーのスタブを生成するために XAML コンパイラ サポートを提供します。</span><span class="sxs-lookup"><span data-stu-id="8cc99-160">Visual Studio provides XAML compiler support to generate implementation and header stubs from the Interface Definition Language (IDL) (`.idl`) file that sits behind each XAML markup file.</span></span> <span data-ttu-id="8cc99-161">IDL ファイルで、アプリの XAML ページ内で参照する任意のローカルのランタイム クラスを定義してから、プロジェクトを 1 回ビルドして `Generated Files` で実装テンプレート、`Generated Files\sources` でスタブ型定義を生成します。</span><span class="sxs-lookup"><span data-stu-id="8cc99-161">In an IDL file, define any local runtime classes that you want to reference in your app's XAML pages, and then build the project once to generate implementation templates in `Generated Files`, and stub type definitions in `Generated Files\sources`.</span></span> <span data-ttu-id="8cc99-162">次にローカルのランタイム クラスの実装への参照にこれらのスタブ型定義を使用します。</span><span class="sxs-lookup"><span data-stu-id="8cc99-162">Then use those the stub type definitions for reference to implement your local runtime classes.</span></span> <span data-ttu-id="8cc99-163">各ランタイム クラスをその独自の IDL ファイル内で宣言することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="8cc99-163">We recommend that you declare each runtime class in its own IDL file.</span></span>

<span data-ttu-id="8cc99-164">Visual Studio の XAML デザイン サーフェスのサポート C +/cli WinRT と同等の近くにあるC#します。</span><span class="sxs-lookup"><span data-stu-id="8cc99-164">Visual Studio's XAML design surface support for C++/WinRT is close to parity with C#.</span></span> <span data-ttu-id="8cc99-165">1 つの例外は、**イベント**のタブ、**プロパティ**ウィンドウ。</span><span class="sxs-lookup"><span data-stu-id="8cc99-165">One exception is the **Events** tab of the **Properties** window.</span></span> <span data-ttu-id="8cc99-166">C#プロジェクト、イベント ハンドラーを追加するタブを使用することができますC +/cli WinRT プロジェクト、その機能が存在しません。</span><span class="sxs-lookup"><span data-stu-id="8cc99-166">With a C# project, you can use that tab to add event handlers; with a C++/WinRT project, that facility is not present.</span></span> <span data-ttu-id="8cc99-167">参照が[C + でデリゲートを使用してイベントを処理/cli WinRT](handle-events.md)をコードにイベント ハンドラーを追加する方法の詳細について。</span><span class="sxs-lookup"><span data-stu-id="8cc99-167">But see [Handle events by using delegates in C++/WinRT](handle-events.md) for info on how to add event handlers to your code.</span></span>

### <a name="core-app-cwinrt"></a><span data-ttu-id="8cc99-168">コア アプリ (C++/WinRT)</span><span class="sxs-lookup"><span data-stu-id="8cc99-168">Core App (C++/WinRT)</span></span>
<span data-ttu-id="8cc99-169">XAML を使用しないユニバーサル Windows プラットフォーム (UWP) アプリのプロジェクト テンプレートです。</span><span class="sxs-lookup"><span data-stu-id="8cc99-169">A project template for a Universal Windows Platform (UWP) app that doesn't use XAML.</span></span>

<span data-ttu-id="8cc99-170">代わりに、Windows.ApplicationModel.Core 名前空間に C++/WinRT Windows 名前空間ヘッダーを使用します。</span><span class="sxs-lookup"><span data-stu-id="8cc99-170">Instead, it uses the C++/WinRT Windows namespace header for the Windows.ApplicationModel.Core namespace.</span></span> <span data-ttu-id="8cc99-171">ビルドおよび実行した後に、空の領域をクリックして色付きの正方形を追加し、色付きの正方形をクリックしてそれをドラッグします。</span><span class="sxs-lookup"><span data-stu-id="8cc99-171">After building and running, click on an empty space to add a colored square; then click on a colored square to drag it.</span></span>

### <a name="windows-runtime-component-cwinrt"></a><span data-ttu-id="8cc99-172">Windows ランタイム コンポーネント (C++/WinRT)</span><span class="sxs-lookup"><span data-stu-id="8cc99-172">Windows Runtime Component (C++/WinRT)</span></span>
<span data-ttu-id="8cc99-173">通常はユニバーサル Windows プラットフォーム (UWP) から使用するための、コンポーネントのプロジェクト テンプレートです。</span><span class="sxs-lookup"><span data-stu-id="8cc99-173">A project template for a component; typically for consumption from a Universal Windows Platform (UWP).</span></span>

<span data-ttu-id="8cc99-174">このテンプレートは、Windows ランタイム メタデータ (`.winmd`) が IDL から生成され、実装とヘッダーのスタブが Windows ランタイム メタデータから生成される、`midl.exe` > `cppwinrt.exe` ツール チェーンを示します。</span><span class="sxs-lookup"><span data-stu-id="8cc99-174">This template demonstrates the `midl.exe` > `cppwinrt.exe` toolchain, where Windows Runtime metadata (`.winmd`) is generated from IDL, and then implementation and header stubs are generated from the Windows Runtime metadata.</span></span>

<span data-ttu-id="8cc99-175">IDL ファイルでは、コンポーネント、それらの既定インターフェイス、およびそれらが実装している他のすべてのインターフェイスのランタイム クラスを定義します。</span><span class="sxs-lookup"><span data-stu-id="8cc99-175">In an IDL file, define the runtime classes in your component, their default interface, and any other interfaces they implement.</span></span> <span data-ttu-id="8cc99-176">プロジェクトを 1 回ビルドして `module.g.cpp`、`module.h.cpp`、`Generated Files` の実装テンプレート、および `Generated Files\sources` のスタブ型定義を生成します。</span><span class="sxs-lookup"><span data-stu-id="8cc99-176">Build the project once to generate `module.g.cpp`, `module.h.cpp`, implementation templates in `Generated Files`, and stub type definitions in `Generated Files\sources`.</span></span> <span data-ttu-id="8cc99-177">次にコンポーネント内のランタイム クラスの実装への参照にこれらのスタブ型定義を使用します。</span><span class="sxs-lookup"><span data-stu-id="8cc99-177">Then use those the stub type definitions for reference to implement the runtime classes in your component.</span></span> <span data-ttu-id="8cc99-178">各ランタイム クラスをその独自の IDL ファイル内で宣言することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="8cc99-178">We recommend that you declare each runtime class in its own IDL file.</span></span>

<span data-ttu-id="8cc99-179">ビルドした Windows ランタイム コンポーネントのバイナリとその `.winmd` を、それらを使用する UWP アプリとバンドルします。</span><span class="sxs-lookup"><span data-stu-id="8cc99-179">Bundle the built Windows Runtime Component binary and its `.winmd` with the UWP app consuming them.</span></span>

## <a name="earlier-versions-of-the-vsix-extension"></a><span data-ttu-id="8cc99-180">VSIX 拡張機能の以前のバージョン</span><span class="sxs-lookup"><span data-stu-id="8cc99-180">Earlier versions of the VSIX extension</span></span>
<span data-ttu-id="8cc99-181">インストールすることをお勧めします。 (または更新する) の最新バージョン、 [VSIX 拡張機能](https://aka.ms/cppwinrt/vsix)します。</span><span class="sxs-lookup"><span data-stu-id="8cc99-181">We recommend that you install (or update to) the latest version of the [VSIX extension](https://aka.ms/cppwinrt/vsix).</span></span> <span data-ttu-id="8cc99-182">既定で自動的に更新する構成されます。</span><span class="sxs-lookup"><span data-stu-id="8cc99-182">It is configured to update itself by default.</span></span> <span data-ttu-id="8cc99-183">VSIX 拡張機能、1.0.190128.4 し、このセクションでより前のバージョンで作成されたプロジェクトを使用して、その場合に、新しいバージョンで動作するこれらのプロジェクトのアップグレードに関する重要な情報が含まれています。</span><span class="sxs-lookup"><span data-stu-id="8cc99-183">If you do that, and you have projects that were created with a version of the VSIX extension earlier than 1.0.190128.4, then this section contains important info about upgrading those projects to work with the new version.</span></span> <span data-ttu-id="8cc99-184">更新しない場合も表示されますについては、このセクションでは便利です。</span><span class="sxs-lookup"><span data-stu-id="8cc99-184">If you don't update, then you'll still find the info in this section useful.</span></span>

<span data-ttu-id="8cc99-185">観点で、Windows SDK と Visual Studio のバージョンでは、Visual Studio の構成情報はサポートされている、 [Visual Studio のサポートを c++/cli WinRT、XAML、VSIX 拡張機能と NuGet パッケージ](#visual-studio-support-for-cwinrt-xaml-the-vsix-extension-and-the-nuget-package)前に前のセクションが適用されますVSIX 拡張機能のバージョン。</span><span class="sxs-lookup"><span data-stu-id="8cc99-185">In terms of supported Windows SDK and Visual Studio versions, and Visual Studio configuration, the info in the [Visual Studio support for C++/WinRT, XAML, the VSIX extension, and the NuGet package](#visual-studio-support-for-cwinrt-xaml-the-vsix-extension-and-the-nuget-package) section above applies to earlier versions of the VSIX extension.</span></span> <span data-ttu-id="8cc99-186">以下の情報が、動作に関する重要な相違点について説明し、構成のプロジェクトで作成した (またはを使用するアップグレードされた) 以前のバージョン。</span><span class="sxs-lookup"><span data-stu-id="8cc99-186">The info below describes important differences regarding the behavior and configuration of projects created with (or upgraded to work with) earlier versions.</span></span>

### <a name="created-earlier-than-101810022"></a><span data-ttu-id="8cc99-187">1.0.181002.2 よりも前に作成</span><span class="sxs-lookup"><span data-stu-id="8cc99-187">Created earlier than 1.0.181002.2</span></span>
<span data-ttu-id="8cc99-188">VSIX 拡張機能、1.0.181002.2、C + より前のバージョンで、プロジェクトが作成された場合/cli WinRT ビルドのサポートは、VSIX 拡張機能のバージョンに組み込まれていた。</span><span class="sxs-lookup"><span data-stu-id="8cc99-188">If your project was created with a version of the VSIX extension earlier than 1.0.181002.2, then C++/WinRT build support was built into that version of the VSIX extension.</span></span> <span data-ttu-id="8cc99-189">プロジェクトが、`<CppWinRTEnabled>true</CppWinRTEnabled>`でプロパティを設定、`.vcxproj`ファイル。</span><span class="sxs-lookup"><span data-stu-id="8cc99-189">Your project has the `<CppWinRTEnabled>true</CppWinRTEnabled>` property set in the `.vcxproj` file.</span></span>

```xml
<Project ...>
    <PropertyGroup Label="Globals">
        <CppWinRTEnabled>true</CppWinRTEnabled>
...
```

<span data-ttu-id="8cc99-190">手動でインストールすることで、プロジェクトをアップグレードすることができます、 **Microsoft.Windows.CppWinRT** NuGet パッケージ。</span><span class="sxs-lookup"><span data-stu-id="8cc99-190">You can upgrade your project by manually installing the **Microsoft.Windows.CppWinRT** NuGet package.</span></span> <span data-ttu-id="8cc99-191">After をインストールする (またはにアップグレードする) VSIX 拡張機能の最新バージョンの Visual Studio でプロジェクトを開き、をクリックして**プロジェクト** \> **NuGet パッケージの管理.**\> **[参照]** 入力するか貼り付けて**Microsoft.Windows.CppWinRT**検索ボックスに、検索結果の項目を選択し、順にクリックします**インストール**プロジェクトのパッケージをインストールします。</span><span class="sxs-lookup"><span data-stu-id="8cc99-191">After installing (or upgrading to) the latest version of the VSIX extension, open your project in Visual Studio, click **Project** \> **Manage NuGet Packages...** \> **Browse**, type or paste **Microsoft.Windows.CppWinRT** in the search box, select the item in search results, and then click **Install** to install the package for your project.</span></span>

### <a name="created-with-or-upgraded-to-between-101810022-and-101901283"></a><span data-ttu-id="8cc99-192">作成された (またはにアップグレード) 1.0.181002.2 と 1.0.190128.3 間</span><span class="sxs-lookup"><span data-stu-id="8cc99-192">Created with (or upgraded to) between 1.0.181002.2 and 1.0.190128.3</span></span>
<span data-ttu-id="8cc99-193">1.0.181002.2 と 1.0.190128.3、両端を含む VSIX 拡張機能のバージョンで、プロジェクトが作成された場合、 **Microsoft.Windows.CppWinRT**プロジェクトで自動的に使用するプロジェクトで NuGet パッケージがインストールされましたテンプレート。</span><span class="sxs-lookup"><span data-stu-id="8cc99-193">If your project was created with a version of the VSIX extension between 1.0.181002.2 and 1.0.190128.3, inclusive, then the **Microsoft.Windows.CppWinRT** NuGet package was installed in the project automatically by the project template.</span></span> <span data-ttu-id="8cc99-194">この範囲内で VSIX 拡張機能のバージョンを使用する以前のプロジェクトをアップグレードしたも可能性があります。</span><span class="sxs-lookup"><span data-stu-id="8cc99-194">You might also have upgraded an older project to use a version of the VSIX extension in this range.</span></span> <span data-ttu-id="8cc99-195">実行した場合、し&mdash;ビルドのサポートがこの範囲内で VSIX 拡張機能のバージョンに引き続き存在も&mdash;、アップグレードされたプロジェクトの場合がありますまたはいない可能性があります、 **Microsoft.Windows.CppWinRT** NuGet パッケージインストールされています。</span><span class="sxs-lookup"><span data-stu-id="8cc99-195">If you did, then&mdash;since build support was also still present in versions of the VSIX extension in this range&mdash;your upgraded project may or may not have the **Microsoft.Windows.CppWinRT** NuGet package installed.</span></span>

<span data-ttu-id="8cc99-196">プロジェクトをアップグレードするには、前のセクションの指示に従って、し、プロジェクトがあることを確認、 **Microsoft.Windows.CppWinRT** NuGet パッケージをインストールします。</span><span class="sxs-lookup"><span data-stu-id="8cc99-196">To upgrade your project, follow the instructions in the previous section and ensure that your project does have the **Microsoft.Windows.CppWinRT** NuGet package installed.</span></span>

### <a name="invalid-upgrade-configurations"></a><span data-ttu-id="8cc99-197">無効なアップグレードの構成</span><span class="sxs-lookup"><span data-stu-id="8cc99-197">Invalid upgrade configurations</span></span>
<span data-ttu-id="8cc99-198">VSIX 拡張機能の最新のバージョンで無効ですが、プロジェクトの`<CppWinRTEnabled>true</CppWinRTEnabled>`プロパティもされていない場合は、 **Microsoft.Windows.CppWinRT** NuGet パッケージをインストールします。</span><span class="sxs-lookup"><span data-stu-id="8cc99-198">With the latest version of the VSIX extension, it's not valid for a project to have the `<CppWinRTEnabled>true</CppWinRTEnabled>` property if it doesn't also have the **Microsoft.Windows.CppWinRT** NuGet package installed.</span></span> <span data-ttu-id="8cc99-199">この構成では、プロジェクト ビルド エラーのメッセージを生成する"c++/cli WinRT VSIX プロジェクトのビルドのサポートは提供されなくなりました。</span><span class="sxs-lookup"><span data-stu-id="8cc99-199">A project with this configuration produces the build error message, "The C++/WinRT VSIX no longer provides project build support.</span></span>  <span data-ttu-id="8cc99-200">追加してください、Microsoft.Windows.CppWinRT Nuget パッケージへの参照をプロジェクト。"</span><span class="sxs-lookup"><span data-stu-id="8cc99-200">Please add a project reference to the Microsoft.Windows.CppWinRT Nuget package."</span></span>

<span data-ttu-id="8cc99-201">上記のとおり、c++/cli WinRT プロジェクトは、NuGet パッケージがインストールされていることを今すぐ必要があります。</span><span class="sxs-lookup"><span data-stu-id="8cc99-201">As mentioned above, a C++/WinRT project now needs to have the NuGet package installed in it.</span></span>

<span data-ttu-id="8cc99-202">以降、`<CppWinRTEnabled>`要素は廃止されました、必要に応じて編集することができます、 `.vcxproj`、および要素を削除します。</span><span class="sxs-lookup"><span data-stu-id="8cc99-202">Since the `<CppWinRTEnabled>` element is now obsolete, you can optionally edit your `.vcxproj`, and delete the element.</span></span> <span data-ttu-id="8cc99-203">厳密に必要はありませんが、これは、オプションです。</span><span class="sxs-lookup"><span data-stu-id="8cc99-203">It's not strictly necessary, but it's an option.</span></span>

<span data-ttu-id="8cc99-204">また場合、`.vcxproj`が含まれています`<RequiredBundles>$(RequiredBundles);Microsoft.Windows.CppWinRT</RequiredBundles>`、c++ を必要とせずに作成できるように削除することができます/cli WinRT VSIX 拡張機能のインストールします。</span><span class="sxs-lookup"><span data-stu-id="8cc99-204">Also, if your `.vcxproj` contains `<RequiredBundles>$(RequiredBundles);Microsoft.Windows.CppWinRT</RequiredBundles>`, then you can remove it so that you can build without requiring the C++/WinRT VSIX extension to be installed.</span></span>

## <a name="custom-types-in-the-cwinrt-projection"></a><span data-ttu-id="8cc99-205">C++/WinRT プロジェクションにおけるカスタム型</span><span class="sxs-lookup"><span data-stu-id="8cc99-205">Custom types in the C++/WinRT projection</span></span>
<span data-ttu-id="8cc99-206">C +/cli WinRT プログラミング、標準の C++ 言語の機能を使用することができますと[標準 C++ のデータ型および C++/cli WinRT](std-cpp-data-types.md)&mdash;C++ 標準ライブラリの一部のデータ型を含みます。</span><span class="sxs-lookup"><span data-stu-id="8cc99-206">In your C++/WinRT programming, you can use standard C++ language features and [Standard C++ data types and C++/WinRT](std-cpp-data-types.md)&mdash;including some C++ Standard Library data types.</span></span> <span data-ttu-id="8cc99-207">ただし、プロジェクションでいくつかのカスタム データ型を認識するようになり、それらを使用することもできます。</span><span class="sxs-lookup"><span data-stu-id="8cc99-207">But you'll also become aware of some custom data types in the projection, and you can choose to use them.</span></span> <span data-ttu-id="8cc99-208">たとえば、[C++/WinRT の概要](get-started.md) のクイックスタートのコード例では [**winrt::hstring**](/uwp/cpp-ref-for-winrt/hstring) を使用しています。</span><span class="sxs-lookup"><span data-stu-id="8cc99-208">For example, we use [**winrt::hstring**](/uwp/cpp-ref-for-winrt/hstring) in the quick-start code example in [Get started with C++/WinRT](get-started.md).</span></span>

<span data-ttu-id="8cc99-209">[**winrt::com_array** ](/uwp/cpp-ref-for-winrt/com-array)はいくつかの時点で使用する可能性がある別の型です。</span><span class="sxs-lookup"><span data-stu-id="8cc99-209">[**winrt::com_array**](/uwp/cpp-ref-for-winrt/com-array) is another type that you're likely to use at some point.</span></span> <span data-ttu-id="8cc99-210">ただし、[**winrt::array_view**](/uwp/cpp-ref-for-winrt/array-view) などの型を直接使用する可能性は低いです。</span><span class="sxs-lookup"><span data-stu-id="8cc99-210">But you're less likely to directly use a type such as [**winrt::array_view**](/uwp/cpp-ref-for-winrt/array-view).</span></span> <span data-ttu-id="8cc99-211">または、対応する型が C++ 標準ライブラリに現れた場合に変更すべきコードがないように、使用しないことを選択する場合もあります。</span><span class="sxs-lookup"><span data-stu-id="8cc99-211">Or you may choose not to use it so that you won't have any code to change if and when an equivalent type appears in the C++ Standard Library.</span></span>

> [!WARNING]
> <span data-ttu-id="8cc99-212">C++/WinRT Windows 名前空間ヘッダーをよく調査すると見つかる可能性がある型もあります。</span><span class="sxs-lookup"><span data-stu-id="8cc99-212">There are also types that you might see if you closely study the C++/WinRT Windows namespace headers.</span></span> <span data-ttu-id="8cc99-213">例として **winrt::param::hstring** がありますが、コレクションの例もあります。</span><span class="sxs-lookup"><span data-stu-id="8cc99-213">An example is **winrt::param::hstring**, but there are collection examples too.</span></span> <span data-ttu-id="8cc99-214">これらは入力パラメーターのバインディングを最適化するためにのみ存在し、大幅に改善したパフォーマンスをもたらし、関連する標準的な C++ の型とコンテナーでほとんどの呼び出しパターンが "そのまま機能する" ようにします。</span><span class="sxs-lookup"><span data-stu-id="8cc99-214">These exist solely to optimize the binding of input parameters, and they yield big performance improvements and make most calling patterns "just work" for related standard C++ types and containers.</span></span> <span data-ttu-id="8cc99-215">これらの型は、ほとんどの値を追加する場合にプロジェクションでのみ使用されます。</span><span class="sxs-lookup"><span data-stu-id="8cc99-215">These types are only ever used by the projection in cases where they add most value.</span></span> <span data-ttu-id="8cc99-216">高度に最適化され、一般的な用途で使用するものではありません。それらの型を自分で使用しないようにしてください。</span><span class="sxs-lookup"><span data-stu-id="8cc99-216">They're highly optimized and they're not for general use; don't be tempted to use them yourself.</span></span> <span data-ttu-id="8cc99-217">また、`winrt::impl` 名前空間からは何も使用しないでください。それらは実装型であるため、変更されることがあります。</span><span class="sxs-lookup"><span data-stu-id="8cc99-217">Nor should you use anything from the `winrt::impl` namespace, since those are implementation types, and therefore subject to change.</span></span> <span data-ttu-id="8cc99-218">引き続き標準型を使用するか、または [winrt 名前空間](/uwp/cpp-ref-for-winrt/winrt)の型を使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8cc99-218">You should continue to use standard types, or types from the [winrt namespace](/uwp/cpp-ref-for-winrt/winrt).</span></span>

## <a name="important-apis"></a><span data-ttu-id="8cc99-219">重要な API</span><span class="sxs-lookup"><span data-stu-id="8cc99-219">Important APIs</span></span>
* [<span data-ttu-id="8cc99-220">winrt::hstring 構造体</span><span class="sxs-lookup"><span data-stu-id="8cc99-220">winrt::hstring struct</span></span>](/uwp/cpp-ref-for-winrt/hstring)
* [<span data-ttu-id="8cc99-221">winrt 名前空間</span><span class="sxs-lookup"><span data-stu-id="8cc99-221">winrt namespace</span></span>](/uwp/cpp-ref-for-winrt/winrt)

## <a name="related-topics"></a><span data-ttu-id="8cc99-222">関連トピック</span><span class="sxs-lookup"><span data-stu-id="8cc99-222">Related topics</span></span>
* [<span data-ttu-id="8cc99-223">C++/CX</span><span class="sxs-lookup"><span data-stu-id="8cc99-223">C++/CX</span></span>](/cpp/cppcx/visual-c-language-reference-c-cx)
* [<span data-ttu-id="8cc99-224">C +/cli WinRT Visual Studio 拡張機能 (VSIX)</span><span class="sxs-lookup"><span data-stu-id="8cc99-224">C++/WinRT Visual Studio Extension (VSIX)</span></span>](https://aka.ms/cppwinrt/vsix)
* [<span data-ttu-id="8cc99-225">C++/WinRT の使用を開始する</span><span class="sxs-lookup"><span data-stu-id="8cc99-225">Get started with C++/WinRT</span></span>](get-started.md)
* [<span data-ttu-id="8cc99-226">標準的な C++ のデータ型と C++/WinRT</span><span class="sxs-lookup"><span data-stu-id="8cc99-226">Standard C++ data types and C++/WinRT</span></span>](std-cpp-data-types.md)
* [<span data-ttu-id="8cc99-227">文字列処理 c++/cli WinRT</span><span class="sxs-lookup"><span data-stu-id="8cc99-227">String handling in C++/WinRT</span></span>](strings.md)
* [<span data-ttu-id="8cc99-228">Windows の UWP Api</span><span class="sxs-lookup"><span data-stu-id="8cc99-228">Windows UWP APIs</span></span>](https://docs.microsoft.com/uwp/api/)
