---
author: stevewhims
Description: "MakePri.exe は、PRI ファイルを作成およびダンプするために使用できるコマンド ライン ツールです。 このツールは、Microsoft Visual Studio の MSBuild の一部として統合されていますが、パッケージを手動で作成したり、カスタム ビルド システムを使って作成する場合にも使うことができます。"
title: "MakePri.exe を使用して手動でリソースをコンパイルする"
template: detail.hbs
ms.author: stwhi
ms.date: 10/23/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: "Windows 10, UWP, リソース, 画像, アセット, MRT, 修飾子"
localizationpriority: medium
ms.openlocfilehash: 16d2a270a69497bc66f7b17109bc28b062f14b5e
ms.sourcegitcommit: d0c93d734639bd31f264424ae5b6fead903a951d
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/03/2017
---
<link rel="stylesheet" href="https://az835927.vo.msecnd.net/sites/uwp/Resources/css/custom.css">

# <a name="compile-resources-manually-with-makepriexe"></a><span data-ttu-id="fa1c0-105">MakePri.exe を使用して手動でリソースをコンパイルする</span><span class="sxs-lookup"><span data-stu-id="fa1c0-105">Compile resources manually with MakePri.exe</span></span>

<span data-ttu-id="fa1c0-106">MakePri.exe は、PRI ファイルを作成およびダンプするために使用できるコマンド ライン ツールです。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-106">MakePri.exe is a command line tool that you can use to create and dump PRI files.</span></span> <span data-ttu-id="fa1c0-107">このツールは、Microsoft Visual Studio の MSBuild の一部として統合されていますが、パッケージを手動で作成したり、カスタム ビルド システムを使って作成する場合にも使うことができます。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-107">It is integrated as part of MSBuild within Microsoft Visual Studio, but it could be useful to you for creating packages manually or with a custom build system.</span></span>

## <a name="makepriexe-command-line-options"></a><span data-ttu-id="fa1c0-108">MakePri.exe のコマンド ライン オプション</span><span class="sxs-lookup"><span data-stu-id="fa1c0-108">MakePri.exe command-line options</span></span>

<span data-ttu-id="fa1c0-109">MakePri.exe には、`createconfig`、`dump`、`new`、`resourcepack`、`versioned` コマンドのセットが含まれます。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-109">MakePri.exe has the set of commands `createconfig`, `dump`, `new`, `resourcepack`, and `versioned`.</span></span> <span data-ttu-id="fa1c0-110">コマンド ライン オプションの使い方について詳しくは、「[MakePri.exe のコマンド ライン オプション](makepri-exe-command-options.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-110">For details of their use, see [MakePri.exe command-line options](makepri-exe-command-options.md).</span></span>

## <a name="makepriexe-configuration"></a><span data-ttu-id="fa1c0-111">MakePri.exe 構成</span><span class="sxs-lookup"><span data-stu-id="fa1c0-111">MakePri.exe configuration</span></span>

<span data-ttu-id="fa1c0-112">PRI XML 構成ファイルは、どのリソースをどのようにインデックス化するかを制御します。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-112">The PRI XML configuration file dictates how and what resources are indexed.</span></span> <span data-ttu-id="fa1c0-113">構成 XML のスキーマについては、「[MakePri.exe 構成](makepri-exe-configuration.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-113">The schema of the configuration XML is described in [MakePri.exe configuration](makepri-exe-configuration.md).</span></span>

## <a name="format-specific-indexers"></a><span data-ttu-id="fa1c0-114">形式に固有のインデクサー</span><span class="sxs-lookup"><span data-stu-id="fa1c0-114">Format-specific indexers</span></span>

<span data-ttu-id="fa1c0-115">MakePri.exe は、通常、`new`、`versioned`、`resourcepack` オプションと共に使用されます。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-115">MakePri.exe is typically used with the `new`, `versioned`, and `resourcepack` options.</span></span> <span data-ttu-id="fa1c0-116">これらのオプションを使うと、ソース ファイルがインデックス化され、リソースのインデックスが生成されます。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-116">In those cases it indexes source files to generate an index of resources.</span></span> <span data-ttu-id="fa1c0-117">MakePri.exe は、さまざまな別個のインデクサーを使って異なるソース リソース ファイルまたはリソースのコンテナーを読み取ります。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-117">MakePri.exe uses various individual indexers to read different source resource files or containers for resources.</span></span> <span data-ttu-id="fa1c0-118">最も単純なインデクサーは、リソース (`.jpg` 画像 や `.png` 画像など) のフォルダーの内容をインデックス化するフォルダー インデクサーです。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-118">The simplest indexer is the folder indexer, which indexes the contents of a folder for resources such as `.jpg` or `.png` images.</span></span> <span data-ttu-id="fa1c0-119">詳細については、「[MakePri.exe の形式に固有のインデクサー](makepri-exe-format-specific-indexers.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-119">For more info, see [MakePri.exe format-specific indexers](makepri-exe-format-specific-indexers.md).</span></span>

## <a name="makepriexe-warnings-and-error-messages"></a><span data-ttu-id="fa1c0-120">MakePri.exe の警告およびエラー メッセージ</span><span class="sxs-lookup"><span data-stu-id="fa1c0-120">MakePri.exe warnings and error messages</span></span>

```
Resources found for language(s) '<language(s)>' but no resources found for default language(s): '<language(s)>'. Change the default language or qualify resources with the default language.
```

<span data-ttu-id="fa1c0-121">上記の警告は、言語修飾子によるマークが付けられていると見なされる特定の名前付きリソースのファイルまたは文字列リソースが MakePri.exe または MSBuild によって検出されながら、既定の言語の候補が見つからなかった場合に表示されます。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-121">The warning above is displayed when MakePri.exe or MSBuild discovers files or string resources for a given named resource that appear to be marked with language qualifiers, but no candidate is found for a default language.</span></span> <span data-ttu-id="fa1c0-122">ファイルやフォルダーの名前に修飾子を使用するプロセスについては、「[言語、スケール、その他の修飾子用にリソースを調整する](tailor-resources-lang-scale-contrast.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-122">The process for using qualifiers in file and folder names is described in [Tailor your resources for language, scale, and other qualifiers](tailor-resources-lang-scale-contrast.md).</span></span> <span data-ttu-id="fa1c0-123">ファイルやフォルダーの名前に言語名を含めることはできますが、リソースはその明示された既定の言語に対して修飾されているとは見なされません。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-123">A file or folder may have a language name in it, but no resources are discovered that are qualified for the exact default language.</span></span> <span data-ttu-id="fa1c0-124">たとえば、プロジェクトで使う既定の言語が "en-US" で、"de/logo.png" という名前のファイルがプロジェクトにある場合に、既定の言語の "en-US" でマークされたファイルがないと、この警告が出力されます。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-124">For example, if a project uses "en-US" as the default language and has a file named "de/logo.png", but does not have any files that are marked with the default language "en-US", this warning will appear.</span></span> <span data-ttu-id="fa1c0-125">この警告が出力されないようにするには、ファイルまたは文字列リソースを既定の言語で修飾するか、または既定の言語を変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-125">In order to remove this warning, either file(s) or string resource(s) should be qualified with the default language, or the default language should be changed.</span></span> <span data-ttu-id="fa1c0-126">既定の言語を変更するには、Visual Studio でソリューションを開いた状態で、`Package.appxmanifest` を開きます。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-126">To change the default language, with your solution open in Visual Studio, open `Package.appxmanifest`.</span></span> <span data-ttu-id="fa1c0-127">[アプリケーション] タブで、既定の言語が適切に設定されている ("en"や "en-us" など) ことを確認します。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-127">On the Application tab, confirm that the Default language is set appropriately (for example, "en" or "en-US").</span></span>

```
No default or neutral resource given for '<resource identifier>'. The application may throw an exception for certain user configurations when retrieving the resources.
```

<span data-ttu-id="fa1c0-128">上記の警告は、言語修飾子によるマークが付けられていると見なされるファイルまたはリソースが MakePri.exe または MSBuild によって検出された一方で対応するリソースが不明確な場合に表示されます。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-128">The warning above is displayed when MakePri.exe or MSBuild discovers files or resources that appear to be marked with language qualifiers for which the resources are unclear.</span></span> <span data-ttu-id="fa1c0-129">修飾子はありますが、実行時にそのリソース識別子に対して特定のリソース候補を返すことができるという保証がありません。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-129">There are qualifiers, but there is no guarantee that a particular resource candidate can be returned for that resource identifier at run time.</span></span> <span data-ttu-id="fa1c0-130">特定の言語、住んでいる地域、またはその他の修飾子のリソース候補について、既定値であるかまたはユーザーのコンテキストに常に一致することが検出されない場合、この警告が表示されます。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-130">If no resource candidate for a particular language, homeregion, or other qualifier can be found that is a default or will always match the context of a user, this warning will be displayed.</span></span> <span data-ttu-id="fa1c0-131">実行時、ユーザーの言語設定や住んでいる地域などの特定のユーザー構成に関して (**[設定]** > **[時刻と言語]** > **[地域と言語]**)、リソースを取得するために使われた API が予期しない例外をスローすることがあります。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-131">At run time, for particular user configurations such as a user's language preferences or home location (**Settings** > **Time & Language** > **Region & language**), the APIs used to retrieve the resource may throw an unexpected exception.</span></span> <span data-ttu-id="fa1c0-132">この警告が出力されないようにするには、既定のリソースを用意する必要があります。たとえば、プロジェクトの既定の言語やグローバルな住んでいる地域 (homeregion-001) のリソースを用意します。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-132">In order to remove this warning, default resources should be provided, such as a resource in the project's default language or global home region (homeregion-001).</span></span>

## <a name="using-makepriexe-in-a-build-system"></a><span data-ttu-id="fa1c0-133">ビルド システムでの MakePri.exe の使用</span><span class="sxs-lookup"><span data-stu-id="fa1c0-133">Using MakePri.exe in a build system</span></span>

<span data-ttu-id="fa1c0-134">ビルドするプロジェクトの種類に応じて、ビルド システムで MakePri.exe の `new`、`versioned`、または `resourcepack` コマンドを使う必要があります。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-134">Build systems should use the MakePri.exe `new`, `versioned`, or `resourcepack` command, depending on the type of project being built.</span></span> <span data-ttu-id="fa1c0-135">新しい PRI ファイルを作成するビルド システムでは、`new` コマンドを使う必要があります。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-135">Build systems that create a fresh PRI file should use the `new` command.</span></span> <span data-ttu-id="fa1c0-136">反復を使って内部オフセットの互換性を確認するビルド システムでは、`versioned` コマンドを使うことができます。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-136">Build systems that must ensure compatibility of internal offsets through iterations can use the `versioned` command.</span></span> <span data-ttu-id="fa1c0-137">リソースの追加バリアントを格納する PRI ファイルを作成し、そのバリアントに対して新しいリソースが追加されないことを確認するビルド システムでは、`resourcepack` コマンドを使う必要があります。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-137">Build systems that must create a PRI file that contains additional variants of resources, with validation to ensure that no new resources are added for that variant, should use the `resourcepack` command.</span></span>

<span data-ttu-id="fa1c0-138">インデックスを作成するソース ファイルを明示的にコントロールする必要があるビルド システムでは、フォルダーをインデックス化する代わりに、ResFiles インデクサーを使うことができます。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-138">Build systems that require explicit control over source files that get indexed can use the ResFiles indexer instead of indexing a folder.</span></span> <span data-ttu-id="fa1c0-139">また、ビルド システムでは、複数のインデックス パスをさまざまな[形式に固有のインデクサー](makepri-exe-format-specific-indexers.md)と共に使って、単一の PRI ファイルを生成できます。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-139">Build systems can also use multiple index passes with different [format-specific indexers](makepri-exe-format-specific-indexers.md) to generate a single PRI file.</span></span>

<span data-ttu-id="fa1c0-140">さらに、ビルド システムでは、PRI 形式に固有のインデクサーを使って、ビルド済みの PRI ファイルを他のコンポーネント (クラス ライブラリ、アセンブリ、SDK、DLL など) のパッケージの PRI に追加できます。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-140">Build systems can also use the PRI format-specific indexer to add pre-built PRI files into the PRI for the package from other components, such as class libraries, assemblies, SDKs, and DLLs.</span></span>

<span data-ttu-id="fa1c0-141">他のコンポーネント、クラス ライブラリ、アセンブリ、DLL、SDK 用に PRI ファイルをビルドする場合は、**initialPath** 構成を使って、格納先のアプリと競合しない独自のサブリソース マップがコンポーネント リソースにあることを確認します。</span><span class="sxs-lookup"><span data-stu-id="fa1c0-141">When PRI files are built for other components, class libraries, assemblies, DLLs, and SDKs, the **initialPath** configuration should be used to ensure component resources have their own sub resource maps that don't conflict with the app they're included in.</span></span>

## <a name="related-topics"></a><span data-ttu-id="fa1c0-142">関連トピック</span><span class="sxs-lookup"><span data-stu-id="fa1c0-142">Related topics</span></span>

* [<span data-ttu-id="fa1c0-143">MakePri.exe のコマンド ライン オプション</span><span class="sxs-lookup"><span data-stu-id="fa1c0-143">MakePri.exe command-line options</span></span>](makepri-exe-command-options.md)
* [<span data-ttu-id="fa1c0-144">MakePri.exe 構成</span><span class="sxs-lookup"><span data-stu-id="fa1c0-144">MakePri.exe configuration</span></span>](makepri-exe-configuration.md)
* [<span data-ttu-id="fa1c0-145">MakePri.exe の形式に固有のインデクサー</span><span class="sxs-lookup"><span data-stu-id="fa1c0-145">MakePri.exe format-specific indexers</span></span>](makepri-exe-format-specific-indexers.md)
* [<span data-ttu-id="fa1c0-146">言語、スケール、その他の修飾子用にリソースを調整する</span><span class="sxs-lookup"><span data-stu-id="fa1c0-146">Tailor your resources for language, scale, and other qualifiers</span></span>](tailor-resources-lang-scale-contrast.md)
