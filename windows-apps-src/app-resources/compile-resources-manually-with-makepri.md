---
Description: MakePri.exe は、PRI ファイルを作成およびダンプするために使用できるコマンド ライン ツールです。 このツールは、Microsoft Visual Studio の MSBuild の一部として統合されていますが、パッケージを手動で作成したり、カスタム ビルド システムを使って作成する場合にも使うことができます。
title: MakePri.exe を使用して手動でリソースをコンパイルする
template: detail.hbs
ms.date: 10/23/2017
ms.topic: article
keywords: Windows 10, UWP, リソース, 画像, アセット, MRT, 修飾子
ms.localizationpriority: medium
ms.openlocfilehash: c6674fc38d41e3a18709dcb81edc95d164f9f86c
ms.sourcegitcommit: 46890e7f3c1287648631c5e318795f377764dbd9
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/21/2019
ms.locfileid: "58320595"
---
# <a name="compile-resources-manually-with-makepriexe"></a><span data-ttu-id="a6e49-105">MakePri.exe を使用して手動でリソースをコンパイルする</span><span class="sxs-lookup"><span data-stu-id="a6e49-105">Compile resources manually with MakePri.exe</span></span>

<span data-ttu-id="a6e49-106">MakePri.exe は、PRI ファイルを作成およびダンプするために使用できるコマンド ライン ツールです。</span><span class="sxs-lookup"><span data-stu-id="a6e49-106">MakePri.exe is a command line tool that you can use to create and dump PRI files.</span></span> <span data-ttu-id="a6e49-107">このツールは、Microsoft Visual Studio の MSBuild の一部として統合されていますが、パッケージを手動で作成したり、カスタム ビルド システムを使って作成する場合にも使うことができます。</span><span class="sxs-lookup"><span data-stu-id="a6e49-107">It is integrated as part of MSBuild within Microsoft Visual Studio, but it could be useful to you for creating packages manually or with a custom build system.</span></span>

> [!NOTE]
> <span data-ttu-id="a6e49-108">チェックするときに MakePri.exe がインストールされている、**管理されているアプリの UWP 用 Windows SDK** Windows ソフトウェア開発キットのインストール中にオプション。</span><span class="sxs-lookup"><span data-stu-id="a6e49-108">MakePri.exe is installed when you check the **Windows SDK for UWP Managed Apps** option while installing the Windows Software Development Kit.</span></span> <span data-ttu-id="a6e49-109">パスにインストールされて`%WindowsSdkDir%bin\<WindowsTargetPlatformVersion>\x64\makepri.exe`(およびその他のアーキテクチャのという名前のフォルダーの)。</span><span class="sxs-lookup"><span data-stu-id="a6e49-109">It is installed to the path `%WindowsSdkDir%bin\<WindowsTargetPlatformVersion>\x64\makepri.exe` (as well as in folders named for the other architectures).</span></span> <span data-ttu-id="a6e49-110">たとえば、`C:\Program Files (x86)\Windows Kits\10\bin\10.0.17713.0\x64\makepri.exe` と記述します。</span><span class="sxs-lookup"><span data-stu-id="a6e49-110">For example, `C:\Program Files (x86)\Windows Kits\10\bin\10.0.17713.0\x64\makepri.exe`.</span></span>

<span data-ttu-id="a6e49-111">PRI ファイルのサイズ制限は、64 キロバイトです。</span><span class="sxs-lookup"><span data-stu-id="a6e49-111">The size limit on a PRI file is 64 kilobytes.</span></span>

## <a name="in-this-section"></a><span data-ttu-id="a6e49-112">このセクションの内容</span><span class="sxs-lookup"><span data-stu-id="a6e49-112">In this section</span></span>
|<span data-ttu-id="a6e49-113">トピック</span><span class="sxs-lookup"><span data-stu-id="a6e49-113">Topic</span></span>|<span data-ttu-id="a6e49-114">説明</span><span class="sxs-lookup"><span data-stu-id="a6e49-114">Description</span></span>|
|-|-|
| [<span data-ttu-id="a6e49-115">MakePri.exe のコマンド ライン オプション</span><span class="sxs-lookup"><span data-stu-id="a6e49-115">MakePri.exe command-line options</span></span>](makepri-exe-command-options.md) | <span data-ttu-id="a6e49-116">MakePri.exe には、`createconfig`、`dump`、`new`、`resourcepack`、`versioned` コマンドのセットが含まれます。</span><span class="sxs-lookup"><span data-stu-id="a6e49-116">MakePri.exe has the set of commands `createconfig`, `dump`, `new`, `resourcepack`, and `versioned`.</span></span> <span data-ttu-id="a6e49-117">このトピックでは、コマンド ライン オプションの使用について説明します。</span><span class="sxs-lookup"><span data-stu-id="a6e49-117">This topic details the command-line options for their use.</span></span> |
| [<span data-ttu-id="a6e49-118">MakePri.exe 構成ファイル</span><span class="sxs-lookup"><span data-stu-id="a6e49-118">MakePri.exe configuration file</span></span>](makepri-exe-configuration.md) | <span data-ttu-id="a6e49-119">ここでは、MakePri.exe XML 構成ファイルのスキーマについて説明します。</span><span class="sxs-lookup"><span data-stu-id="a6e49-119">This topic describes the schema of the MakePri.exe XML configuration file.</span></span> |
| [<span data-ttu-id="a6e49-120">MakePri.exe 形式に固有のインデクサー</span><span class="sxs-lookup"><span data-stu-id="a6e49-120">MakePri.exe format-specific indexers</span></span>](makepri-exe-format-specific-indexers.md) | <span data-ttu-id="a6e49-121">このトピックでは、リソースのインデックスを生成するために MakePri.exe ツールによって使われる形式に固有のインデクサーについて説明します。</span><span class="sxs-lookup"><span data-stu-id="a6e49-121">This topic describes the format-specific indexers used by the MakePri.exe tool to generate its index of resources.</span></span> |

## <a name="makepriexe-command-line-options"></a><span data-ttu-id="a6e49-122">MakePri.exe のコマンド ライン オプション</span><span class="sxs-lookup"><span data-stu-id="a6e49-122">MakePri.exe command-line options</span></span>

<span data-ttu-id="a6e49-123">MakePri.exe には、`createconfig`、`dump`、`new`、`resourcepack`、`versioned` コマンドのセットが含まれます。</span><span class="sxs-lookup"><span data-stu-id="a6e49-123">MakePri.exe has the set of commands `createconfig`, `dump`, `new`, `resourcepack`, and `versioned`.</span></span> <span data-ttu-id="a6e49-124">コマンド ライン オプションの使い方について詳しくは、「[MakePri.exe のコマンド ライン オプション](makepri-exe-command-options.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a6e49-124">For details of their use, see [MakePri.exe command-line options](makepri-exe-command-options.md).</span></span>

## <a name="makepriexe-configuration"></a><span data-ttu-id="a6e49-125">MakePri.exe 構成</span><span class="sxs-lookup"><span data-stu-id="a6e49-125">MakePri.exe configuration</span></span>

<span data-ttu-id="a6e49-126">PRI XML 構成ファイルは、どのリソースをどのようにインデックス化するかを制御します。</span><span class="sxs-lookup"><span data-stu-id="a6e49-126">The PRI XML configuration file dictates how and what resources are indexed.</span></span> <span data-ttu-id="a6e49-127">構成 XML のスキーマについては、「[MakePri.exe 構成](makepri-exe-configuration.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a6e49-127">The schema of the configuration XML is described in [MakePri.exe configuration](makepri-exe-configuration.md).</span></span>

## <a name="format-specific-indexers"></a><span data-ttu-id="a6e49-128">形式に固有のインデクサー</span><span class="sxs-lookup"><span data-stu-id="a6e49-128">Format-specific indexers</span></span>

<span data-ttu-id="a6e49-129">MakePri.exe は、通常、`new`、`versioned`、`resourcepack` オプションと共に使用されます。</span><span class="sxs-lookup"><span data-stu-id="a6e49-129">MakePri.exe is typically used with the `new`, `versioned`, and `resourcepack` options.</span></span> <span data-ttu-id="a6e49-130">これらのオプションを使うと、ソース ファイルがインデックス化され、リソースのインデックスが生成されます。</span><span class="sxs-lookup"><span data-stu-id="a6e49-130">In those cases it indexes source files to generate an index of resources.</span></span> <span data-ttu-id="a6e49-131">MakePri.exe は、さまざまな別個のインデクサーを使って異なるソース リソース ファイルまたはリソースのコンテナーを読み取ります。</span><span class="sxs-lookup"><span data-stu-id="a6e49-131">MakePri.exe uses various individual indexers to read different source resource files or containers for resources.</span></span> <span data-ttu-id="a6e49-132">最も単純なインデクサーは、リソース (`.jpg` 画像 や `.png` 画像など) のフォルダーの内容をインデックス化するフォルダー インデクサーです。</span><span class="sxs-lookup"><span data-stu-id="a6e49-132">The simplest indexer is the folder indexer, which indexes the contents of a folder for resources such as `.jpg` or `.png` images.</span></span> <span data-ttu-id="a6e49-133">詳細については、「[MakePri.exe の形式に固有のインデクサー](makepri-exe-format-specific-indexers.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a6e49-133">For more info, see [MakePri.exe format-specific indexers](makepri-exe-format-specific-indexers.md).</span></span>

## <a name="makepriexe-warnings-and-error-messages"></a><span data-ttu-id="a6e49-134">MakePri.exe の警告およびエラー メッセージ</span><span class="sxs-lookup"><span data-stu-id="a6e49-134">MakePri.exe warnings and error messages</span></span>

### <a name="resources-found-for-languages-languages-but-no-resources-found-for-default-languages-languages-change-the-default-language-or-qualify-resources-with-the-default-language"></a><span data-ttu-id="a6e49-135">既定の言語のリソースの言語 '< 言語 >' が見つかりませんでしたが、リソースが見つかりません: '< 言語 >'。</span><span class="sxs-lookup"><span data-stu-id="a6e49-135">Resources found for language(s) '<language(s)>' but no resources found for default language(s): '<language(s)>'.</span></span> <span data-ttu-id="a6e49-136">既定の言語を変更するか、既定の言語でのリソースを限定します。</span><span class="sxs-lookup"><span data-stu-id="a6e49-136">Change the default language or qualify resources with the default language.</span></span>

<span data-ttu-id="a6e49-137">MakePri.exe または MSBuild ファイルなど、言語修飾子でマークされる表示される特定の名前付きリソースの文字列リソースを検出した場合、この警告が表示されますが、既定の言語の候補が検出されません。</span><span class="sxs-lookup"><span data-stu-id="a6e49-137">This warning is displayed when MakePri.exe or MSBuild discovers files or string resources for a given named resource that appear to be marked with language qualifiers, but no candidate is found for a default language.</span></span> <span data-ttu-id="a6e49-138">ファイルやフォルダーの名前に修飾子を使用するプロセスについては、「[言語、スケール、その他の修飾子用にリソースを調整する](tailor-resources-lang-scale-contrast.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a6e49-138">The process for using qualifiers in file and folder names is described in [Tailor your resources for language, scale, and other qualifiers](tailor-resources-lang-scale-contrast.md).</span></span> <span data-ttu-id="a6e49-139">ファイルやフォルダーの名前に言語名を含めることはできますが、リソースはその明示された既定の言語に対して修飾されているとは見なされません。</span><span class="sxs-lookup"><span data-stu-id="a6e49-139">A file or folder may have a language name in it, but no resources are discovered that are qualified for the exact default language.</span></span> <span data-ttu-id="a6e49-140">たとえば、プロジェクトで使う既定の言語が "en-US" で、"de/logo.png" という名前のファイルがプロジェクトにある場合に、既定の言語の "en-US" でマークされたファイルがないと、この警告が出力されます。</span><span class="sxs-lookup"><span data-stu-id="a6e49-140">For example, if a project uses "en-US" as the default language and has a file named "de/logo.png", but does not have any files that are marked with the default language "en-US", this warning will appear.</span></span> <span data-ttu-id="a6e49-141">この警告が出力されないようにするには、ファイルまたは文字列リソースを既定の言語で修飾するか、または既定の言語を変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a6e49-141">In order to remove this warning, either file(s) or string resource(s) should be qualified with the default language, or the default language should be changed.</span></span> <span data-ttu-id="a6e49-142">既定の言語を変更するには、Visual Studio でソリューションを開いた状態で、`Package.appxmanifest` を開きます。</span><span class="sxs-lookup"><span data-stu-id="a6e49-142">To change the default language, with your solution open in Visual Studio, open `Package.appxmanifest`.</span></span> <span data-ttu-id="a6e49-143">[アプリケーション] タブで、既定の言語が適切に設定されている ("en"や "en-us" など) ことを確認します。</span><span class="sxs-lookup"><span data-stu-id="a6e49-143">On the Application tab, confirm that the Default language is set appropriately (for example, "en" or "en-US").</span></span>

### <a name="no-default-or-neutral-resource-given-for-resource-identifier-the-application-may-throw-an-exception-for-certain-user-configurations-when-retrieving-the-resources"></a><span data-ttu-id="a6e49-144">ない既定のインスタンスまたはニュートラル リソースが指定された '<resource identifier>'。</span><span class="sxs-lookup"><span data-stu-id="a6e49-144">No default or neutral resource given for '<resource identifier>'.</span></span> <span data-ttu-id="a6e49-145">アプリケーション例外がスローされる特定のユーザーの構成、リソースを取得するときにします。</span><span class="sxs-lookup"><span data-stu-id="a6e49-145">The application may throw an exception for certain user configurations when retrieving the resources.</span></span>

<span data-ttu-id="a6e49-146">MakePri.exe または MSBuild ファイルなどのリソースはクリアいません言語修飾子でマークされる表示されるリソースを検出した場合、この警告が表示されます。</span><span class="sxs-lookup"><span data-stu-id="a6e49-146">This warning is displayed when MakePri.exe or MSBuild discovers files or resources that appear to be marked with language qualifiers for which the resources are unclear.</span></span> <span data-ttu-id="a6e49-147">修飾子はありますが、実行時にそのリソース識別子に対して特定のリソース候補を返すことができるという保証がありません。</span><span class="sxs-lookup"><span data-stu-id="a6e49-147">There are qualifiers, but there is no guarantee that a particular resource candidate can be returned for that resource identifier at run time.</span></span> <span data-ttu-id="a6e49-148">特定の言語、住んでいる地域、またはその他の修飾子のリソース候補について、既定値であるかまたはユーザーのコンテキストに常に一致することが検出されない場合、この警告が表示されます。</span><span class="sxs-lookup"><span data-stu-id="a6e49-148">If no resource candidate for a particular language, homeregion, or other qualifier can be found that is a default or will always match the context of a user, this warning will be displayed.</span></span> <span data-ttu-id="a6e49-149">実行時、ユーザーの言語設定や住んでいる地域などの特定のユーザー構成に関して (**[設定]** > **[時刻と言語]** > **[地域と言語]**)、リソースを取得するために使われた API が予期しない例外をスローすることがあります。</span><span class="sxs-lookup"><span data-stu-id="a6e49-149">At run time, for particular user configurations such as a user's language preferences or home location (**Settings** > **Time & Language** > **Region & language**), the APIs used to retrieve the resource may throw an unexpected exception.</span></span> <span data-ttu-id="a6e49-150">この警告が出力されないようにするには、既定のリソースを用意する必要があります。たとえば、プロジェクトの既定の言語やグローバルな住んでいる地域 (homeregion-001) のリソースを用意します。</span><span class="sxs-lookup"><span data-stu-id="a6e49-150">In order to remove this warning, default resources should be provided, such as a resource in the project's default language or global home region (homeregion-001).</span></span>

## <a name="using-makepriexe-in-a-build-system"></a><span data-ttu-id="a6e49-151">ビルド システムでの MakePri.exe の使用</span><span class="sxs-lookup"><span data-stu-id="a6e49-151">Using MakePri.exe in a build system</span></span>

<span data-ttu-id="a6e49-152">ビルドするプロジェクトの種類に応じて、ビルド システムで MakePri.exe の `new`、`versioned`、または `resourcepack` コマンドを使う必要があります。</span><span class="sxs-lookup"><span data-stu-id="a6e49-152">Build systems should use the MakePri.exe `new`, `versioned`, or `resourcepack` command, depending on the type of project being built.</span></span> <span data-ttu-id="a6e49-153">新しい PRI ファイルを作成するビルド システムでは、`new` コマンドを使う必要があります。</span><span class="sxs-lookup"><span data-stu-id="a6e49-153">Build systems that create a fresh PRI file should use the `new` command.</span></span> <span data-ttu-id="a6e49-154">反復を使って内部オフセットの互換性を確認するビルド システムでは、`versioned` コマンドを使うことができます。</span><span class="sxs-lookup"><span data-stu-id="a6e49-154">Build systems that must ensure compatibility of internal offsets through iterations can use the `versioned` command.</span></span> <span data-ttu-id="a6e49-155">リソースの追加バリアントを格納する PRI ファイルを作成し、そのバリアントに対して新しいリソースが追加されないことを確認するビルド システムでは、`resourcepack` コマンドを使う必要があります。</span><span class="sxs-lookup"><span data-stu-id="a6e49-155">Build systems that must create a PRI file that contains additional variants of resources, with validation to ensure that no new resources are added for that variant, should use the `resourcepack` command.</span></span>

<span data-ttu-id="a6e49-156">インデックスを作成するソース ファイルを明示的にコントロールする必要があるビルド システムでは、フォルダーをインデックス化する代わりに、ResFiles インデクサーを使うことができます。</span><span class="sxs-lookup"><span data-stu-id="a6e49-156">Build systems that require explicit control over source files that get indexed can use the ResFiles indexer instead of indexing a folder.</span></span> <span data-ttu-id="a6e49-157">また、ビルド システムでは、複数のインデックス パスをさまざまな[形式に固有のインデクサー](makepri-exe-format-specific-indexers.md)と共に使って、単一の PRI ファイルを生成できます。</span><span class="sxs-lookup"><span data-stu-id="a6e49-157">Build systems can also use multiple index passes with different [format-specific indexers](makepri-exe-format-specific-indexers.md) to generate a single PRI file.</span></span>

<span data-ttu-id="a6e49-158">さらに、ビルド システムでは、PRI 形式に固有のインデクサーを使って、ビルド済みの PRI ファイルを他のコンポーネント (クラス ライブラリ、アセンブリ、SDK、DLL など) のパッケージの PRI に追加できます。</span><span class="sxs-lookup"><span data-stu-id="a6e49-158">Build systems can also use the PRI format-specific indexer to add pre-built PRI files into the PRI for the package from other components, such as class libraries, assemblies, SDKs, and DLLs.</span></span>

<span data-ttu-id="a6e49-159">他のコンポーネント、クラス ライブラリ、アセンブリ、DLL、SDK 用に PRI ファイルをビルドする場合は、**initialPath** 構成を使って、格納先のアプリと競合しない独自のサブリソース マップがコンポーネント リソースにあることを確認します。</span><span class="sxs-lookup"><span data-stu-id="a6e49-159">When PRI files are built for other components, class libraries, assemblies, DLLs, and SDKs, the **initialPath** configuration should be used to ensure component resources have their own sub resource maps that don't conflict with the app they're included in.</span></span>

## <a name="related-topics"></a><span data-ttu-id="a6e49-160">関連トピック</span><span class="sxs-lookup"><span data-stu-id="a6e49-160">Related topics</span></span>
* [<span data-ttu-id="a6e49-161">MakePri.exe のコマンド ライン オプション</span><span class="sxs-lookup"><span data-stu-id="a6e49-161">MakePri.exe command-line options</span></span>](makepri-exe-command-options.md)
* [<span data-ttu-id="a6e49-162">MakePri.exe の構成</span><span class="sxs-lookup"><span data-stu-id="a6e49-162">MakePri.exe configuration</span></span>](makepri-exe-configuration.md)
* [<span data-ttu-id="a6e49-163">MakePri.exe 形式に固有のインデクサー</span><span class="sxs-lookup"><span data-stu-id="a6e49-163">MakePri.exe format-specific indexers</span></span>](makepri-exe-format-specific-indexers.md)
* [<span data-ttu-id="a6e49-164">言語、スケール、およびその他の修飾子のためのリソースを調整します。</span><span class="sxs-lookup"><span data-stu-id="a6e49-164">Tailor your resources for language, scale, and other qualifiers</span></span>](tailor-resources-lang-scale-contrast.md)
