---
author: mcleblanc
ms.assetid: 2b63a4c8-b1c0-4c77-95ab-0b9549ba3c0e
description: このトピックでは、Windows 10 ユニバーサル Windows プラットフォーム (UWP) アプリに、非常にシンプルな Windows Phone Silverlight アプリを移植するケース スタディについて説明します。
title: Windows Phone Silverlight から UWP へのケース スタディ - Bookstore1
ms.author: markl
ms.date: 02/08/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: Windows 10, UWP
ms.openlocfilehash: 0cd284b2cb0ed4170d587cb3b412bc1954496c93
ms.sourcegitcommit: 909d859a0f11981a8d1beac0da35f779786a6889
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.locfileid: "246496"
---
# <a name="windows-phone-silverlight-to-uwp-case-study-bookstore1"></a><span data-ttu-id="0bdc3-104">Windows Phone Silverlight から UWP へのケース スタディ - Bookstore1</span><span class="sxs-lookup"><span data-stu-id="0bdc3-104">Windows Phone Silverlight to UWP case study: Bookstore1</span></span>

<span data-ttu-id="0bdc3-105">\[Windows 10 の UWP アプリ向けに更新。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-105">\[ Updated for UWP apps on Windows 10.</span></span> <span data-ttu-id="0bdc3-106">Windows 8.x の記事については、[アーカイブ](http://go.microsoft.com/fwlink/p/?linkid=619132)をご覧ください\]</span><span class="sxs-lookup"><span data-stu-id="0bdc3-106">For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \]</span></span>

<span data-ttu-id="0bdc3-107">このトピックでは、Windows 10 ユニバーサル Windows プラットフォーム (UWP) アプリに、非常にシンプルな Windows Phone Silverlight アプリを移植するケース スタディについて説明します。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-107">This topic presents a case study of porting a very simple Windows Phone Silverlight app to a Windows 10 Universal Windows Platform (UWP) app.</span></span> <span data-ttu-id="0bdc3-108">Windows 10 では、さまざまなデバイスにユーザーがインストールできる単一のアプリ パッケージを作成できます。このようなアプリ パッケージの作成を、このケース スタディで取り上げます。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-108">With Windows 10, you can create a single app package that your customers can install onto a wide range of devices, and that's what we'll do in this case study.</span></span> <span data-ttu-id="0bdc3-109">「[UWP アプリのガイド](https://msdn.microsoft.com/library/windows/apps/dn894631)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-109">See [Guide to UWP apps](https://msdn.microsoft.com/library/windows/apps/dn894631).</span></span>

<span data-ttu-id="0bdc3-110">移植するアプリは、ビュー モデルにバインドされた **ListBox** で構成されます。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-110">The app we'll port consists of a **ListBox** bound to a view model.</span></span> <span data-ttu-id="0bdc3-111">ビュー モデルにはタイトル、著者、表紙を示す書籍の一覧が含まれます。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-111">The view model has a list of books that shows title, author, and book cover.</span></span> <span data-ttu-id="0bdc3-112">表紙画像では、**[ビルド アクション]** が **[コンテンツ]** に設定され、**[出力ディレクトリにコピー]** が **[コピーしない]** に設定されています。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-112">The book cover images have **Build Action** set to **Content** and **Copy to Output Directory** set to **Do not copy**.</span></span>

<span data-ttu-id="0bdc3-113">このセクションの前のトピックでは、プラットフォーム間の違いについて説明し、ビュー モデルへのバインドを通じて、データへのアクセスに至るまで、XAML マークアップからのアプリのさまざまな要素に対する移植プロセスの詳細とガイダンスを提供しました。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-113">The previous topics in this section describe the differences between the platforms, and they give details and guidance on the porting process for various aspects of an app from XAML markup, through binding to a view model, down to accessing data.</span></span> <span data-ttu-id="0bdc3-114">ケース スタディでは、実際の例が動作するようすを示すことにより、このガイダンスを補足することを目的としています。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-114">A case study aims to complement that guidance by showing it in action in a real example.</span></span> <span data-ttu-id="0bdc3-115">ケース スタディは、ガイダンスを読み終わっていることを前提としているため、繰り返し説明することはありません。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-115">The case studies assume you've read the guidance, which they do not repeat.</span></span>

<span data-ttu-id="0bdc3-116">**注**   Visual Studio で Bookstore1Universal\_10 を開こうとすると、"Visual Studio 更新プログラムが必要" というメッセージが表示される場合は、「[TargetPlatformVersion](wpsl-to-uwp-troubleshooting.md)」の手順に従って、ターゲット プラットフォームのバージョン番号を選択してください。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-116">**Note**   When opening Bookstore1Universal\_10 in Visual Studio, if you see the message "Visual Studio update required", then follow the steps for selecting a Target Platform Versioning in [TargetPlatformVersion](wpsl-to-uwp-troubleshooting.md).</span></span>

## <a name="downloads"></a><span data-ttu-id="0bdc3-117">ダウンロード</span><span class="sxs-lookup"><span data-stu-id="0bdc3-117">Downloads</span></span>

<span data-ttu-id="0bdc3-118">[Bookstore1WPSL8 Windows Phone Silverlight アプリのダウンロード](http://go.microsoft.com/fwlink/?linkid=517053)。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-118">[Download the Bookstore1WPSL8 Windows Phone Silverlight app](http://go.microsoft.com/fwlink/?linkid=517053).</span></span>

<span data-ttu-id="0bdc3-119">[Bookstore1Universal\_10 Windows 10 アプリのダウンロード](http://go.microsoft.com/fwlink/?linkid=532950)。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-119">[Download the Bookstore1Universal\_10 Windows 10 app](http://go.microsoft.com/fwlink/?linkid=532950).</span></span>

## <a name="the-windows-phone-silverlight-app"></a><span data-ttu-id="0bdc3-120">Windows Phone Silverlight アプリ</span><span class="sxs-lookup"><span data-stu-id="0bdc3-120">The Windows Phone Silverlight app</span></span>

<span data-ttu-id="0bdc3-121">次に、ここで移植するアプリ Bookstore1WPSL8 の外観を示します。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-121">Here’s what Bookstore1WPSL8—the app that we're going to port—looks like.</span></span> <span data-ttu-id="0bdc3-122">これは、アプリ名とページ タイトルの見出しの下に、縦方向にスクロールする書籍のリスト ボックスを示すシンプルなアプリです。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-122">It's just a vertically-scrolling list box of books beneath the heading of the app's name and page title.</span></span>

![bookstore1wpsl8 の外観](images/wpsl-to-uwp-case-studies/c01-01-wpsl-how-the-app-looks.png)

## <a name="porting-to-a-windows-10-project"></a><span data-ttu-id="0bdc3-124">Windows 10 プロジェクトへの移植</span><span class="sxs-lookup"><span data-stu-id="0bdc3-124">Porting to a Windows 10 project</span></span>

<span data-ttu-id="0bdc3-125">Visual Studio で新しいプロジェクトを作成し、そこへ Bookstore1WPSL8 からファイルをコピーし、コピーしたファイルを新しいプロジェクトに含めるというタスクは、非常に短時間で実行できます。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-125">It's a very quick task to create a new project in Visual Studio, copy files over to it from Bookstore1WPSL8, and include the copied files in the new project.</span></span> <span data-ttu-id="0bdc3-126">最初に、"新しいアプリケーション (Windows ユニバーサル)" プロジェクトを新規作成します。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-126">Start by creating a new Blank Application (Windows Universal) project.</span></span> <span data-ttu-id="0bdc3-127">そして、"Bookstore1Universal\_10" という名前を付けます。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-127">Name it Bookstore1Universal\_10.</span></span> <span data-ttu-id="0bdc3-128">これらは、Bookstore1WPSL8 から Bookstore1Universal\_10 にコピーするファイルです。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-128">These are the files to copy over from Bookstore1WPSL8 to Bookstore1Universal\_10.</span></span>

-   <span data-ttu-id="0bdc3-129">ブック カバーの画像の PNG ファイルを含むフォルダー (フォルダーは \\Assets\\CoverImages) をコピーします。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-129">Copy the folder containing the book cover image PNG files (the folder is \\Assets\\CoverImages).</span></span> <span data-ttu-id="0bdc3-130">フォルダーをコピーしたら、**ソリューション エクスプローラー**で **[すべてのファイルを表示]** がオンであることを確認します。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-130">After copying the folder, in **Solution Explorer**, make sure **Show All Files** is toggled on.</span></span> <span data-ttu-id="0bdc3-131">コピーしたフォルダーを右クリックし、**[プロジェクトに含める]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-131">Right-click the folder that you copied and click **Include In Project**.</span></span> <span data-ttu-id="0bdc3-132">このコマンドは、ファイルまたはフォルダーをプロジェクトに "含める" ことを意味します。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-132">That command is what we mean by "including" files or folders in a project.</span></span> <span data-ttu-id="0bdc3-133">ファイルやフォルダーをコピーするたびに、**ソリューション エクスプローラー**で **[更新]** をクリックしてから、ファイルまたはフォルダーをプロジェクトに含めます。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-133">Each time you copy a file or folder, click **Refresh** in **Solution Explorer** and then include the file or folder in the project.</span></span> <span data-ttu-id="0bdc3-134">コピー先で置き換えるファイルについては、この手順を実行する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-134">There's no need to do this for files that you're replacing in the destination.</span></span>
-   <span data-ttu-id="0bdc3-135">ビュー モデル ソース ファイルを含むフォルダー (フォルダーは \\ViewModel) をコピーします。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-135">Copy the folder containing the view model source file (the folder is \\ViewModel).</span></span>
-   <span data-ttu-id="0bdc3-136">MainPage.xaml をコピーして、コピー先のファイルを置き換えます。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-136">Copy MainPage.xaml and replace the file in the destination.</span></span>

<span data-ttu-id="0bdc3-137">Visual Studio により Windows 10 プロジェクトで生成された App.xaml と App.xaml.cs を保持できます。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-137">We can keep the App.xaml, and App.xaml.cs that Visual Studio generated for us in the Windows 10 project.</span></span>

<span data-ttu-id="0bdc3-138">コピーしたソース コードとマークアップ ファイルを編集し、Bookstore1WPSL8 名前空間への参照をすべて、Bookstore1Universal\_10 に変更します。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-138">Edit the source code and markup files that you just copied and change any references to the Bookstore1WPSL8 namespace to Bookstore1Universal\_10.</span></span> <span data-ttu-id="0bdc3-139">これをすばやく行うには、**[フォルダーを指定して置換]** 機能を使います。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-139">A quick way to do that is to use the **Replace In Files** feature.</span></span> <span data-ttu-id="0bdc3-140">ビュー モデルのソース ファイルに含まれている命令型コードでは、移植作業のために次の変更を行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-140">In the imperative code in the view model source file, these porting changes are needed:</span></span>

-   <span data-ttu-id="0bdc3-141">`System.ComponentModel.DesignerProperties` を `DesignMode` に変更した後、**[解決]** コマンドを使います。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-141">Change `System.ComponentModel.DesignerProperties` to `DesignMode` and then use the **Resolve** command on it.</span></span> <span data-ttu-id="0bdc3-142">`IsInDesignTool` プロパティを削除して、IntelliSense を使って適切なプロパティ名 (`DesignModeEnabled`) を追加します。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-142">Delete the `IsInDesignTool` property and use IntelliSense to add the correct property name: `DesignModeEnabled`.</span></span>
-   <span data-ttu-id="0bdc3-143">`ImageSource` に対して **[解決]** コマンドを使います。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-143">Use the **Resolve** command on `ImageSource`.</span></span>
-   <span data-ttu-id="0bdc3-144">`BitmapImage` に対して **[解決]** コマンドを使います。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-144">Use the **Resolve** command on `BitmapImage`.</span></span>
-   <span data-ttu-id="0bdc3-145">using `System.Windows.Media;` と `using System.Windows.Media.Imaging;` を削除します。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-145">Delete using `System.Windows.Media;` and `using System.Windows.Media.Imaging;`.</span></span>
-   <span data-ttu-id="0bdc3-146">**Bookstore1Universal\_10.BookstoreViewModel.AppName** プロパティによって返された値を "BOOKSTORE1WPSL8" から "BOOKSTORE1UNIVERSAL" に変更します。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-146">Change the value returned by the **Bookstore1Universal\_10.BookstoreViewModel.AppName** property from "BOOKSTORE1WPSL8" to "BOOKSTORE1UNIVERSAL".</span></span>

<span data-ttu-id="0bdc3-147">MainPage.xaml では、移植作業のために次の変更を行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-147">In MainPage.xaml, these porting changes are needed:</span></span>

-   <span data-ttu-id="0bdc3-148">`phone:PhoneApplicationPage` を `Page` に変更します (プロパティ要素構文での使用回数を考慮してください)。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-148">Change `phone:PhoneApplicationPage` to `Page` (don't forget the occurrences in property element syntax).</span></span>
-   <span data-ttu-id="0bdc3-149">`phone` と `shell` の名前空間のプレフィックス宣言を削除します。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-149">Delete the `phone` and `shell` namespace prefix declarations.</span></span>
-   <span data-ttu-id="0bdc3-150">その他の名前空間のプレフィックス宣言で、"clr-namespace" を "using" に変更します。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-150">Change "clr-namespace" to "using" in the remaining namespace prefix declaration.</span></span>

<span data-ttu-id="0bdc3-151">一時的にマークアップを削除することになっても、すぐに結果を確認したい場合は、マークアップ コンパイル エラーを非常に単純に修正することもできます。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-151">We can choose to correct markup compilation errors very cheaply if we want to see results soonest, even if that means temporarily removing markup.</span></span> <span data-ttu-id="0bdc3-152">ただしここでは、そうすることでとりあえず先に進み、後で見直すことにしましょう。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-152">But, let's keep a record of the debt we accrue by doing so.</span></span> <span data-ttu-id="0bdc3-153">次に、このための手順を示します。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-153">Here it is in this case.</span></span>

1.  <span data-ttu-id="0bdc3-154">**MainPage.xaml** のルート **Page** 要素で、`SupportedOrientations="Portrait"` を削除します。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-154">In the root **Page** element in **MainPage.xaml**, delete `SupportedOrientations="Portrait"`.</span></span>
2.  <span data-ttu-id="0bdc3-155">**MainPage.xaml** のルート **Page** 要素で、`Orientation="Portrait"` を削除します。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-155">In the root **Page** element in **MainPage.xaml**, delete `Orientation="Portrait"`.</span></span>
3.  <span data-ttu-id="0bdc3-156">**MainPage.xaml** のルート **Page** 要素で、`shell:SystemTray.IsVisible="True"` を削除します。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-156">In the root **Page** element in **MainPage.xaml**, delete `shell:SystemTray.IsVisible="True"`.</span></span>
4.  <span data-ttu-id="0bdc3-157">`BookTemplate` データ テンプレートで、`PhoneTextExtraLargeStyle` および `PhoneTextSubtleStyle` の  **TextBlock** スタイルへの参照を削除します。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-157">In the `BookTemplate` data template, delete the references to the `PhoneTextExtraLargeStyle` and `PhoneTextSubtleStyle` **TextBlock** styles.</span></span>
5.  <span data-ttu-id="0bdc3-158">`TitlePanel` **StackPanel** で、`PhoneTextNormalStyle` および `PhoneTextTitle1Style` の  **TextBlock** スタイルへの参照を削除します。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-158">In the `TitlePanel` **StackPanel**, delete the references to the `PhoneTextNormalStyle` and `PhoneTextTitle1Style` **TextBlock** styles.</span></span>

<span data-ttu-id="0bdc3-159">最初にモバイル デバイス ファミリの UI の作業を行い、その後でその他のフォーム ファクターについて検討します。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-159">Let's work on the UI for the mobile device family first, and we can consider other form factors after that.</span></span> <span data-ttu-id="0bdc3-160">これで、アプリをビルドして実行できるようになりました。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-160">You can build and run the app now.</span></span> <span data-ttu-id="0bdc3-161">モバイル エミュレーターでは次のように表示されます。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-161">Here's how it looks on the mobile emulator.</span></span>

![最初のソース コードの変更を加えたモバイルの UWP アプリ](images/wpsl-to-uwp-case-studies/c01-02-mob10-initial-source-code-changes.png)

<span data-ttu-id="0bdc3-163">ビューおよびビュー モデルは、適切に連携しており、**ListBox** が機能しています。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-163">The view and the view model are working together correctly, and the **ListBox** is functioning.</span></span> <span data-ttu-id="0bdc3-164">ほとんどの場合、若干スタイルを修正して、画像を表示する必要があります。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-164">We mostly just need to fix the styling and get the images to show up.</span></span>

## <a name="paying-off-the-debt-items-and-some-initial-styling"></a><span data-ttu-id="0bdc3-165">削除した項目と一部の初期スタイルを戻す</span><span class="sxs-lookup"><span data-stu-id="0bdc3-165">Paying off the debt items, and some initial styling</span></span>

<span data-ttu-id="0bdc3-166">既定では、すべての向きがサポートされます。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-166">By default, all orientations are supported.</span></span> <span data-ttu-id="0bdc3-167">ただし、Windows Phone Silverlight アプリでは、自身を縦向きのみに明示的に制限します。したがって、新しいプロジェクト内のアプリ パッケージ マニフェストに含め、**[サポートされる向き]** で **[縦]** をオンにすることにより、削除した項目 \#1 および \#2 を元に戻します。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-167">The Windows Phone Silverlight app explicitly constrains itself to portrait-only, though, so debt items \#1 and \#2 are paid off by going into the app package manifest in the new project and checking **Portrait** under **Supported orientations**.</span></span>

<span data-ttu-id="0bdc3-168">このアプリでは、ステータス バー (以前はシステム トレイと呼ばれていました) が既定で示されるので、項目 \#3 は元に戻す必要はありません。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-168">For this app, item \#3 is not a debt since the status bar (formerly called the system tray) is shown by default.</span></span> <span data-ttu-id="0bdc3-169">項目 \#4 および \#5 では、使っていた Windows Phone Silverlight スタイルに対応する 4 つのユニバーサル Windows プラットフォーム (UWP)  **TextBlock** スタイルを検索する必要があります。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-169">For items \#4 and \#5, we need to find four Universal Windows Platform (UWP) **TextBlock** styles that correspond to the Windows Phone Silverlight styles that we were using.</span></span> <span data-ttu-id="0bdc3-170">エミュレーターで Windows Phone Silverlight アプリを実行し、「[テキスト](wpsl-to-uwp-porting-xaml-and-ui.md)」セクションの図で並べて比較できます。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-170">You can run the Windows Phone Silverlight app in the emulator and compare it side-by-side with the illustration in the [Text](wpsl-to-uwp-porting-xaml-and-ui.md) section.</span></span> <span data-ttu-id="0bdc3-171">ここから、Windows Phone Silverlight システム スタイルのプロパティに注目することで、次のような表を作ることができます。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-171">From doing that, and from looking at the properties of the Windows Phone Silverlight system styles, we can make this table.</span></span>

| <span data-ttu-id="0bdc3-172">Windows Phone Silverlight スタイル キー</span><span class="sxs-lookup"><span data-stu-id="0bdc3-172">Windows Phone Silverlight style key</span></span> | <span data-ttu-id="0bdc3-173">UWP スタイル キー</span><span class="sxs-lookup"><span data-stu-id="0bdc3-173">UWP style key</span></span>          |
|-------------------------------------|------------------------|
| <span data-ttu-id="0bdc3-174">PhoneTextExtraLargeStyle</span><span class="sxs-lookup"><span data-stu-id="0bdc3-174">PhoneTextExtraLargeStyle</span></span>            | <span data-ttu-id="0bdc3-175">TitleTextBlockStyle</span><span class="sxs-lookup"><span data-stu-id="0bdc3-175">TitleTextBlockStyle</span></span>    |
| <span data-ttu-id="0bdc3-176">PhoneTextSubtleStyle</span><span class="sxs-lookup"><span data-stu-id="0bdc3-176">PhoneTextSubtleStyle</span></span>                | <span data-ttu-id="0bdc3-177">SubtitleTextBlockStyle</span><span class="sxs-lookup"><span data-stu-id="0bdc3-177">SubtitleTextBlockStyle</span></span> |
| <span data-ttu-id="0bdc3-178">PhoneTextNormalStyle</span><span class="sxs-lookup"><span data-stu-id="0bdc3-178">PhoneTextNormalStyle</span></span>                | <span data-ttu-id="0bdc3-179">CaptionTextBlockStyle</span><span class="sxs-lookup"><span data-stu-id="0bdc3-179">CaptionTextBlockStyle</span></span>  |
| <span data-ttu-id="0bdc3-180">PhoneTextTitle1Style</span><span class="sxs-lookup"><span data-stu-id="0bdc3-180">PhoneTextTitle1Style</span></span>                | <span data-ttu-id="0bdc3-181">HeaderTextBlockStyle</span><span class="sxs-lookup"><span data-stu-id="0bdc3-181">HeaderTextBlockStyle</span></span>   |
 
<span data-ttu-id="0bdc3-182">こうしたスタイルを設定するために、マークアップ エディターに単純に入力するか、Visual Studio XAML ツールを使えば入力なしで設定できます。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-182">To set those styles, you can just type them into the markup editor or you can use the Visual Studio XAML Tools and set them without typing a thing.</span></span> <span data-ttu-id="0bdc3-183">このためには、**TextBlock** を右クリックし、**[スタイルの編集]** &gt; **[リソースの適用]** の順にクリックします。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-183">To do that, you right-click a **TextBlock** and click **Edit Style** &gt; **Apply Resource**.</span></span> <span data-ttu-id="0bdc3-184">項目テンプレートの **TextBlock** に対してこれを行うには、**ListBox** を右クリックし、**[追加テンプレートの編集]** &gt; **[生成された項目の編集 (ItemTemplate)]** の順にクリックします。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-184">To do that with the **TextBlock**s in the item template, right click the **ListBox** and click **Edit Additional Templates** &gt; **Edit Generated Items (ItemTemplate)**.</span></span>

<span data-ttu-id="0bdc3-185">**ListBox** コントロールの既定のスタイルでは背景に `ListBoxBackgroundThemeBrush` システム リソースが設定されるため、項目の背景は 80% の不透明な白になります。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-185">There is an 80% opaque white background behind the items, because the default style of the **ListBox** control sets its background to the `ListBoxBackgroundThemeBrush` system resource.</span></span> <span data-ttu-id="0bdc3-186">**ListBox** で `Background="Transparent"` を設定し、背景をクリアします。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-186">Set `Background="Transparent"` on the **ListBox** to clear that background.</span></span> <span data-ttu-id="0bdc3-187">項目テンプレートで **TextBlock** を左揃えにするには、前記と同様に再度編集し、両方の **TextBlock** で `"9.6,0"` の **Margin** を設定します。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-187">To left-align the **TextBlock**s in the item template, edit it again the same way as described above and set a **Margin** of `"9.6,0"` on both **TextBlock**s.</span></span>

<span data-ttu-id="0bdc3-188">これが終わったら、[表示ピクセルに関連する変更](wpsl-to-uwp-porting-xaml-and-ui.md)のために、まだ変更していないすべての固定サイズの寸法 (余白、幅、高さなど) について、0.8 を乗算する必要があります。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-188">After that is done, because of [changes related to view pixels](wpsl-to-uwp-porting-xaml-and-ui.md), we need to go through and multiply any fixed size dimension that we haven’t yet changed (margins, width, height, etc) by 0.8.</span></span> <span data-ttu-id="0bdc3-189">したがって、たとえば画像は 70 x 70px から 56 x 56px に変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-189">So, for example, the images should change from 70x70px to 56x56px.</span></span>

<span data-ttu-id="0bdc3-190">ただし、スタイルの結果を示す前に、画像を描画しましょう。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-190">But, let’s get those images to render before we show the results of our styling.</span></span>

## <a name="binding-an-image-to-a-view-model"></a><span data-ttu-id="0bdc3-191">ビュー モデルへの画像のバインド</span><span class="sxs-lookup"><span data-stu-id="0bdc3-191">Binding an Image to a view model</span></span>

<span data-ttu-id="0bdc3-192">Bookstore1WPSL8 では、次のことを適用しました。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-192">In Bookstore1WPSL8, we did this:</span></span>

```csharp
    // this.BookCoverImagePath contains a path of the form "/Assets/CoverImages/one.png".
    return new BitmapImage(new Uri(this.CoverImagePath, UriKind.Relative));
```

<span data-ttu-id="0bdc3-193">Bookstore1Universal では、ms-appx [URI スキーム](https://msdn.microsoft.com/library/windows/apps/jj655406)を使います。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-193">In Bookstore1Universal, we use the ms-appx [URI scheme](https://msdn.microsoft.com/library/windows/apps/jj655406).</span></span> <span data-ttu-id="0bdc3-194">残るコードを変更せずに維持するために、**System.Uri** コンストラクターの異なるオーバーロードを使って、ベース URI に ms-appx URI スキームを格納し、パスの残る部分を追加できます。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-194">So that we can keep the rest of our code the same, we can use a different overload of the **System.Uri** constructor to put the ms-appx URI scheme in a base URI and append the rest of the path onto that.</span></span> <span data-ttu-id="0bdc3-195">次に例を示します。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-195">Like this:</span></span>

```csharp
    // this.BookCoverImagePath contains a path of the form "/Assets/CoverImages/one.png".
    return new BitmapImage(new Uri(new Uri("ms-appx://"), this.CoverImagePath));
```

## <a name="universal-styling"></a><span data-ttu-id="0bdc3-196">ユニバーサル スタイル設定</span><span class="sxs-lookup"><span data-stu-id="0bdc3-196">Universal styling</span></span>

<span data-ttu-id="0bdc3-197">後は、いくつかの最終的なスタイルの調整を行い、アプリがデスクトップ (およびその他) のフォーム ファクターとモバイルで適切に表示されることを確認するだけです。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-197">Now, we just need to make some final styling tweaks and confirm that the app looks good on desktop (and other) form factors as well as mobile.</span></span> <span data-ttu-id="0bdc3-198">手順は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-198">The steps are below.</span></span> <span data-ttu-id="0bdc3-199">このトピックの上部にあるリンクを使って、プロジェクトをダウンロードし、この時点とケース スタディの終了時の間のすべての変更の結果を参照できます。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-199">And you can use the links at the top of this topic to download the projects and see the results of all the changes between here and the end of the case study.</span></span>

-   <span data-ttu-id="0bdc3-200">項目間のスペースを縮めるために、MainPage.xaml で `BookTemplate` データ テンプレートを探し、`Margin` 属性をルート **Grid** から削除します。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-200">To tighten up the spacing between items, find the `BookTemplate` data template in MainPage.xaml and delete the `Margin` attribute from the root **Grid**.</span></span>
-   <span data-ttu-id="0bdc3-201">ページ タイトルに少しゆとりを与える場合は、`-5.6` の下部の余白をページ タイトル **TextBlock** で `0` に設定します。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-201">If you want to give the page title a little more breathing room, you can reset the bottom margin of `-5.6` to `0` on the page title **TextBlock**.</span></span>
-   <span data-ttu-id="0bdc3-202">ここで、`LayoutRoot` の Background を適切な既定値に設定して、テーマが何であるかに関係なく、すべてのデバイスでの実行時にアプリが適切に表示されるようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-202">Now, we need to set `LayoutRoot`'s Background to the correct default value so that the app looks appropriate when running on all devices no matter what the theme is.</span></span> <span data-ttu-id="0bdc3-203">これを、`"Transparent"` から `"{ThemeResource ApplicationPageBackgroundThemeBrush}"` に変更します。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-203">Change it from `"Transparent"` to `"{ThemeResource ApplicationPageBackgroundThemeBrush}"`.</span></span>

<span data-ttu-id="0bdc3-204">ここで、より洗練されたアプリにより、「[フォーム ファクターとユーザー エクスペリエンスのための移植](wpsl-to-uwp-form-factors-and-ux.md)」のガイダンスを参考にして、実際にアプリで実行できる多くのデバイスのそれぞれで、フォーム ファクターを最適に利用します。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-204">With a more sophisticated app, this would be the point at which we'd use the guidance in [Porting for form factor and user experience](wpsl-to-uwp-form-factors-and-ux.md) and really make optimal use of the form factor of each of the many devices the app can now run on.</span></span> <span data-ttu-id="0bdc3-205">このシンプルなアプリでは、ここで停止し、スタイル操作の最後の手順を行った後のアプリの外観を確認します。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-205">But, for this simple app, we can stop here and see how the app looks after that last sequence of styling operations.</span></span> <span data-ttu-id="0bdc3-206">実際には、モバイル デバイスとデスクトップ デバイスで同じに表示されますが、広いフォーム ファクターの領域を最大限に活用していません (ただし、後のケース スタディで、これを行う方法を調査します)。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-206">It actually looks the same on mobile and desktop devices, although it's not making best use of space on wide form factors (but we'll investigate how to do that in a later case study).</span></span>

<span data-ttu-id="0bdc3-207">アプリのテーマの管理方法については、「[テーマの変更](wpsl-to-uwp-porting-xaml-and-ui.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-207">See [Theme changes](wpsl-to-uwp-porting-xaml-and-ui.md) to see how to control the theme of your app.</span></span>

![移植された Windows 10 アプリ](images/w8x-to-uwp-case-studies/c01-07-mob10-ported.png)

<span data-ttu-id="0bdc3-209">モバイル デバイスで動作中の、移植された Windows 10 アプリ</span><span class="sxs-lookup"><span data-stu-id="0bdc3-209">The ported Windows 10 app running on a Mobile device</span></span>

## <a name="an-optional-adjustment-to-the-list-box-for-mobile-devices"></a><span data-ttu-id="0bdc3-210">モバイル デバイス向けのリスト ボックスの調整 (オプション)</span><span class="sxs-lookup"><span data-stu-id="0bdc3-210">An optional adjustment to the list box for Mobile devices</span></span>

<span data-ttu-id="0bdc3-211">モバイル デバイスでのアプリの実行中には、両方のテーマで既定で、リスト ボックスの背景は淡色です。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-211">When the app is running on a Mobile device, the background of a list box is light by default in both themes.</span></span> <span data-ttu-id="0bdc3-212">このスタイルで問題なければ、それ以上の操作は必要ありません。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-212">That may be the style that you prefer and, if so, then there's nothing more to do.</span></span> <span data-ttu-id="0bdc3-213">コントロールは、動作に影響を及ぼすことなく、表示形式をカスタマイズできるように設計されています。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-213">But, controls are designed so that you can customize their look while leaving their behavior unaffected.</span></span> <span data-ttu-id="0bdc3-214">元のアプリの外観のように、濃色のテーマでリスト ボックスを濃色にする場合は、[このページ](w8x-to-uwp-case-study-bookstore1.md)の「モバイル デバイス向けのリスト ボックスの調整 (オプション)」の手順に従います。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-214">So, if you want the list box to be dark in the dark theme—the way the original app looked—then follow [these instructions](w8x-to-uwp-case-study-bookstore1.md) under "An optional adjustment".</span></span>

## <a name="conclusion"></a><span data-ttu-id="0bdc3-215">まとめ</span><span class="sxs-lookup"><span data-stu-id="0bdc3-215">Conclusion</span></span>

<span data-ttu-id="0bdc3-216">このケース スタディでは、非常に単純なアプリ (実在しないと考えらえる単純なアプリ) を移植するプロセスを示しました。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-216">This case study showed the process of porting a very simple app—arguably an unrealistically simple one.</span></span> <span data-ttu-id="0bdc3-217">たとえば、リスト コントロールは、選択用またはナビゲーション コンテキストの確立用に使うことができます。アプリは、タップされた項目に関する詳細を提示するページに移動します。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-217">For instance, list controls can be used for selection or for establishing a context for navigation; the app navigates to a page with more details about the item that was tapped.</span></span> <span data-ttu-id="0bdc3-218">この特定のアプリは、ユーザーの選択に対して何も処理せず、またナビゲーション機能がありません。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-218">This particular app does nothing with the user's selection, and it has no navigation.</span></span> <span data-ttu-id="0bdc3-219">それでも、このケース スタディは、まず移植プロセスを導入し、実際の UWP アプリで使うことができる重要な手法をデモする役割を果たします。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-219">Even so, the case study served to break the ice, to introduce the porting process, and to demonstrate important techniques that you can use in real UWP apps.</span></span>

<span data-ttu-id="0bdc3-220">次のケース スタディは「[Bookstore2](wpsl-to-uwp-case-study-bookstore2.md)」です。ここでは、グループ化されたデータへのアクセスと表示について説明します。</span><span class="sxs-lookup"><span data-stu-id="0bdc3-220">The next case study is [Bookstore2](wpsl-to-uwp-case-study-bookstore2.md), in which we look at accessing and displaying grouped data.</span></span>
