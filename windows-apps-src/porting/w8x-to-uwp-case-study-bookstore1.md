---
title: Windows ランタイム 8.x から UWP へのケース スタディ - Bookstore1
ms.assetid: e4582717-afb5-4cde-86bb-31fb1c5fc8f3
description: このトピックでは、Windows 10 ユニバーサル Windows プラットフォーム (UWP) アプリへの非常に単純なユニバーサル 8.1 アプリの移植のケース スタディを表示します。
ms.date: 02/08/2017
ms.topic: article
keywords: windows 10, uwp
ms.localizationpriority: medium
ms.openlocfilehash: 5e0b8ffbebdca920bc6cc584dd735062a364d1d9
ms.sourcegitcommit: b034650b684a767274d5d88746faeea373c8e34f
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2019
ms.locfileid: "57627937"
---
# <a name="windows-runtime-8x-to-uwp-case-study-bookstore1"></a><span data-ttu-id="a3f5a-104">Windows ランタイム 8.x UWP の事例に。Bookstore1</span><span class="sxs-lookup"><span data-stu-id="a3f5a-104">Windows Runtime 8.x to UWP case study: Bookstore1</span></span>


<span data-ttu-id="a3f5a-105">このトピックでは、Windows 10 ユニバーサル Windows プラットフォーム (UWP) アプリへの非常に単純なユニバーサル 8.1 アプリの移植のケース スタディを表示します。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-105">This topic presents a case study of porting a very simple Universal 8.1 app to a Windows 10 Universal Windows Platform (UWP) app.</span></span> <span data-ttu-id="a3f5a-106">8.1 ユニバーサル アプリは、1 つのアプリ パッケージの Windows 8.1、および Windows Phone 8.1 用の別のアプリ パッケージをビルドする 1 つ。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-106">A Universal 8.1 app is one that builds one app package for Windows 8.1, and a different app package for Windows Phone 8.1.</span></span> <span data-ttu-id="a3f5a-107">Windows 10 ではパッケージを作成する 1 つのアプリをさまざまなデバイス、上に顧客をインストールし、このケース スタディでは何です。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-107">With Windows 10, you can create a single app package that your customers can install onto a wide range of devices, and that's what we'll do in this case study.</span></span> <span data-ttu-id="a3f5a-108">「[UWP アプリのガイド](https://msdn.microsoft.com/library/windows/apps/dn894631)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-108">See [Guide to UWP apps](https://msdn.microsoft.com/library/windows/apps/dn894631).</span></span>

<span data-ttu-id="a3f5a-109">移植するアプリは、ビュー モデルにバインドされた **ListBox** で構成されます。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-109">The app we'll port consists of a **ListBox** bound to a view model.</span></span> <span data-ttu-id="a3f5a-110">ビュー モデルにはタイトル、著者、表紙を示す書籍の一覧が含まれます。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-110">The view model has a list of books that shows title, author, and book cover.</span></span> <span data-ttu-id="a3f5a-111">表紙画像では、**[ビルド アクション]** が **[コンテンツ]** に設定され、**[出力ディレクトリにコピー]** が **[コピーしない]** に設定されています。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-111">The book cover images have **Build Action** set to **Content** and **Copy to Output Directory** set to **Do not copy**.</span></span>

<span data-ttu-id="a3f5a-112">このセクションの前のトピックでは、プラットフォーム間の違いについて説明し、ビュー モデルへのバインドを通じて、データへのアクセスに至るまで、XAML マークアップからのアプリのさまざまな要素に対する移植プロセスの詳細とガイダンスを提供しました。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-112">The previous topics in this section describe the differences between the platforms, and they give details and guidance on the porting process for various aspects of an app from XAML markup, through binding to a view model, down to accessing data.</span></span> <span data-ttu-id="a3f5a-113">ケース スタディでは、実際の例が動作するようすを示すことにより、このガイダンスを補足することを目的としています。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-113">A case study aims to complement that guidance by showing it in action in a real example.</span></span> <span data-ttu-id="a3f5a-114">ケース スタディは、ガイダンスを読み終わっていることを前提としているため、繰り返し説明することはありません。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-114">The case studies assume you've read the guidance, which they do not repeat.</span></span>

<span data-ttu-id="a3f5a-115">**注**   Bookstore1Universal を開くときに\_"Visual Studio の更新に必要な"メッセージを表示する場合、Visual Studio での 10 の手順に従って[TargetPlatformVersion](w8x-to-uwp-troubleshooting.md)します。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-115">**Note**   When opening Bookstore1Universal\_10 in Visual Studio, if you see the message "Visual Studio update required", then follow the steps in [TargetPlatformVersion](w8x-to-uwp-troubleshooting.md).</span></span>

## <a name="downloads"></a><span data-ttu-id="a3f5a-116">ダウンロード</span><span class="sxs-lookup"><span data-stu-id="a3f5a-116">Downloads</span></span>

<span data-ttu-id="a3f5a-117">[ダウンロード、Bookstore1\_81 ユニバーサル 8.1 アプリ](https://go.microsoft.com/fwlink/?linkid=532946)します。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-117">[Download the Bookstore1\_81 Universal 8.1 app](https://go.microsoft.com/fwlink/?linkid=532946).</span></span>

<span data-ttu-id="a3f5a-118">[ダウンロード、Bookstore1Universal\_10 の Windows 10 アプリ](https://go.microsoft.com/fwlink/?linkid=532950)します。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-118">[Download the Bookstore1Universal\_10 Windows 10 app](https://go.microsoft.com/fwlink/?linkid=532950).</span></span>

## <a name="the-universal-81-app"></a><span data-ttu-id="a3f5a-119">ユニバーサル 8.1 アプリ</span><span class="sxs-lookup"><span data-stu-id="a3f5a-119">The Universal 8.1 app</span></span>

<span data-ttu-id="a3f5a-120">ここでは、どのような Bookstore1\_81-ポートしようとしているアプリなどのようになります。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-120">Here’s what Bookstore1\_81—the app that we're going to port—looks like.</span></span> <span data-ttu-id="a3f5a-121">これは、アプリ名とページ タイトルの見出しの下に、縦方向にスクロールする書籍のリスト ボックスを示すシンプルなアプリです。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-121">It's just a vertically-scrolling list box of books beneath the heading of the app's name and page title.</span></span>

![どの bookstore1\-81 が windows の検索](images/w8x-to-uwp-case-studies/c01-01-win81-how-the-app-looks.png)

<span data-ttu-id="a3f5a-123">Bookstore1\_Windows 81</span><span class="sxs-lookup"><span data-stu-id="a3f5a-123">Bookstore1\_81 on Windows</span></span>

![どの bookstore1\-81 が windows phone で検索](images/w8x-to-uwp-case-studies/c01-02-wp81-how-the-app-looks.png)

<span data-ttu-id="a3f5a-125">Bookstore1\_Windows Phone で 81</span><span class="sxs-lookup"><span data-stu-id="a3f5a-125">Bookstore1\_81 on Windows Phone</span></span>

##  <a name="porting-to-a-windows10-project"></a><span data-ttu-id="a3f5a-126">Windows 10 プロジェクトへの移植</span><span class="sxs-lookup"><span data-stu-id="a3f5a-126">Porting to a Windows 10 project</span></span>

<span data-ttu-id="a3f5a-127">Bookstore1\_81 ソリューションは、8.1 ユニバーサル アプリ プロジェクトと、これらのプロジェクトが含まれています。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-127">The Bookstore1\_81 solution is an 8.1 Universal App project, and it contains these projects.</span></span>

-   <span data-ttu-id="a3f5a-128">Bookstore1\_81.Windows します。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-128">Bookstore1\_81.Windows.</span></span> <span data-ttu-id="a3f5a-129">これは、Windows 8.1 のアプリ パッケージをビルドするプロジェクトです。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-129">This is the project that builds the app package for Windows 8.1.</span></span>
-   <span data-ttu-id="a3f5a-130">Bookstore1\_81.WindowsPhone します。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-130">Bookstore1\_81.WindowsPhone.</span></span> <span data-ttu-id="a3f5a-131">これは、Windows Phone 8.1 用アプリ パッケージを構築するプロジェクトです。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-131">This is the project that builds the app package for Windows Phone 8.1.</span></span>
-   <span data-ttu-id="a3f5a-132">Bookstore1\_81.Shared します。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-132">Bookstore1\_81.Shared.</span></span> <span data-ttu-id="a3f5a-133">これは、他の 2 つのプロジェクトの両方で使われるソース コード、マークアップ ファイル、および他のアセットやリソースを含むプロジェクトです。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-133">This is the project that contains source code, markup files, and other assets and resources, that are used by both of the other two projects.</span></span>

<span data-ttu-id="a3f5a-134">このケース スタディでは、サポートするデバイスに関して、「[ユニバーサル 8.1 アプリがある場合](w8x-to-uwp-root.md)」で説明した通常のオプションを使います。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-134">For this case study, we have the usual options described in [If you have a Universal 8.1 app](w8x-to-uwp-root.md) with respect to what devices to support.</span></span> <span data-ttu-id="a3f5a-135">ここで、意思決定は、単純な: このアプリが、同じ機能とは、Windows 8.1 と Windows Phone 8.1 の両方のフォームで、同じコード。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-135">The decision here is a simple one: this app has the same features, and does so mostly with the same code, in both its Windows 8.1 and Windows Phone 8.1 forms.</span></span> <span data-ttu-id="a3f5a-136">そのため、共有プロジェクト (およびその他の他のプロジェクトから必要があります) の内容移植を Windows 10 (最も広範なデバイスにインストールできるもの) ユニバーサル デバイス ファミリを対象とします。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-136">So, we'll port the contents of the Shared project (and anything else we need from the other projects) to a Windows 10 that targets the Universal device family (one that you can install onto the widest range of devices).</span></span>

<span data-ttu-id="a3f5a-137">Bookstore1 を経由でファイルのコピーである Visual Studio で新しいプロジェクトを作成する非常に高速のタスクは\_81、コピーしたファイルを新しいプロジェクトに追加します。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-137">It's a very quick task to create a new project in Visual Studio, copy files over to it from Bookstore1\_81, and include the copied files in the new project.</span></span> <span data-ttu-id="a3f5a-138">最初に、"新しいアプリケーション (Windows ユニバーサル)" プロジェクトを新規作成します。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-138">Start by creating a new Blank Application (Windows Universal) project.</span></span> <span data-ttu-id="a3f5a-139">名前を付けます Bookstore1Universal\_10。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-139">Name it Bookstore1Universal\_10.</span></span> <span data-ttu-id="a3f5a-140">これらの Bookstore1 から経由でコピーするファイルは\_Bookstore1Universal を 81\_10。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-140">These are the files to copy over from Bookstore1\_81 to Bookstore1Universal\_10.</span></span>

<span data-ttu-id="a3f5a-141">**共有プロジェクトから**</span><span class="sxs-lookup"><span data-stu-id="a3f5a-141">**From the Shared project**</span></span>

-   <span data-ttu-id="a3f5a-142">書籍カバーの画像の PNG ファイルを含むフォルダーにコピー (フォルダーが\\資産\\CoverImages)。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-142">Copy the folder containing the book cover image PNG files (the folder is \\Assets\\CoverImages).</span></span> <span data-ttu-id="a3f5a-143">フォルダーをコピーしたら、**ソリューション エクスプローラー**で **[すべてのファイルを表示]** がオンであることを確認します。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-143">After copying the folder, in **Solution Explorer**, make sure **Show All Files** is toggled on.</span></span> <span data-ttu-id="a3f5a-144">コピーしたフォルダーを右クリックし、**[プロジェクトに含める]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-144">Right-click the folder that you copied and click **Include In Project**.</span></span> <span data-ttu-id="a3f5a-145">このコマンドは、ファイルまたはフォルダーをプロジェクトに "含める" ことを意味します。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-145">That command is what we mean by "including" files or folders in a project.</span></span> <span data-ttu-id="a3f5a-146">ファイルやフォルダーをコピーするたびに、**ソリューション エクスプローラー**で **[更新]** をクリックしてから、ファイルまたはフォルダーをプロジェクトに含めます。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-146">Each time you copy a file or folder, each copy, click **Refresh** in **Solution Explorer** and then include the file or folder in the project.</span></span> <span data-ttu-id="a3f5a-147">コピー先で置き換えるファイルについては、この手順を実行する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-147">There's no need to do this for files that you're replacing in the destination.</span></span>
-   <span data-ttu-id="a3f5a-148">ビュー モデルのソース ファイルを含むフォルダーをコピー (フォルダーが\\ViewModel)。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-148">Copy the folder containing the view model source file (the folder is \\ViewModel).</span></span>
-   <span data-ttu-id="a3f5a-149">MainPage.xaml をコピーして、コピー先のファイルを置き換えます。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-149">Copy MainPage.xaml and replace the file in the destination.</span></span>

<span data-ttu-id="a3f5a-150">**Windows プロジェクトから**</span><span class="sxs-lookup"><span data-stu-id="a3f5a-150">**From the Windows project**</span></span>

-   <span data-ttu-id="a3f5a-151">BookstoreStyles.xaml をコピーします。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-151">Copy BookstoreStyles.xaml.</span></span> <span data-ttu-id="a3f5a-152">Windows 10 アプリ; でこのファイル内のすべてのリソース キーを解決するため、適切な開始点として 1 つ使用します同等の WindowsPhone ファイル内の一部ではありません。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-152">We'll use this one as a good starting-point because all the resource keys in this file will resolve in a Windows 10 app; some of those in the equivalent WindowsPhone file will not.</span></span>

<span data-ttu-id="a3f5a-153">コピーしたソース コードとマークアップ ファイルを編集し、Bookstore1 への参照を変更\_Bookstore1Universal に名前空間を 81\_10。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-153">Edit the source code and markup files that you just copied and change any references to the Bookstore1\_81 namespace to Bookstore1Universal\_10.</span></span> <span data-ttu-id="a3f5a-154">これをすばやく行うには、**[フォルダーを指定して置換]** 機能を使います。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-154">A quick way to do that is to use the **Replace In Files** feature.</span></span> <span data-ttu-id="a3f5a-155">ビュー モデルでも、その他の命令型コードでも、コードを変更する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-155">No code changes are needed in the view model, nor in any other imperative code.</span></span> <span data-ttu-id="a3f5a-156">によって返される値を変更するが、これを簡単に、アプリのバージョンが実行されているように、 **Bookstore1Universal\_10.BookstoreViewModel.AppName**からプロパティ"BOOKSTORE1\_81"を"BOOKSTORE1UNIVERSAL\_10"です。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-156">But, just to make it easier to see which version of the app is running, change the value returned by the **Bookstore1Universal\_10.BookstoreViewModel.AppName** property from "BOOKSTORE1\_81" to "BOOKSTORE1UNIVERSAL\_10".</span></span>

<span data-ttu-id="a3f5a-157">これで、ビルドして実行することができます。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-157">Right now, you can build and run.</span></span> <span data-ttu-id="a3f5a-158">Windows 10 に移植するには、まだ明示的な作業が行われません後に、新しい UWP アプリの外観を示します。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-158">Here's how our new UWP app looks after having done no explicit work yet to port it to Windows 10.</span></span>

![最初のソース コードの変更を加えた Windows 10 アプリ](images/w8x-to-uwp-case-studies/c01-03-desk10-initial-source-code-changes.png)

<span data-ttu-id="a3f5a-160">Windows 10 アプリとデスクトップ デバイスで実行されている最初のソース コードの変更</span><span class="sxs-lookup"><span data-stu-id="a3f5a-160">The Windows 10 app with initial source code changes running on a Desktop device</span></span>

![最初のソース コードの変更を加えた Windows 10 アプリ](images/w8x-to-uwp-case-studies/c01-04-mob10-initial-source-code-changes.png)

<span data-ttu-id="a3f5a-162">Windows 10 アプリのモバイル デバイスで実行されている最初のソース コードを変更</span><span class="sxs-lookup"><span data-stu-id="a3f5a-162">The Windows 10 app with initial source code changes running on a Mobile device</span></span>

<span data-ttu-id="a3f5a-163">ビューおよびビュー モデルは、適切に連携しており、**ListBox** が機能しています。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-163">The view and the view model are working together correctly, and the **ListBox** is functioning.</span></span> <span data-ttu-id="a3f5a-164">修正が必要なのは、スタイル設定だけです。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-164">We just need to fix the styling.</span></span> <span data-ttu-id="a3f5a-165">淡色テーマのモバイル デバイスでは、リスト ボックスの境界線が表示されますが、これは、簡単に非表示にすることができます。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-165">On a Mobile device, in light theme, we can see the border of the list box, but that will be easy to hide.</span></span> <span data-ttu-id="a3f5a-166">そして、文字体裁が大きすぎるため、ここで使うスタイルを変更します。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-166">And, the typography is too big, so we'll change the styles we're using.</span></span> <span data-ttu-id="a3f5a-167">また、既定のような外観にしたい場合は、デスクトップ デバイスでの実行時のアプリの色を淡色にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-167">Also, the app should be light in color when running on a Desktop device if we want it to look like the default.</span></span> <span data-ttu-id="a3f5a-168">では、それを変更しましょう。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-168">So, we'll change that.</span></span>

## <a name="universal-styling"></a><span data-ttu-id="a3f5a-169">ユニバーサル スタイル設定</span><span class="sxs-lookup"><span data-stu-id="a3f5a-169">Universal styling</span></span>

<span data-ttu-id="a3f5a-170">Bookstore1\_81 アプリが使用される 2 つ異なるリソース ディクショナリ (BookstoreStyles.xaml)、Windows 8.1 および Windows Phone 8.1 オペレーティング システムにそのスタイルを調整します。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-170">The Bookstore1\_81 app used two different resource dictionaries (BookstoreStyles.xaml) to tailor its styles to the Windows 8.1 and Windows Phone 8.1 operating systems.</span></span> <span data-ttu-id="a3f5a-171">これら 2 つの BookstoreStyles.xaml ファイルのどちらも、Windows 10 アプリの必要なスタイルだけが含まれています。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-171">Neither of those two BookstoreStyles.xaml files contains exactly the styles we need for our Windows 10 app.</span></span> <span data-ttu-id="a3f5a-172">ただし、さいわいなことに、目的としているのは、そのどちらよりもはるかに単純なスタイルです。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-172">But, the good news is that what we want is actually much simpler than either of them.</span></span> <span data-ttu-id="a3f5a-173">したがって、以降の手順で行うのはほとんど、プロジェクト ファイルとマークアップの削除と簡素化の作業です。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-173">So, the next steps will mostly involve removing and simplifying our project files and markup.</span></span> <span data-ttu-id="a3f5a-174">手順は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-174">The steps are below.</span></span> <span data-ttu-id="a3f5a-175">このトピックの上部にあるリンクを使用して、プロジェクトをダウンロードし、この時点とケース スタディの終了時の間のすべての変更の結果を参照できます。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-175">And you can use the links at the top of this topic to download the projects and see the results of all the changes between here and the end of the case study.</span></span>

-   <span data-ttu-id="a3f5a-176">項目間のスペースを縮めるために、MainPage.xaml で `BookTemplate` データ テンプレートを探し、`Margin="0,0,0,8"` をルートの **Grid** から削除します。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-176">To tighten up the spacing between items, find the `BookTemplate` data template in MainPage.xaml and delete the `Margin="0,0,0,8"` from the root **Grid**.</span></span>
-   <span data-ttu-id="a3f5a-177">また、`BookTemplate` には、`BookTemplateTitleTextBlockStyle` と `BookTemplateAuthorTextBlockStyle` への参照があります。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-177">Also, in `BookTemplate`, there are references to `BookTemplateTitleTextBlockStyle` and `BookTemplateAuthorTextBlockStyle`.</span></span> <span data-ttu-id="a3f5a-178">Bookstore1\_81 が 1 つのキーの 2 つのアプリがあるさまざまな実装するために、間接参照としてこれらのキーを使用します。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-178">Bookstore1\_81 used those keys as an indirection so that a single key had different implementations in the two apps.</span></span> <span data-ttu-id="a3f5a-179">その間接参照は、必要ではなくなりました。システム スタイルを直接参照できます。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-179">We don't need that indirection any more; we can just reference system styles directly.</span></span> <span data-ttu-id="a3f5a-180">そこで、これらの参照をそれぞれ、`TitleTextBlockStyle` と `SubtitleTextBlockStyle` で置き換えます。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-180">So, replace those references with `TitleTextBlockStyle` and `SubtitleTextBlockStyle`, respectively.</span></span>
-   <span data-ttu-id="a3f5a-181">ここで、`LayoutRoot` の Background を適切な既定値に設定して、テーマが何であるかに関係なく、すべてのデバイスでの実行時にアプリが適切に表示されるようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-181">Now, we need to set `LayoutRoot`'s Background to the correct default value so that the app looks appropriate when running on all devices no matter what the theme is.</span></span> <span data-ttu-id="a3f5a-182">これを、`"Transparent"` から `"{ThemeResource ApplicationPageBackgroundThemeBrush}"` に変更します。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-182">Change it from `"Transparent"` to `"{ThemeResource ApplicationPageBackgroundThemeBrush}"`.</span></span>
-   <span data-ttu-id="a3f5a-183">`TitlePanel` で、`TitleTextBlockStyle` (今では少し大きすぎる) への参照を `CaptionTextBlockStyle` への参照に変更します。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-183">In `TitlePanel`, change the reference to `TitleTextBlockStyle` (which is now a little too big) to a reference to `CaptionTextBlockStyle`.</span></span> <span data-ttu-id="a3f5a-184">`PageTitleTextBlockStyle` 別の Bookstore1\_もう不要 81 の間接参照します。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-184">`PageTitleTextBlockStyle` is another Bookstore1\_81 indirection that we don't need any longer.</span></span> <span data-ttu-id="a3f5a-185">これは、代わりに `HeaderTextBlockStyle` を参照するように変更します。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-185">Change that to reference `HeaderTextBlockStyle` instead.</span></span>
-   <span data-ttu-id="a3f5a-186">**ListBox** で特別な Background、Style、ItemContainerStyle を設定する必要はなくなったので、この 3 つの属性とその値をマークアップから削除します。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-186">We no longer need to set any special Background, Style, nor ItemContainerStyle on the **ListBox**, so just delete those three attributes and their values from the markup.</span></span> <span data-ttu-id="a3f5a-187">ただし、**ListBox** の境界線を非表示にする必要があるため、これに `BorderBrush="{x:Null}"` を追加します。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-187">We do want to hide the border of the **ListBox**, though, so add `BorderBrush="{x:Null}"` to it.</span></span>
-   <span data-ttu-id="a3f5a-188">BookstoreStyles.xaml (**ResourceDictionary** ファイル) 内のリソースはすべて、参照されなくなります。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-188">We're not referencing any of the resources in the BookstoreStyles.xaml **ResourceDictionary** file any longer.</span></span> <span data-ttu-id="a3f5a-189">これらのリソースはすべて削除できます。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-189">You can delete all of those resources.</span></span> <span data-ttu-id="a3f5a-190">ただし、BookstoreStyles.xaml ファイル自体を削除しないでください。次のセクションで示すように、まだ、最後の用途があります。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-190">But, don't delete the BookstoreStyles.xaml file itself: we still have one last use for it, as you'll see in the next section.</span></span>

<span data-ttu-id="a3f5a-191">スタイル設定操作の最後のシーケンスで、アプリの外観は次のようになります。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-191">That last sequence of styling operations leaves the app looking like this.</span></span>

![ほとんどの移植が行われた Windows 10 アプリ](images/w8x-to-uwp-case-studies/c01-05-desk10-almost-ported.png)

<span data-ttu-id="a3f5a-193">デスクトップ デバイスで実行されているポートのほとんどの Windows 10 アプリ</span><span class="sxs-lookup"><span data-stu-id="a3f5a-193">The almost-ported Windows 10 app running on a Desktop device</span></span>

![ほとんどの移植が行われた Windows 10 アプリ](images/w8x-to-uwp-case-studies/c01-06-mob10-almost-ported.png)

<span data-ttu-id="a3f5a-195">移植のほとんどの Windows 10 アプリをモバイル デバイスで実行されています。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-195">The almost-ported Windows 10 app running on a Mobile device</span></span>

## <a name="an-optional-adjustment-to-the-list-box-for-mobile-devices"></a><span data-ttu-id="a3f5a-196">モバイル デバイス向けのリスト ボックスの調整 (オプション)</span><span class="sxs-lookup"><span data-stu-id="a3f5a-196">An optional adjustment to the list box for Mobile devices</span></span>

<span data-ttu-id="a3f5a-197">モバイル デバイスでのアプリの実行中には、両方のテーマで既定で、リスト ボックスの背景は淡色です。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-197">When the app is running on a Mobile device, the background of a list box is light by default in both themes.</span></span> <span data-ttu-id="a3f5a-198">このスタイルを使うことができます。使う場合は、整理以外の作業はありません。つまり、BookstoreStyles.xaml リソース ディクショナリ ファイルと、それを MainPage.xaml にマージするマークアップをプロジェクトから削除するだけです。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-198">That may be the style that you prefer and, if so, then there's nothing more to do except to tidy up: delete the BookstoreStyles.xaml resource dictionary file from your project, and remove the markup that merges it into MainPage.xaml.</span></span>

<span data-ttu-id="a3f5a-199">コントロールは、動作に影響を及ぼすことなく、表示形式をカスタマイズできるように設計されています。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-199">But, controls are designed so that you can customize their look while leaving their behavior unaffected.</span></span> <span data-ttu-id="a3f5a-200">元のアプリの外観のように、濃色のテーマでリスト ボックスを濃色にする場合は、次のセクションで説明する方法をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-200">So, if you want the list box to be dark in the dark theme—the way the original app looked—then this section describes a way to do that.</span></span>

<span data-ttu-id="a3f5a-201">変更をアプリに反映させる必要があるのは、モバイル デバイスでアプリを実行するときだけです。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-201">The change we make only needs to affect the app when it's running on Mobile devices.</span></span> <span data-ttu-id="a3f5a-202">したがって、モバイル デバイス ファミリで実行するときには、わずかにカスタマイズしたリスト ボックスのスタイルを使い、それ以外のすべてのデバイスで実行するときには、既定のスタイルを引き続き使います。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-202">So, we'll use a very slightly customized list box style when we're running on the Mobile device family, and we'll continue to use the default style when we're running everywhere else.</span></span> <span data-ttu-id="a3f5a-203">これを行うには、BookstoreStyles.xaml のコピーを作成し、それに、特別な MRT 修飾名を付けて、モバイル デバイスでのみ読み込まれるようにします。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-203">To do that, we'll make a copy of BookstoreStyles.xaml and we'll give it a special MRT-qualified name, which will cause it to be loaded only on Mobile devices.</span></span>

<span data-ttu-id="a3f5a-204">新しい **ResourceDictionary** プロジェクト項目を追加し、BookstoreStyles.DeviceFamily-Mobile.xaml という名前を付けます。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-204">Add a new **ResourceDictionary** project item and name it BookstoreStyles.DeviceFamily-Mobile.xaml.</span></span> <span data-ttu-id="a3f5a-205">これで、両方の論理名が BookstoreStyles.xaml (これが、マークアップとコードで使用する名前です) である 2 つのファイルができました。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-205">You now have two files both of whose logical name is BookstoreStyles.xaml (and that's the name you use in your markup and code).</span></span> <span data-ttu-id="a3f5a-206">ただし、これらのファイルの物理名は異なっているため、異なるマークアップを含めることができます。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-206">The files have different physical names, though, so they can contain different markup.</span></span> <span data-ttu-id="a3f5a-207">この MRT 修飾名の名前付けスキームは、どの xaml ファイルでも使用できますが、同じ論理名を持つすべての xaml ファイルは、1 つの xaml.cs 分離コード ファイルを共有することに注意してください (この場合、適用されるのは 1 つです)。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-207">You can use this MRT-qualified naming scheme with any xaml file, but be aware that all xaml files with the same logical name share a single xaml.cs code-behind file (where one is applicable).</span></span>

<span data-ttu-id="a3f5a-208">リスト ボックスのコントロール テンプレートのコピーを編集し、新しいリソース ディクショナリである BookstoreStyles.DeviceFamily Mobile.xaml 内の `BookstoreListBoxStyle` キーで保存します。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-208">Edit a copy of the control template for the list box and store that with the key of `BookstoreListBoxStyle` in the new resource dictionary, BookstoreStyles.DeviceFamily-Mobile.xaml.</span></span> <span data-ttu-id="a3f5a-209">今度は、setter のうち、3 つに単純な変更を加えます。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-209">Now, we'll make simple changes to three of the setters.</span></span>

-   <span data-ttu-id="a3f5a-210">Foreground setter で、値を `"{x:Null}"` に変更します。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-210">In the Foreground setter, change the value to `"{x:Null}"`.</span></span> <span data-ttu-id="a3f5a-211">プロパティを要素で直接、`"{x:Null}"` に設定することは、コードで `null` に設定することと同じであることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-211">Note that setting a property to `"{x:Null}"` directly on an element is the same as setting it to `null` in code.</span></span> <span data-ttu-id="a3f5a-212">ただし、`"{x:Null}"` の値を setter で使うと、独自の効果があります。既定のスタイルで (同じプロパティの) setter がオーバーライドされ、ターゲット要素でプロパティの既定値が復元されます。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-212">But, using a value of `"{x:Null}"` in a setter has a unique effect: it overrides the setter in the default style (for the same property) and restores the default value of the property on the target element.</span></span>
-   <span data-ttu-id="a3f5a-213">Background setter で、値を `"Transparent"` に変更して、その淡色の背景を削除します。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-213">In the Background setter, change the value to `"Transparent"` to remove that light background.</span></span>
-   <span data-ttu-id="a3f5a-214">Template setter で、`Focused` という名前の表示状態を見つけ、そのストーリー ボードを削除して空のタグにします。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-214">In the Template setter, find the visual state named `Focused` and delete its Storyboard, making it into an empty tag.</span></span>
-   <span data-ttu-id="a3f5a-215">その他のすべての setter をマークアップから削除します。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-215">Delete all the other setters from the markup.</span></span>

<span data-ttu-id="a3f5a-216">最後に、`BookstoreListBoxStyle` を BookstoreStyles.xaml にコピーし、その 3 つの setter を削除して、空のタグにします。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-216">Finally, copy `BookstoreListBoxStyle` into BookstoreStyles.xaml and delete its three setters, making it into an empty tag.</span></span> <span data-ttu-id="a3f5a-217">このようにすると、モバイル以外のデバイスで、BookstoreStyles.xaml と `BookstoreListBoxStyle` への参照が解決されますが、その影響はありません。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-217">We do this so that on devices other than Mobile ones, our reference to BookstoreStyles.xaml and to `BookstoreListBoxStyle` will resolve, but will have no effect.</span></span>

![移植された Windows 10 アプリ](images/w8x-to-uwp-case-studies/c01-07-mob10-ported.png)

<span data-ttu-id="a3f5a-219">モバイル デバイスで実行されている Windows 10 アプリのインポート</span><span class="sxs-lookup"><span data-stu-id="a3f5a-219">The ported Windows 10 app running on a Mobile device</span></span>

## <a name="conclusion"></a><span data-ttu-id="a3f5a-220">まとめ</span><span class="sxs-lookup"><span data-stu-id="a3f5a-220">Conclusion</span></span>

<span data-ttu-id="a3f5a-221">このケース スタディでは、非常に単純なアプリ (実在しないと考えらえる単純なアプリ) を移植するプロセスを示しました。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-221">This case study showed the process of porting a very simple app—arguably an unrealistically simple one.</span></span> <span data-ttu-id="a3f5a-222">たとえば、リスト ボックスは、選択を行ったり、ナビゲーションのコンテキストを確立したりするときに使うことができます。アプリは、タップされた項目に関する詳細を提示するページに移動します。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-222">For instance, a list box can be used for selection or for establishing a context for navigation; the app navigates to a page with more details about the item that was tapped.</span></span> <span data-ttu-id="a3f5a-223">この特定のアプリは、ユーザーの選択に対して何も処理せず、またナビゲーション機能がありません。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-223">This particular app does nothing with the user's selection, and it has no navigation.</span></span> <span data-ttu-id="a3f5a-224">それでも、このケース スタディは、まず移植プロセスを導入し、実際の UWP  アプリで使うことができる重要な手法をデモする役割を果たします。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-224">Even so, the case study served to break the ice, to introduce the porting process, and to demonstrate important techniques that you can use in real UWP apps.</span></span>

<span data-ttu-id="a3f5a-225">また、新しいビュー モデルを移行することは、概してスムーズなプロセスであることを確認しました。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-225">We also saw evidence that porting view models is generally a smooth process.</span></span> <span data-ttu-id="a3f5a-226">ただし、ユーザー インターフェイスや、フォーム ファクターのサポートは、移植する際に注意が必要と考えられる項目です。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-226">User interface, and form factor support, are aspects that are more likely to require our attention when porting.</span></span>

<span data-ttu-id="a3f5a-227">次のケース スタディは「[Bookstore2](w8x-to-uwp-case-study-bookstore2.md)」です。ここでは、グループ化されたデータへのアクセスと表示について説明します。</span><span class="sxs-lookup"><span data-stu-id="a3f5a-227">The next case study is [Bookstore2](w8x-to-uwp-case-study-bookstore2.md), in which we look at accessing and displaying grouped data.</span></span>
