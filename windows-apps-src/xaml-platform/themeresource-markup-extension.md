---
author: jwmsft
description: 現在アクティブなテーマに応じて異なるリソースを取得する追加のシステム ロジックと共に、リソースへの参照を評価して任意の XAML 属性の値を提供します。
title: ThemeResource マークアップ拡張
ms.assetid: 8A1C79D2-9566-44AA-B8E1-CC7ADAD1BCC5
ms.author: jimwalk
ms.date: 02/08/2017
ms.topic: article
keywords: Windows 10, UWP
ms.localizationpriority: medium
ms.openlocfilehash: 024e48380941c0d79eef65780396ec9b89edc3c7
ms.sourcegitcommit: 70ab58b88d248de2332096b20dbd6a4643d137a4
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/02/2018
ms.locfileid: "5947365"
---
# <a name="themeresource-markup-extension"></a><span data-ttu-id="4be66-104">{ThemeResource} マークアップ拡張</span><span class="sxs-lookup"><span data-stu-id="4be66-104">{ThemeResource} markup extension</span></span>

<span data-ttu-id="4be66-105">現在アクティブなテーマに応じて異なるリソースを取得する追加のシステム ロジックと共に、リソースへの参照を評価して任意の XAML 属性の値を提供します。</span><span class="sxs-lookup"><span data-stu-id="4be66-105">Provides a value for any XAML attribute by evaluating a reference to a resource, with additional system logic that retrieves different resources depending on the currently active theme.</span></span> <span data-ttu-id="4be66-106">[{StaticResource} マークアップ拡張](staticresource-markup-extension.md)と同様、リソースは [**ResourceDictionary**](https://msdn.microsoft.com/library/windows/apps/br208794) で定義されており、**ThemeResource** の使用は **ResourceDictionary** 内のそのリソースのキーを参照します。</span><span class="sxs-lookup"><span data-stu-id="4be66-106">Similar to [{StaticResource} markup extension](staticresource-markup-extension.md), resources are defined in a [**ResourceDictionary**](https://msdn.microsoft.com/library/windows/apps/br208794), and a **ThemeResource** usage references the key of that resource in the **ResourceDictionary**.</span></span>

## <a name="xaml-attribute-usage"></a><span data-ttu-id="4be66-107">XAML 属性の使用方法</span><span class="sxs-lookup"><span data-stu-id="4be66-107">XAML attribute usage</span></span>

``` syntax
<object property="{ThemeResource key}" .../>
```

## <a name="xaml-values"></a><span data-ttu-id="4be66-108">XAML 値</span><span class="sxs-lookup"><span data-stu-id="4be66-108">XAML values</span></span>

| <span data-ttu-id="4be66-109">用語</span><span class="sxs-lookup"><span data-stu-id="4be66-109">Term</span></span> | <span data-ttu-id="4be66-110">説明</span><span class="sxs-lookup"><span data-stu-id="4be66-110">Description</span></span> |
|------|-------------|
| <span data-ttu-id="4be66-111">key</span><span class="sxs-lookup"><span data-stu-id="4be66-111">key</span></span> | <span data-ttu-id="4be66-112">要求されたリソースのキー。</span><span class="sxs-lookup"><span data-stu-id="4be66-112">The key for the requested resource.</span></span> <span data-ttu-id="4be66-113">このキーは、[**ResourceDictionary**](https://msdn.microsoft.com/library/windows/apps/br208794) によって最初に割当てられます。</span><span class="sxs-lookup"><span data-stu-id="4be66-113">This key is initially assigned by the [**ResourceDictionary**](https://msdn.microsoft.com/library/windows/apps/br208794).</span></span> <span data-ttu-id="4be66-114">リソース キーとしては、XamlName の文法で定義されている任意の文字列を使うことができます。</span><span class="sxs-lookup"><span data-stu-id="4be66-114">A resource key can be any string defined in the XamlName Grammar.</span></span> |

## <a name="remarks"></a><span data-ttu-id="4be66-115">注釈</span><span class="sxs-lookup"><span data-stu-id="4be66-115">Remarks</span></span>

<span data-ttu-id="4be66-116">**ThemeResource** は、XAML リソース ディクショナリ内の別の場所で定義されている XAML 属性の値を取得するための手法です。</span><span class="sxs-lookup"><span data-stu-id="4be66-116">A **ThemeResource** is a technique for obtaining values for a XAML attribute that are defined elsewhere in a XAML resource dictionary.</span></span> <span data-ttu-id="4be66-117">このマークアップ拡張は、[{StaticResource} マークアップ拡張](staticresource-markup-extension.md)と同じ基本的な目的を果たします。</span><span class="sxs-lookup"><span data-stu-id="4be66-117">The markup extension serves the same basic purpose as the [{StaticResource} markup extension](staticresource-markup-extension.md).</span></span> <span data-ttu-id="4be66-118">{StaticResource} マークアップ拡張との動作の違いとして、**ThemeResource** 参照では、システムによってどのテーマが現在使われているかに応じて、一次検索場所として異なるディクショナリを動的に使うことができます。</span><span class="sxs-lookup"><span data-stu-id="4be66-118">The difference in behavior versus {StaticResource} markup extension is that a **ThemeResource** reference can dynamically use different dictionaries as the primary lookup location, depending on which theme is currently being used by the system.</span></span>

<span data-ttu-id="4be66-119">アプリが最初に起動されると、**ThemeResource** 参照によって行われたすべてのリソース参照が、起動時に使われたテーマに基づいて評価されます。</span><span class="sxs-lookup"><span data-stu-id="4be66-119">When the app first starts, any resource reference made by a **ThemeResource** reference is evaluated based on the theme in use at startup.</span></span> <span data-ttu-id="4be66-120">ただし、ユーザーが後で実行時にアクティブなテーマを変更した場合、システムは、すべての **ThemeResource** 参照を再評価し、(異なっている可能性のある) テーマに固有のリソースを取得した後、ビジュアル ツリーのすべての適切な場所に新しいリソース値を持つアプリを再表示します。</span><span class="sxs-lookup"><span data-stu-id="4be66-120">But if the user subsequently changes the active theme at run-time, the system will re-evaluate every **ThemeResource** reference, retrieve a theme-specific resource that may be different, and redisplay the app with new resource values in all appropriate places in the visual tree.</span></span> <span data-ttu-id="4be66-121">**StaticResource** は、XAML の読み込み時またはアプリの起動時に判定され、実行時には再評価されません </span><span class="sxs-lookup"><span data-stu-id="4be66-121">A **StaticResource** is determined at XAML load time / app startup and won't be re-evaluated at run-time.</span></span> <span data-ttu-id="4be66-122">(XAML を動的に再読み込みする表示状態などの他の方法もありますが、これらの方法は、基本的なリソースの評価が [{StaticResource} マークアップ拡張](staticresource-markup-extension.md)によって有効化されるより高いレベルで動作します)。</span><span class="sxs-lookup"><span data-stu-id="4be66-122">(There are other techniques such as visual states that reload XAML dynamically, but those techniques operate at a higher level that the basic resource evaluation enabled by [{StaticResource} markup extension](staticresource-markup-extension.md)).</span></span>

<span data-ttu-id="4be66-123">**ThemeResource** は、要求されたリソースについてキーを指定する 1 個の引数を受け取ります。</span><span class="sxs-lookup"><span data-stu-id="4be66-123">**ThemeResource** takes one argument, which specifies the key for the requested resource.</span></span> <span data-ttu-id="4be66-124">リソース キーは常に、Windows ランタイム XAML の文字列です。</span><span class="sxs-lookup"><span data-stu-id="4be66-124">A resource key is always a string in Windows Runtime XAML.</span></span> <span data-ttu-id="4be66-125">リソース キーを最初に指定する方法について詳しくは、「[x:Key 属性](x-key-attribute.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="4be66-125">For more info on how the resource key is initially specified, see [x:Key attribute](x-key-attribute.md).</span></span>

<span data-ttu-id="4be66-126">リソースの定義方法と [**ResourceDictionary**](https://msdn.microsoft.com/library/windows/apps/br208794) の適切な使用方法 (サンプル コードを含む) について詳しくは、「[ResourceDictionary と XAML リソースの参照](https://msdn.microsoft.com/library/windows/apps/mt187273)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="4be66-126">For more info on how to define resources and properly use a [**ResourceDictionary**](https://msdn.microsoft.com/library/windows/apps/br208794), including sample code, see [ResourceDictionary and XAML resource references](https://msdn.microsoft.com/library/windows/apps/mt187273).</span></span>

<span data-ttu-id="4be66-127">**重要** **StaticResource** と同様、**ThemeResource** は、XAML ファイルの中で辞書的に定義されているリソースへの前方参照を行うことはできません。</span><span class="sxs-lookup"><span data-stu-id="4be66-127">**Important** As with **StaticResource**, a **ThemeResource** must not attempt to make a forward reference to a resource that is defined lexically further within the XAML file.</span></span> <span data-ttu-id="4be66-128">そのようなことを試みることはサポートしていません。</span><span class="sxs-lookup"><span data-stu-id="4be66-128">Attempting to do so is not supported.</span></span> <span data-ttu-id="4be66-129">前方参照が失敗しなかったとしても、そのようなことを試みるだけでパフォーマンスの低下を招きます。</span><span class="sxs-lookup"><span data-stu-id="4be66-129">Even if the forward reference doesn't fail, trying to make one carries a performance penalty.</span></span> <span data-ttu-id="4be66-130">最善の結果を得るには、前方参照を避けるようにリソース ディクショナリの構成を調整します。</span><span class="sxs-lookup"><span data-stu-id="4be66-130">For best results, adjust the composition of your resource dictionaries so that forward references are avoided.</span></span>

<span data-ttu-id="4be66-131">解決できないキーに **ThemeResource** を指定しようとすると、実行時に XAML 解析例外がスローされます。</span><span class="sxs-lookup"><span data-stu-id="4be66-131">Attempting to specify a **ThemeResource** to a key that cannot resolve throws a XAML parse exception at run time.</span></span> <span data-ttu-id="4be66-132">デザイン ツールでも、警告やエラーが通知されることがあります。</span><span class="sxs-lookup"><span data-stu-id="4be66-132">Design tools may also offer warnings or errors.</span></span>

<span data-ttu-id="4be66-133">Windows ランタイム XAML プロセッサの実装では、**ThemeResource** のバッキング クラス表現はありません。</span><span class="sxs-lookup"><span data-stu-id="4be66-133">In the Windows Runtime XAML processor implementation, there is no backing class representation for **ThemeResource**.</span></span> <span data-ttu-id="4be66-134">コードで最も近いのは、[**Contains**](https://msdn.microsoft.com/library/windows/apps/jj635925) または [**TryGetValue**](https://msdn.microsoft.com/library/windows/apps/jj603139) を呼び出すなど、[**ResourceDictionary**](https://msdn.microsoft.com/library/windows/apps/br208794) のコレクション API を使うことです。</span><span class="sxs-lookup"><span data-stu-id="4be66-134">The closest equivalent in code is to use the collection API of a [**ResourceDictionary**](https://msdn.microsoft.com/library/windows/apps/br208794), for example calling [**Contains**](https://msdn.microsoft.com/library/windows/apps/jj635925) or [**TryGetValue**](https://msdn.microsoft.com/library/windows/apps/jj603139).</span></span>

<span data-ttu-id="4be66-135">**ThemeResource** はマークアップ拡張です。</span><span class="sxs-lookup"><span data-stu-id="4be66-135">**ThemeResource** is a markup extension.</span></span> <span data-ttu-id="4be66-136">通常、マークアップ拡張は、属性値をリテラル値やハンドラー名以外にエスケープする必要があり、特定の型やプロパティに対して型コンバーターを指定するのではなく、よりグローバルにその必要がある場合に実装します。</span><span class="sxs-lookup"><span data-stu-id="4be66-136">Markup extensions are typically implemented when there is a requirement to escape attribute values to be other than literal values or handler names, and the requirement is more global than just putting type converters on certain types or properties.</span></span> <span data-ttu-id="4be66-137">XAML のすべてのマークアップ拡張では、それぞれの属性構文で "{" と "}" の文字を使います。これは規約であり、これに従って XAML プロセッサは、マークアップ拡張で属性を処理する必要があることを認識します。</span><span class="sxs-lookup"><span data-stu-id="4be66-137">All markup extensions in XAML use the "{" and "}" characters in their attribute syntax, which is the convention by which a XAML processor recognizes that a markup extension must process the attribute.</span></span>

### <a name="when-and-how-to-use-themeresource-rather-than-staticresource"></a><span data-ttu-id="4be66-138">{StaticResource} ではなく {ThemeResource} を使う状況とその方法</span><span class="sxs-lookup"><span data-stu-id="4be66-138">When and how to use {ThemeResource} rather than {StaticResource}</span></span>

<span data-ttu-id="4be66-139">**ThemeResource** がリソース ディクショナリの項目に解決される規則は、通常、**StaticResource** の場合と同じです。</span><span class="sxs-lookup"><span data-stu-id="4be66-139">The rules by which a **ThemeResource** resolves to an item in a resource dictionary are generally the same as **StaticResource**.</span></span> <span data-ttu-id="4be66-140">**ThemeResource** 検索は [**ThemeDictionaries**](https://msdn.microsoft.com/library/windows/apps/br208807) のコレクションで参照される [**ResourceDictionary**](https://msdn.microsoft.com/library/windows/apps/br208794) ファイルまで拡張できます。これは、**StaticResource** の場合も同じです。</span><span class="sxs-lookup"><span data-stu-id="4be66-140">A **ThemeResource** lookup can extend into the [**ResourceDictionary**](https://msdn.microsoft.com/library/windows/apps/br208794) files that are referenced in a [**ThemeDictionaries**](https://msdn.microsoft.com/library/windows/apps/br208807) collection, but a **StaticResource** can do that also.</span></span> <span data-ttu-id="4be66-141">その違いは、**ThemeResource** では実行時に再評価を行うことができるのに対し、**StaticResource** では再評価を行うことができない点にあります。</span><span class="sxs-lookup"><span data-stu-id="4be66-141">The difference is that a **ThemeResource** can re-evaluate at run-time and a **StaticResource** can't.</span></span>

<span data-ttu-id="4be66-142">各テーマ ディクショナリのキー セットでは、どのテーマがアクティブであるかに関係なく、キーを持つリソースの同じセットを提供する必要があります。</span><span class="sxs-lookup"><span data-stu-id="4be66-142">The set of keys in each theme dictionary should provide the same set of keyed resources no matter which theme is active.</span></span> <span data-ttu-id="4be66-143">特定のキーを持つリソースが **HighContrast** テーマ ディクショナリに存在する場合、**Light** と **Default** にも同じ名前を持つ別のリソースが存在する必要があります。</span><span class="sxs-lookup"><span data-stu-id="4be66-143">If a given keyed resource exists in the **HighContrast** theme dictionary, then another resource with that name should also exist in **Light** and **Default**.</span></span> <span data-ttu-id="4be66-144">そうでないと、ユーザーがテーマを切り替えたときにリソース検索が失敗し、アプリが適切に表示されなくなります。</span><span class="sxs-lookup"><span data-stu-id="4be66-144">If that isn't true, resource lookup might fail when the user switches themes and your app won't look right.</span></span> <span data-ttu-id="4be66-145">テーマ ディクショナリには、サブ値を指定するために同じスコープ内からのみ参照されるキーを持つリソースを含めることができます。ただし、これらはすべてのテーマで等価である必要はありません。</span><span class="sxs-lookup"><span data-stu-id="4be66-145">It is possible though that a theme dictionary can contain keyed resources that are only referenced from within the same scope to provide sub-values; these don't need to be equivalent in all themes.</span></span>

<span data-ttu-id="4be66-146">通常は、リソースをテーマ ディクショナリに格納し、これらの値がテーマごとに変化するときや、変化する値によってサポートされているときにのみ、**ThemeResource** を使ってこれらのリソースを参照します。</span><span class="sxs-lookup"><span data-stu-id="4be66-146">In general you should place resources in theme dictionaries and make references to those resources using **ThemeResource** only when those values can change between themes or are supported by values that change.</span></span> <span data-ttu-id="4be66-147">これは、次の種類のリソースに適しています。</span><span class="sxs-lookup"><span data-stu-id="4be66-147">This is appropriate for these kinds of resources:</span></span>

-   <span data-ttu-id="4be66-148">ブラシ。特に [**SolidColorBrush**](https://msdn.microsoft.com/library/windows/apps/br242962) の色。</span><span class="sxs-lookup"><span data-stu-id="4be66-148">Brushes, in particular colors for [**SolidColorBrush**](https://msdn.microsoft.com/library/windows/apps/br242962).</span></span> <span data-ttu-id="4be66-149">この使い方は、既定の XAML コントロール テンプレート (generic.xaml) において **ThemeResource** の約 80% を占めています。</span><span class="sxs-lookup"><span data-stu-id="4be66-149">These make up about 80% of the **ThemeResource** usages in the default XAML control templates (generic.xaml).</span></span>
-   <span data-ttu-id="4be66-150">境界線、オフセット、余白、パディングなどのピクセル値。</span><span class="sxs-lookup"><span data-stu-id="4be66-150">Pixel values for borders, offsets, margin and padding and so on.</span></span>
-   <span data-ttu-id="4be66-151">**FontFamily**、**FontSize** などのフォント プロパティ。</span><span class="sxs-lookup"><span data-stu-id="4be66-151">Font properties such as **FontFamily** or **FontSize**.</span></span>
-   <span data-ttu-id="4be66-152">通常システムによってスタイルが設定され、動的な表示に使われる、限られた数のコントロールの完全なテンプレート ([**GridViewItem**](https://msdn.microsoft.com/library/windows/apps/hh738501)、[**ListViewItem**](https://msdn.microsoft.com/library/windows/apps/br242919) など)。</span><span class="sxs-lookup"><span data-stu-id="4be66-152">Complete templates for a limited number of controls that are usually system-styled and used for dynamic presentation, like [**GridViewItem**](https://msdn.microsoft.com/library/windows/apps/hh738501) and [**ListViewItem**](https://msdn.microsoft.com/library/windows/apps/br242919).</span></span>
-   <span data-ttu-id="4be66-153">テキスト表示スタイル (通常はフォントの色、背景、サイズを変更する目的で使われます)。</span><span class="sxs-lookup"><span data-stu-id="4be66-153">Text display styles (usually to change font color, background, and possibly size).</span></span>

<span data-ttu-id="4be66-154">Windows ランタイムには、特に **ThemeResource** から参照するためのリソースのセットが用意されています。</span><span class="sxs-lookup"><span data-stu-id="4be66-154">The Windows Runtime provides a set of resources that are specifically intended to be referenced by **ThemeResource**.</span></span> <span data-ttu-id="4be66-155">これらはすべて、Windows ソフトウェア開発キット (Windows SDK) の include/winrt/xaml/design フォルダーにある XAML ファイル themeresources.xaml に記載されています。</span><span class="sxs-lookup"><span data-stu-id="4be66-155">These are all listed as part of the XAML file themeresources.xaml, which is available in the include/winrt/xaml/design folder as part of the Windows Software Development Kit (SDK).</span></span> <span data-ttu-id="4be66-156">themeresources.xaml に定義されているテーマ ブラシと追加のスタイルについて詳しくは、「[XAML テーマ リソース リファレンス](https://msdn.microsoft.com/library/windows/apps/mt187274)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="4be66-156">For documentation on the theme brushes and additional styles that are defined in themeresources.xaml, see [XAML theme resources](https://msdn.microsoft.com/library/windows/apps/mt187274).</span></span> <span data-ttu-id="4be66-157">ブラシについては、アクティブになる可能性のある 3 種類のテーマごとに、各ブラシの色の値を表形式で示しています。</span><span class="sxs-lookup"><span data-stu-id="4be66-157">The brushes are documented in a table that tells you what color value each brush has for each of the three possible active themes.</span></span>

<span data-ttu-id="4be66-158">コントロール テンプレートの表示状態の XAML 定義では、テーマの変更によって変更される可能性がある基になるリソースがある場合は常に **ThemeResource** 参照を使う必要があります。</span><span class="sxs-lookup"><span data-stu-id="4be66-158">The XAML definitions of visual states in a control template should use **ThemeResource** references whenever there's an underlying resource that might change because of a theme change.</span></span> <span data-ttu-id="4be66-159">通常、システム テーマが変更されても、表示状態の変更は発生しません。</span><span class="sxs-lookup"><span data-stu-id="4be66-159">A system theme change won't typically also cause a visual state change.</span></span> <span data-ttu-id="4be66-160">この場合、リソースでは、**ThemeResource** 参照を使って、依然アクティブな表示状態に対して値を再評価できるようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="4be66-160">The resources need to use **ThemeResource** references in this case so that values can be re-evaluated for the still-active visual state.</span></span> <span data-ttu-id="4be66-161">たとえば、特定の UI 部分のブラシの色とそのプロパティの 1 つを変更する表示状態があり、そのブラシの色がテーマごとに異なる場合は、**ThemeResource** 参照を使って、既定のテンプレートのこのプロパティ値と、その既定のテンプレートに対する表示状態の変更を提供する必要があります。</span><span class="sxs-lookup"><span data-stu-id="4be66-161">For example, if you have a visual state that changes a brush color of a particular UI part and one of its properties, and that brush color is different per-theme, you should use a **ThemeResource** reference for providing that property's value in the default template and also any visual state modification to that default template.</span></span>

<span data-ttu-id="4be66-162">**ThemeResource** は、一連の依存型の値で使われる場合があります。</span><span class="sxs-lookup"><span data-stu-id="4be66-162">**ThemeResource** usages might be seen in a series of dependent values.</span></span> <span data-ttu-id="4be66-163">たとえば、キーを持つリソースである [**SolidColorBrush**](https://msdn.microsoft.com/library/windows/apps/br242962) で使われる [**Color**](https://msdn.microsoft.com/library/windows/apps/hh673723) で **ThemeResource** 参照を使うことがあります。</span><span class="sxs-lookup"><span data-stu-id="4be66-163">For example, a [**Color**](https://msdn.microsoft.com/library/windows/apps/hh673723) value used by a [**SolidColorBrush**](https://msdn.microsoft.com/library/windows/apps/br242962) that is also a keyed resource might use a **ThemeResource** reference.</span></span> <span data-ttu-id="4be66-164">ただし、キーを持つ **SolidColorBrush** リソースを使う任意の UI プロパティで **ThemeResource** 参照を使うこともあります。この場合、テーマが変更されたときに動的な値の変更を可能にするのはそれぞれの [**Brush**](/uwp/api/Windows.UI.Xaml.Media.Brush) タイプのプロパティです。</span><span class="sxs-lookup"><span data-stu-id="4be66-164">But any UI properties that use the keyed **SolidColorBrush** resource would also use a **ThemeResource** reference, so that it's specifically each [**Brush**](/uwp/api/Windows.UI.Xaml.Media.Brush)-type property that's enabling a dynamic value change when the theme changes.</span></span>

<span data-ttu-id="4be66-165">**注:** `{ThemeResource}`とテーマ切り替え実行時のリソースの評価が Windows8.1 XAML でサポートされていますが、Windows8 をターゲットとするアプリの XAML でサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="4be66-165">**Note**`{ThemeResource}` and run-time resource evaluation on theme switching is supported in Windows8.1 XAML but not supported in XAML for apps targeting Windows8.</span></span>

### <a name="system-resources"></a><span data-ttu-id="4be66-166">システム リソース</span><span class="sxs-lookup"><span data-stu-id="4be66-166">System resources</span></span>

<span data-ttu-id="4be66-167">一部のテーマ リソースは、システム リソース値を基になるサブ値として参照します。</span><span class="sxs-lookup"><span data-stu-id="4be66-167">Some theme resources reference system resource values as an underlying sub-value.</span></span> <span data-ttu-id="4be66-168">システム リソースは、どの XAML リソース ディクショナリにも含まれていない特殊なリソース値です。</span><span class="sxs-lookup"><span data-stu-id="4be66-168">A system resource is a special resource value that isn't found in any XAML resource dictionary.</span></span> <span data-ttu-id="4be66-169">これらの値は、Windows ランタイム XAML サポートの動作に依存してシステム自体から値を転送し、XAML リソースが参照できる形式でその値を表します。</span><span class="sxs-lookup"><span data-stu-id="4be66-169">These values rely on behavior in Windows Runtime XAML support to forward values from the system itself, and represent them in a form that a XAML resource can reference.</span></span> <span data-ttu-id="4be66-170">たとえば、"SystemColorButtonFaceColor" という名前の、RGB 色を表すシステム リソースがあります。</span><span class="sxs-lookup"><span data-stu-id="4be66-170">For example, there is a system resource named "SystemColorButtonFaceColor" that represents an RGB color.</span></span> <span data-ttu-id="4be66-171">この色は、Windows ランタイムと Windows ランタイム アプリだけに限定されないシステム カラーとテーマの観点に基づきます。</span><span class="sxs-lookup"><span data-stu-id="4be66-171">This color comes from the aspects of system colors and themes that aren't just specific to Windows Runtime and Windows Runtime apps.</span></span>

<span data-ttu-id="4be66-172">通常、システム リソースは、ハイ コントラスト テーマの基になる値です。</span><span class="sxs-lookup"><span data-stu-id="4be66-172">System resources are often the underlying values for a high-contrast theme.</span></span> <span data-ttu-id="4be66-173">ユーザーはハイ コントラスト テーマの色の選択を管理します。ユーザーは、同様に Windows ランタイム アプリに固有ではないシステム機能を使って、これらの選択を行います。</span><span class="sxs-lookup"><span data-stu-id="4be66-173">The user is in control of the color choices for their high-contrast theme, and the user makes these choices using system features that also aren't specific to Windows Runtime apps.</span></span> <span data-ttu-id="4be66-174">システム リソースを **ThemeResource** 参照として参照すると、Windows ランタイム アプリのハイ コントラスト テーマの既定の動作で、ユーザーによって制御されシステムによって公開される、テーマに固有のこれらの値を使うことができます。</span><span class="sxs-lookup"><span data-stu-id="4be66-174">By referencing the system resources as **ThemeResource** references, the default behavior of the high-contrast themes for Windows Runtime apps can use these theme-specific values that are controlled by the user and exposed by the system.</span></span> <span data-ttu-id="4be66-175">また、これらの参照は、システムによって実行時のテーマの変更が検出された場合に再評価のマークが付けられます。</span><span class="sxs-lookup"><span data-stu-id="4be66-175">Also, the references are now marked for re-evaluation if the system detects a run-time theme change.</span></span>

### <a name="an-example-themeresource-usage"></a><span data-ttu-id="4be66-176">{ThemeResource} の使用例</span><span class="sxs-lookup"><span data-stu-id="4be66-176">An example {ThemeResource} usage</span></span>

<span data-ttu-id="4be66-177">**ThemeResource** の使い方の例として、既定の generic.xaml ファイルと themeresources.xaml ファイルから抜粋した XAML の例を示します。</span><span class="sxs-lookup"><span data-stu-id="4be66-177">Here's some example XAML taken from the default generic.xaml and themeresources.xaml files to illustrate how to use **ThemeResource**.</span></span> <span data-ttu-id="4be66-178">ここでは、1 つのテンプレート (既定の [**Button**](https://msdn.microsoft.com/library/windows/apps/br209265)) と、テーマの変更に対応するための 2 つのプロパティ ([**Background**](https://msdn.microsoft.com/library/windows/apps/br209395) と [**Foreground**](https://msdn.microsoft.com/library/windows/apps/br209414)) の宣言方法について注目します。</span><span class="sxs-lookup"><span data-stu-id="4be66-178">We'll look at just one template (the default [**Button**](https://msdn.microsoft.com/library/windows/apps/br209265)) and how two properties are declared ([**Background**](https://msdn.microsoft.com/library/windows/apps/br209395) and [**Foreground**](https://msdn.microsoft.com/library/windows/apps/br209414)) to be responsive to theme changes.</span></span>

```xml
    <!-- Default style for Windows.UI.Xaml.Controls.Button -->
    <Style TargetType="Button">
        <Setter Property="Background" Value="{ThemeResource ButtonBackgroundThemeBrush}" />
        <Setter Property="Foreground" Value="{ThemeResource ButtonForegroundThemeBrush}"/>
...
```

<span data-ttu-id="4be66-179">ここで、これらのプロパティは [**Brush**](/uwp/api/Windows.UI.Xaml.Media.Brush) 値を受け取ります。[**SolidColorBrush**](https://msdn.microsoft.com/library/windows/apps/br242962) リソース (`ButtonBackgroundThemeBrush` と `ButtonForegroundThemeBrush`) の参照には、**ThemeResource** が使われています。</span><span class="sxs-lookup"><span data-stu-id="4be66-179">Here, the properties take a [**Brush**](/uwp/api/Windows.UI.Xaml.Media.Brush) value, and the reference to [**SolidColorBrush**](https://msdn.microsoft.com/library/windows/apps/br242962) resources named `ButtonBackgroundThemeBrush` and `ButtonForegroundThemeBrush` are made using **ThemeResource**.</span></span>

<span data-ttu-id="4be66-180">これらの同じプロパティは、[**Button**](https://msdn.microsoft.com/library/windows/apps/br209265) の表示状態のいくつかによっても調整されます。</span><span class="sxs-lookup"><span data-stu-id="4be66-180">These same properties are also adjusted by some of the visual states for a [**Button**](https://msdn.microsoft.com/library/windows/apps/br209265).</span></span> <span data-ttu-id="4be66-181">特に、背景色は、ボタンをクリックしたときに変更されます。</span><span class="sxs-lookup"><span data-stu-id="4be66-181">Notably, the background color changes when a button is clicked.</span></span> <span data-ttu-id="4be66-182">同様に、表示状態のストーリーボードの [**Background**](https://msdn.microsoft.com/library/windows/apps/br209395) と [**Foreground**](https://msdn.microsoft.com/library/windows/apps/br209414) のアニメーションでは、[**DiscreteObjectKeyFrame**](https://msdn.microsoft.com/library/windows/apps/br243132) オブジェクトと共に、キー フレーム値として **ThemeResource** を含むブラシへの参照を使っています。</span><span class="sxs-lookup"><span data-stu-id="4be66-182">Here too, the [**Background**](https://msdn.microsoft.com/library/windows/apps/br209395) and [**Foreground**](https://msdn.microsoft.com/library/windows/apps/br209414) animations in the visual state storyboard use [**DiscreteObjectKeyFrame**](https://msdn.microsoft.com/library/windows/apps/br243132) objects and references to brushes with **ThemeResource** as the key frame value.</span></span>

```xml
<VisualState x:Name="Pressed">
  <Storyboard>
    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Border"
        Storyboard.TargetProperty="Background">
      <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ButtonPressedBackgroundThemeBrush}" />
    </ObjectAnimationUsingKeyFrames>
    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
         Storyboard.TargetProperty="Foreground">
       <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ButtonPressedForegroundThemeBrush}" />
    </ObjectAnimationUsingKeyFrames>
  </Storyboard>
</VisualState>
```

<span data-ttu-id="4be66-183">これらのブラシはそれぞれ generic.xaml で事前に定義されています。XAML の前方参照を避けるためには、これらのブラシは、これを使う任意のテンプレートに先だって定義されている必要があります。</span><span class="sxs-lookup"><span data-stu-id="4be66-183">Each of these brushes is defined earlier in generic.xaml: they had to be defined prior to any templates using them to avoid XAML forward references.</span></span> <span data-ttu-id="4be66-184">"Default" テーマ ディクショナリのための定義を次に示します。</span><span class="sxs-lookup"><span data-stu-id="4be66-184">Here's those definitions, for the "Default" theme dictionary.</span></span>

```xml
    <ResourceDictionary.ThemeDictionaries>
        <ResourceDictionary x:Key="Default">
...
            <SolidColorBrush x:Key="ButtonBackgroundThemeBrush" Color="Transparent" />
            <SolidColorBrush x:Key="ButtonForegroundThemeBrush" Color="#FFFFFFFF" />
...
            <SolidColorBrush x:Key="ButtonPressedBackgroundThemeBrush" Color="#FFFFFFFF" />
            <SolidColorBrush x:Key="ButtonPressedForegroundThemeBrush" Color="#FF000000" />
...
```

<span data-ttu-id="4be66-185">他の各テーマ ディクショナリにも、次に示すようにこれらのブラシが定義されています。</span><span class="sxs-lookup"><span data-stu-id="4be66-185">Then each of the other theme dictionaries also has these brushes defined, for example:</span></span>

```xml
        <ResourceDictionary x:Key="HighContrast">
            <!-- High Contrast theme resources -->
...
            <SolidColorBrush x:Key="ButtonBackgroundThemeBrush" Color="{ThemeResource SystemColorButtonFaceColor}" />
            <SolidColorBrush x:Key="ButtonForegroundThemeBrush" Color="{ThemeResource SystemColorButtonTextColor}" />

...
            <SolidColorBrush x:Key="ButtonPressedBackgroundThemeBrush" Color="{ThemeResource SystemColorButtonTextColor}" />
            <SolidColorBrush x:Key="ButtonPressedForegroundThemeBrush" Color="{ThemeResource SystemColorButtonFaceColor}" />
```

<span data-ttu-id="4be66-186">この [**Color**](/uwp/api/Windows.UI.Xaml.Media.SolidColorBrush.Color) 値は、システム リソースに対するもう 1 つの **ThemeResource** 参照です。</span><span class="sxs-lookup"><span data-stu-id="4be66-186">Here the [**Color**](/uwp/api/Windows.UI.Xaml.Media.SolidColorBrush.Color) value is another **ThemeResource** reference to a system resource.</span></span> <span data-ttu-id="4be66-187">システム リソースを参照し、テーマの変更に応じてシステム リソースを変更する場合は、**ThemeResource** を使って参照を行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="4be66-187">If you reference a system resource, and you want it to change in response to a theme change, you should use **ThemeResource** to make the reference.</span></span>

## <a name="windows8-behavior"></a><span data-ttu-id="4be66-188">Windows8 動作</span><span class="sxs-lookup"><span data-stu-id="4be66-188">Windows8 behavior</span></span>

<span data-ttu-id="4be66-189">Windows8 **ThemeResource**マークアップ拡張機能をサポートしていませんが、Windows8.1 で利用できます。</span><span class="sxs-lookup"><span data-stu-id="4be66-189">Windows8 did not support the **ThemeResource** markup extension, it is available starting with Windows8.1.</span></span> <span data-ttu-id="4be66-190">また、Windows8 では、Windows ランタイム アプリのテーマに関連するリソースを動的に切り替えしなかったできません。</span><span class="sxs-lookup"><span data-stu-id="4be66-190">Also, Windows8 did not support dynamically switching the theme-related resources for a Windows Runtime app.</span></span> <span data-ttu-id="4be66-191">XAML テンプレートとスタイルのテーマ変更を認識するには、アプリを再起動する必要がありました。</span><span class="sxs-lookup"><span data-stu-id="4be66-191">The app had to be restarted in order to pick up the theme change for the XAML templates and styles.</span></span> <span data-ttu-id="4be66-192">これは、手順は、優れたユーザー エクスペリエンスのためアプリを再コンパイルしてターゲット Windows8.1 を強くお勧めできるように、 **ThemeResource**使用法とスタイルを使用してには、ユーザーがときに、テーマを動的に切り替えることができます。</span><span class="sxs-lookup"><span data-stu-id="4be66-192">This isn't a good user experience, so apps are strongly encouraged to recompile and target Windows8.1 so that they can use styles with **ThemeResource** usages and can dynamically switch themes when the user does.</span></span> <span data-ttu-id="4be66-193">Windows8 が Windows8.1 で実行されている Windows8 動作を使い続ける用にコンパイルしたアプリ。</span><span class="sxs-lookup"><span data-stu-id="4be66-193">Apps that were compiled for Windows8 but running on Windows8.1 continue to use the Windows8 behavior.</span></span>

## <a name="design-time-tools-support-for-the-themeresource-markup-extension"></a><span data-ttu-id="4be66-194">設計時ツールの **{ThemeResource}** マークアップ拡張のサポート</span><span class="sxs-lookup"><span data-stu-id="4be66-194">Design-time tools support for the **{ThemeResource}** markup extension</span></span>

<span data-ttu-id="4be66-195">Microsoft Visual Studio2013 は、XAML ページで、 **{ThemeResource}** マークアップ拡張機能を使用する場合、Microsoft IntelliSense のドロップダウンに可能なキー値を含めることができます。</span><span class="sxs-lookup"><span data-stu-id="4be66-195">Microsoft Visual Studio2013 can include possible key values in the Microsoft IntelliSense dropdowns when you use the **{ThemeResource}** markup extension in a XAML page.</span></span> <span data-ttu-id="4be66-196">たとえば、「{ThemeResource」と入力するとすぐに、[XAML テーマ リソース](https://msdn.microsoft.com/library/windows/apps/mt187274)のリソース キーが表示されます。</span><span class="sxs-lookup"><span data-stu-id="4be66-196">For example, as soon as you type "{ThemeResource", any of the resource keys from the [XAML theme resources](https://msdn.microsoft.com/library/windows/apps/mt187274) are displayed.</span></span>

<span data-ttu-id="4be66-197">**{ThemeResource}** の一部としてリソース キーが存在すると、**[定義へ移動]** (F12 キー) 機能でそのリソースを解決して、テーマ リソースが定義されている設計時の generic.xaml を表示できます。</span><span class="sxs-lookup"><span data-stu-id="4be66-197">Once a resource key exists as part of any **{ThemeResource}** usage, the **Go To Definition** (F12) feature can resolve that resource and show you the generic.xaml for design time, where the theme resource is defined.</span></span> <span data-ttu-id="4be66-198">テーマ リソースを何度も定義されるため (テーマごとに)、**[定義へ移動]** ではファイルで見つかった最初の定義に移動します。これは **Default** の定義です。</span><span class="sxs-lookup"><span data-stu-id="4be66-198">Because theme resources are defined more than once (per-theme) **Go To Definition** takes you to the first definition found in the file, which is the definition for **Default**.</span></span> <span data-ttu-id="4be66-199">他の定義が必要な場合は、ファイル内のキー名を検索して、他のテーマの定義を参照できます。</span><span class="sxs-lookup"><span data-stu-id="4be66-199">If you want the other definitions you can search for the key name within the file and find the other themes' definitions.</span></span>

## <a name="related-topics"></a><span data-ttu-id="4be66-200">関連トピック</span><span class="sxs-lookup"><span data-stu-id="4be66-200">Related topics</span></span>

* [<span data-ttu-id="4be66-201">ResourceDictionary と XAML リソースの参照</span><span class="sxs-lookup"><span data-stu-id="4be66-201">ResourceDictionary and XAML resource references</span></span>](https://msdn.microsoft.com/library/windows/apps/mt187273)
* [<span data-ttu-id="4be66-202">XAML テーマ リソース</span><span class="sxs-lookup"><span data-stu-id="4be66-202">XAML theme resources</span></span>](https://msdn.microsoft.com/library/windows/apps/mt187274)
* [**<span data-ttu-id="4be66-203">ResourceDictionary</span><span class="sxs-lookup"><span data-stu-id="4be66-203">ResourceDictionary</span></span>**](https://msdn.microsoft.com/library/windows/apps/br208794)
* [<span data-ttu-id="4be66-204">x:Key 属性</span><span class="sxs-lookup"><span data-stu-id="4be66-204">x:Key attribute</span></span>](x-key-attribute.md)
 

