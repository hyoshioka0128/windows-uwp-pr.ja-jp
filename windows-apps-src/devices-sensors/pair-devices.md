---
ms.assetid: F8A741B4-7A6A-4160-8C5D-6B92E267E6EA
title: デバイスのペアリング
description: 一部のデバイスは、使う前にペアリングする必要があります。 Windows.Devices.Enumeration 名前空間では、デバイスをペアリングするための 3 つの異なる方法がサポートされています。
ms.date: 02/08/2017
ms.topic: article
keywords: Windows 10, UWP
ms.localizationpriority: medium
ms.openlocfilehash: ccff9d892fbedc62cf1b54e374a0071877805731
ms.sourcegitcommit: a3dc929858415b933943bba5aa7487ffa721899f
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/07/2018
ms.locfileid: "8780640"
---
# <a name="pair-devices"></a><span data-ttu-id="db77b-105">デバイスのペアリング</span><span class="sxs-lookup"><span data-stu-id="db77b-105">Pair devices</span></span>



**<span data-ttu-id="db77b-106">重要な API</span><span class="sxs-lookup"><span data-stu-id="db77b-106">Important APIs</span></span>**

- [**<span data-ttu-id="db77b-107">Windows.Devices.Enumeration</span><span class="sxs-lookup"><span data-stu-id="db77b-107">Windows.Devices.Enumeration</span></span>**](https://docs.microsoft.com/en-us/uwp/api/Windows.Devices.Enumeration)

<span data-ttu-id="db77b-108">一部のデバイスは、使う前にペアリングする必要があります。</span><span class="sxs-lookup"><span data-stu-id="db77b-108">Some devices need to be paired before they can be used.</span></span> <span data-ttu-id="db77b-109">[**Windows.Devices.Enumeration**](https://msdn.microsoft.com/library/windows/apps/BR225459) 名前空間では、デバイスをペアリングするための 3 つの異なる方法がサポートされています。</span><span class="sxs-lookup"><span data-stu-id="db77b-109">The [**Windows.Devices.Enumeration**](https://msdn.microsoft.com/library/windows/apps/BR225459) namespace supports three different ways to pair devices.</span></span>

-   <span data-ttu-id="db77b-110">自動ペアリング</span><span class="sxs-lookup"><span data-stu-id="db77b-110">Automatic pairing</span></span>
-   <span data-ttu-id="db77b-111">基本ペアリング</span><span class="sxs-lookup"><span data-stu-id="db77b-111">Basic pairing</span></span>
-   <span data-ttu-id="db77b-112">カスタム ペアリング</span><span class="sxs-lookup"><span data-stu-id="db77b-112">Custom pairing</span></span>

<span data-ttu-id="db77b-113">**ヒント:** 一部のデバイスを使用するためにペアリングする必要はありません。</span><span class="sxs-lookup"><span data-stu-id="db77b-113">**Tip**Some devices do not need to be paired in order to be used.</span></span> <span data-ttu-id="db77b-114">これについては、自動ペアリングに関するセクションで説明します。</span><span class="sxs-lookup"><span data-stu-id="db77b-114">This is covered under the section on automatic pairing.</span></span>

 

## <a name="automatic-pairing"></a><span data-ttu-id="db77b-115">自動ペアリング</span><span class="sxs-lookup"><span data-stu-id="db77b-115">Automatic pairing</span></span>


<span data-ttu-id="db77b-116">アプリケーションでデバイスを使いたいが、デバイスがペアリングされているかどうかは重要でない場合があります。</span><span class="sxs-lookup"><span data-stu-id="db77b-116">Sometimes you want to use a device in your application, but do not care whether or not the device is paired.</span></span> <span data-ttu-id="db77b-117">単に、デバイスに関連付けられている機能を使用できるようにする場合です。</span><span class="sxs-lookup"><span data-stu-id="db77b-117">You simply want to be able to use the functionality associated with a device.</span></span> <span data-ttu-id="db77b-118">たとえば、アプリで Web カメラからイメージをキャプチャするだけの場合、必ずしもデバイス自体ではなく、イメージのキャプチャだけが重要となります。</span><span class="sxs-lookup"><span data-stu-id="db77b-118">For example, if your app wants to simply capture an image from a webcam, you are not necessarily interested in the device itself, just the image capture.</span></span> <span data-ttu-id="db77b-119">対象のデバイスで使用できるデバイス API がある場合は、自動ペアリングが該当します。</span><span class="sxs-lookup"><span data-stu-id="db77b-119">If there are device APIs available for the device you are interested in, this scenario would fall under automatic pairing.</span></span>

<span data-ttu-id="db77b-120">この場合は、単にデバイスに関連付けられている API を使い、必要に応じて呼び出しを行い、必要になる可能性のあるペアリングをシステムが処理することを信頼します。</span><span class="sxs-lookup"><span data-stu-id="db77b-120">In this case, you simply use the APIs associated with the device, making the calls as necessary and trusting the system to handle any pairing that might be necessary.</span></span> <span data-ttu-id="db77b-121">機能を使うためにペアリングする必要がないデバイスもあります。</span><span class="sxs-lookup"><span data-stu-id="db77b-121">Some devices do not need to be paired in order for you to use their functionality.</span></span> <span data-ttu-id="db77b-122">デバイスをペアリングする必要がない場合、デバイス API はバックグラウンドでペアリング アクションを処理するため、アプリにその機能を統合する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="db77b-122">If the device does need to be paired, then the device APIs will handle the pairing action behind the scenes so you do not need to integrate that functionality into your app.</span></span> <span data-ttu-id="db77b-123">アプリには、特定のデバイスがペアリングされているかや、ペアリングする必要があるかどうかに関する情報がありませんが、それでもデバイスにアクセスし、その機能を使うことができます。</span><span class="sxs-lookup"><span data-stu-id="db77b-123">Your app will have no knowledge about whether or not a given device is paired or needs to be, but you will still be able to access the device and use its functionality.</span></span>

## <a name="basic-pairing"></a><span data-ttu-id="db77b-124">基本ペアリング</span><span class="sxs-lookup"><span data-stu-id="db77b-124">Basic pairing</span></span>


<span data-ttu-id="db77b-125">基本ペアリングは、アプリケーションがデバイスのペアリングを試行するために [**Windows.Devices.Enumeration**](https://msdn.microsoft.com/library/windows/apps/BR225459) API を使うときに行われます。</span><span class="sxs-lookup"><span data-stu-id="db77b-125">Basic pairing is when your application uses the [**Windows.Devices.Enumeration**](https://msdn.microsoft.com/library/windows/apps/BR225459) APIs in order to attempt to pair the device.</span></span> <span data-ttu-id="db77b-126">このシナリオでは、Windows にペアリングの試行とその処理を許可します。</span><span class="sxs-lookup"><span data-stu-id="db77b-126">In this scenario, you are letting Windows attempt the pairing process and handle it.</span></span> <span data-ttu-id="db77b-127">ユーザーの操作が必要な場合は、Windows によって処理されます。</span><span class="sxs-lookup"><span data-stu-id="db77b-127">If any user interaction is necessary, it will be handled by Windows.</span></span> <span data-ttu-id="db77b-128">また、デバイスのペアリングが必要な場合や、自動ペアリングを試行する、関連するデバイス API がない場合も、基本ペアリングを使用します。</span><span class="sxs-lookup"><span data-stu-id="db77b-128">You would use basic pairing if you need to pair with a device and there is not a relevant device API that will attempt automatic pairing.</span></span> <span data-ttu-id="db77b-129">単に、デバイスを使用できるようにする場合でも、最初にペアリングする必要があります。</span><span class="sxs-lookup"><span data-stu-id="db77b-129">You just want to be able to use the device and need to pair with it first.</span></span>

<span data-ttu-id="db77b-130">基本ペアリングを試行するためには、対象のデバイス用の [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) オブジェクトを最初に入手する必要があります。</span><span class="sxs-lookup"><span data-stu-id="db77b-130">In order to attempt basic pairing, you first need to obtain the [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) object for the device you are interested in.</span></span> <span data-ttu-id="db77b-131">オブジェクトを入手したら、[**DeviceInformation.Pairing**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.pairing.aspx) プロパティを操作します。これは、[**DeviceInformationPairing**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.pairing.aspx) オブジェクトです。</span><span class="sxs-lookup"><span data-stu-id="db77b-131">Once you receive that object, you will interact with the [**DeviceInformation.Pairing**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.pairing.aspx) property, which is a [**DeviceInformationPairing**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.pairing.aspx) object.</span></span> <span data-ttu-id="db77b-132">ペアリングを試みるには、[**DeviceInformationPairing.PairAsync**](https://msdn.microsoft.com/library/windows/apps/mt608800) を呼び出します。</span><span class="sxs-lookup"><span data-stu-id="db77b-132">To attempt to pair, simply call [**DeviceInformationPairing.PairAsync**](https://msdn.microsoft.com/library/windows/apps/mt608800).</span></span> <span data-ttu-id="db77b-133">ペアリング アクションの完了を試みる時間をアプリに与えるために、結果を **await** する必要があります。</span><span class="sxs-lookup"><span data-stu-id="db77b-133">You will need to **await** the result in order to give your app time to attempt to complete the pairing action.</span></span> <span data-ttu-id="db77b-134">ペアリング アクションの結果が返され、エラーが返されない限り、デバイスはペアリングされます。</span><span class="sxs-lookup"><span data-stu-id="db77b-134">The result of the pairing action will be returned, and as long as no errors are returned, the device will be paired.</span></span>

<span data-ttu-id="db77b-135">基本ペアリングを使っている場合は、デバイスのペアリング状態に関する追加情報にもアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="db77b-135">If you are using basic pairing, you also have access to additional information about the pairing status of the device.</span></span> <span data-ttu-id="db77b-136">たとえば、ペアリング状態 ([**IsPaired**](https://docs.microsoft.com/en-us/uwp/api/Windows.Devices.Enumeration.DeviceInformationPairing.IsPaired)) と、デバイスがペアリングできるかどうか ([**CanPair**](https://docs.microsoft.com/en-us/uwp/api/Windows.Devices.Enumeration.DeviceInformationPairing.CanPair)) がわかります。</span><span class="sxs-lookup"><span data-stu-id="db77b-136">For example you know the pairing status ([**IsPaired**](https://docs.microsoft.com/en-us/uwp/api/Windows.Devices.Enumeration.DeviceInformationPairing.IsPaired)) and whether the device can pair ([**CanPair**](https://docs.microsoft.com/en-us/uwp/api/Windows.Devices.Enumeration.DeviceInformationPairing.CanPair)).</span></span> <span data-ttu-id="db77b-137">これらはどちらも [**DeviceInformationPairing**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.pairing.aspx) オブジェクトのプロパティです。</span><span class="sxs-lookup"><span data-stu-id="db77b-137">Both of these are properties of the [**DeviceInformationPairing**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.pairing.aspx) object.</span></span> <span data-ttu-id="db77b-138">自動ペアリングを使っている場合、該当する [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) オブジェクトを入手しない限り、この情報にアクセスできない可能性があります。</span><span class="sxs-lookup"><span data-stu-id="db77b-138">If you are using automatic pairing, you might not have access to this information unless you obtain the relevant [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) objects.</span></span>

## <a name="custom-pairing"></a><span data-ttu-id="db77b-139">カスタム ペアリング</span><span class="sxs-lookup"><span data-stu-id="db77b-139">Custom pairing</span></span>


<span data-ttu-id="db77b-140">カスタム ペアリングでは、アプリでペアリング プロセスを処理できます。</span><span class="sxs-lookup"><span data-stu-id="db77b-140">Custom pairing enables your app to participate in the pairing process.</span></span> <span data-ttu-id="db77b-141">これにより、アプリはペアリング プロセス用にサポートされている [**DevicePairingKinds**](https://msdn.microsoft.com/library/windows/apps/Mt608808) を指定できます。</span><span class="sxs-lookup"><span data-stu-id="db77b-141">This allows your app to specify the [**DevicePairingKinds**](https://msdn.microsoft.com/library/windows/apps/Mt608808) that are supported for the pairing process.</span></span> <span data-ttu-id="db77b-142">必要に応じて、ユーザーと対話する独自のユーザー インターフェイスも作成します。</span><span class="sxs-lookup"><span data-stu-id="db77b-142">You will also be responsible for creating your own user interface to interact with the user as needed.</span></span> <span data-ttu-id="db77b-143">ペアリング プロセスの進行に対するアプリの影響を少し高めたり、独自のペアリング ユーザー インターフェイスを表示するときに、カスタム ペアリングを使います。</span><span class="sxs-lookup"><span data-stu-id="db77b-143">Use custom pairing when you want your app to have a little more influence over how the pairing process proceeds or to display your own pairing user interface.</span></span>

<span data-ttu-id="db77b-144">カスタム ペアリングを実装するためには、基本ペアリングと同じように、対象のデバイス用の [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) オブジェクトを入手する必要があります。</span><span class="sxs-lookup"><span data-stu-id="db77b-144">In order to implement custom pairing, you will need to obtain the [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) object for the device you are interested in, just like with basic pairing.</span></span> <span data-ttu-id="db77b-145">ただし、重要な特定のプロパティは [**DeviceInformation.Pairing.Custom**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformationpairing.custom.aspx) になります。</span><span class="sxs-lookup"><span data-stu-id="db77b-145">However, the specific property your are interested in is [**DeviceInformation.Pairing.Custom**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformationpairing.custom.aspx).</span></span> <span data-ttu-id="db77b-146">これにより、[**DeviceInformationCustomPairing**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformationcustompairing.aspx) オブジェクトを取得できます。</span><span class="sxs-lookup"><span data-stu-id="db77b-146">This will give you a [**DeviceInformationCustomPairing**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformationcustompairing.aspx) object.</span></span> <span data-ttu-id="db77b-147">すべての [**DeviceInformationCustomPairing.PairAsync**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformationcustompairing.pairasync.aspx) メソッドでは、[**DevicePairingKinds**](https://msdn.microsoft.com/library/windows/apps/Mt608808) パラメーターを含める必要があります。</span><span class="sxs-lookup"><span data-stu-id="db77b-147">All of the [**DeviceInformationCustomPairing.PairAsync**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformationcustompairing.pairasync.aspx) methods require you to include a [**DevicePairingKinds**](https://msdn.microsoft.com/library/windows/apps/Mt608808) parameter.</span></span> <span data-ttu-id="db77b-148">これは、デバイスのペアリングを試みるためにユーザーが必要とするアクションを示します。</span><span class="sxs-lookup"><span data-stu-id="db77b-148">This indicates the actions that the user will need to take in order to attempt to pair the device.</span></span> <span data-ttu-id="db77b-149">ユーザーが実行する必要があるアクションとその種類について詳しくは、**DevicePairingKinds** のリファレンス ページをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="db77b-149">See the **DevicePairingKinds** reference page for more information about the different kinds and what actions the user will need to take.</span></span> <span data-ttu-id="db77b-150">基本ペアリングと同様に、ペアリング アクションの完了を試みる時間をアプリに与えるために、結果を **await** する必要があります。</span><span class="sxs-lookup"><span data-stu-id="db77b-150">Just like with basic pairing, you will need to **await** the result in order to give your app time to attempt to complete the pairing action.</span></span> <span data-ttu-id="db77b-151">ペアリング アクションの結果が返され、エラーが返されない限り、デバイスはペアリングされます。</span><span class="sxs-lookup"><span data-stu-id="db77b-151">The result of the pairing action will be returned, and as long as no errors are returned, the device will be paired.</span></span>

<span data-ttu-id="db77b-152">カスタム ペアリングをサポートするため、[**PairingRequested**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformationcustompairing.pairingrequested.aspx) イベントのハンドラーを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="db77b-152">To support custom pairing, you will need to create a handler for the [**PairingRequested**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformationcustompairing.pairingrequested.aspx) event.</span></span> <span data-ttu-id="db77b-153">このハンドラーでは、カスタム ペアリング シナリオで使われる可能性のあるすべての異なる [**DevicePairingKinds**](https://msdn.microsoft.com/library/windows/apps/Mt608808) を必ず考慮する必要があります。</span><span class="sxs-lookup"><span data-stu-id="db77b-153">This handler needs to make sure to account for all the different [**DevicePairingKinds**](https://msdn.microsoft.com/library/windows/apps/Mt608808) that might be used in a custom pairing scenario.</span></span> <span data-ttu-id="db77b-154">実行する適切なアクションは、イベント引数の一部として提供される **DevicePairingKinds** によって異なります。</span><span class="sxs-lookup"><span data-stu-id="db77b-154">The appropriate action to take will depend on the **DevicePairingKinds** provided as part of the event arguments.</span></span>

<span data-ttu-id="db77b-155">カスタム ペアリングは常にシステム レベルの操作であることを認識することが重要です。</span><span class="sxs-lookup"><span data-stu-id="db77b-155">It is important to be aware that custom pairing is always a system-level operation.</span></span> <span data-ttu-id="db77b-156">このため、デスクトップまたは Windows Phone を操作している場合、ペアリングが発生するときに、システム ダイアログが常にユーザーに表示されます。</span><span class="sxs-lookup"><span data-stu-id="db77b-156">Because of this, when you are operating on Desktop or Windows Phone, a system dialog will always be shown to the user when pairing is going to happen.</span></span> <span data-ttu-id="db77b-157">これは、これらの両方のプラットフォームが、ユーザーの同意を必要とするユーザー エクスペリエンスを発生させるためです。</span><span class="sxs-lookup"><span data-stu-id="db77b-157">This is because both of those platforms posses a user experience that requires user consent.</span></span> <span data-ttu-id="db77b-158">このダイアログは自動的に生成されるため、これらのプラットフォームを使用中に **ConfirmOnly** の [**DevicePairingKinds**](https://msdn.microsoft.com/library/windows/apps/Mt608808) を選ぶ場合に、独自のダイアログを作る必要はありません。</span><span class="sxs-lookup"><span data-stu-id="db77b-158">Since that dialog is automatically generated, you will not need to create your own dialog when you are opting for a [**DevicePairingKinds**](https://msdn.microsoft.com/library/windows/apps/Mt608808) of **ConfirmOnly** when operating on these platforms.</span></span> <span data-ttu-id="db77b-159">他の **DevicePairingKinds** については、特定の **DevicePairingKinds** 値に応じて、いくつかの特別な処理を実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="db77b-159">For the other **DevicePairingKinds**, you will need to perform some special handling depending on the specific **DevicePairingKinds** value.</span></span> <span data-ttu-id="db77b-160">さまざまな **DevicePairingKinds** の値のカスタム ペアリングを処理する方法の例については、サンプルをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="db77b-160">See the sample for examples of how to handle custom pairing for different **DevicePairingKinds** values.</span></span>

## <a name="unpairing"></a><span data-ttu-id="db77b-161">ペアリング解除</span><span class="sxs-lookup"><span data-stu-id="db77b-161">Unpairing</span></span>


<span data-ttu-id="db77b-162">デバイスのペアリング解除が該当するのは、上記で説明した基本ペアリングまたはカスタム ペアリングのシナリオのみです。</span><span class="sxs-lookup"><span data-stu-id="db77b-162">Unpairing a device is only relevant in the basic or custom pairing scenarios described above.</span></span> <span data-ttu-id="db77b-163">自動ペアリングを使っている場合、アプリはデバイスのペアリング状態を記憶しないため、ペアリング解除する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="db77b-163">If you are using automatic pairing, your app remains oblivious to the pairing status of the device and there is no need to unpair it.</span></span> <span data-ttu-id="db77b-164">それでもデバイスをペアリング解除する場合のプロセスは、実装するのが基本ペアリングまたはカスタム ペアリングかにかかわらず同じです。</span><span class="sxs-lookup"><span data-stu-id="db77b-164">If you do choose to unpair a device, the process is identical whether you implement basic or custom pairing.</span></span> <span data-ttu-id="db77b-165">これは、追加情報を提供したり、ペアリング解除プロセスにかかわったりする必要がないためです。</span><span class="sxs-lookup"><span data-stu-id="db77b-165">This is because there is no need to provide additional information or interact in the unpairing process.</span></span>

<span data-ttu-id="db77b-166">デバイスをペアリング解除する最初の手順は、ペアリング解除するデバイスの [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) オブジェクトを入手することです。</span><span class="sxs-lookup"><span data-stu-id="db77b-166">The first step to unpairing a device is obtaining the [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) object for the device that you want to unpair.</span></span> <span data-ttu-id="db77b-167">次に、[**DeviceInformation.Pairing**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.pairing.aspx) プロパティを取得し、[**DeviceInformationPairing.UnpairAsync**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformationpairing.unpairasync) を呼び出す必要があります。</span><span class="sxs-lookup"><span data-stu-id="db77b-167">Then you need to retrieve the [**DeviceInformation.Pairing**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.pairing.aspx) property and call [**DeviceInformationPairing.UnpairAsync**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformationpairing.unpairasync).</span></span> <span data-ttu-id="db77b-168">ペアリングと同様に、結果を **await** します。</span><span class="sxs-lookup"><span data-stu-id="db77b-168">Just like with pairing, you will want to **await** the result.</span></span> <span data-ttu-id="db77b-169">ペアリング解除アクションの結果が返され、エラーが返されない限り、デバイスはペアリング解除されます。</span><span class="sxs-lookup"><span data-stu-id="db77b-169">The result of the unpairing action will be returned, and as long as no errors are returned, the device will be unpaired.</span></span>

## <a name="sample"></a><span data-ttu-id="db77b-170">サンプル</span><span class="sxs-lookup"><span data-stu-id="db77b-170">Sample</span></span>


<span data-ttu-id="db77b-171">[**Windows.Devices.Enumeration**](https://msdn.microsoft.com/library/windows/apps/BR225459) API の使い方を示すサンプルをダウンロードするには、[ここ](http://go.microsoft.com/fwlink/?LinkID=620536)をクリックしてください。</span><span class="sxs-lookup"><span data-stu-id="db77b-171">To download a sample showing how to use the [**Windows.Devices.Enumeration**](https://msdn.microsoft.com/library/windows/apps/BR225459) APIs, click [here](http://go.microsoft.com/fwlink/?LinkID=620536).</span></span>

 

 
