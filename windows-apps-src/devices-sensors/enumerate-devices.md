---
author: muhsinking
ms.assetid: 4311D293-94F0-4BBD-A22D-F007382B4DB8
title: デバイスの列挙
description: 列挙用の名前空間によって、システムに内部接続されているデバイス、外部接続されているデバイス、ワイヤレス プロトコルまたはネットワーク プロトコル経由で検出できるデバイスを検索できます。
ms.author: mukin
ms.date: 02/08/2017
ms.topic: article
keywords: Windows 10, UWP
ms.localizationpriority: medium
ms.openlocfilehash: df6082665136442c03273dea4132417b0fd7033c
ms.sourcegitcommit: d0e836dfc937ebf7dfa9c424620f93f3c8e0a7e8
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/26/2018
ms.locfileid: "5653854"
---
# <a name="enumerate-devices"></a><span data-ttu-id="d4600-104">デバイスの列挙</span><span class="sxs-lookup"><span data-stu-id="d4600-104">Enumerate devices</span></span>


## <a name="samples"></a><span data-ttu-id="d4600-105">サンプル</span><span class="sxs-lookup"><span data-stu-id="d4600-105">Samples</span></span>

<span data-ttu-id="d4600-106">利用可能なデバイスすべてを列挙する最も簡単な方法は、(下のセクションで詳しく取り上げられているように) [**FindAllAsync**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.findallasync.aspx) コマンドを使用してスナップショットを取ることです。</span><span class="sxs-lookup"><span data-stu-id="d4600-106">The simplest way to enumerate all available devices is to take a snapshot with the [**FindAllAsync**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.findallasync.aspx) command (explained further in a section below).</span></span>

```CSharp
async void enumerateSnapshot(){
  DeviceInformationCollection collection = await DeviceInformation.FindAllAsync();
}
```

<span data-ttu-id="d4600-107">[**Windows.Devices.Enumeration**](https://msdn.microsoft.com/library/windows/apps/BR225459) API のより高度な使い方を示すサンプルをダウンロードするには、[ここ](http://go.microsoft.com/fwlink/?LinkID=620536)をクリックしてください。</span><span class="sxs-lookup"><span data-stu-id="d4600-107">To download a sample showing the more advanced usages of the [**Windows.Devices.Enumeration**](https://msdn.microsoft.com/library/windows/apps/BR225459) APIs, click [here](http://go.microsoft.com/fwlink/?LinkID=620536).</span></span>

## <a name="enumeration-apis"></a><span data-ttu-id="d4600-108">列挙 API</span><span class="sxs-lookup"><span data-stu-id="d4600-108">Enumeration APIs</span></span>

<span data-ttu-id="d4600-109">列挙用の名前空間によって、システムに内部接続されているデバイス、外部接続されているデバイス、ワイヤレス プロトコルまたはネットワーク プロトコル経由で検出できるデバイスを検索できます。</span><span class="sxs-lookup"><span data-stu-id="d4600-109">The enumeration namespace enables you to find devices that are internally connected to the system, externally connected, or detectable over wireless or networking protocols.</span></span> <span data-ttu-id="d4600-110">利用可能なデバイスを列挙するために使う API は、[**Windows.Devices.Enumeration**](https://msdn.microsoft.com/library/windows/apps/BR225459) 名前空間です。</span><span class="sxs-lookup"><span data-stu-id="d4600-110">The APIs that you use to enumerate through the possible devices are the [**Windows.Devices.Enumeration**](https://msdn.microsoft.com/library/windows/apps/BR225459) namespace.</span></span> <span data-ttu-id="d4600-111">このような API を使う理由は、次のようなものがあります。</span><span class="sxs-lookup"><span data-stu-id="d4600-111">Some reasons for using these APIs include the following.</span></span>

-   <span data-ttu-id="d4600-112">使用中のアプリケーションに接続したデバイスを検索する。</span><span class="sxs-lookup"><span data-stu-id="d4600-112">Finding a device to connect to with your application.</span></span>
-   <span data-ttu-id="d4600-113">システムに接続したデバイスまたはシステムによって検出されたデバイスの情報を取得する。</span><span class="sxs-lookup"><span data-stu-id="d4600-113">Getting information about devices connected to or discoverable by the system.</span></span>
-   <span data-ttu-id="d4600-114">デバイスの追加、接続、切断、オンラインの状態、またはその他のプロパティを変更時に、アプリで通知を受信する。</span><span class="sxs-lookup"><span data-stu-id="d4600-114">Have an app receive notifications when devices are added, connect, disconnect, change online status, or change other properties.</span></span>
-   <span data-ttu-id="d4600-115">デバイスの接続、切断、オンライン状態の変更、またはその他のプロパティの変更時に、アプリでバックグラウンド トリガを受信する。</span><span class="sxs-lookup"><span data-stu-id="d4600-115">Have an app receive background triggers when devices connect, disconnect, change online status, or change other properties.</span></span>

<span data-ttu-id="d4600-116">個別のデバイスと、アプリを実行しているシステムが当該のテクノロジをサポートしている場合、これらの API で、次のプロトコルやバスのいずれかを経由してデバイスを列挙できます。</span><span class="sxs-lookup"><span data-stu-id="d4600-116">These APIs can enumerate devices over any of the following protocols and buses, provided the individual device and the system running the app support that technology.</span></span> <span data-ttu-id="d4600-117">これは包括的なリストではありません。特定のデバイスでは、他のプロトコルがサポートされている可能性があります。</span><span class="sxs-lookup"><span data-stu-id="d4600-117">This is not an exhaustive list, and other protocols may be supported by a specific device.</span></span>

-   <span data-ttu-id="d4600-118">物理的に接続されたバス。</span><span class="sxs-lookup"><span data-stu-id="d4600-118">Physically connected buses.</span></span> <span data-ttu-id="d4600-119">これには PCI や USB が含まれます。</span><span class="sxs-lookup"><span data-stu-id="d4600-119">This includes PCI and USB.</span></span> <span data-ttu-id="d4600-120">たとえば、**デバイス マネージャー**に表示されるすべてのデバイス。</span><span class="sxs-lookup"><span data-stu-id="d4600-120">For example, anything that you can see in the **Device Manager**.</span></span>
-   [<span data-ttu-id="d4600-121">UPnP</span><span class="sxs-lookup"><span data-stu-id="d4600-121">UPnP</span></span>](https://msdn.microsoft.com/library/windows/desktop/Aa382303)
-   <span data-ttu-id="d4600-122">デジタル リビング ネットワーク アライアンス (DLNA)</span><span class="sxs-lookup"><span data-stu-id="d4600-122">Digital Living Network Alliance (DLNA)</span></span>
-   [**<span data-ttu-id="d4600-123">Discovery And Launch (DIAL)</span><span class="sxs-lookup"><span data-stu-id="d4600-123">Discovery and Launch (DIAL)</span></span>**](https://msdn.microsoft.com/library/windows/apps/Dn946818)
-   [**<span data-ttu-id="d4600-124">DNS サービス検出 (DNS-SD)</span><span class="sxs-lookup"><span data-stu-id="d4600-124">DNS Service Discovery (DNS-SD)</span></span>**](https://msdn.microsoft.com/library/windows/apps/Dn895183)
-   [<span data-ttu-id="d4600-125">Web Services on Devices (WSD)</span><span class="sxs-lookup"><span data-stu-id="d4600-125">Web Services on Devices (WSD)</span></span>](https://msdn.microsoft.com/library/windows/desktop/Aa826001)
-   [<span data-ttu-id="d4600-126">Bluetooth</span><span class="sxs-lookup"><span data-stu-id="d4600-126">Bluetooth</span></span>](https://msdn.microsoft.com/library/windows/desktop/Aa362932)
-   [**<span data-ttu-id="d4600-127">Wi-Fi Direct</span><span class="sxs-lookup"><span data-stu-id="d4600-127">Wi-Fi Direct</span></span>**](https://msdn.microsoft.com/library/windows/apps/Dn297687)
-   <span data-ttu-id="d4600-128">WiGig</span><span class="sxs-lookup"><span data-stu-id="d4600-128">WiGig</span></span>
-   [**<span data-ttu-id="d4600-129">Point of Service</span><span class="sxs-lookup"><span data-stu-id="d4600-129">Point of Service</span></span>**](https://msdn.microsoft.com/library/windows/apps/Dn298071)

<span data-ttu-id="d4600-130">多くの場合、列挙 API の使用について心配する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="d4600-130">In many cases, you will not need to worry about using the enumeration APIs.</span></span> <span data-ttu-id="d4600-131">その理由は、デバイスを使う API の多くが、適切な既定のデバイスを自動的に選択するか、より合理的な列挙 API を提供するためです。</span><span class="sxs-lookup"><span data-stu-id="d4600-131">This is because many APIs that use devices will automatically select the appropriate default device or provide a more streamlined enumeration API.</span></span> <span data-ttu-id="d4600-132">たとえば、[**MediaElement**](https://msdn.microsoft.com/library/windows/apps/BR242926) は既定のオーディオ レンダリング デバイスを自動的に使います。</span><span class="sxs-lookup"><span data-stu-id="d4600-132">For example, [**MediaElement**](https://msdn.microsoft.com/library/windows/apps/BR242926) will automatically use the default audio renderer device.</span></span> <span data-ttu-id="d4600-133">アプリが既定のデバイスを使うことができる限り、アプリケーションで列挙 API を使用する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="d4600-133">As long as your app can use the default device, there is no need to use the enumeration APIs in your application.</span></span> <span data-ttu-id="d4600-134">列挙 API は、利用可能なデバイスを検出して接続するための一般的で柔軟な方法を提供します。</span><span class="sxs-lookup"><span data-stu-id="d4600-134">The enumeration APIs provide a general and flexible way for you to discover and connect to available devices.</span></span> <span data-ttu-id="d4600-135">このトピックでは、デバイスの列挙についての情報を提供し、デバイスを列挙する 4 つの一般的な方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="d4600-135">This topic provides information about enumerating devices and describes the four common ways to enumerate devices.</span></span>

-   <span data-ttu-id="d4600-136">[**DevicePicker**](https://msdn.microsoft.com/library/windows/apps/Dn930841) UI を使う</span><span class="sxs-lookup"><span data-stu-id="d4600-136">Using the [**DevicePicker**](https://msdn.microsoft.com/library/windows/apps/Dn930841) UI</span></span>
-   <span data-ttu-id="d4600-137">現在システムで検出可能なデバイスのスナップショットを列挙する</span><span class="sxs-lookup"><span data-stu-id="d4600-137">Enumerating a snapshot of devices currently discoverable by the system</span></span>
-   <span data-ttu-id="d4600-138">現在検出可能なデバイスを列挙して変更を監視する</span><span class="sxs-lookup"><span data-stu-id="d4600-138">Enumerating devices currently discoverable and watch for changes</span></span>
-   <span data-ttu-id="d4600-139">バックグラウンド タスクで現在検出可能なデバイスを列挙して変更を監視する</span><span class="sxs-lookup"><span data-stu-id="d4600-139">Enumerating devices currently discoverable and watch for changes in a background task</span></span>

## <a name="deviceinformation-objects"></a><span data-ttu-id="d4600-140">DeviceInformation オブジェクト</span><span class="sxs-lookup"><span data-stu-id="d4600-140">DeviceInformation objects</span></span>


<span data-ttu-id="d4600-141">列挙 API の操作では、[**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) オブジェクトを頻繁に使う必要があります。</span><span class="sxs-lookup"><span data-stu-id="d4600-141">Working with the enumeration APIs, you will frequently need to use [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) objects.</span></span> <span data-ttu-id="d4600-142">これらのオブジェクトには、デバイスに関する利用可能な情報のほとんどが含まれています。</span><span class="sxs-lookup"><span data-stu-id="d4600-142">These objects contain most of the available information about the device.</span></span> <span data-ttu-id="d4600-143">次の表は、ユーザーが関心を持つ **DeviceInformation** プロパティのいくつかを紹介しています。</span><span class="sxs-lookup"><span data-stu-id="d4600-143">The following table explains some of the **DeviceInformation** properties you will be interested in.</span></span> <span data-ttu-id="d4600-144">完全な一覧については、**DeviceInformation** のリファレンス ページをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="d4600-144">For a complete list, see the reference page for **DeviceInformation**.</span></span>

| <span data-ttu-id="d4600-145">プロパティ</span><span class="sxs-lookup"><span data-stu-id="d4600-145">Property</span></span>                         | <span data-ttu-id="d4600-146">コメント</span><span class="sxs-lookup"><span data-stu-id="d4600-146">Comments</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|----------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **<span data-ttu-id="d4600-147">DeviceInformation.Id</span><span class="sxs-lookup"><span data-stu-id="d4600-147">DeviceInformation.Id</span></span>**         | <span data-ttu-id="d4600-148">これはデバイス固有の識別子であり、文字列変数として提供されます。</span><span class="sxs-lookup"><span data-stu-id="d4600-148">This is the unique identifier of the device and is provided as a string variable.</span></span> <span data-ttu-id="d4600-149">多くの場合、これは、あるメソッドから別のメソッドに渡すためだけの不透明な値であり、ユーザーが関心を持つ特定のデバイスを示します。</span><span class="sxs-lookup"><span data-stu-id="d4600-149">In most cases, this is an opaque value you will just pass from one method to another to indicate the specific device you are interested in.</span></span> <span data-ttu-id="d4600-150">このプロパティと **DeviceInformation.Kind** プロパティは、アプリを終了し、再度アプリを開くときに使うこともできます。</span><span class="sxs-lookup"><span data-stu-id="d4600-150">You can also use this property and the **DeviceInformation.Kind** property after closing down your app and reopening it.</span></span> <span data-ttu-id="d4600-151">これにより、確実に同じ [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) オブジェクトを回復して再び使うことができます。</span><span class="sxs-lookup"><span data-stu-id="d4600-151">This will ensure that you can recover and reuse the same [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) object.</span></span> |
| **<span data-ttu-id="d4600-152">DeviceInformation.Kind</span><span class="sxs-lookup"><span data-stu-id="d4600-152">DeviceInformation.Kind</span></span>**       | <span data-ttu-id="d4600-153">[**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) オブジェクトで表されるデバイス オブジェクトの種類を示します。</span><span class="sxs-lookup"><span data-stu-id="d4600-153">This indicates the kind of device object represented by the [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) object.</span></span> <span data-ttu-id="d4600-154">これは、デバイスのカテゴリでも種類でもありません。</span><span class="sxs-lookup"><span data-stu-id="d4600-154">This is not the device category or type of device.</span></span> <span data-ttu-id="d4600-155">1 つのデバイスを、種類の異なる複数の **DeviceInformation** オブジェクトで表すことができます。</span><span class="sxs-lookup"><span data-stu-id="d4600-155">A single device can be represented by several different **DeviceInformation** objects of different kinds.</span></span> <span data-ttu-id="d4600-156">このプロパティに指定できる値とそれらの相互関係については、[**DeviceInformationKind**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformationkind.aspx) をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="d4600-156">The possible values for this property are listed in [**DeviceInformationKind**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformationkind.aspx) as well as how they relate to one another.</span></span>                           |
| **<span data-ttu-id="d4600-157">DeviceInformation.Properties</span><span class="sxs-lookup"><span data-stu-id="d4600-157">DeviceInformation.Properties</span></span>** | <span data-ttu-id="d4600-158">このプロパティ バッグには、[**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) オブジェクトについて要求される情報が含まれています。</span><span class="sxs-lookup"><span data-stu-id="d4600-158">This property bag contains information that is requested for the [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) object.</span></span> <span data-ttu-id="d4600-159">最も一般的なプロパティは、[**DeviceInformation.Name**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.name) のように、**DeviceInformation** オブジェクトのプロパティとして簡単に参照されます。</span><span class="sxs-lookup"><span data-stu-id="d4600-159">The most common properties are easily referenced as properties of the **DeviceInformation** object, such as with [**DeviceInformation.Name**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.name).</span></span> <span data-ttu-id="d4600-160">詳しくは、「[デバイス情報のプロパティ](device-information-properties.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="d4600-160">For more information, see [Device information properties](device-information-properties.md).</span></span>                                                                |

 

## <a name="devicepicker-ui"></a><span data-ttu-id="d4600-161">DevicePicker UI</span><span class="sxs-lookup"><span data-stu-id="d4600-161">DevicePicker UI</span></span>


<span data-ttu-id="d4600-162">[**DevicePicker**](https://msdn.microsoft.com/library/windows/apps/Dn930841) は、Windows から提供されるコントロールであり、ユーザーが一覧からデバイスを選択できるようにする小さな UI を作成します。</span><span class="sxs-lookup"><span data-stu-id="d4600-162">The [**DevicePicker**](https://msdn.microsoft.com/library/windows/apps/Dn930841) is a control provided by Windows that creates a small UI that enables the user to select a device from a list.</span></span> <span data-ttu-id="d4600-163">**DevicePicker** ウィンドウは、いくつかの方法でカスタマイズできます。</span><span class="sxs-lookup"><span data-stu-id="d4600-163">You can customize the **DevicePicker** window in a few ways.</span></span>

-   <span data-ttu-id="d4600-164">UI に表示されるデバイスは、[**SupportedDeviceSelectors**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.devicepickerfilter.supporteddeviceselectors.aspx)、[**SupportedDeviceClasses**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.devicepickerfilter.supporteddeviceclasses.aspx)、または両方を [**DevicePicker.Filter**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.devicepicker.filter) に追加することで制御できます。</span><span class="sxs-lookup"><span data-stu-id="d4600-164">You can control the devices that are displayed in the UI by adding a [**SupportedDeviceSelectors**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.devicepickerfilter.supporteddeviceselectors.aspx), a [**SupportedDeviceClasses**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.devicepickerfilter.supporteddeviceclasses.aspx), or both to the [**DevicePicker.Filter**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.devicepicker.filter).</span></span> <span data-ttu-id="d4600-165">多くの場合、セレクターまたはクラスを 1 つ追加するだけですが、2 つ以上必要な場合は、複数を追加できます。</span><span class="sxs-lookup"><span data-stu-id="d4600-165">In most cases, you only need to add one selector or class, but if you do need more than one you can add multiple.</span></span> <span data-ttu-id="d4600-166">複数のセレクターまたはクラスを追加する場合は、OR ロジック関数を使ってそれらを結び付けます。</span><span class="sxs-lookup"><span data-stu-id="d4600-166">If you do add multiple selectors or classes, they are conjoined using an OR logic function.</span></span>
-   <span data-ttu-id="d4600-167">デバイスから取得するプロパティを指定できます。</span><span class="sxs-lookup"><span data-stu-id="d4600-167">You can specify the properties you want to retrieve for the devices.</span></span> <span data-ttu-id="d4600-168">このためには、プロパティを [**DevicePicker.RequestedProperties**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.devicepicker.requestedproperties) に追加します。</span><span class="sxs-lookup"><span data-stu-id="d4600-168">You can do this by adding properties to [**DevicePicker.RequestedProperties**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.devicepicker.requestedproperties).</span></span>
-   <span data-ttu-id="d4600-169">[**Appearance**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.devicepicker.appearance) を使って、[**DevicePicker**](https://msdn.microsoft.com/library/windows/apps/Dn930841) の外観を変更できます。</span><span class="sxs-lookup"><span data-stu-id="d4600-169">You can alter the appearance of the [**DevicePicker**](https://msdn.microsoft.com/library/windows/apps/Dn930841) using [**Appearance**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.devicepicker.appearance).</span></span>
-   <span data-ttu-id="d4600-170">[**DevicePicker**](https://msdn.microsoft.com/library/windows/apps/Dn930841) を表示するときに、そのサイズと場所を指定できます。</span><span class="sxs-lookup"><span data-stu-id="d4600-170">You can specify the size and location of the [**DevicePicker**](https://msdn.microsoft.com/library/windows/apps/Dn930841) when it is displayed.</span></span>

<span data-ttu-id="d4600-171">[**DevicePicker**](https://msdn.microsoft.com/library/windows/apps/Dn930841) を表示すると、デバイスの追加、削除、更新に合わせて、UI の内容が自動的に更新されます。</span><span class="sxs-lookup"><span data-stu-id="d4600-171">While the [**DevicePicker**](https://msdn.microsoft.com/library/windows/apps/Dn930841) is displayed, the contents of the UI will be automatically updated if devices are added, removed, or updated.</span></span>

<span data-ttu-id="d4600-172">**注:** [**DevicePicker**](https://msdn.microsoft.com/library/windows/apps/Dn930841)を使用して[**DeviceInformationKind**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformationkind.aspx)を指定することはできません。</span><span class="sxs-lookup"><span data-stu-id="d4600-172">**Note**You cannot specify the [**DeviceInformationKind**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformationkind.aspx) using the [**DevicePicker**](https://msdn.microsoft.com/library/windows/apps/Dn930841).</span></span> <span data-ttu-id="d4600-173">特定の **DeviceInformationKind** のデバイスが必要な場合は、[**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/BR225446) を作成して独自の UI を提供する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d4600-173">If you want to have devices of a specific **DeviceInformationKind**, you will need to build a [**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/BR225446) and provide your own UI.</span></span>

 

<span data-ttu-id="d4600-174">キャスト メディア コンテンツと DIAL を使う場合は、それぞれに独自のピッカーが用意されています。</span><span class="sxs-lookup"><span data-stu-id="d4600-174">Casting media content and DIAL also each provide their own pickers if you want to use them.</span></span> <span data-ttu-id="d4600-175">[**CastingDevicePicker**](https://msdn.microsoft.com/library/windows/apps/Dn972525) と [**DialDevicePicker**](https://msdn.microsoft.com/library/windows/apps/Dn946783) です。</span><span class="sxs-lookup"><span data-stu-id="d4600-175">They are [**CastingDevicePicker**](https://msdn.microsoft.com/library/windows/apps/Dn972525) and [**DialDevicePicker**](https://msdn.microsoft.com/library/windows/apps/Dn946783), respectively.</span></span>

## <a name="enumerate-a-snapshot-of-devices"></a><span data-ttu-id="d4600-176">ネットワークのスナップショットの列挙</span><span class="sxs-lookup"><span data-stu-id="d4600-176">Enumerate a snapshot of devices</span></span>


<span data-ttu-id="d4600-177">[**DevicePicker**](https://msdn.microsoft.com/library/windows/apps/Dn930841) がニーズに合わず、より柔軟な方法が必要になることがあります。</span><span class="sxs-lookup"><span data-stu-id="d4600-177">In some scenarios, the [**DevicePicker**](https://msdn.microsoft.com/library/windows/apps/Dn930841) will not be suitable for your needs and you need something more flexible.</span></span> <span data-ttu-id="d4600-178">たとえば、独自の UI を作成する場合や、ユーザーに UI を表示せずにデバイスを列挙する場合などが考えられます。</span><span class="sxs-lookup"><span data-stu-id="d4600-178">Perhaps you want to build your own UI or need to enumerate devices without displaying a UI to the user.</span></span> <span data-ttu-id="d4600-179">そのような場合は、デバイスのスナップショットを列挙することができます。</span><span class="sxs-lookup"><span data-stu-id="d4600-179">In these situations, you could enumerate a snapshot of devices.</span></span> <span data-ttu-id="d4600-180">そのためには、システムに現在接続されているデバイスやシステムとペアリングされているデバイスを調べます。</span><span class="sxs-lookup"><span data-stu-id="d4600-180">This involves looking through the devices that are currently connected to or paired with the system.</span></span> <span data-ttu-id="d4600-181">ただし、この方法では、利用可能なデバイスのスナップショットが確認されるだけであるため、一覧を列挙した後に接続されたデバイスは検出できないことに注意する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d4600-181">However, you need to be aware that this method only looks at a snapshot of devices that are available, so you will not be able to find devices that connect after you enumerate through the list.</span></span> <span data-ttu-id="d4600-182">デバイスが更新または削除された場合に通知を受け取ることもできません。</span><span class="sxs-lookup"><span data-stu-id="d4600-182">You also will not be notified if a device is updated or removed.</span></span> <span data-ttu-id="d4600-183">注意すべき潜在的なもう 1 つのデメリットは、この方法では列挙がすべて完了するまで結果が表示されないことです。</span><span class="sxs-lookup"><span data-stu-id="d4600-183">Another potential downside to be aware of is that this method will hold back any results until the entire enumeration is completed.</span></span> <span data-ttu-id="d4600-184">このため、**AssociationEndpoint** オブジェクト、**AssociationEndpointContainer** オブジェクト、または **AssociationEndpointService** オブジェクトに関心がある場合は、この方法を使うべきではありません。これらのオブジェクトは、ネットワーク プロトコルまたはワイヤレス プロトコル経由で検出されるからです。</span><span class="sxs-lookup"><span data-stu-id="d4600-184">For this reason, you should not use this method when you are interested in **AssociationEndpoint**, **AssociationEndpointContainer**, or **AssociationEndpointService** objects since they are found over a network or wireless protocol.</span></span> <span data-ttu-id="d4600-185">これを完了するには最長で 30 秒かかります。</span><span class="sxs-lookup"><span data-stu-id="d4600-185">This can take up to 30 seconds to complete.</span></span> <span data-ttu-id="d4600-186">このような場合は、[**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/BR225446) オブジェクトを使って利用可能なデバイスを列挙する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d4600-186">In that scenario, you should use a [**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/BR225446) object to enumerate through the possible devices.</span></span>

<span data-ttu-id="d4600-187">デバイスのスナップショットを列挙するには、[**FindAllAsync**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.findallasync.aspx) メソッドを使います。</span><span class="sxs-lookup"><span data-stu-id="d4600-187">To enumerate through a snapshot of devices, use the [**FindAllAsync**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.findallasync.aspx) method.</span></span> <span data-ttu-id="d4600-188">このメソッドは、列挙プロセス全体が完了するまで待ってから、すべての結果を 1 つの [**DeviceInformationCollection**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformationcollection.aspx) オブジェクトとして返します。</span><span class="sxs-lookup"><span data-stu-id="d4600-188">This method waits until the entire enumeration process is complete and returns all the results as one [**DeviceInformationCollection**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformationcollection.aspx) object.</span></span> <span data-ttu-id="d4600-189">このメソッドには、結果をフィルター処理し、目的のデバイスに合わせてその結果を絞り込むためのいくつかのオプションを提供するオーバーロードもあります。</span><span class="sxs-lookup"><span data-stu-id="d4600-189">This method is also overloaded to provide you with several options for filtering your results and limiting them to the devices that you are interested in.</span></span> <span data-ttu-id="d4600-190">オーバーロードを使うには、[**DeviceClass**](https://msdn.microsoft.com/library/windows/apps/BR225381) を指定するか、デバイス セレクターを渡します。</span><span class="sxs-lookup"><span data-stu-id="d4600-190">You can do this by providing a [**DeviceClass**](https://msdn.microsoft.com/library/windows/apps/BR225381) or passing in a device selector.</span></span> <span data-ttu-id="d4600-191">デバイス セレクターとは、列挙するデバイスを指定する AQS 文字列です。</span><span class="sxs-lookup"><span data-stu-id="d4600-191">The device selector is an AQS string that specifies the devices you want to enumerate.</span></span> <span data-ttu-id="d4600-192">詳しくは、「[デバイス セレクターのビルド](build-a-device-selector.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="d4600-192">For more information, see [Build a device selector](build-a-device-selector.md).</span></span>

<span data-ttu-id="d4600-193">デバイスの列挙スナップショットの例を以下に示します。</span><span class="sxs-lookup"><span data-stu-id="d4600-193">An example of a device enumeration snapshot is provided below:</span></span>



<span data-ttu-id="d4600-194">結果を絞り込むだけでなく、デバイスから取得するプロパティも指定できます。</span><span class="sxs-lookup"><span data-stu-id="d4600-194">In addition to limiting the results, you can also specify the properties that you want to retrieve for the devices.</span></span> <span data-ttu-id="d4600-195">その場合、指定したプロパティが、コレクションで返される各 [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) オブジェクトのプロパティ バックで利用可能になります。</span><span class="sxs-lookup"><span data-stu-id="d4600-195">If you do, the specified properties will be available in the property bag for each of the [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) objects returned in the collection.</span></span> <span data-ttu-id="d4600-196">すべてのデバイスの種類ですべてのプロパティを使うことができるわけではないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="d4600-196">It is important to note that not all properties are available for all device kinds.</span></span> <span data-ttu-id="d4600-197">どのデバイスの種類でどのプロパティを使うことができるかについては、「[デバイス情報プロパティ](device-information-properties.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="d4600-197">To see what properties are available for which device kinds, see [Device information properties](device-information-properties.md).</span></span>



## <a name="enumerate-and-watch-devices"></a><span data-ttu-id="d4600-198">デバイスの列挙と監視</span><span class="sxs-lookup"><span data-stu-id="d4600-198">Enumerate and watch devices</span></span>


<span data-ttu-id="d4600-199">デバイスをより強力かつ柔軟な方法で列挙するには、[**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/BR225446) を作成します。</span><span class="sxs-lookup"><span data-stu-id="d4600-199">A more powerful and flexible method of enumerating devices is creating a [**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/BR225446).</span></span> <span data-ttu-id="d4600-200">この方法では、デバイスを列挙するときの柔軟性が最も高くなります。</span><span class="sxs-lookup"><span data-stu-id="d4600-200">This option provides the most flexibility when you are enumerating devices.</span></span> <span data-ttu-id="d4600-201">現在存在するデバイスを列挙できるだけでなく、デバイス セレクターに一致するデバイスの追加、削除、プロパティの変更が行われた場合に通知を受け取ることもできます。</span><span class="sxs-lookup"><span data-stu-id="d4600-201">It allows you to enumerate devices that are currently present, and also receive notifications when devices that match your device selector are added, removed, or properties change.</span></span> <span data-ttu-id="d4600-202">**DeviceWatcher** を作成するときにデバイス セレクターを指定します。</span><span class="sxs-lookup"><span data-stu-id="d4600-202">When you create a **DeviceWatcher**, you provide a device selector.</span></span> <span data-ttu-id="d4600-203">デバイス セレクターについて詳しくは、「[デバイス セレクターのビルド](build-a-device-selector.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="d4600-203">For more information about device selectors, see [Build a device selector](build-a-device-selector.md).</span></span> <span data-ttu-id="d4600-204">ウォッチャーを作成すると、指定した条件に一致するデバイスについて次の通知を受け取れるようになります。</span><span class="sxs-lookup"><span data-stu-id="d4600-204">After creating the watcher, you will receive the following notifications for any device that matches your provided criteria.</span></span>

-   <span data-ttu-id="d4600-205">新しいデバイスが追加された場合の追加通知。</span><span class="sxs-lookup"><span data-stu-id="d4600-205">Add notification when a new device is added.</span></span>
-   <span data-ttu-id="d4600-206">目的のプロパティが変更された場合の更新通知。</span><span class="sxs-lookup"><span data-stu-id="d4600-206">Update notification when a property you are interested in is changed.</span></span>
-   <span data-ttu-id="d4600-207">デバイスが使えなくなった場合やフィルターに一致しなくなった場合の削除通知。</span><span class="sxs-lookup"><span data-stu-id="d4600-207">Remove notification when a device is no longer available or no longer matches your filter.</span></span>

<span data-ttu-id="d4600-208">ほとんどの場合、[**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/BR225446) を使うときは、デバイスの一覧を維持して、ウォッチャーが監視対象のデバイスから更新を受け取るのに合わせてその一覧への追加、一覧からの項目の削除、または項目の更新を行います。</span><span class="sxs-lookup"><span data-stu-id="d4600-208">In most cases where you are using a [**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/BR225446), you are maintaining a list of devices and adding to it, removing items from it, or updating items as your watcher receives updates from the devices that you are watching.</span></span> <span data-ttu-id="d4600-209">更新通知を受け取ると、更新された情報を [**DeviceInformationUpdate**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformationupdate.aspx) オブジェクトとして利用できるようになります。</span><span class="sxs-lookup"><span data-stu-id="d4600-209">When you receive an update notification, the updated information will be available as a [**DeviceInformationUpdate**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformationupdate.aspx) object.</span></span> <span data-ttu-id="d4600-210">デバイスの一覧を更新するには、まず、変更された [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) を見つけます。</span><span class="sxs-lookup"><span data-stu-id="d4600-210">In order to update your list of devices, first find the appropriate [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) that changed.</span></span> <span data-ttu-id="d4600-211">次に、そのオブジェクトの [**Update**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.update) メソッドを呼び出して、**DeviceInformationUpdate** オブジェクトを渡します。</span><span class="sxs-lookup"><span data-stu-id="d4600-211">Then call the [**Update**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.update) method for that object, providing the **DeviceInformationUpdate** object.</span></span> <span data-ttu-id="d4600-212">これは、**DeviceInformation** オブジェクトを自動的に更新できる便利な関数です。</span><span class="sxs-lookup"><span data-stu-id="d4600-212">This is a convenience function that will automatically update your **DeviceInformation** object.</span></span>

<span data-ttu-id="d4600-213">[**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/BR225446) では、デバイスが追加されたり変更されたりすると通知が送られてくるため、対象のオブジェクトが **AssociationEndpoint**、**AssociationEndpointContainer**、または **AssociationEndpointService** である場合はこの方法でデバイスを列挙することをお勧めします。これらのオブジェクトは、ネットワーク プロトコルまたはワイヤレス プロトコル経由で列挙されるからです。</span><span class="sxs-lookup"><span data-stu-id="d4600-213">Since a [**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/BR225446) sends notifications as devices arrive and when they change, you should use this method of enumerating devices when you are interested in **AssociationEndpoint**, **AssociationEndpointContainer**, or **AssociationEndpointService** objects since they are enumerated over networking or wireless protocols.</span></span>

<span data-ttu-id="d4600-214">[**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/BR225446) を作成するには、いずれかの [**CreateWatcher**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.createwatcher.aspx) メソッドを使います。</span><span class="sxs-lookup"><span data-stu-id="d4600-214">To create a [**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/BR225446), use one of the [**CreateWatcher**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.createwatcher.aspx) methods.</span></span> <span data-ttu-id="d4600-215">これらのメソッドは、目的のデバイスを指定できるようにオーバーロードされています。</span><span class="sxs-lookup"><span data-stu-id="d4600-215">These methods are overloaded to enable you to specify the devices that you are interested in.</span></span> <span data-ttu-id="d4600-216">オーバーロードを使うには、[**DeviceClass**](https://msdn.microsoft.com/library/windows/apps/BR225381) を指定するか、デバイス セレクターを渡します。</span><span class="sxs-lookup"><span data-stu-id="d4600-216">You can do this by providing a [**DeviceClass**](https://msdn.microsoft.com/library/windows/apps/BR225381) or passing in a device selector.</span></span> <span data-ttu-id="d4600-217">デバイス セレクターとは、列挙するデバイスを指定する AQS 文字列です。</span><span class="sxs-lookup"><span data-stu-id="d4600-217">The device selector is an AQS string that specifies the devices you want to enumerate.</span></span> <span data-ttu-id="d4600-218">詳しくは、「[デバイス セレクターのビルド](build-a-device-selector.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="d4600-218">For more information, see [Build a device selector](build-a-device-selector.md).</span></span> <span data-ttu-id="d4600-219">デバイスから取得する目的のプロパティを指定することもできます。</span><span class="sxs-lookup"><span data-stu-id="d4600-219">You can also specify the properties that you want to retrieve for the devices and are interested in.</span></span> <span data-ttu-id="d4600-220">その場合、指定したプロパティが、コレクションで返される各 [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) オブジェクトのプロパティ バックで利用可能になります。</span><span class="sxs-lookup"><span data-stu-id="d4600-220">If you do, the specified properties will be available in the property bag for each of the [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) objects returned in the collection.</span></span> <span data-ttu-id="d4600-221">すべてのデバイスの種類ですべてのプロパティを使うことができるわけではないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="d4600-221">It is important to note that not all properties are available for all device kinds.</span></span> <span data-ttu-id="d4600-222">どのデバイスの種類でどのプロパティを使うことができるかについては、「[デバイス情報プロパティ](device-information-properties.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="d4600-222">To see what properties are available for which device kinds, see [Device information properties](device-information-properties.md)</span></span>

## <a name="watch-devices-as-a-background-task"></a><span data-ttu-id="d4600-223">バックグラウンド タスクによるデバイスの監視</span><span class="sxs-lookup"><span data-stu-id="d4600-223">Watch devices as a background task</span></span>


<span data-ttu-id="d4600-224">バックグラウンド タスクによるデバイスの監視は、上で説明した [**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/BR225446) を作成する方法によく似ています。</span><span class="sxs-lookup"><span data-stu-id="d4600-224">Watching devices as a background task is very similar to creating a [**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/BR225446) as described above.</span></span> <span data-ttu-id="d4600-225">実際、最初に前のセクションの説明に従って通常の **DeviceWatcher** オブジェクトを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d4600-225">In fact, you will still need to create a normal **DeviceWatcher** object first as described in the previous section.</span></span> <span data-ttu-id="d4600-226">オブジェクトを作成したら、[**DeviceWatcher.Start**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.devicewatcher.start) の代わりに [**GetBackgroundTrigger**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.devicewatcher.enumerationcompleted.aspx) を使います。</span><span class="sxs-lookup"><span data-stu-id="d4600-226">Once you create it, you call [**GetBackgroundTrigger**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.devicewatcher.enumerationcompleted.aspx) instead of [**DeviceWatcher.Start**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.devicewatcher.start).</span></span> <span data-ttu-id="d4600-227">**GetBackgroundTrigger** を呼び出すときに目的の通知 (追加、削除、更新) を指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d4600-227">When you call **GetBackgroundTrigger**, you must specify which of the notifications you are interested in: add, remove, or update.</span></span> <span data-ttu-id="d4600-228">更新または削除を要求する際には追加も要求する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d4600-228">You cannot request update or remove without requesting add as well.</span></span> <span data-ttu-id="d4600-229">トリガーを登録すると、すぐにバックグラウンドで **DeviceWatcher** の実行が開始されます。</span><span class="sxs-lookup"><span data-stu-id="d4600-229">Once you register the trigger, the **DeviceWatcher** will start running immediately in the background.</span></span> <span data-ttu-id="d4600-230">それ以降、条件に一致する新しい通知を受け取るたびに、バックグラウンド タスクがアプリケーションをトリガーして、前回のトリガー以降の最新の変更が提供されます。</span><span class="sxs-lookup"><span data-stu-id="d4600-230">From this point forward, whenever it receives a new notification for your application that matches your criteria, the background task will trigger and it will provide you the latest changes since it last triggered your application.</span></span>

<span data-ttu-id="d4600-231">**重要な**初めて[**DeviceWatcherTrigger**](https://msdn.microsoft.com/library/windows/apps/Dn913838)が、アプリケーションをトリガーは、ウォッチャーが**EnumerationCompleted**状態に達したときになります。</span><span class="sxs-lookup"><span data-stu-id="d4600-231">**Important**The first time that a [**DeviceWatcherTrigger**](https://msdn.microsoft.com/library/windows/apps/Dn913838) triggers your application will be when the watcher reaches the **EnumerationCompleted** state.</span></span> <span data-ttu-id="d4600-232">したがって、そのときには最初の結果がすべて含まれます。</span><span class="sxs-lookup"><span data-stu-id="d4600-232">This means it will contain all of the initial results.</span></span> <span data-ttu-id="d4600-233">その後にアプリケーションがトリガーされるときには、前回のトリガー以降に発生した追加、更新、削除の通知のみが含まれます。</span><span class="sxs-lookup"><span data-stu-id="d4600-233">Any future times it triggers your application, it will only contain the add, update, and remove notifications that have occurred since the last trigger.</span></span> <span data-ttu-id="d4600-234">最初の結果が一度に 1 つずつ送られるのではなく、**EnumerationCompleted** に達した後にまとめて送られるため、フォアグラウンドの [**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/BR225446) オブジェクトとは若干異なります。</span><span class="sxs-lookup"><span data-stu-id="d4600-234">This is slightly different from a foreground [**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/BR225446) object because the initial results do not come in one at a time and are only delivered in a bundle after the **EnumerationCompleted** is reached.</span></span>

 

<span data-ttu-id="d4600-235">ワイヤレス プロトコルの中には、バックグラウンドでスキャンするときにはフォアグラウンドでスキャンするときと動作が異なるものや、そもそもバックグラウンドでのスキャンをサポートしていないものもあります。</span><span class="sxs-lookup"><span data-stu-id="d4600-235">Some wireless protocols behave differently if they are scanning in the background versus the foreground, or they may not support scanning in the background at all.</span></span> <span data-ttu-id="d4600-236">バックグラウンド スキャンについては 3 つの可能性があります。</span><span class="sxs-lookup"><span data-stu-id="d4600-236">There are three possibilities with relation to background scanning.</span></span> <span data-ttu-id="d4600-237">次の表は、それらの可能性と、そのアプリケーションに対する影響を示しています。</span><span class="sxs-lookup"><span data-stu-id="d4600-237">The following table lists the possibilities and the effects this may have on your application.</span></span> <span data-ttu-id="d4600-238">たとえば、Bluetooth と Wi-Fi Direct はバックグラウンド スキャンをサポートしていないため、拡張子によって [**DeviceWatcherTrigger**](https://msdn.microsoft.com/library/windows/apps/Dn913838) をサポートしません。</span><span class="sxs-lookup"><span data-stu-id="d4600-238">For example, Bluetooth and Wi-Fi Direct do not support background scans, so by extension, they do not support a [**DeviceWatcherTrigger**](https://msdn.microsoft.com/library/windows/apps/Dn913838).</span></span>

| <span data-ttu-id="d4600-239">動作</span><span class="sxs-lookup"><span data-stu-id="d4600-239">Behavior</span></span>                                  | <span data-ttu-id="d4600-240">影響</span><span class="sxs-lookup"><span data-stu-id="d4600-240">Impact</span></span>                                                                                                                                  |
|-------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="d4600-241">バックグラウンドでも同じ動作</span><span class="sxs-lookup"><span data-stu-id="d4600-241">Same behavior in background</span></span>               | <span data-ttu-id="d4600-242">なし</span><span class="sxs-lookup"><span data-stu-id="d4600-242">None</span></span>                                                                                                                                    |
| <span data-ttu-id="d4600-243">バックグラウンドで可能なのはパッシブ スキャンのみ</span><span class="sxs-lookup"><span data-stu-id="d4600-243">Only passive scans possible in background</span></span> | <span data-ttu-id="d4600-244">パッシブ スキャンが行われるまで待つことになるため、デバイスの検出に時間がかかる場合があります。</span><span class="sxs-lookup"><span data-stu-id="d4600-244">Device may take longer to discover while waiting for a passive scan to occur.</span></span>                                                           |
| <span data-ttu-id="d4600-245">バックグラウンド スキャンはサポートされていない</span><span class="sxs-lookup"><span data-stu-id="d4600-245">Background scans not supported</span></span>            | <span data-ttu-id="d4600-246">[**DeviceWatcherTrigger**](https://msdn.microsoft.com/library/windows/apps/Dn913838) でデバイスが検出されず、更新も報告されません。</span><span class="sxs-lookup"><span data-stu-id="d4600-246">No devices will be detectable by the [**DeviceWatcherTrigger**](https://msdn.microsoft.com/library/windows/apps/Dn913838), and no updates will be reported.</span></span> |

 

<span data-ttu-id="d4600-247">バックグラウンド タスクとしてのスキャンをサポートしていないプロトコルが [**DeviceWatcherTrigger**](https://msdn.microsoft.com/library/windows/apps/Dn913838) に含まれていてもトリガーは機能しますが、</span><span class="sxs-lookup"><span data-stu-id="d4600-247">If your [**DeviceWatcherTrigger**](https://msdn.microsoft.com/library/windows/apps/Dn913838) includes a protocol that does not support scanning in as a background task, your trigger will still work.</span></span> <span data-ttu-id="d4600-248">そのプロトコルで更新や結果を取得することはできません。</span><span class="sxs-lookup"><span data-stu-id="d4600-248">However, you will not be able to get any updates or results over that protocol.</span></span> <span data-ttu-id="d4600-249">その他のプロトコルやデバイスの更新は通常どおりに検出されます。</span><span class="sxs-lookup"><span data-stu-id="d4600-249">The updates for other protocols or devices will still be detected normally.</span></span>

## <a name="using-deviceinformationkind"></a><span data-ttu-id="d4600-250">DeviceInformationKind の使用</span><span class="sxs-lookup"><span data-stu-id="d4600-250">Using DeviceInformationKind</span></span>


<span data-ttu-id="d4600-251">ほとんどの場合、[**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) オブジェクトの [**DeviceInformationKind**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformationkind.aspx) を気にする必要はありません。</span><span class="sxs-lookup"><span data-stu-id="d4600-251">In most scenarios, you will not need to worry about the [**DeviceInformationKind**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformationkind.aspx) of a [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) object.</span></span> <span data-ttu-id="d4600-252">お使いのデバイス API で返されるデバイス セレクターでは、多くの場合、その API で使うための正しい種類のデバイス オブジェクトが取得されることが保証されているからです。</span><span class="sxs-lookup"><span data-stu-id="d4600-252">This is because the device selector returned by the device API you're using will often guarantee you are getting the correct kinds of device objects to use with their API.</span></span> <span data-ttu-id="d4600-253">しかし、デバイスの **DeviceInformation** を取得する際に、対応するデバイス API がなく、デバイス セレクターを取得できない場合もあります。</span><span class="sxs-lookup"><span data-stu-id="d4600-253">However, in some scenarios you will want to get the **DeviceInformation** for devices, but there is not a corresponding device API to provide a device selector.</span></span> <span data-ttu-id="d4600-254">そのような場合は、独自のセレクターを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d4600-254">In these cases you will need to build your own selector.</span></span> <span data-ttu-id="d4600-255">たとえば、Web Services on Devices には専用の API がありませんが、[**Windows.Devices.Enumeration**](https://msdn.microsoft.com/library/windows/apps/BR225459) API を使ってそれらのデバイスを検出し、情報を取得できます。その後、ソケット API でそれらを使うことができます。</span><span class="sxs-lookup"><span data-stu-id="d4600-255">For example, Web Services on Devices does not have a dedicated API, but you can discover those devices and get information about them using the [**Windows.Devices.Enumeration**](https://msdn.microsoft.com/library/windows/apps/BR225459) APIs and then use them using the socket APIs.</span></span>

<span data-ttu-id="d4600-256">独自のデバイス セレクターを作成してデバイス オブジェクトを列挙する場合は、[**DeviceInformationKind**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformationkind.aspx) の理解が重要になります。</span><span class="sxs-lookup"><span data-stu-id="d4600-256">If you are building your own device selector to enumerate through device objects, [**DeviceInformationKind**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformationkind.aspx) will be important for you to understand.</span></span> <span data-ttu-id="d4600-257">使用可能なすべての種類と、それらの相互関係については、**DeviceInformationKind** のリファレンス ページをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="d4600-257">All of the possible kinds, as well as how they relate to one another, are described on the reference page for **DeviceInformationKind**.</span></span> <span data-ttu-id="d4600-258">**DeviceInformationKind** の最も一般的な使い方の 1 つでは、クエリをデバイス セレクターと組み合わせて送信するときに、検索するデバイスの種類を指定するために使います。</span><span class="sxs-lookup"><span data-stu-id="d4600-258">One of the most common uses of **DeviceInformationKind** is to specify what kind of devices you are searching for when submitting a query in conjunction with a device selector.</span></span> <span data-ttu-id="d4600-259">これにより、指定した **DeviceInformationKind** と一致するデバイスのみを確実に列挙します。</span><span class="sxs-lookup"><span data-stu-id="d4600-259">By doing this, it makes sure that you only enumerate over devices that match the provided **DeviceInformationKind**.</span></span> <span data-ttu-id="d4600-260">たとえば、**DeviceInterface** オブジェクトを検索してから、親 **Device** オブジェクトの情報を取得するクエリを実行します。</span><span class="sxs-lookup"><span data-stu-id="d4600-260">For example, you could find a **DeviceInterface** object and then run a query to get the information for the parent **Device** object.</span></span> <span data-ttu-id="d4600-261">その親オブジェクトには詳細情報が含まれる場合があります。</span><span class="sxs-lookup"><span data-stu-id="d4600-261">That parent object may contain additional information.</span></span>

<span data-ttu-id="d4600-262">[**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) オブジェクトのプロパティ バッグ内で利用可能なプロパティは、デバイスの [**DeviceInformationKind**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformationkind.aspx) に応じて異なる場合があることに注意することが重要です。</span><span class="sxs-lookup"><span data-stu-id="d4600-262">It is important to note that the properties available in the property bag for a [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) object will vary depending on the [**DeviceInformationKind**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformationkind.aspx) of the device.</span></span> <span data-ttu-id="d4600-263">特定の種類でしか使うことのできないプロパティもあります。</span><span class="sxs-lookup"><span data-stu-id="d4600-263">Certain properties are only available with certain kinds.</span></span> <span data-ttu-id="d4600-264">プロパティと種類の関係について詳しくは、「[デバイス情報プロパティ](device-information-properties.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="d4600-264">For more information about which properties are available for which kinds, see [Device information properties](device-information-properties.md).</span></span> <span data-ttu-id="d4600-265">したがって、上の例では、親 **Device** を検索すると、**DeviceInterface** デバイス オブジェクトでは利用できなかった詳細情報にアクセスできるようになります。</span><span class="sxs-lookup"><span data-stu-id="d4600-265">Hence, in the above example, searching for the parent **Device** will give you access to more information that was not available from the **DeviceInterface** device object.</span></span> <span data-ttu-id="d4600-266">このため、AQS フィルター文字列を作成するときには、要求するプロパティが列挙する **DeviceInformationKind** オブジェクトで利用可能かどうかを確認することが重要です。</span><span class="sxs-lookup"><span data-stu-id="d4600-266">Because of this, when you create your AQS filter strings, it is important to ensure that the requested properties are available for the **DeviceInformationKind** objects you are enumerating.</span></span> <span data-ttu-id="d4600-267">フィルターの作成について詳しくは、「[デバイス セレクターのビルド](build-a-device-selector.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="d4600-267">For more information about building a filter, see [Build a device selector](build-a-device-selector.md).</span></span>

<span data-ttu-id="d4600-268">**AssociationEndpoint** オブジェクト、**AssociationEndpointContainer** オブジェクト、または **AssociationEndpointService** オブジェクトを列挙する場合、ワイヤレス プロトコルまたはネットワーク プロトコル経由で列挙することになります。</span><span class="sxs-lookup"><span data-stu-id="d4600-268">When enumerating **AssociationEndpoint**, **AssociationEndpointContainer**, or **AssociationEndpointService** objects, you are enumerating over a wireless or network protocol.</span></span> <span data-ttu-id="d4600-269">この状況では、[**FindAllAsync**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.findallasync.aspx) を使わずに、[**CreateWatcher**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.createwatcher.aspx) を使うことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="d4600-269">In these situations, we recommend that you don't use [**FindAllAsync**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.findallasync.aspx) and instead use [**CreateWatcher**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.createwatcher.aspx).</span></span> <span data-ttu-id="d4600-270">その理由は、ネットワーク経由で検索すると、[**EnumerationCompleted**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.devicewatcher.enumerationcompleted.aspx) が生成されるまで、検索操作が 10 秒以上タイムアウトされないことが頻発するためです。</span><span class="sxs-lookup"><span data-stu-id="d4600-270">This is because searching over a network often results in search operations that won't timeout for 10 or more seconds before generating [**EnumerationCompleted**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.devicewatcher.enumerationcompleted.aspx).</span></span> <span data-ttu-id="d4600-271">**FindAllAsync** は、**EnumerationCompleted** がトリガーされるまでその操作を完了しません。</span><span class="sxs-lookup"><span data-stu-id="d4600-271">**FindAllAsync** doesn't complete its operation until **EnumerationCompleted** is triggered.</span></span> <span data-ttu-id="d4600-272">[**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/BR225446) を使う場合は、**EnumerationCompleted** が呼び出されるタイミングに関係なく、リアルタイムに近い結果を取得できます。</span><span class="sxs-lookup"><span data-stu-id="d4600-272">If you are using a [**DeviceWatcher**](https://msdn.microsoft.com/library/windows/apps/BR225446), you'll get results closer to real time regardless of when **EnumerationCompleted** is called.</span></span>

## <a name="save-a-device-for-later-use"></a><span data-ttu-id="d4600-273">後で使うためにデバイスを保存する</span><span class="sxs-lookup"><span data-stu-id="d4600-273">Save a device for later use</span></span>


<span data-ttu-id="d4600-274">すべての [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) オブジェクトが、[**DeviceInformation.Id**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.id) と [**DeviceInformation.Kind**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.kind.aspx) の 2 つの情報を組み合わせて個別に識別されています。</span><span class="sxs-lookup"><span data-stu-id="d4600-274">Any [**DeviceInformation**](https://msdn.microsoft.com/library/windows/apps/BR225393) object is uniquely identified by a combination of two pieces of information: [**DeviceInformation.Id**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.id) and [**DeviceInformation.Kind**](https://msdn.microsoft.com/library/windows/apps/windows.devices.enumeration.deviceinformation.kind.aspx).</span></span> <span data-ttu-id="d4600-275">この 2 つの情報を手元に残しておくと、**DeviceInformation** オブジェクトが失われたとしても、この情報を [**CreateFromIdAsync**](https://msdn.microsoft.com/library/windows/apps/br225425.aspx) に渡して再び作成することができます。</span><span class="sxs-lookup"><span data-stu-id="d4600-275">If you keep these two pieces of information, you can recreate a **DeviceInformation** object after it is lost by supplying this information to [**CreateFromIdAsync**](https://msdn.microsoft.com/library/windows/apps/br225425.aspx).</span></span> <span data-ttu-id="d4600-276">この場合、アプリと統合するデバイスのユーザー設定を保存できます。</span><span class="sxs-lookup"><span data-stu-id="d4600-276">If you do this, you can save user preferences for a device that integrates with your app.</span></span>


 

 




