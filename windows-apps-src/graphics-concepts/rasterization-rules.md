---
title: ラスター化ルール
description: ラスター化ルールは、ベクトル データをラスター データにマップする方法を定義します。
ms.assetid: B604725F-96A5-4DB6-B597-9EC57FBBC024
keywords:
- ラスター化ルール
ms.date: 02/08/2017
ms.topic: article
ms.localizationpriority: medium
ms.openlocfilehash: c622c037f878d1ad34cdadf897dde10683532832
ms.sourcegitcommit: b4c502d69a13340f6e3c887aa3c26ef2aeee9cee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/03/2018
ms.locfileid: "8483112"
---
# <a name="rasterization-rules"></a><span data-ttu-id="05450-104">ラスター化ルール</span><span class="sxs-lookup"><span data-stu-id="05450-104">Rasterization rules</span></span>


<span data-ttu-id="05450-105">ラスター化ルールは、ベクトル データをラスター データにマップする方法を定義します。</span><span class="sxs-lookup"><span data-stu-id="05450-105">Rasterization rules define how vector data is mapped into raster data.</span></span> <span data-ttu-id="05450-106">ラスター データは、整数値の位置に配置されてからカリングおよびクリッピングされ (描画するピクセルの数を最小限にするため)、ピクセル単位の属性が (頂点単位の属性から) 補間された後、ピクセル シェーダーに渡されます。</span><span class="sxs-lookup"><span data-stu-id="05450-106">The raster data is snapped to integer locations that are then culled and clipped (to draw the minimum number of pixels), and per-pixel attributes are interpolated (from per-vertex attributes) before being passed to a pixel shader.</span></span>

<span data-ttu-id="05450-107">マップするプリミティブ タイプや、エイリアスを減らすためにデータでマルチサンプリングが使用されているかどうかに応じて、さまざまな種類のルールがあります。</span><span class="sxs-lookup"><span data-stu-id="05450-107">There are several types of rules, which depend on the type of primitive that is being mapped, as well as whether or not the data uses multisampling to reduce aliasing.</span></span> <span data-ttu-id="05450-108">次の図は、コーナーの処理方法を示したものです。</span><span class="sxs-lookup"><span data-stu-id="05450-108">The following illustrations demonstrate how the corner cases are handled.</span></span>

## <a name="span-idtrianglespanspan-idtrianglespanspan-idtrianglespantriangle-rasterization-rules-without-multisampling"></a><span data-ttu-id="05450-109"><span id="Triangle"></span><span id="triangle"></span><span id="TRIANGLE"></span>三角形のラスター化ルール (マルチサンプリングなし)</span><span class="sxs-lookup"><span data-stu-id="05450-109"><span id="Triangle"></span><span id="triangle"></span><span id="TRIANGLE"></span>Triangle Rasterization Rules (Without Multisampling)</span></span>


<span data-ttu-id="05450-110">三角形の内部にあるピクセルの中心はすべて描画されます。左上ルールに適合すると、ピクセルは内部にあると見なされます。</span><span class="sxs-lookup"><span data-stu-id="05450-110">Any pixel center which falls inside a triangle is drawn; a pixel is assumed to be inside if it passes the top-left rule.</span></span> <span data-ttu-id="05450-111">左上ルールでは、ピクセルの中心が三角形の上のエッジまたは左のエッジにある場合に、三角形の内部にあると定義されます。</span><span class="sxs-lookup"><span data-stu-id="05450-111">The top-left rule is that a pixel center is defined to lie inside of a triangle if it lies on the top edge or the left edge of a triangle.</span></span>

<span data-ttu-id="05450-112">この場合</span><span class="sxs-lookup"><span data-stu-id="05450-112">where:</span></span>

-   <span data-ttu-id="05450-113">上のエッジは、完全に水平で、他のエッジよりも上にあるものです。</span><span class="sxs-lookup"><span data-stu-id="05450-113">A top edge, is an edge that is exactly horizontal and is above the other edges.</span></span>
-   <span data-ttu-id="05450-114">左のエッジは、完全には水平でなく、三角形の左側にあるものです。三角形には、左のエッジが 1 つまたは 2 つあります。</span><span class="sxs-lookup"><span data-stu-id="05450-114">A left edge, is an edge that is not exactly horizontal and is on the left side of the triangle A triangle can have one or two left edges.</span></span>

<span data-ttu-id="05450-115">左上ルールによって、隣接する三角形が一度に描画されます。</span><span class="sxs-lookup"><span data-stu-id="05450-115">The top-left rule ensures that adjacent triangles are drawn once.</span></span>

<span data-ttu-id="05450-116">三角形の内側にある、または左上ルールに適合しているために描画されるピクセルの例を次の図に示します。</span><span class="sxs-lookup"><span data-stu-id="05450-116">This illustration shows examples of pixels that are drawn because they either lie inside a triangle or follow the top-left rule.</span></span>

![左上ルールに適合する三角形のラスター化の例](images/d3d10-rasterrulestriangle.png)

<span data-ttu-id="05450-118">薄い灰色と濃い灰色はピクセルのグループです。ピクセルがどの三角形の内部にあるのかを示しています。</span><span class="sxs-lookup"><span data-stu-id="05450-118">The light and dark gray covering of the pixels show them as groups of the pixels to indicate which triangle they are inside.</span></span>

## <a name="span-idline1spanspan-idline1spanspan-idline1spanline-rasterization-rules-aliased-without-multisampling"></a><span data-ttu-id="05450-119"><span id="Line_1"></span><span id="line_1"></span><span id="LINE_1"></span>線のラスター化ルール (エイリアス、マルチサンプリングなし)</span><span class="sxs-lookup"><span data-stu-id="05450-119"><span id="Line_1"></span><span id="line_1"></span><span id="LINE_1"></span>Line Rasterization Rules (Aliased, Without Multisampling)</span></span>


<span data-ttu-id="05450-120">線のラスター化ルールでは、ひし形テスト領域を使用して、線がピクセルをカバーするかどうかを決定します。</span><span class="sxs-lookup"><span data-stu-id="05450-120">Line rasterization rules use a diamond test area to determine if a line covers a pixel.</span></span> <span data-ttu-id="05450-121">x メジャー ライン (-1 &lt;= 勾配&lt;= +1 の線) の場合、ひし形テスト領域には、左下のエッジ、右下のエッジ、および下隅 (実線で表示) が含まれます。左上のエッジ、右上のエッジ、上隅、左隅、および右隅 (破線で表示) は除外されます。</span><span class="sxs-lookup"><span data-stu-id="05450-121">For x-major lines (lines with -1 &lt;= slope &lt;= +1), the diamond test area includes (shown solid) the lower-left edge, lower-right edge, and bottom corner; the diamond excludes (shown dotted) the upper-left edge, upper-right edge, the top corder, the left corner, and the right corner.</span></span> <span data-ttu-id="05450-122">y メジャー ラインは、x メジャー ライン以外の線です。ひし形テスト領域は x メジャー ラインについて説明したとおりですが、右隅も含まれる点が異なります。</span><span class="sxs-lookup"><span data-stu-id="05450-122">A y-major line is any line that is not an x-major line; the test diamond area is the same as described for the x-major line except the right corner is also included.</span></span>

<span data-ttu-id="05450-123">ひし形領域で、線を始点から終点に沿って移動したときに、その線がピクセルのひし形テスト領域を抜けている場合、線はピクセルをカバーします。</span><span class="sxs-lookup"><span data-stu-id="05450-123">Given the diamond area, a line covers a pixel if the line exits the pixel's diamond test area when traveling along the line from the start towards the end.</span></span> <span data-ttu-id="05450-124">ライン ストリップは、一連の線として描画されるので、同様に動作します。</span><span class="sxs-lookup"><span data-stu-id="05450-124">A line strip behaves the same, as it is drawn as a sequence of lines.</span></span>

<span data-ttu-id="05450-125">次の図に、いくつかの例を示します。</span><span class="sxs-lookup"><span data-stu-id="05450-125">The following illustration shows some examples.</span></span>

![エイリアスが適用された線のラスター化の例](images/d3d10-rasterrulesline.png)

## <a name="span-idline2spanspan-idline2spanspan-idline2spanline-rasterization-rules-antialiased-without-multisampling"></a><span data-ttu-id="05450-127"><span id="Line_2"></span><span id="line_2"></span><span id="LINE_2"></span>線のラスター化ルール (アンチエイリアス、マルチサンプリングなし)</span><span class="sxs-lookup"><span data-stu-id="05450-127"><span id="Line_2"></span><span id="line_2"></span><span id="LINE_2"></span>Line Rasterization Rules (Antialiased, Without Multisampling)</span></span>


<span data-ttu-id="05450-128">アンチエイリアスが適用された線は、矩形 (幅 = 1) のようにラスター化されます。</span><span class="sxs-lookup"><span data-stu-id="05450-128">An antialiased line is rasterized as if it were a rectangle (with width = 1).</span></span> <span data-ttu-id="05450-129">矩形は、ピクセル シェーダー出力のアルファ成分に乗算されるピクセル単位のカバレッジ値を生成するレンダー ターゲットと交差します。</span><span class="sxs-lookup"><span data-stu-id="05450-129">The rectangle intersects with a render target producing per-pixel coverage values, which are multiplied into pixel shader output alpha components.</span></span> <span data-ttu-id="05450-130">マルチサンプリング レンダー ターゲットに線を描画する場合、アンチエイリアシングは実行されません。</span><span class="sxs-lookup"><span data-stu-id="05450-130">There is no antialiasing preformed when drawing lines on a multisampled render target.</span></span>

<span data-ttu-id="05450-131">アンチエイリアスが適用された線のレンダリングを実行する "最善" の方法は 1 つではないと考えられます。</span><span class="sxs-lookup"><span data-stu-id="05450-131">It is deemed that there is no single "best" way to perform antialiased line rendering.</span></span> <span data-ttu-id="05450-132">Direct3D では、下の図に示されている方法をガイドラインとして採用します。</span><span class="sxs-lookup"><span data-stu-id="05450-132">Direct3D adopts as a guideline the method shown in the following illustration.</span></span> <span data-ttu-id="05450-133">この方法は経験から導かれたもので、望ましいと思われるいくつかのビジュアル プロパティがあります。</span><span class="sxs-lookup"><span data-stu-id="05450-133">This method was derived empirically, exhibiting a number of visual properties deemed desirable.</span></span>

<span data-ttu-id="05450-134">ハードウェアがこのアルゴリズムに完全に一致する必要はありません。このリファレンスに対するテストには、下の方に記載されているいくつかの原則に従った "妥当" な許容範囲があり、さまざまなハードウェア実装やフィルター カーネル サイズが許容されます。</span><span class="sxs-lookup"><span data-stu-id="05450-134">Hardware need not exactly match this algorithm; tests against this reference shall have "reasonable" tolerances, guided by some of the principles listed further below, permitting various hardware implementations and filter kernel sizes.</span></span> <span data-ttu-id="05450-135">ただし、ハードウェアの実装で許容されるこの柔軟性は、単なる線の描画や外観の確認/評価を超えるものであり、Direct3D を通じてアプリケーションに伝達することはできません。</span><span class="sxs-lookup"><span data-stu-id="05450-135">None of this flexibility permitted in hardware implementation, however, can be communicated up through Direct3D to applications, beyond simply drawing lines and observing/measuring how they look.</span></span>

![アンチエイリアスが適用された線のラスター化の例](images/d3d10-rasterruleslineaa.png)

<span data-ttu-id="05450-137">このアルゴリズムでは、インテンシティが均一で、エッジのギザギザやブレーディングが最小限に抑えられた、比較的滑らかな線が生成されます。</span><span class="sxs-lookup"><span data-stu-id="05450-137">This algorithm generates relatively smooth lines, with uniform intensity, with minimal jagged edges or braiding.</span></span> <span data-ttu-id="05450-138">接近した線のモアレ パターンは最小限に抑えられます。</span><span class="sxs-lookup"><span data-stu-id="05450-138">Moire patterning for close lines is minimized.</span></span> <span data-ttu-id="05450-139">端と端が接している線分間の区切りも適切にカバーされます。</span><span class="sxs-lookup"><span data-stu-id="05450-139">There is good coverage for junctions between line segments placed end-to-end.</span></span>

<span data-ttu-id="05450-140">フィルター カーネルは、エッジのぼかしの量とガンマ修正によって生じる強度の変化との適正なトレードオフです。</span><span class="sxs-lookup"><span data-stu-id="05450-140">The filter kernel is a reasonable tradeoff between the amount of edge blurring and the changes in intensity caused by gamma corrections.</span></span> <span data-ttu-id="05450-141">カバレッジ値は、[出力結合 (OM) ステージ](output-merger-stage--om-.md)で次の式によってピクセル シェーダーの o0.a (srcAlpha) に乗算されます。</span><span class="sxs-lookup"><span data-stu-id="05450-141">The coverage value is multiplied into pixel shader o0.a (srcAlpha) per the following formula by the [Output Merger (OM) stage](output-merger-stage--om-.md):</span></span>

<span data-ttu-id="05450-142">srcColor \* srcAlpha + destColor \* (1-srcAlpha)</span><span class="sxs-lookup"><span data-stu-id="05450-142">srcColor \* srcAlpha + destColor \* (1-srcAlpha)</span></span>

## <a name="span-idpointspanspan-idpointspanspan-idpointspanpoint-rasterization-rules-without-multisampling"></a><span data-ttu-id="05450-143"><span id="Point"></span><span id="point"></span><span id="POINT"></span>点のラスター化ルール (マルチサンプリングなし)</span><span class="sxs-lookup"><span data-stu-id="05450-143"><span id="Point"></span><span id="point"></span><span id="POINT"></span>Point Rasterization Rules (Without Multisampling)</span></span>


<span data-ttu-id="05450-144">点は、三角形のラスター化ルールを使用する Z パターンの 2 つの三角形で構成されているものとして解釈されます。</span><span class="sxs-lookup"><span data-stu-id="05450-144">A point is interpreted as though it were composed of two triangles in a Z pattern, which use triangle rasterization rules.</span></span> <span data-ttu-id="05450-145">座標は、1 つのピクセル幅の正方形の中心を示します。</span><span class="sxs-lookup"><span data-stu-id="05450-145">The coordinate identifies the center of a one pixel wide square.</span></span> <span data-ttu-id="05450-146">点のカリングはありません。</span><span class="sxs-lookup"><span data-stu-id="05450-146">There is no culling for points.</span></span>

<span data-ttu-id="05450-147">次の図に、いくつかの例を示します。</span><span class="sxs-lookup"><span data-stu-id="05450-147">The following illustration shows some examples.</span></span>

![点のラスター化の例](images/d3d10-rasterrulespoint.png)

## <a name="span-idmultisamplespanspan-idmultisamplespanspan-idmultisamplespanmultisample-anti-aliasing-rasterization-rules"></a><span data-ttu-id="05450-149"><span id="Multisample"></span><span id="multisample"></span><span id="MULTISAMPLE"></span>マルチサンプル アンチエイリアシングのラスター化ルール</span><span class="sxs-lookup"><span data-stu-id="05450-149"><span id="Multisample"></span><span id="multisample"></span><span id="MULTISAMPLE"></span>Multisample Anti-Aliasing Rasterization Rules</span></span>


<span data-ttu-id="05450-150">マルチサンプル アンチエイリアシング (MSAA) は、複数のサブサンプリング位置でピクセルのカバレッジおよび深度/ステンシル テストを使用してジオメトリのエイリアスを低減します。</span><span class="sxs-lookup"><span data-stu-id="05450-150">Multisample antialiasing (MSAA) reduces geometry aliasing using pixel coverage and depth-stencil tests at multiple sub-sample locations.</span></span> <span data-ttu-id="05450-151">パフォーマンスを向上させるために、カバーされたサブピクセル間でシェーダー出力を共有することで、カバーされたピクセルごとに 1 回ずつピクセル単位の計算が実行されます。</span><span class="sxs-lookup"><span data-stu-id="05450-151">To improve performance, per-pixel calculations are performed once for each covered pixel, by sharing shader outputs across covered sub-pixels.</span></span> <span data-ttu-id="05450-152">マルチサンプル アンチエイリアシングでは、サーフェスのエイリアスは低減されません。</span><span class="sxs-lookup"><span data-stu-id="05450-152">Multisample antialiasing does not reduce surface aliasing.</span></span> <span data-ttu-id="05450-153">サンプリング位置や再構築関数は、ハードウェアの実装によって異なります。</span><span class="sxs-lookup"><span data-stu-id="05450-153">Sample locations and reconstruction functions are dependent on the hardware implementation.</span></span>

<span data-ttu-id="05450-154">次の図に、いくつかの例を示します。</span><span class="sxs-lookup"><span data-stu-id="05450-154">The following illustration shows some examples.</span></span>

![マルチサンプル アンチエイリアスのラスター化の例](images/d3d10-rasterrulesmsaa.png)

<span data-ttu-id="05450-156">サンプリング位置の数は、マルチサンプル モードによって異なります。</span><span class="sxs-lookup"><span data-stu-id="05450-156">The number of sample locations is dependent on the multisample mode.</span></span> <span data-ttu-id="05450-157">頂点属性は、ピクセルの中心で補間されます。この場所で、ピクセル シェーダーが呼び出されるためです (中心がカバーされていない場合は補外になります)。</span><span class="sxs-lookup"><span data-stu-id="05450-157">Vertex attributes are interpolated at pixel centers, since this is where the pixel shader is invoked (this becomes extrapolation if the center is not covered).</span></span> <span data-ttu-id="05450-158">重心でサンプリングされるように、ピクセル シェーダー内で属性にフラグを設定できます。これにより、カバーされていないピクセルで、ピクセルの領域とプリミティブの交点で属性が補間されます。</span><span class="sxs-lookup"><span data-stu-id="05450-158">Attributes can be flagged in the pixel shader to be centroid sampled, which causes non-covered pixels to interpolate the attribute at intersection of the pixel's area and the primitive.</span></span>

<span data-ttu-id="05450-159">(x と y のデルタを使用する) 微分計算をサポートするために、2x2 のピクセル領域ごとにピクセル シェーダーが実行されます。</span><span class="sxs-lookup"><span data-stu-id="05450-159">A pixel shader runs for each 2x2 pixel area to support derivative calculations (which use x and y deltas).</span></span> <span data-ttu-id="05450-160">これは、示されているよりも多くのシェーダーの呼び出しが発生すれば、2x2 の最小クォンタムが満たされることを意味します (マルチサンプリングには依存しません)。</span><span class="sxs-lookup"><span data-stu-id="05450-160">This means that shader invocations occur more than is shown to fill out the minimum 2x2 quanta (which is independent of multisampling).</span></span> <span data-ttu-id="05450-161">シェーダーの結果は、サンプル単位の深度/ステンシル テストに合格した、カバーされている各サンプルについて書き出されます。</span><span class="sxs-lookup"><span data-stu-id="05450-161">The shader result is written out for each covered sample that passes the per-sample depth-stencil test.</span></span>

<span data-ttu-id="05450-162">通常、プリミティブのラスター化ルールは、以下の場合を除きマルチサンプル アンチエイリアシングによって変わりません。</span><span class="sxs-lookup"><span data-stu-id="05450-162">Rasterization rules for primitives are, in general, unchanged by multisample antialiasing, except:</span></span>

-   <span data-ttu-id="05450-163">三角形の場合、ピクセルの中心ではなく、各サンプリング位置に対してカバレッジ テストが実行されます。</span><span class="sxs-lookup"><span data-stu-id="05450-163">For a triangle, a coverage test is performed for each sample location (not for a pixel center).</span></span> <span data-ttu-id="05450-164">複数のサンプリング位置がカバーされている場合、ピクセル シェーダーは、ピクセルの中心で補間された属性によって 1 回実行されます。</span><span class="sxs-lookup"><span data-stu-id="05450-164">If more than one sample location is covered, a pixel shader runs once with attributes interpolated at the pixel center.</span></span> <span data-ttu-id="05450-165">結果は、カバーされているサンプリング位置ごとに、深度/ステンシル テストに合格したピクセルに格納 (複製) されます。</span><span class="sxs-lookup"><span data-stu-id="05450-165">The result is stored (replicated) for each covered sample location in the pixel that passes the depth/stencil test.</span></span>

    <span data-ttu-id="05450-166">線は、線幅 1.4 の 2 つの三角形で構成された矩形として処理されます。</span><span class="sxs-lookup"><span data-stu-id="05450-166">A line is treated as a rectangle made up of two triangles, with a line width of 1.4.</span></span>

-   <span data-ttu-id="05450-167">点の場合、ピクセルの中心ではなく、各サンプリング位置に対してカバレッジ テストが実行されます。</span><span class="sxs-lookup"><span data-stu-id="05450-167">For a point, a coverage test is performed for each sample location (not for a pixel center).</span></span>

<span data-ttu-id="05450-168">マルチサンプリング フォーマットは、「[Load](https://msdn.microsoft.com/library/windows/desktop/bb509694)」を使用してシェーダーに読み戻すことができるレンダー ターゲットで使用することができます。これは、シェーダーがアクセスする個々のサンプルには解決が不要なためです。</span><span class="sxs-lookup"><span data-stu-id="05450-168">Multisampling formats can be used in render targets which can be read back into shaders using [load](https://msdn.microsoft.com/library/windows/desktop/bb509694), since no resolve is required for individual samples accessed by the shader.</span></span> <span data-ttu-id="05450-169">深度フォーマットは、マルチサンプル リソースではサポートされていないため、レンダー ターゲットのみに制限されます。</span><span class="sxs-lookup"><span data-stu-id="05450-169">Depth formats are not supported for multisample resource, therefore, depth formats are restricted to render targets only.</span></span>

<span data-ttu-id="05450-170">型なしフォーマットではマルチサンプリングがサポートされており、リソース ビューで異なる方法でデータを解釈できます。</span><span class="sxs-lookup"><span data-stu-id="05450-170">Typeless formats support multisampling to allow a resource view to interpret data in different ways.</span></span> <span data-ttu-id="05450-171">たとえば、R8G8B8A8\_TYPELESS を使用してマルチサンプル リソースを作成し、レンダー ターゲット ビュー リソースを使用して R8G8B8A8\_UINT フォーマットでマルチサンプル リソースにレンダリングして、R8G8B8A8\_UNORM データ フォーマットで内容を別のリソースに解決することができます。</span><span class="sxs-lookup"><span data-stu-id="05450-171">For instance, you could create a multisample resource using R8G8B8A8\_TYPELESS, render to it using a render-target-view resource with a R8G8B8A8\_UINT format, then resolve the contents to another resource with a R8G8B8A8\_UNORM data format.</span></span>

### <a name="span-idhardwaresupportspanspan-idhardwaresupportspanspan-idhardwaresupportspanhardware-support"></a><span data-ttu-id="05450-172"><span id="Hardware_Support"></span><span id="hardware_support"></span><span id="HARDWARE_SUPPORT"></span>ハードウェア サポート</span><span class="sxs-lookup"><span data-stu-id="05450-172"><span id="Hardware_Support"></span><span id="hardware_support"></span><span id="HARDWARE_SUPPORT"></span>Hardware Support</span></span>

<span data-ttu-id="05450-173">API は、品質レベルの数によってマルチサンプリングのハードウェア サポートをレポートします。</span><span class="sxs-lookup"><span data-stu-id="05450-173">The API reports hardware support for multisampling through the number of quality levels.</span></span> <span data-ttu-id="05450-174">たとえば、品質レベルが 0 の場合、ハードウェアにおいて (特定のフォーマットおよび品質レベルで) マルチサンプリングがサポートされていないことを意味します。</span><span class="sxs-lookup"><span data-stu-id="05450-174">For example, a 0 quality level means the hardware does not support multisampling (at a particular format and quality level).</span></span> <span data-ttu-id="05450-175">品質レベルが 3 の場合は、ハードウェアで 3 つの異なるサンプル レイアウトや解決アルゴリズムがサポートされていることを意味します。</span><span class="sxs-lookup"><span data-stu-id="05450-175">A 3 for quality levels means that the hardware supports three different sample layouts and/or resolve algorithms.</span></span> <span data-ttu-id="05450-176">次のように仮定することもできます。</span><span class="sxs-lookup"><span data-stu-id="05450-176">You can also assume the following:</span></span>

-   <span data-ttu-id="05450-177">マルチサンプリングをサポートするフォーマットは、同じファミリー内のすべてのフォーマットについて同じ数の品質レベルをサポートします。</span><span class="sxs-lookup"><span data-stu-id="05450-177">Any format that supports multisampling, supports the same number of quality levels for every format in that family.</span></span>
-   <span data-ttu-id="05450-178">マルチサンプリングをサポートし、\_UNORM、\_SRGB、\_SNORM、または \_FLOAT フォーマットがあるフォーマットはすべて、解決もサポートします。</span><span class="sxs-lookup"><span data-stu-id="05450-178">Every format that supports multisampling, and has the \_UNORM, \_SRGB, \_SNORM or \_FLOAT formats, also supports resolving.</span></span>

### <a name="span-idcentroidsamplingspanspan-idcentroidsamplingspanspan-idcentroidsamplingspancentroid-sampling-of-attributes-when-multisample-antialiasing"></a><span data-ttu-id="05450-179"><span id="Centroid_Sampling"></span><span id="centroid_sampling"></span><span id="CENTROID_SAMPLING"></span>マルチサンプル アンチエイリアシング時の属性の重心サンプリング</span><span class="sxs-lookup"><span data-stu-id="05450-179"><span id="Centroid_Sampling"></span><span id="centroid_sampling"></span><span id="CENTROID_SAMPLING"></span>Centroid Sampling of Attributes when Multisample Antialiasing</span></span>

<span data-ttu-id="05450-180">既定では、頂点属性は、マルチサンプル アンチエイリアシング時にピクセルの中心に補間されます。ピクセルの中心がカバーされていない場合、属性はピクセルの中心に対して補外されます。</span><span class="sxs-lookup"><span data-stu-id="05450-180">By default, vertex attributes are interpolated to a pixel center during multisample antialiasing; if the pixel center is not covered, attributes are extrapolated to a pixel center.</span></span> <span data-ttu-id="05450-181">(ピクセルが完全にはカバーされていないと仮定すると) 重心セマンティクスを含むピクセル シェーダー入力は、ピクセルのカバーされている領域内のいずれかの場所、おそらく、カバーされたサンプリング位置のいずれかでサンプリングされます。</span><span class="sxs-lookup"><span data-stu-id="05450-181">If a pixel shader input that contains the centroid semantic (assuming the pixel is not fully covered) will be sampled somewhere within the covered area of the pixel, possibly at one of the covered sample locations.</span></span> <span data-ttu-id="05450-182">サンプル マスク (ラスタライザー ステートで指定) は、重心計算の前に適用されます。</span><span class="sxs-lookup"><span data-stu-id="05450-182">A sample mask (specified by the rasterizer state) is applied prior to centroid computation.</span></span> <span data-ttu-id="05450-183">そのため、マスク アウトされたサンプルは重心位置として使用されません。</span><span class="sxs-lookup"><span data-stu-id="05450-183">Therefore, a sample that is masked out will not be used as a centroid location.</span></span>

<span data-ttu-id="05450-184">リファレンス ラスタライザーは、これと似たような方法で、重心サンプリングのサンプリング位置を選択します。</span><span class="sxs-lookup"><span data-stu-id="05450-184">The reference rasterizer chooses a sample location for centroid sampling similar to this:</span></span>

-   <span data-ttu-id="05450-185">サンプル マスクは、すべてのサンプルに指定可能です。</span><span class="sxs-lookup"><span data-stu-id="05450-185">The sample mask allows all samples.</span></span> <span data-ttu-id="05450-186">ピクセルがカバーされている場合、またはいずれのサンプルもカバーされていない場合は、ピクセルの中心を使用します。</span><span class="sxs-lookup"><span data-stu-id="05450-186">Use a pixel center if the pixel is covered or if none of the samples are covered.</span></span> <span data-ttu-id="05450-187">それ以外の場合は、カバーされている最初のサンプルが選択され、ピクセルの中心から始まって外側に移動していきます。</span><span class="sxs-lookup"><span data-stu-id="05450-187">Otherwise, the first covered sample is chosen, starting from the pixel center and moving outward.</span></span>
-   <span data-ttu-id="05450-188">サンプル マスクは、1 つを除くすべてのサンプルをオフにします (一般的なシナリオ)。</span><span class="sxs-lookup"><span data-stu-id="05450-188">The sample mask turns off all samples but one (a common scenario).</span></span> <span data-ttu-id="05450-189">アプリケーションでは、1 ビットのサンプル マスク値を順番に繰り返し、重心サンプリングを使用してサンプルごとにシーンを再レンダリングすることで、マルチパス スーパーサンプリングを実装できます。</span><span class="sxs-lookup"><span data-stu-id="05450-189">An application can implement multipass supersampling by cycling through single-bit sample-mask values and re-rendering the scene for each sample using centroid sampling.</span></span> <span data-ttu-id="05450-190">このためには、より詳細なテクスチャー ミップを適切に選択して、より高いテクスチャー サンプリング密度を実現できるように、アプリケーションで微分を調整することが必要です。</span><span class="sxs-lookup"><span data-stu-id="05450-190">This would require that an application adjust derivatives to select appropriately more detailed texture mips for the higher texture sampling density.</span></span>

### <a name="span-idderivativecalculationsspanspan-idderivativecalculationsspanspan-idderivativecalculationsspanderivative-calculations-when-multisampling"></a><span data-ttu-id="05450-191"><span id="Derivative_Calculations"></span><span id="derivative_calculations"></span><span id="DERIVATIVE_CALCULATIONS"></span>マルチサンプリング時の微分計算</span><span class="sxs-lookup"><span data-stu-id="05450-191"><span id="Derivative_Calculations"></span><span id="derivative_calculations"></span><span id="DERIVATIVE_CALCULATIONS"></span>Derivative Calculations When Multisampling</span></span>

<span data-ttu-id="05450-192">ピクセル シェーダーは、微分計算 (隣接したピクセルのデータ間のデルタを取得して計算する) をサポートするために、常に 2x2 以上のピクセル領域を使用して実行されます (各ピクセル内のデータが、水平方向または垂直方向に単位間隔でサンプリングされていると仮定します)。</span><span class="sxs-lookup"><span data-stu-id="05450-192">Pixel shaders always run using a minimum 2x2 pixel area to support derivative calculations, which are calculated by taking deltas between data from adjacent pixels (making the assumption that the data in each pixel has been sampled with unit spacing horizontally or vertically).</span></span> <span data-ttu-id="05450-193">これは、マルチサンプリングに影響されることはありません。</span><span class="sxs-lookup"><span data-stu-id="05450-193">This is unaffected by multisampling.</span></span>

<span data-ttu-id="05450-194">重心サンプリングされた属性に対して微分が要求された場合、ハードウェア計算が調整されず、微分が不正確になることがあります。</span><span class="sxs-lookup"><span data-stu-id="05450-194">If derivatives are requested on an attribute that has been centroid sampled, the hardware calculation is not adjusted, which can cause inaccurate derivatives.</span></span> <span data-ttu-id="05450-195">シェーダーは、レンダー ターゲット空間の単位ベクトルを予測しますが、他のベクトル空間に関する非単位ベクトルを取得する場合があります。</span><span class="sxs-lookup"><span data-stu-id="05450-195">A shader will expect a unit vector in render-target space but may get a non-unit vector with respect to some other vector space.</span></span> <span data-ttu-id="05450-196">したがって、重心サンプリングされた属性から微分の要求があった場合には、アプリケーション側で警告を発行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="05450-196">Therefore, it is an application's responsibility to exhibit caution when requesting derivatives from attributes that are centroid sampled.</span></span>

<span data-ttu-id="05450-197">実際には、微分と重心サンプリングを組み合わせないことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="05450-197">In fact, it is recommended that you do not combine derivatives and centroid sampling.</span></span> <span data-ttu-id="05450-198">プリミティブの補間された属性が、補外されないことが重要である状況で、重心サンプリングが役立つ場合があります。ただし、これには、プリミティブのエッジがピクセルを横切る位置を (連続して変更するのではなく) ジャンプするような属性や、LOD を算出するテクスチャー サンプリング処理で使用できない微分などのトレードオフが伴います。</span><span class="sxs-lookup"><span data-stu-id="05450-198">Centroid sampling can be useful for situations where it is critical that a primitive's interpolated attributes are not extrapolated, but this comes with tradeoffs such as attributes that appear to jump where a primitive edge crosses a pixel (rather than change continuously) or derivatives that cannot be used by texture sampling operations that derive LOD.</span></span>

## <a name="span-idrelated-topicsspanrelated-topics"></a><span data-ttu-id="05450-199"><span id="related-topics"></span>関連トピック</span><span class="sxs-lookup"><span data-stu-id="05450-199"><span id="related-topics"></span>Related topics</span></span>


[<span data-ttu-id="05450-200">付録</span><span class="sxs-lookup"><span data-stu-id="05450-200">Appendices</span></span>](appendix.md)

[<span data-ttu-id="05450-201">ラスタライザー (RS) ステージ</span><span class="sxs-lookup"><span data-stu-id="05450-201">Rasterizer (RS) stage</span></span>](rasterizer-stage--rs-.md)

 

 




