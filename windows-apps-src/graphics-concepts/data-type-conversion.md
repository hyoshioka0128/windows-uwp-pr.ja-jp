---
title: データ型の変換
description: 次のセクションでは、Direct3D がデータ型の間の変換を処理する方法について説明します。
ms.assetid: B50AB8DE-CAED-465B-B18C-81F3A984B8AC
keywords:
- データ型の変換
author: michaelfromredmond
ms.author: mithom
ms.date: 02/08/2017
ms.topic: article
ms.localizationpriority: medium
ms.openlocfilehash: a6ceb1e779f8622d3e358bc131b21f6ec66ac2f8
ms.sourcegitcommit: 93c0a60cf531c7d9fe7b00e7cf78df86906f9d6e
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/21/2018
ms.locfileid: "7555591"
---
# <a name="data-type-conversion"></a><span data-ttu-id="db0fe-104">データ型の変換</span><span class="sxs-lookup"><span data-stu-id="db0fe-104">Data type conversion</span></span>


<span data-ttu-id="db0fe-105">次のセクションでは、Direct3D がデータ型の間の変換を処理する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-105">The following sections describe how Direct3D handles conversions between data types.</span></span>

## <a name="span-iddatatypeterminologyspanspan-iddatatypeterminologyspanspan-iddatatypeterminologyspandata-type-terminology"></a><span data-ttu-id="db0fe-106"><span id="Data_Type_Terminology"></span><span id="data_type_terminology"></span><span id="DATA_TYPE_TERMINOLOGY"></span>データ型に関する用語</span><span class="sxs-lookup"><span data-stu-id="db0fe-106"><span id="Data_Type_Terminology"></span><span id="data_type_terminology"></span><span id="DATA_TYPE_TERMINOLOGY"></span>Data Type Terminology</span></span>


<span data-ttu-id="db0fe-107">次に示す用語は、さまざまな形式の変換の特性を説明するために後で使用されます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-107">The following set of terms are subsequently used to characterize various format conversions.</span></span>

| <span data-ttu-id="db0fe-108">用語</span><span class="sxs-lookup"><span data-stu-id="db0fe-108">Term</span></span>  | <span data-ttu-id="db0fe-109">説明</span><span class="sxs-lookup"><span data-stu-id="db0fe-109">Definition</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|-------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="db0fe-110">SNORM</span><span class="sxs-lookup"><span data-stu-id="db0fe-110">SNORM</span></span> | <span data-ttu-id="db0fe-111">符号付き正規化整数。n ビットの 2 の補数をとり、最大値は 1.0f で (たとえば、5 ビット値 01111 は 1.0f にマップされます)、最小値は -1.0f です (たとえば、5 ビット値 10000 は -1.0f にマップされます)。</span><span class="sxs-lookup"><span data-stu-id="db0fe-111">Signed normalized integer, meaning that for an n-bit 2's complement number, the maximum value means 1.0f (e.g. the 5-bit value 01111 maps to 1.0f), and the minimum value means -1.0f (e.g. the 5-bit value 10000 maps to -1.0f).</span></span> <span data-ttu-id="db0fe-112">さらに、2 番目に小さい数値も -1.0f にマップされます (たとえば、5 ビット値 10001 は -1.0f にマップされます)。</span><span class="sxs-lookup"><span data-stu-id="db0fe-112">In addition, the second-minimum number maps to -1.0f (e.g. the 5-bit value 10001 maps to -1.0f).</span></span> <span data-ttu-id="db0fe-113">したがって、-1.0f には 2 つの整数表現があります。</span><span class="sxs-lookup"><span data-stu-id="db0fe-113">There are thus two integer representations for -1.0f.</span></span> <span data-ttu-id="db0fe-114">0.0f の整数表現は 1 つで、1.0f の整数表現も 1 つです。</span><span class="sxs-lookup"><span data-stu-id="db0fe-114">There is a single representation for 0.0f, and a single representation for 1.0f.</span></span> <span data-ttu-id="db0fe-115">その結果、-1.0f ～ 0.0f の範囲の均等間隔の浮動小数点値に対する整数表現のセットと、同様に 0.0f ～ 1.0f の範囲の数値表現の補集合が存在することになります。</span><span class="sxs-lookup"><span data-stu-id="db0fe-115">This results in a set of integer representations for evenly spaced floating point values in the range (-1.0f...0.0f), and also a complementary set of representations for numbers in the range (0.0f...1.0f)</span></span> |
| <span data-ttu-id="db0fe-116">UNORM</span><span class="sxs-lookup"><span data-stu-id="db0fe-116">UNORM</span></span> | <span data-ttu-id="db0fe-117">符号なし正規化整数。n ビットの数値では、すべての桁が 0 の場合は 0.0f、すべての桁が 1 の場合は 1.0f を表します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-117">Unsigned normalized integer, meaning that for an n-bit number, all 0's means 0.0f, and all 1's means 1.0f.</span></span> <span data-ttu-id="db0fe-118">0.0f ～ 1.0f の均等な間隔の一連の浮動小数点値が表されます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-118">A sequence of evenly spaced floating point values from 0.0f to 1.0f are represented.</span></span> <span data-ttu-id="db0fe-119">たとえば、2 ビットの UNORM は、0.0f、1/3、2/3、および 1.0f を表します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-119">e.g. a 2-bit UNORM represents 0.0f, 1/3, 2/3, and 1.0f.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                |
| <span data-ttu-id="db0fe-120">SINT</span><span class="sxs-lookup"><span data-stu-id="db0fe-120">SINT</span></span>  | <span data-ttu-id="db0fe-121">符号付き整数。</span><span class="sxs-lookup"><span data-stu-id="db0fe-121">Signed integer.</span></span> <span data-ttu-id="db0fe-122">2 の補数の整数です。</span><span class="sxs-lookup"><span data-stu-id="db0fe-122">2's complement integer.</span></span> <span data-ttu-id="db0fe-123">たとえば、3 ビットの SINT は整数値の -4、-3、-2、-1、0、1、2、3 を表します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-123">e.g. an 3-bit SINT represents the integral values -4, -3, -2, -1, 0, 1, 2, 3.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span data-ttu-id="db0fe-124">UINT</span><span class="sxs-lookup"><span data-stu-id="db0fe-124">UINT</span></span>  | <span data-ttu-id="db0fe-125">符号なし整数。</span><span class="sxs-lookup"><span data-stu-id="db0fe-125">Unsigned integer.</span></span> <span data-ttu-id="db0fe-126">たとえば、3 ビットの UINT は整数値の 0、1、2、3、4、5、6、7 を表します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-126">e.g. a 3-bit UINT represents the integral values 0, 1, 2, 3, 4, 5, 6, 7.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="db0fe-127">FLOAT</span><span class="sxs-lookup"><span data-stu-id="db0fe-127">FLOAT</span></span> | <span data-ttu-id="db0fe-128">Direct3D で定義された任意の表現の浮動小数点値。</span><span class="sxs-lookup"><span data-stu-id="db0fe-128">A floating-point value in any of the representations defined by Direct3D.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="db0fe-129">SRGB</span><span class="sxs-lookup"><span data-stu-id="db0fe-129">SRGB</span></span>  | <span data-ttu-id="db0fe-130">n ビットの数値ですべての桁が 0 の場合は 0.0f、すべての桁が 1 の場合は 1.0f を表す点で UNORM と同様です。</span><span class="sxs-lookup"><span data-stu-id="db0fe-130">Similar to UNORM, in that for an n-bit number, all 0's means 0.0f and all 1's means 1.0f.</span></span> <span data-ttu-id="db0fe-131">ただし、UNORM とは異なり、SRGB では、すべての桁が 0 である値からすべての桁が 1 である値までの符号なし整数エンコードのシーケンスは、0.0f ～ 1.0f の数値の浮動小数点で表した値に対して非線形数列を表します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-131">However unlike UNORM, with SRGB the sequence of unsigned integer encodings between all 0's to all 1's represent a nonlinear progression in the floating point interpretation of the numbers, between 0.0f to 1.0f.</span></span> <span data-ttu-id="db0fe-132">大まかにいえば、この非線形の数列である SRGB をカラーのシーケンスとして表示すると、平均的な視聴者には、平均的な表示条件下および平均的なディスプレイ上で、輝度レベルの直線的な変化に見えます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-132">Roughly, if this nonlinear progression, SRGB, is displayed as a sequence of colors, it would appear as a linear ramp of luminosity levels to an "average" observer, under "average" viewing conditions, on an "average" display.</span></span> <span data-ttu-id="db0fe-133">詳細については、IEC (国際電気標準会議) の SRGB カラー規格である IEC 61996-2-1 を参照してください。</span><span class="sxs-lookup"><span data-stu-id="db0fe-133">For complete detail, refer to the SRGB color standard, IEC 61996-2-1, at IEC (International Electrotechnical Commission).</span></span>                |

 

<span data-ttu-id="db0fe-134">前述の各用語は、通常、"形式名修飾子" として使用されます。これらは、メモリ内のデータのレイアウト方法と、メモリからまたはシェーダーなどのパイプライン ユニットからのトランスポート パス (潜在的にフィルター処理を含む) で実行される変換の両方を表します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-134">The terms above are often used as "Format Name Modifiers", where they describe both how data is laid out in memory and what conversion to perform in the transport path (potentially including filtering) from memory to or from a Pipeline unit such as a Shader.</span></span>

## <a name="span-idfloatingpointconversionspanspan-idfloatingpointconversionspanspan-idfloatingpointconversionspanfloating-point-conversion"></a><span data-ttu-id="db0fe-135"><span id="Floating_Point_Conversion"></span><span id="floating_point_conversion"></span><span id="FLOATING_POINT_CONVERSION"></span>浮動小数点の変換</span><span class="sxs-lookup"><span data-stu-id="db0fe-135"><span id="Floating_Point_Conversion"></span><span id="floating_point_conversion"></span><span id="FLOATING_POINT_CONVERSION"></span>Floating Point Conversion</span></span>


<span data-ttu-id="db0fe-136">浮動小数点以外の表現との変換を含め、さまざまな表現間で浮動小数点の変換が発生する場合、必ず以下の規則を適用します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-136">Whenever a floating point conversion between different representations occurs, including to or from non-floating point representations, the following rules apply.</span></span>

### <a name="span-idconververtingfromahigherrangerepresentationtoalowerrangerepresentationspanspan-idconververtingfromahigherrangerepresentationtoalowerrangerepresentationspanspan-idconververtingfromahigherrangerepresentationtoalowerrangerepresentationspanconververting-from-a-higher-range-representation-to-a-lower-range-representation"></a><span data-ttu-id="db0fe-137"><span id="Conververting_from_a_higher_range_representation_to_a_lower_range_representation"></span><span id="conververting_from_a_higher_range_representation_to_a_lower_range_representation"></span><span id="CONVERVERTING_FROM_A_HIGHER_RANGE_REPRESENTATION_TO_A_LOWER_RANGE_REPRESENTATION"></span>範囲が広い表現から範囲が狭い表現への変換</span><span class="sxs-lookup"><span data-stu-id="db0fe-137"><span id="Conververting_from_a_higher_range_representation_to_a_lower_range_representation"></span><span id="conververting_from_a_higher_range_representation_to_a_lower_range_representation"></span><span id="CONVERVERTING_FROM_A_HIGHER_RANGE_REPRESENTATION_TO_A_LOWER_RANGE_REPRESENTATION"></span>Conververting from a higher range representation to a lower range representation</span></span>

-   <span data-ttu-id="db0fe-138">別の浮動小数点形式への変換時には、ゼロへの丸めを使用します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-138">Round-to-zero is used during conversion to another float format.</span></span> <span data-ttu-id="db0fe-139">変換先が整数または固定小数点形式の場合、最も近い偶数への丸めを使用します。ただし、FLOAT から SNORM、FLOAT から UNORM、FLOAT から SRGB の各変換で使用する最も近い値への丸めなどのように、別の丸め動作を使用した変換が明示されている場合は除きます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-139">If the target is an integer or fixed point format, round-to-nearest-even is used, unless the conversion is explicitly documented as using another rounding behavior, such as round-to-nearest for FLOAT to SNORM, FLOAT to UNORM or FLOAT to SRGB.</span></span> <span data-ttu-id="db0fe-140">その他の例外としてシェーダー命令の ftoi と ftou があります。この場合は、ゼロへの丸めを使用します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-140">Other exceptions are the ftoi and ftou shader instructions, which use round-to-zero.</span></span> <span data-ttu-id="db0fe-141">最後に、テクスチャーのサンプラーとラスタライザーで使用する浮動小数点から固定小数点への変換では、無限に理想的な精度に対する指定の許容誤差があります。この許容誤差は、ULP (Unit-Last-Place) で表します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-141">Finally, the float-to-fixed conversions used by the texture sampler and rasterizer have a specified tolerance measured in Unit-Last-Place from an infinitely precise ideal.</span></span>
-   <span data-ttu-id="db0fe-142">変換元の値のうち、変換先のダイナミック レンジより大きいものは (たとえば、</span><span class="sxs-lookup"><span data-stu-id="db0fe-142">For source values greater than the dynamic range of a lower range target format (eg.</span></span> <span data-ttu-id="db0fe-143">大きな 32 ビットの浮動小数点値を 16 ビットの浮動小数点型 RenderTarget に書き込む場合)、表現可能な最大の値 (適切な符号付き) に変換されます。ただし、前述のゼロへの丸めにより、符号付きの無限大にはなりません。</span><span class="sxs-lookup"><span data-stu-id="db0fe-143">a large 32-bit float value is written into a 16-bit float RenderTarget), the maximum representable (appropriately signed) value results, NOT including signed infinity (due to the round to zero described above).</span></span>
-   <span data-ttu-id="db0fe-144">範囲が広い形式にある NaN を範囲の狭い形式に変換する場合、範囲が狭い変換先の形式に該当の NaN 表現があればその表現に変換されます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-144">NaN in a higher range format will be converted to NaN representation in the lower range format if the NaN representation exists in the lower range format.</span></span> <span data-ttu-id="db0fe-145">範囲が狭い変換先の形式に NaN 表現がない場合、結果は 0 になります。</span><span class="sxs-lookup"><span data-stu-id="db0fe-145">If the lower format does not have a NaN representation, the result will be 0.</span></span>
-   <span data-ttu-id="db0fe-146">範囲が広い形式にある INF を範囲が狭い形式に変換する場合、範囲が狭い変換先の形式に該当の INF があればその INF に変換されます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-146">INF in a higher range format will be converted to INF in the lower range format if available.</span></span> <span data-ttu-id="db0fe-147">範囲が狭い変換先の形式に INF 表現がない場合、表現可能な最大の値に変換されます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-147">If the lower format does not have an INF representation, it will be converted to the maximum value representable.</span></span> <span data-ttu-id="db0fe-148">変換先の形式で利用可能な場合、符号は保持されます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-148">The sign will be preserved if available in the target format.</span></span>
-   <span data-ttu-id="db0fe-149">範囲が広い形式にある非正規化数を範囲が狭い形式に変換する場合、その変換先の形式に非正規化表現があり、その表現への変換が可能であれば、該当の非正規化表現に変換されます。それ以外の場合、結果は 0 になります。</span><span class="sxs-lookup"><span data-stu-id="db0fe-149">Denorm in a higher range format will be converted to the Denorm representation in the lower range format if available in the lower range format and the conversion is possible, otherwise the result is 0.</span></span> <span data-ttu-id="db0fe-150">変換先の形式で利用可能な場合、符号ビットは保持されます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-150">The sign bit will be preserved if available in the target format.</span></span>

### <a name="span-idconvertingfromalowerrangerepresentationtoahigherrangerepresentationspanspan-idconvertingfromalowerrangerepresentationtoahigherrangerepresentationspanspan-idconvertingfromalowerrangerepresentationtoahigherrangerepresentationspanconverting-from-a-lower-range-representation-to-a-higher-range-representation"></a><span data-ttu-id="db0fe-151"><span id="Converting_from_a_lower_range_representation_to_a_higher_range_representation"></span><span id="converting_from_a_lower_range_representation_to_a_higher_range_representation"></span><span id="CONVERTING_FROM_A_LOWER_RANGE_REPRESENTATION_TO_A_HIGHER_RANGE_REPRESENTATION"></span>範囲が狭い表現から範囲が広い表現への変換</span><span class="sxs-lookup"><span data-stu-id="db0fe-151"><span id="Converting_from_a_lower_range_representation_to_a_higher_range_representation"></span><span id="converting_from_a_lower_range_representation_to_a_higher_range_representation"></span><span id="CONVERTING_FROM_A_LOWER_RANGE_REPRESENTATION_TO_A_HIGHER_RANGE_REPRESENTATION"></span>Converting from a lower range representation to a higher range representation</span></span>

-   <span data-ttu-id="db0fe-152">範囲が狭い形式にある NaN を範囲の広い形式に変換する場合、範囲が広い変換先の形式で利用可能であれば該当する NaN 表現に変換されます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-152">NaN in a lower range format will be converted to the NaN representation in the higher range format if available in the higher range format.</span></span> <span data-ttu-id="db0fe-153">範囲が広い形式に NaN 表現がない場合は、0 に変換されます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-153">If the higher range format does not have a NaN representation, it will be converted to 0.</span></span>
-   <span data-ttu-id="db0fe-154">範囲が狭い形式にある INF を範囲の広い形式に変換する場合、範囲が広い変換先の形式で利用可能であれば該当する INF 表現に変換されます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-154">INF in a lower range format will be converted to the INF representation in the higher range format if available in the higher range format.</span></span> <span data-ttu-id="db0fe-155">範囲が広い形式に INF 表現がない場合、表現可能な最大の値 (その形式の MAX\_FLOAT) に変換されます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-155">If the higher format does not have an INF representation, it will be converted to the maximum value representable (MAX\_FLOAT in that format).</span></span> <span data-ttu-id="db0fe-156">変換先の形式で利用可能な場合、符号は保持されます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-156">The sign will be preserved if available in the target format.</span></span>
-   <span data-ttu-id="db0fe-157">範囲が狭い形式にある非正規化数を範囲が広い形式に変換する場合、変換先の形式の正規化表現に変換可能であれば、その表現に変換されます。変換が不可能な場合、範囲が広い形式に該当の非正規化表現があれば、その表現に変換されます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-157">Denorm in a lower range format will be converted to a normalized representation in the higher range format if possible, or else to a Denorm representation in the higher range format if the Denorm representation exists.</span></span> <span data-ttu-id="db0fe-158">範囲が広い形式に非正規化表現がなければ、0 に変換されます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-158">Failing those, if the higher range format does not have a Denorm representation, it will be converted to 0.</span></span> <span data-ttu-id="db0fe-159">変換先の形式で利用可能な場合、符号は保持されます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-159">The sign will be preserved if available in the target format.</span></span> <span data-ttu-id="db0fe-160">32 ビット浮動小数点型の数値は、非正規化表現のない形式として扱います (32 ビット浮動小数点型の演算における非正規化数を、符号が保持された 0 にフラッシュする必要があるからです)。</span><span class="sxs-lookup"><span data-stu-id="db0fe-160">Note that 32-bit float numbers count as a format without a Denorm representation (because Denorms in operations on 32-bit floats flush to sign preserved 0).</span></span>

## <a name="span-idintegerconversionspanspan-idintegerconversionspanspan-idintegerconversionspaninteger-conversion"></a><span data-ttu-id="db0fe-161"><span id="Integer_Conversion"></span><span id="integer_conversion"></span><span id="INTEGER_CONVERSION"></span>整数の変換</span><span class="sxs-lookup"><span data-stu-id="db0fe-161"><span id="Integer_Conversion"></span><span id="integer_conversion"></span><span id="INTEGER_CONVERSION"></span>Integer Conversion</span></span>


<span data-ttu-id="db0fe-162">次の表で、前述のさまざまな表現から別の表現への変換について説明します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-162">The following table describes conversions from various representations described above to other representations.</span></span> <span data-ttu-id="db0fe-163">ここでは、Direct3D で実際に発生する変換のみを示します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-163">Only conversions that actually occur in Direct3D are shown.</span></span>

<span data-ttu-id="db0fe-164">整数の場合、特に指定のない限り、整数表現への変換および整数表現から浮動小数点表現への変換はすべて正確に行われます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-164">With integers, unless otherwise specified, all conversions to/from integer representations to float representations described below will be done exactly.</span></span>

<table>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"><span data-ttu-id="db0fe-165">変換元のデータ型</span><span class="sxs-lookup"><span data-stu-id="db0fe-165">Source Data Type</span></span></th>
<th align="left"><span data-ttu-id="db0fe-166">変換先のデータ型</span><span class="sxs-lookup"><span data-stu-id="db0fe-166">Destination Data Type</span></span></th>
<th align="left"><span data-ttu-id="db0fe-167">変換の規則</span><span class="sxs-lookup"><span data-stu-id="db0fe-167">Conversion Rule</span></span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><span data-ttu-id="db0fe-168">SNORM</span><span class="sxs-lookup"><span data-stu-id="db0fe-168">SNORM</span></span></td>
<td align="left"><span data-ttu-id="db0fe-169">FLOAT</span><span class="sxs-lookup"><span data-stu-id="db0fe-169">FLOAT</span></span></td>
<td align="left"><p><span data-ttu-id="db0fe-170">符号付きの -1.0f ～ 1.0f の範囲を表す n ビットの整数値から浮動小数点型への変換は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="db0fe-170">Given an n-bit integer value representing the signed range [-1.0f to 1.0f], conversion to floating-point is as follows.</span></span></p>
<ul>
<li><span data-ttu-id="db0fe-171">負数側の最小値が -1.0f にマップされます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-171">The most-negative value maps to -1.0f.</span></span> <span data-ttu-id="db0fe-172">たとえば、5 ビット値 10000 は -1.0f にマップされます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-172">e.g. the 5-bit value 10000 maps to -1.0f.</span></span></li>
<li><span data-ttu-id="db0fe-173">その他の値はすべて浮動小数点型 (これを c とします) に変換され、結果は c \* (1.0f / (2⁽ⁿ⁻¹⁾-1)) となります。</span><span class="sxs-lookup"><span data-stu-id="db0fe-173">Every other value is converted to a float (call it c), and then result = c \* (1.0f / (2⁽ⁿ⁻¹⁾-1)).</span></span> <span data-ttu-id="db0fe-174">たとえば、5 ビット値 10001 は -15.0f に変換された後、15.0f で除算され、-1.0f となります。</span><span class="sxs-lookup"><span data-stu-id="db0fe-174">For example the 5-bit value 10001 is converted to -15.0f, and then divided by 15.0f, yielding -1.0f.</span></span></li>
</ul></td>
</tr>
<tr class="even">
<td align="left"><span data-ttu-id="db0fe-175">FLOAT</span><span class="sxs-lookup"><span data-stu-id="db0fe-175">FLOAT</span></span></td>
<td align="left"><span data-ttu-id="db0fe-176">SNORM</span><span class="sxs-lookup"><span data-stu-id="db0fe-176">SNORM</span></span></td>
<td align="left"><p><span data-ttu-id="db0fe-177">浮動小数点値から符号付きの -1.0f ～ 1.0f の範囲を表す n ビットの整数値への変換は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="db0fe-177">Given a floating-point number, conversion to an n-bit integer value representing the signed range [-1.0f to 1.0f] is as follows.</span></span></p>
<ul>
<li><span data-ttu-id="db0fe-178">変換元の値を c とします。</span><span class="sxs-lookup"><span data-stu-id="db0fe-178">Let c represent the starting value.</span></span></li>
<li><span data-ttu-id="db0fe-179">c が NaN の場合、結果は 0 です。</span><span class="sxs-lookup"><span data-stu-id="db0fe-179">If c is NaN, the result is 0.</span></span></li>
<li><span data-ttu-id="db0fe-180">c &gt; 1.0f の場合 (INF を含む)、1.0f にクランプされます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-180">If c &gt; 1.0f, including INF, it is clamped to 1.0f.</span></span></li>
<li><span data-ttu-id="db0fe-181">c &lt; -1.0f の場合 (-INF を含む)、-1.0f にクランプされます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-181">If c &lt; -1.0f, including -INF, it is clamped to -1.0f.</span></span></li>
<li><span data-ttu-id="db0fe-182">次のように浮動小数点のスケールから整数のスケールに変換します。c = c \* (2ⁿ⁻¹-1)。</span><span class="sxs-lookup"><span data-stu-id="db0fe-182">Convert from float scale to integer scale: c = c \* (2ⁿ⁻¹-1).</span></span></li>
<li><span data-ttu-id="db0fe-183">次のように整数に変換します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-183">Convert to an integer as follows.</span></span>
<ul>
<li><span data-ttu-id="db0fe-184">c &gt;= 0 ならば c = c + 0.5f とし、それ以外の場合は c = c - 0.5f とします。</span><span class="sxs-lookup"><span data-stu-id="db0fe-184">If c &gt;= 0 then c = c + 0.5f, otherwise, c = c - 0.5f.</span></span></li>
<li><span data-ttu-id="db0fe-185">小数部を除外し、残りの浮動小数点値 (整数値) を整数に直接変換します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-185">Drop the decimal fraction, and the remaining floating point (integral) value is converted directly to an integer.</span></span></li>
</ul></li>
</ul>
<p><span data-ttu-id="db0fe-186">この変換では、整数側で D3D<em>xx</em>_FLOAT32_TO_INTEGER_TOLERANCE_IN_Unit-Last-Place ULP の誤差が許容されます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-186">This conversion is permitted a tolerance of D3D<em>xx</em>_FLOAT32_TO_INTEGER_TOLERANCE_IN_Unit-Last-Place Unit-Last-Place (on the integer side).</span></span> <span data-ttu-id="db0fe-187">つまり、浮動小数点スケールから整数スケールへの変換後、変換先の表現可能な形式の値に対して D3D<em>xx</em>_FLOAT32_TO_INTEGER_TOLERANCE_IN_ULP ULP 以内にある値はすべてその変換先の値にマップできます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-187">This means that after converting from float to integer scale, any value within D3D<em>xx</em>_FLOAT32_TO_INTEGER_TOLERANCE_IN_ULP Unit-Last-Place of a representable target format value is permitted to map to that value.</span></span> <span data-ttu-id="db0fe-188">また、データ可換性の要件により、変換は範囲全体にわたって非減少であること、およびすべての出力値が達成可能であることが保証されます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-188">The additional Data Invertability requirement ensures that the conversion is nondecreasing across the range and all output values are attainable.</span></span> <span data-ttu-id="db0fe-189">ここで示した定数で、<em>xx</em> は Direct3D のバージョン (10、11、12 など) に置き換える必要があります。</span><span class="sxs-lookup"><span data-stu-id="db0fe-189">(In the constants shown here, <em>xx</em> should be replaced with the Direct3D version, for example 10, 11, or 12.)</span></span></p></td>
</tr>
<tr class="odd">
<td align="left"><span data-ttu-id="db0fe-190">UNORM</span><span class="sxs-lookup"><span data-stu-id="db0fe-190">UNORM</span></span></td>
<td align="left"><span data-ttu-id="db0fe-191">FLOAT</span><span class="sxs-lookup"><span data-stu-id="db0fe-191">FLOAT</span></span></td>
<td align="left"><p><span data-ttu-id="db0fe-192">変換元の n ビット値は浮動小数点型 (0.0f、1.0f、2.0f など) に変換された後、(2ⁿ-1) で除算されます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-192">The starting n-bit value is converted to float (0.0f, 1.0f, 2.0f, etc.) and then divided by (2ⁿ-1).</span></span></p></td>
</tr>
<tr class="even">
<td align="left"><span data-ttu-id="db0fe-193">FLOAT</span><span class="sxs-lookup"><span data-stu-id="db0fe-193">FLOAT</span></span></td>
<td align="left"><span data-ttu-id="db0fe-194">UNORM</span><span class="sxs-lookup"><span data-stu-id="db0fe-194">UNORM</span></span></td>
<td align="left"><p><span data-ttu-id="db0fe-195">変換元の値を c とします。</span><span class="sxs-lookup"><span data-stu-id="db0fe-195">Let c represent the starting value.</span></span></p>
<ul>
<li><span data-ttu-id="db0fe-196">c が NaN の場合、結果は 0 です。</span><span class="sxs-lookup"><span data-stu-id="db0fe-196">If c is NaN, the result is 0.</span></span></li>
<li><span data-ttu-id="db0fe-197">c &gt; 1.0f の場合 (INF を含む)、1.0f にクランプされます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-197">If c &gt; 1.0f, including INF, it is clamped to 1.0f.</span></span></li>
<li><span data-ttu-id="db0fe-198">c &lt; 0.0f の場合 (-INF を含む)、0.0f にクランプされます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-198">If c &lt; 0.0f, including -INF, it is clamped to 0.0f.</span></span></li>
<li><span data-ttu-id="db0fe-199">次のように浮動小数点のスケールから整数のスケールに変換します。c = c \* (2ⁿ-1)。</span><span class="sxs-lookup"><span data-stu-id="db0fe-199">Convert from float scale to integer scale: c = c \* (2ⁿ-1).</span></span></li>
<li><span data-ttu-id="db0fe-200">整数値に変換します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-200">Convert to integer.</span></span>
<ul>
<li><span data-ttu-id="db0fe-201">c = c + 0.5f。</span><span class="sxs-lookup"><span data-stu-id="db0fe-201">c = c + 0.5f.</span></span></li>
<li><span data-ttu-id="db0fe-202">小数部を除外し、残りの浮動小数点値 (整数値) を整数に直接変換します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-202">The decimal fraction is dropped, and the remaining floating point (integral) value is converted directly to an integer.</span></span></li>
</ul></li>
</ul>
<p><span data-ttu-id="db0fe-203">この変換では、整数側で D3D<em>xx</em>_FLOAT32_TO_INTEGER_TOLERANCE_IN_ULP ULP の誤差が許容されます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-203">This conversion is permitted a tolerance of D3D<em>xx</em>_FLOAT32_TO_INTEGER_TOLERANCE_IN_ULP Unit-Last-Place (on the integer side).</span></span> <span data-ttu-id="db0fe-204">つまり、浮動小数点スケールから整数スケールへの変換後、変換先の表現可能な形式の値に対して D3D<em>xx</em>_FLOAT32_TO_INTEGER_TOLERANCE_IN_ULP ULP 以内にある値はすべてその変換先の値にマップできます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-204">This means that after converting from float to integer scale, any value within D3D<em>xx</em>_FLOAT32_TO_INTEGER_TOLERANCE_IN_ULP Unit-Last-Place of a representable target format value is permitted to map to that value.</span></span> <span data-ttu-id="db0fe-205">また、データ可換性の要件により、変換は範囲全体にわたって非減少であること、およびすべての出力値が達成可能であることが保証されます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-205">The additional Data Invertability requirement ensures that the conversion is nondecreasing across the range and all output values are attainable.</span></span></p></td>
</tr>
<tr class="odd">
<td align="left"><span data-ttu-id="db0fe-206">SRGB</span><span class="sxs-lookup"><span data-stu-id="db0fe-206">SRGB</span></span></td>
<td align="left"><span data-ttu-id="db0fe-207">FLOAT</span><span class="sxs-lookup"><span data-stu-id="db0fe-207">FLOAT</span></span></td>
<td align="left"><p><span data-ttu-id="db0fe-208">SRGB から FLOAT への最適な変換は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="db0fe-208">The following is the ideal SRGB to FLOAT conversion.</span></span></p>
<ul>
<li><span data-ttu-id="db0fe-209">変換元の n ビット値を浮動小数点型 (0.0f、1.0f、2.0f など) に変換します。これを c とします。</span><span class="sxs-lookup"><span data-stu-id="db0fe-209">Take the starting n-bit value, convert it a float (0.0f, 1.0f, 2.0f, etc.); call this c.</span></span></li>
<li><span data-ttu-id="db0fe-210">c = c \* (1.0f / (2ⁿ-1))</span><span class="sxs-lookup"><span data-stu-id="db0fe-210">c = c \* (1.0f / (2ⁿ-1))</span></span></li>
<li><span data-ttu-id="db0fe-211">c &lt; = D3D<em>xx</em>_SRGB_TO_FLOAT_THRESHOLD の場合、結果は c / D3D<em>xx</em>_SRGB_TO_FLOAT_DENOMINATOR_1 です。それ以外の場合、結果は ((c + D3D<em>xx</em>_SRGB_TO_FLOAT_OFFSET)/D3D<em>xx</em>_SRGB_TO_FLOAT_DENOMINATOR_2)D3D<em>xx</em>_SRGB_TO_FLOAT_EXPONENT です。</span><span class="sxs-lookup"><span data-stu-id="db0fe-211">If (c &lt; = D3D<em>xx</em>_SRGB_TO_FLOAT_THRESHOLD) then: result = c / D3D<em>xx</em>_SRGB_TO_FLOAT_DENOMINATOR_1, else: result = ((c + D3D<em>xx</em>_SRGB_TO_FLOAT_OFFSET)/D3D<em>xx</em>_SRGB_TO_FLOAT_DENOMINATOR_2)D3D<em>xx</em>_SRGB_TO_FLOAT_EXPONENT</span></span></li>
</ul>
<p><span data-ttu-id="db0fe-212">この変換では、SRGB 側で D3D<em>xx</em>_SRGB_TO_FLOAT_TOLERANCE_IN_ULP ULP の誤差が許容されます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-212">This conversion is permitted a tolerance of D3D<em>xx</em>_SRGB_TO_FLOAT_TOLERANCE_IN_ULP Unit-Last-Place (on the SRGB side).</span></span></p></td>
</tr>
<tr class="even">
<td align="left"><span data-ttu-id="db0fe-213">FLOAT</span><span class="sxs-lookup"><span data-stu-id="db0fe-213">FLOAT</span></span></td>
<td align="left"><span data-ttu-id="db0fe-214">SRGB</span><span class="sxs-lookup"><span data-stu-id="db0fe-214">SRGB</span></span></td>
<td align="left"><p><span data-ttu-id="db0fe-215">FLOAT から SRGB への最適な変換は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="db0fe-215">The following is the ideal FLOAT -&gt; SRGB conversion.</span></span></p>
<p><span data-ttu-id="db0fe-216">変換先の SRGB カラー成分を n ビットと仮定します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-216">Assuming the target SRGB color component has n bits:</span></span></p>
<ul>
<li><span data-ttu-id="db0fe-217">変換元の値を c とします。</span><span class="sxs-lookup"><span data-stu-id="db0fe-217">Suppose the starting value is c.</span></span></li>
<li><span data-ttu-id="db0fe-218">c が NaN の場合、結果は 0 です。</span><span class="sxs-lookup"><span data-stu-id="db0fe-218">If c is NaN, the result is 0.</span></span></li>
<li><span data-ttu-id="db0fe-219">c &gt; 1.0f の場合 (INF を含む)、1.0f にクランプされます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-219">If c &gt; 1.0f, including INF, is clamped to 1.0f.</span></span></li>
<li><span data-ttu-id="db0fe-220">c &lt; 0.0f の場合 (-INF を含む)、0.0f にクランプされます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-220">If c &lt; 0.0f, including -INF, it is clamped to 0.0f.</span></span></li>
<li><span data-ttu-id="db0fe-221">c &lt;= D3D<em>xx</em>_FLOAT_TO_SRGB_THRESHOLD の場合、c = D3D<em>xx</em>_FLOAT_TO_SRGB_SCALE_1 \* c です。それ以外の場合、c = D3D<em>xx</em>_FLOAT_TO_SRGB_SCALE_2 \* c(D3D<em>xx</em>_FLOAT_TO_SRGB_EXPONENT_NUMERATOR/D3D<em>xx</em>_FLOAT_TO_SRGB_EXPONENT_DENOMINATOR) - D3D<em>xx</em>_FLOAT_TO_SRGB_OFFSET です。</span><span class="sxs-lookup"><span data-stu-id="db0fe-221">If (c &lt;= D3D<em>xx</em>_FLOAT_TO_SRGB_THRESHOLD) then: c = D3D<em>xx</em>_FLOAT_TO_SRGB_SCALE_1 \* c, else: c = D3D<em>xx</em>_FLOAT_TO_SRGB_SCALE_2 \* c(D3D<em>xx</em>_FLOAT_TO_SRGB_EXPONENT_NUMERATOR/D3D<em>xx</em>_FLOAT_TO_SRGB_EXPONENT_DENOMINATOR) - D3D<em>xx</em>_FLOAT_TO_SRGB_OFFSET</span></span></li>
<li><span data-ttu-id="db0fe-222">次のように浮動小数点のスケールから整数のスケールに変換します。c = c \* (2ⁿ-1)。</span><span class="sxs-lookup"><span data-stu-id="db0fe-222">Convert from float scale to integer scale: c = c \* (2ⁿ-1).</span></span></li>
<li><span data-ttu-id="db0fe-223">整数値に変換します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-223">Convert to integer:</span></span>
<ul>
<li><span data-ttu-id="db0fe-224">c = c + 0.5f。</span><span class="sxs-lookup"><span data-stu-id="db0fe-224">c = c + 0.5f.</span></span></li>
<li><span data-ttu-id="db0fe-225">小数部を除外し、残りの浮動小数点値 (整数値) を整数に直接変換します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-225">The decimal fraction is dropped, and the remaining floating point (integral) value is converted directly to an integer.</span></span></li>
</ul></li>
</ul>
<p><span data-ttu-id="db0fe-226">この変換では、整数側で D3D<em>xx</em>_FLOAT32_TO_INTEGER_TOLERANCE_IN_ULP ULP の誤差が許容されます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-226">This conversion is permitted a tolerance of D3D<em>xx</em>_FLOAT32_TO_INTEGER_TOLERANCE_IN_ULP Unit-Last-Place (on the integer side).</span></span> <span data-ttu-id="db0fe-227">つまり、浮動小数点スケールから整数スケールへの変換後、変換先の表現可能な形式の値に対して D3D<em>xx</em>_FLOAT32_TO_INTEGER_TOLERANCE_IN_ULP ULP 以内にある値はすべてその変換先の値にマップできます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-227">This means that after converting from float to integer scale, any value within D3D<em>xx</em>_FLOAT32_TO_INTEGER_TOLERANCE_IN_ULP Unit-Last-Place of a representable target format value is permitted to map to that value.</span></span> <span data-ttu-id="db0fe-228">また、データ可換性の要件により、変換は範囲全体にわたって非減少であること、およびすべての出力値が達成可能であることが保証されます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-228">The additional Data Invertability requirement ensures that the conversion is nondecreasing across the range and all output values are attainable.</span></span></p></td>
</tr>
<tr class="odd">
<td align="left"><span data-ttu-id="db0fe-229">SINT</span><span class="sxs-lookup"><span data-stu-id="db0fe-229">SINT</span></span></td>
<td align="left"><span data-ttu-id="db0fe-230">よりビット数が多い SINT</span><span class="sxs-lookup"><span data-stu-id="db0fe-230">SINT With More Bits</span></span></td>
<td align="left"><p><span data-ttu-id="db0fe-231">SINT からそれよりもビット数が多い SINT に変換する場合、変換元の数値の最上位ビット (MSB) が変換先の形式の追加ビットに &quot;符号拡張&quot; されます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-231">To convert from SINT to an SINT with more bits, the most significant bit (MSB) of the starting number is &quot;sign-extended&quot; to the additional bits available in the target format.</span></span></p></td>
</tr>
<tr class="even">
<td align="left"><span data-ttu-id="db0fe-232">UINT</span><span class="sxs-lookup"><span data-stu-id="db0fe-232">UINT</span></span></td>
<td align="left"><span data-ttu-id="db0fe-233">よりビット数が多い SINT</span><span class="sxs-lookup"><span data-stu-id="db0fe-233">SINT With More Bits</span></span></td>
<td align="left"><p><span data-ttu-id="db0fe-234">UINT からそれよりもビット数が多い SINT に変換する場合、その数値が変換先の形式の最下位ビット (LSB) 側にコピーされ、余った MSB 側ビットが 0 で埋められます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-234">To convert from UINT to an SINT with more bits, the number is copied to the target format's least significant bits (LSBs) and additional MSBs are padded with 0.</span></span></p></td>
</tr>
<tr class="odd">
<td align="left"><span data-ttu-id="db0fe-235">SINT</span><span class="sxs-lookup"><span data-stu-id="db0fe-235">SINT</span></span></td>
<td align="left"><span data-ttu-id="db0fe-236">よりビット数が多い UINT</span><span class="sxs-lookup"><span data-stu-id="db0fe-236">UINT With More Bits</span></span></td>
<td align="left"><p><span data-ttu-id="db0fe-237">SINT からそれよりもビット数が多い UINTに変換する場合、負の値は 0 にクランプされます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-237">To convert from SINT to UINT with more bits: If negative, the value is clamped to 0.</span></span> <span data-ttu-id="db0fe-238">それ以外の数値は変換先の形式の LSB 側にコピーされ、余った MSB 側が 0 で埋められます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-238">Otherwise the number is copied to the target format's LSBs and additional MSB's are padded with 0.</span></span></p></td>
</tr>
<tr class="even">
<td align="left"><span data-ttu-id="db0fe-239">UINT</span><span class="sxs-lookup"><span data-stu-id="db0fe-239">UINT</span></span></td>
<td align="left"><span data-ttu-id="db0fe-240">よりビット数が多い UINT</span><span class="sxs-lookup"><span data-stu-id="db0fe-240">UINT With More Bits</span></span></td>
<td align="left"><p><span data-ttu-id="db0fe-241">UINT からそれよりもビット数が多い UINT に変換する場合、その数値が変換先の形式の LSB 側にコピーされ、余った MSB 側が 0 で埋められます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-241">To convert from UINT to UINT with more bits the number is copied to the target format's LSBs and additional MSB's are padded with 0.</span></span></p></td>
</tr>
<tr class="odd">
<td align="left"><span data-ttu-id="db0fe-242">SINT または UINT</span><span class="sxs-lookup"><span data-stu-id="db0fe-242">SINT or UINT</span></span></td>
<td align="left"><span data-ttu-id="db0fe-243">ビット数が同じか少ない SINT または UINT</span><span class="sxs-lookup"><span data-stu-id="db0fe-243">SINT or UINT With Fewer or Equal Bits</span></span></td>
<td align="left"><p><span data-ttu-id="db0fe-244">SINT または UINT からビット数が同じか少ない SINT または UINT に変換 (符号の有無の変更を伴うことも可) する場合、変換元の値が変換先の形式の範囲に単純にクランプされます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-244">To convert from a SINT or UINT to SINT or UINT with fewer or equal bits (and/or change in signedness), the starting value is simply clamped to the range of the target format.</span></span></p></td>
</tr>
</tbody>
</table>

 

## <a name="span-idfixedpointintegerconversionspanspan-idfixedpointintegerconversionspanspan-idfixedpointintegerconversionspanfixed-point-integer-conversion"></a><span data-ttu-id="db0fe-245"><span id="Fixed_Point_Integer_Conversion"></span><span id="fixed_point_integer_conversion"></span><span id="FIXED_POINT_INTEGER_CONVERSION"></span>固定小数点整数の変換</span><span class="sxs-lookup"><span data-stu-id="db0fe-245"><span id="Fixed_Point_Integer_Conversion"></span><span id="fixed_point_integer_conversion"></span><span id="FIXED_POINT_INTEGER_CONVERSION"></span>Fixed Point Integer Conversion</span></span>


<span data-ttu-id="db0fe-246">固定小数点整数とは単に、暗黙の小数点が固定位置にある一定のビット長の整数です。</span><span class="sxs-lookup"><span data-stu-id="db0fe-246">Fixed point integers are simply integers of some bit size that have an implicit decimal point at a fixed location.</span></span>

<span data-ttu-id="db0fe-247">よく使用される "整数" データ型は、数値の末尾に小数点を置いた、固定小数点整数の特殊なケースです。</span><span class="sxs-lookup"><span data-stu-id="db0fe-247">The ubiquitous "integer" data type is a special case of a fixed point integer with the decimal at the end of the number.</span></span>

<span data-ttu-id="db0fe-248">固定小数点数は i.f という形式で表現します。i は整数部ビット数、f は小数部ビット数を表します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-248">Fixed point number representations are characterized as: i.f, where i is the number of integer bits and f is the number of fractional bits.</span></span> <span data-ttu-id="db0fe-249">たとえば、16.8 は 16 ビットの整数の後ろに 8 ビットの小数が続くことを示します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-249">e.g. 16.8 means 16 bits integer followed by 8 bits of fraction.</span></span> <span data-ttu-id="db0fe-250">整数部は、少なくともここでの定義では、2 の補数として格納されます (符号なし整数についても同様です)。</span><span class="sxs-lookup"><span data-stu-id="db0fe-250">The integer part is stored in 2's complement, at least as defined here (though it can be defined equally for unsigned integers as well).</span></span> <span data-ttu-id="db0fe-251">小数部は符号なしの形式で格納されます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-251">The fractional part is stored in unsigned form.</span></span> <span data-ttu-id="db0fe-252">小数部は、負数側の最小値から、互いに最も近い 2 つの整数値の間で必ず正の小数となります。</span><span class="sxs-lookup"><span data-stu-id="db0fe-252">The fractional part always represents the positive fraction between the two nearest integral values, starting from the most negative.</span></span>

<span data-ttu-id="db0fe-253">固定小数点数に対する加算演算および減算演算は、単純に通常の整数演算で実行します。暗黙の小数点の位置は考慮されません。</span><span class="sxs-lookup"><span data-stu-id="db0fe-253">Addition and subtraction operations on fixed point numbers are performed simply using standard integer arithmetic, without any consideration for where the implied decimal lies.</span></span> <span data-ttu-id="db0fe-254">16.8 の固定小数点数に対する 1 の加算は、この数値の最下位端から 8 桁は小数部であるため、256 を加算することを意味します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-254">Adding 1 to a 16.8 fixed point number just means adding 256, since the decimal is 8 places in from the least significant end of the number.</span></span> <span data-ttu-id="db0fe-255">乗算などのその他の演算も、固定小数点への影響を考慮したうえで、単純に整数演算によって実行できます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-255">Other operations such as multiplication, can be performed as well simply using integer arithmetic, provided the effect on the fixed decimal is accounted for.</span></span> <span data-ttu-id="db0fe-256">たとえば、2 つの 16.8 の整数を整数乗算すると、結果は 32.16 になります。</span><span class="sxs-lookup"><span data-stu-id="db0fe-256">For example, multiplying two 16.8 integers using an integer multiply produces a 32.16 result.</span></span>

<span data-ttu-id="db0fe-257">Direct3D では、次の 2 つの状況で固定小数点整数表現を使用します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-257">Fixed point integer representations are used in two ways in Direct3D.</span></span>

-   <span data-ttu-id="db0fe-258">ラスタライザーでのクリップ後の頂点位置は固定小数点にスナップされ、RenderTarget 領域全体で精度分布が均一になります。</span><span class="sxs-lookup"><span data-stu-id="db0fe-258">Post-clipped vertex positions in the rasterizer are snapped to fixed point, to uniformly distribute precision across the RenderTarget area.</span></span> <span data-ttu-id="db0fe-259">面のカリングをはじめ、多くのラスタライザー処理は固定小数点のスナップ位置で発生しますが、属性のインターポレーター セットアップなどの処理では、固定小数点のスナップ位置から浮動小数点に逆変換した位置を使用します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-259">Many rasterizer operations, including face culling as one example, occur on fixed point snapped positions, while other operations, such as attribute interpolator setup, use positions that have been converted back to floating point from the fixed point snapped positions.</span></span>
-   <span data-ttu-id="db0fe-260">フィルターのタップ位置/重みの選択では、サンプリング処理のテクスチャー座標が (テクスチャー サイズに合わせてスケーリングされた後) 固定小数点にスナップされ、テクスチャー領域全体で精度分布が均一になります。</span><span class="sxs-lookup"><span data-stu-id="db0fe-260">Texture coordinates for sampling operations are snapped to fixed point (after being scaled by texture size), to uniformly distribute precision across texture space, in choosing filter tap locations/weights.</span></span> <span data-ttu-id="db0fe-261">重み値は、実際のフィルタリング演算を実行する前に浮動小数点に逆変換します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-261">Weight values are converted back to floating point before actual filtering arithmetic is performed.</span></span>

<table>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"><span data-ttu-id="db0fe-262">変換元のデータ型</span><span class="sxs-lookup"><span data-stu-id="db0fe-262">Source Data Type</span></span></th>
<th align="left"><span data-ttu-id="db0fe-263">変換先のデータ型</span><span class="sxs-lookup"><span data-stu-id="db0fe-263">Destination Data Type</span></span></th>
<th align="left"><span data-ttu-id="db0fe-264">変換の規則</span><span class="sxs-lookup"><span data-stu-id="db0fe-264">Conversion Rule</span></span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><span data-ttu-id="db0fe-265">FLOAT</span><span class="sxs-lookup"><span data-stu-id="db0fe-265">FLOAT</span></span></td>
<td align="left"><span data-ttu-id="db0fe-266">固定小数点整数</span><span class="sxs-lookup"><span data-stu-id="db0fe-266">Fixed Point Integer</span></span></td>
<td align="left"><p><span data-ttu-id="db0fe-267">浮動小数点型の数値 n を固定小数点整数 i.f に変換する一般的な手順は次のとおりです。ここで、i は整数部ビット数 (符号付き)、f は小数部ビット数です。</span><span class="sxs-lookup"><span data-stu-id="db0fe-267">The following is the general procedure for converting a floating point number n to a fixed point integer i.f, where i is the number of (signed) integer bits and f is the number of fractional bits.</span></span></p>
<ul>
<li><span data-ttu-id="db0fe-268">FixedMin = -2⁽ⁱ⁻¹⁾ を計算します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-268">Compute FixedMin = -2⁽ⁱ⁻¹⁾</span></span></li>
<li><span data-ttu-id="db0fe-269">FixedMax = 2⁽ⁱ⁻¹⁾ - 2<sup>(-f)</sup> を計算します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-269">Compute FixedMax = 2⁽ⁱ⁻¹⁾ - 2<sup>(-f)</sup></span></span></li>
<li><span data-ttu-id="db0fe-270">n が NaN の場合、結果は 0 です。n が +Inf の場合の結果は FixedMax*2<sup>f</sup> で、n が -Inf の場合の結果は FixedMin*2<sup>f</sup> です。</span><span class="sxs-lookup"><span data-stu-id="db0fe-270">If n is a NaN, result = 0; if n is +Inf, result = FixedMax*2<sup>f</sup>; if n is -Inf, result = FixedMin*2<sup>f</sup></span></span></li>
<li><span data-ttu-id="db0fe-271">n &gt;= FixedMax の場合の結果は Fixedmax*2<sup>f</sup> で、n &lt;= FixedMin の場合の結果は FixedMin*2<sup>f</sup> です。</span><span class="sxs-lookup"><span data-stu-id="db0fe-271">If n &gt;= FixedMax, result = Fixedmax*2<sup>f</sup>; if n &lt;= FixedMin, result = FixedMin*2<sup>f</sup></span></span></li>
<li><span data-ttu-id="db0fe-272">それ以外の場合は、n\*2<sup>f</sup> を計算して整数に変換します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-272">Else compute n\*2<sup>f</sup> and convert to integer.</span></span></li>
</ul>
<p><span data-ttu-id="db0fe-273">実装では、上の最後の手順で得られた整数と無限大精度値 n\*2<sup>f</sup> との比較で、D3D<em>xx</em>_FLOAT32_TO_INTEGER_TOLERANCE_IN_ULP ULP の誤差が許容されます。</span><span class="sxs-lookup"><span data-stu-id="db0fe-273">Implementations are permitted D3D<em>xx</em>_FLOAT32_TO_INTEGER_TOLERANCE_IN_ULP Unit-Last-Place tolerance in the integer result, instead of the infinitely precise value n\*2<sup>f</sup> after the last step above.</span></span></p></td>
</tr>
<tr class="even">
<td align="left"><span data-ttu-id="db0fe-274">固定小数点整数</span><span class="sxs-lookup"><span data-stu-id="db0fe-274">Fixed Point Integer</span></span></td>
<td align="left"><span data-ttu-id="db0fe-275">FLOAT</span><span class="sxs-lookup"><span data-stu-id="db0fe-275">FLOAT</span></span></td>
<td align="left"><p><span data-ttu-id="db0fe-276">浮動小数点型に変換する固定小数点表現があり、その合計ビット数は 24 ビット以下で、うち小数部は 23 ビット以下であるとします。</span><span class="sxs-lookup"><span data-stu-id="db0fe-276">Assume that the specific fixed point representation being converted to float does not contain more than a total of 24 bits of information, no more than 23 bits of which is in the fractional component.</span></span> <span data-ttu-id="db0fe-277">特定の固定小数点数 fxp を i.f の形式とします (i ビットの整数、f ビットの小数)。</span><span class="sxs-lookup"><span data-stu-id="db0fe-277">Suppose a given fixed point number, fxp, is in i.f form (i bits integer, f bits fraction).</span></span> <span data-ttu-id="db0fe-278">浮動小数点型への変換は次に示す疑似コードのようになります。</span><span class="sxs-lookup"><span data-stu-id="db0fe-278">The conversion to float is akin to the following pseudocode.</span></span></p>
<p><span data-ttu-id="db0fe-279">float result = (float) (fxp &gt; &gt; f) +///整数を抽出します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-279">float result = (float)(fxp &gt;&gt; f) + // extract integer</span></span></p>
<span data-ttu-id="db0fe-280">((float) (fxp &amp; (2<sup>f</sup> - 1))/(2<sup>f</sup>));小数を抽出します。</span><span class="sxs-lookup"><span data-stu-id="db0fe-280">((float)(fxp &amp; (2<sup>f</sup> - 1)) / (2<sup>f</sup>)); // extract fraction</span></span></td>
</tr>
</tbody>
</table>

 

## <a name="span-idrelated-topicsspanrelated-topics"></a><span data-ttu-id="db0fe-281"><span id="related-topics"></span>関連トピック</span><span class="sxs-lookup"><span data-stu-id="db0fe-281"><span id="related-topics"></span>Related topics</span></span>


[<span data-ttu-id="db0fe-282">付録</span><span class="sxs-lookup"><span data-stu-id="db0fe-282">Appendices</span></span>](appendix.md)

 

 




