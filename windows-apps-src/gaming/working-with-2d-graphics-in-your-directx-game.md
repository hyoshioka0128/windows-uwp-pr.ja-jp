---
title: DirectX ゲームの 2D グラフィックス
description: ここでは、2D ビットマップ グラフィックスおよびエフェクトの用途と、これらを実際のゲームで使用する方法について説明します。
ms.assetid: ad69e680-d709-83d7-4a4c-7bbfe0766bc7
ms.date: 02/08/2017
ms.topic: article
keywords: Windows 10, UWP, ゲーム, DirectX, 2D, グラフィックス
ms.localizationpriority: medium
ms.openlocfilehash: 1154abc4305307d87f15fbe0c0e5461e3a15e27e
ms.sourcegitcommit: d7613c791107f74b6a3dc12a372d9de916c0454b
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/05/2018
ms.locfileid: "8757807"
---
# <a name="2d-graphics-for-directx-games"></a><span data-ttu-id="ae663-104">DirectX ゲームの 2D グラフィックス</span><span class="sxs-lookup"><span data-stu-id="ae663-104">2D graphics for DirectX games</span></span>



<span data-ttu-id="ae663-105">ここでは、2D ビットマップ グラフィックスおよびエフェクトの用途と、これらを実際のゲームで使用する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="ae663-105">We discuss the use of 2D bitmap graphics and effects, and how to use them in your game.</span></span>

<span data-ttu-id="ae663-106">2D グラフィックスは、2D のプリミティブやビットマップを扱う 3D グラフィックスのサブセットです。</span><span class="sxs-lookup"><span data-stu-id="ae663-106">2D graphics are a subset of 3D graphics that deal with 2D primitives or bitmaps.</span></span> <span data-ttu-id="ae663-107">平たく言えば、2D グラフィックスでは概して、3D ゲームで使うような Z 座標は使用せず、ゲーム プレイは x-y の平面に制限されます。</span><span class="sxs-lookup"><span data-stu-id="ae663-107">More generally, they don't use a z-coordinate in the way a 3D game might, since the game play is usually confined to the x-y plane.</span></span> <span data-ttu-id="ae663-108">2D グラフィックスでは、3D グラフィックスの手法を使用して、ビジュアル コンポーネントを作成する場合があります。2D グラフィックスは通常、3D グラフィックスよりも開発が容易です。</span><span class="sxs-lookup"><span data-stu-id="ae663-108">They sometimes use 3D graphics techniques to create their visual components, and they are generally simpler to develop.</span></span> <span data-ttu-id="ae663-109">ゲーミングの作業に初めて携わる場合、まず 2D のゲームから始めることをお勧めします。また 2D グラフィックスの開発は、DirectX を理解するうえで効果的な第一歩となります。</span><span class="sxs-lookup"><span data-stu-id="ae663-109">If you are new to gaming, a 2D game is a great place to start, and 2D graphics development can be a good place for you to get a handle on DirectX.</span></span>

<span data-ttu-id="ae663-110">DirectX で使用する 2D ゲーミングのグラフィックスは、Direct2D または Direct3D、あるいはその組み合わせを使用して開発できます。</span><span class="sxs-lookup"><span data-stu-id="ae663-110">You can develop 2D gaming graphics in DirectX using either Direct2D or Direct3D, or some combination.</span></span> <span data-ttu-id="ae663-111">[**Sprite**](https://msdn.microsoft.com/library/windows/desktop/bb205601) クラスなど、2D ゲーム開発で使用できる有用なクラスが多く Direct3D にもあります。</span><span class="sxs-lookup"><span data-stu-id="ae663-111">Many of the more useful classes for 2D game development are in Direct3D, such as the [**Sprite**](https://msdn.microsoft.com/library/windows/desktop/bb205601) class.</span></span> <span data-ttu-id="ae663-112">Direct2D は、主にプリミティブ (たとえば、円、線、平面上の多角形図形など) の描画時にサポートが必要となるユーザー インターフェイスやアプリを対象とした API のセットです。</span><span class="sxs-lookup"><span data-stu-id="ae663-112">Direct2D is a set of APIs that primarily target user interfaces and apps that require support for drawing primitives (such as circles, lines, and flat polygon shapes).</span></span> <span data-ttu-id="ae663-113">以上を前提として、Direct2D により、ゲーム グラフィックスの作成をはじめ、特にゲームのオーバーレイ、インターフェイス、およびヘッドアップ ディスプレイ (HUD) の作成、または多様な 2D ゲーム (シンプルなものから比較的複雑なものまで) の作成にあたって利用できる強力で効率のよいクラスとメソッドのセットが提供されます。</span><span class="sxs-lookup"><span data-stu-id="ae663-113">With that in mind, it still provides a powerful and performant set of classes and methods for creating game graphics as well, especially when creating game overlays, interfaces, and heads-up displays (HUDs) -- or for creating a variety of 2D games, from simple to reasonably detailed.</span></span> <span data-ttu-id="ae663-114">ただし、2D ゲームの作成に向けた最も効果的なアプローチは、両方のライブラリにある要素を利用することです。ここでは、こうしたアプローチによって 2D グラフィックスの開発について説明します。</span><span class="sxs-lookup"><span data-stu-id="ae663-114">The most effective approach when creating 2D games, though, is to use elements from both libraries, and that's the way we will approach 2D graphics development in this topic.</span></span>

## <a name="concepts-at-a-glance"></a><span data-ttu-id="ae663-115">概要</span><span class="sxs-lookup"><span data-stu-id="ae663-115">Concepts at a glance</span></span>


<span data-ttu-id="ae663-116">近年の 3D グラフィックスやこれに対応するハードウェアが登場する前は、2D のゲームが主流でした。ここで使用するグラフィックスの手法の多くがメモリ ブロックをあちこちに動かすものでした。通常は、一連のカラー データを、画面のピクセルに 1:1 の形式で変換、または変形していました。</span><span class="sxs-lookup"><span data-stu-id="ae663-116">Before the advent of modern 3D graphics and the hardware that supports it, games were primarily 2D, and many of their graphics techniques involved moving blocks of memory around -- usually arrays of color data that would be translated or transformed to pixels on the screen in a 1:1 fashion.</span></span>

<span data-ttu-id="ae663-117">DirectX では、2D グラフィックスは 3D パイプラインの一部として提供されます。</span><span class="sxs-lookup"><span data-stu-id="ae663-117">In DirectX, 2D graphics are part of the 3D pipeline.</span></span> <span data-ttu-id="ae663-118">現在では、はるかに多様なスクリーン解像度やグラフィックス ハードウェアが利用できるため、2D グラフィックス エンジンでは画質を大きく損なうことなく、こうした機能をサポートできなければなりません。</span><span class="sxs-lookup"><span data-stu-id="ae663-118">There is a much greater variety of screen resolutions and graphics hardware available, and your 2D graphics engine must be able to support them without a significant change in fidelity.</span></span>

<span data-ttu-id="ae663-119">以下に、2D グラフィックスを開発するにあたって理解しておくべき基本的な概念をいくつか示します。</span><span class="sxs-lookup"><span data-stu-id="ae663-119">Here are a few of the basic concepts you should be familiar with when starting 2D graphics development.</span></span>

-   <span data-ttu-id="ae663-120">ピクセル座標とラスター座標</span><span class="sxs-lookup"><span data-stu-id="ae663-120">Pixels and raster coordinates.</span></span> <span data-ttu-id="ae663-121">ピクセルとは、ラスター ディスプレイ上の 1 個の点のことです。ピクセルには固有の座標ペア (x, y) が与えられ、これによりディスプレイ上の位置を表します </span><span class="sxs-lookup"><span data-stu-id="ae663-121">A pixel is a single point on a raster display, and has its own (x, y) coordinate pair indicating its location on the display.</span></span> <span data-ttu-id="ae663-122">(「ピクセル」という用語は、ディスプレイを構成する物理的な画素を表す場合と、実際にディスプレイに送信する前に、画素の色とアルファ値を格納する際に用いるアドレス可能なメモリ要素を表す場合があります)。ラスターは、API によりピクセル要素を含む長方形グリッドとして扱われます。多くの場合、ディスプレイ上の物理的なピクセル グリッドと 1:1 で対応します。</span><span class="sxs-lookup"><span data-stu-id="ae663-122">(The term "pixel" is often used interchangeably between the physical pixels that comprise the display and the addressable memory elements used to hold the color and alpha values of the pixels before they are sent to the display.) The raster is treated by APIs as a rectangular grid of pixel elements, which often has a 1:1 correspondence with the physical pixel grid of a display.</span></span> <span data-ttu-id="ae663-123">ラスター座標系は、グリッドの左上端のピクセル (0, 0) から開始します。</span><span class="sxs-lookup"><span data-stu-id="ae663-123">Raster coordinate systems start from the upper left, with the pixel at (0, 0) in the upper leftmost corner of the grid.</span></span>
-   <span data-ttu-id="ae663-124">ビットマップ グラフィックス (ラスター グラフィックスとも呼ばれます) は、ピクセル値を含む長方形グリッドとして表されます。</span><span class="sxs-lookup"><span data-stu-id="ae663-124">Bitmap graphics (sometimes called raster graphics) are graphic elements represented as a rectangular grid of pixel values.</span></span> <span data-ttu-id="ae663-125">スプライト (ラスターからは独立して管理する計算済みのピクセル配列) は、一般にゲーム中のアクティブ キャラクターや背景独立型のアニメーション オブジェクトなどに使用するビットマップ グラフィックの 1 種です。</span><span class="sxs-lookup"><span data-stu-id="ae663-125">Sprites -- computed pixel arrays managed independent of the raster -- are one type of bitmap graphic, commonly used for the active characters or background-independent animated objects in a game.</span></span> <span data-ttu-id="ae663-126">スプライトのアニメーションに使用する各種フレームは、「シート」または「バッチ」と呼ばれるビットマップのコレクションとして表現されます。</span><span class="sxs-lookup"><span data-stu-id="ae663-126">The various frames of animation for a sprite are represented as collections of bitmaps called "sheets" or "batches."</span></span> <span data-ttu-id="ae663-127">背景は、スクリーン ラスターと同じ、またはそれ以上の解像度を持つ大型のビットマップ オブジェクトです。ゲームのプレイ画面のバックグラウンドとして使用することがあります。</span><span class="sxs-lookup"><span data-stu-id="ae663-127">Backgrounds are larger bitmap objects that are the same resolution or greater than that of the screen raster, and often serve as the backdrop(s) for a game's playfield.</span></span>
-   <span data-ttu-id="ae663-128">ベクター グラフィックスは、点、線、円、2D オブジェクトを定義する多角形など幾何学的プリミティブを使用した画像です。</span><span class="sxs-lookup"><span data-stu-id="ae663-128">Vector graphics are graphics that use geometric primitives, such as points, lines, circles, and polygons to define 2D objects.</span></span> <span data-ttu-id="ae663-129">ベクター グラフィックスは、ピクセル配列としてではなく、2D 図形中で定義する数学方程式として表します。</span><span class="sxs-lookup"><span data-stu-id="ae663-129">They are represented not as arrays of pixels, but as the mathematical equations that define them in a 2D space.</span></span> <span data-ttu-id="ae663-130">必ずしも、ディスプレイのピクセル グリッドとは 1:1 で対応しないため、レンダリングに使用した座標系から、ディスプレイのラスター座標系への変換が必要になります。</span><span class="sxs-lookup"><span data-stu-id="ae663-130">They do not necessarily have a 1:1 correspondence with the pixel grid of the display, and must be transformed from the coordinate system that you rendered them in into the raster coordinate system of the display.</span></span>
-   <span data-ttu-id="ae663-131">移動とは、点や頂点を取って位置を計算し、同じ座標系で別の位置に移すことです。</span><span class="sxs-lookup"><span data-stu-id="ae663-131">Translation is when you take a point or vertex and calculate its new location in the same coordinate system.</span></span>
-   <span data-ttu-id="ae663-132">スケーリングとは、指定した倍率でオブジェクトを拡大または縮小することです。</span><span class="sxs-lookup"><span data-stu-id="ae663-132">Scaling is when you enlarge or shrink an object by a specified scale factor.</span></span> <span data-ttu-id="ae663-133">ベクター イメージの場合は、コンポーネントの頂点を使用して拡大または縮小を行います。ビットマップの場合は、ピクセル要素で拡大または縮小します。</span><span class="sxs-lookup"><span data-stu-id="ae663-133">With a vector image, you shrink and enlarge its component vertices; with a bitmap, you enlarge the pixel elements or diminish them.</span></span> <span data-ttu-id="ae663-134">ビットマップ イメージの場合、画像を縮小すると、ピクセル データが失われることがあります。画像を接近的にスケーリングする場合は、個々のピクセルを拡大します。</span><span class="sxs-lookup"><span data-stu-id="ae663-134">With bitmap images, you lose pixel data when the image shrinks, and you enlarge the individual pixels when the image is scaled closer.</span></span> <span data-ttu-id="ae663-135">後者の場合、バイリニア フィルターのようなピクセル色補間操作によって拡大したピクセル間に生じる不自然な色の境界をスムーズにします。</span><span class="sxs-lookup"><span data-stu-id="ae663-135">For the latter, you can use pixel color interpolation operations, like bilinear filtering, to smooth out the harsh color boundaries between the enlarged pixels.</span></span>
-   <span data-ttu-id="ae663-136">回転は、指定した軸 (複数の軸も可能) を中心にオブジェクトを回転させることです。</span><span class="sxs-lookup"><span data-stu-id="ae663-136">Rotation is when you rotate an object about a specified axis or axes.</span></span> <span data-ttu-id="ae663-137">ベクター イメージの場合は、回転マトリックスに対してジオメトリの頂点を乗算することにより回転させた頂点を求めます。ビットマップ イメージの場合は、使用するアルゴリズムごとに生成される画質の程度が変動します。</span><span class="sxs-lookup"><span data-stu-id="ae663-137">With a vector image, the vertices of the geometry are multiplied against a rotation matrix to obtain the rotated vertex; with a bitmap image, different algorithms can be employed, each with a lesser or greater degree of fidelity in the results.</span></span> <span data-ttu-id="ae663-138">スケーリングと移動の場合と同様、回転操作に特化した API があります。</span><span class="sxs-lookup"><span data-stu-id="ae663-138">As with scaling and translation, there are APIs specifically for rotation operations.</span></span>
-   <span data-ttu-id="ae663-139">変換とは、ある座標系にある点や頂点を取って位置を計算し、別の座標系上で対応する点と頂点に置き換えることです。</span><span class="sxs-lookup"><span data-stu-id="ae663-139">Transformation is when you take one point or vertex in one coordinate system and calculate its corresponding point or vertex in another coordinate system.</span></span> <span data-ttu-id="ae663-140">変換には移動、スケーリング、回転のほか、別の座標計算操作も含まれます。</span><span class="sxs-lookup"><span data-stu-id="ae663-140">This includes translation, scaling, and rotation, as well as other coordinate calculation operations.</span></span>
-   <span data-ttu-id="ae663-141">クリップとは、ディスプレイの表示可能領域にない、または表示優先順位の高いオブジェクトの下に隠れたビットマップまたは形状の一部を除去することです。</span><span class="sxs-lookup"><span data-stu-id="ae663-141">Clipping is when you remove portions of bitmaps or geometry that are not within the viewable area of the display, or are hidden by objects with higher view priority.</span></span>
-   <span data-ttu-id="ae663-142">フレーム バッファーは、メモリ (またはグラフィックス ハードウェア自体のメモリの場合もあります) 内の領域のことで、スクリーンに描画する最終的なラスター マップが格納されます。</span><span class="sxs-lookup"><span data-stu-id="ae663-142">The frame buffer is an area in memory -- often in the memory of the graphics hardware itself -- that contains the final raster map that you will draw to the screen.</span></span> <span data-ttu-id="ae663-143">スワップ チェーンとは、一連のバッファーのことで、この中のバック バッファーに描画を行います。画像の準備ができた段階でフロント バッファーと「反転」して表示します。</span><span class="sxs-lookup"><span data-stu-id="ae663-143">The swap chain is a collection of buffers, where you draw in a back buffer and, when the image is ready, you "swap" it to the front and display it.</span></span>

## <a name="design-considerations"></a><span data-ttu-id="ae663-144">設計時の考慮事項</span><span class="sxs-lookup"><span data-stu-id="ae663-144">Design considerations</span></span>


<span data-ttu-id="ae663-145">2D グラフィックスの開発は、Direct3D による開発を目指す手始めの作業として効果的です。これにより、オーディオ、コントロール、ゲームのしくみなど、ゲーム開発に伴う重要な側面も時間をかけて習得できるようになります。</span><span class="sxs-lookup"><span data-stu-id="ae663-145">2D graphics development is a great way to get accustomed to developing with Direct3D, and will allow you to spend more time on other critical aspects of game development: audio, controls, and the game mechanics.</span></span>

<span data-ttu-id="ae663-146">描画は必ずバック バッファーに行います。</span><span class="sxs-lookup"><span data-stu-id="ae663-146">Always draw to a back buffer.</span></span> <span data-ttu-id="ae663-147">フレーム バッファーに直接描画すると、描画操作が完了していなくても、ディスプレイ信号を受け取った時点 (通常 1/60 秒) で画像が表示されることになります。</span><span class="sxs-lookup"><span data-stu-id="ae663-147">Drawing directly to your frame buffer means that your image will be displayed when the signal for display is received (usually every 1/60th of second), even if your drawing operation hasn't completed!</span></span>

<span data-ttu-id="ae663-148">グラフィックス エンジンは、1024 × 600 から 1920 × 1080 (またはそれ以上) の高解像度をサポートするように設計します。</span><span class="sxs-lookup"><span data-stu-id="ae663-148">Design your graphics engine to support a good selection of resolutions, from 1024x600 to 1920x1080 (or higher).</span></span> <span data-ttu-id="ae663-149">ユーザーからは LCD モニター ネイティブの解像度 (特に 2D グラフィックスの場合) のサポートが求められています。</span><span class="sxs-lookup"><span data-stu-id="ae663-149">Your audience will thank you if you support their LCD monitor's native resolution, especially with 2D graphics.</span></span>

<span data-ttu-id="ae663-150">優れたアートワークは、ビジュアルの世界では貴重なアセットとなります。</span><span class="sxs-lookup"><span data-stu-id="ae663-150">Great artwork will be your greatest asset, when it comes to visuals.</span></span> <span data-ttu-id="ae663-151">ビットマップ グラフィックスでは、最先端のシェーダー モデル機能を駆使した 3D の写真のようにリアルなビジュアルの迫力に欠けるものの、高解像度のアートワークが説得力のあるスタイルや個性を伝えられる場合があります。しかもパフォーマンス上の犠牲が最小限に抑えられます。</span><span class="sxs-lookup"><span data-stu-id="ae663-151">While your bitmap graphics may lack the punch of 3D photorealistic visuals using the latest shader model features, great high-resolution artwork can often convey as much or more style and personality -- and with far less of a performance penalty.</span></span>

## <a name="reference"></a><span data-ttu-id="ae663-152">辞書/リファレンス</span><span class="sxs-lookup"><span data-stu-id="ae663-152">Reference</span></span>


-   [<span data-ttu-id="ae663-153">Direct2D の概要</span><span class="sxs-lookup"><span data-stu-id="ae663-153">Direct2D overview</span></span>](https://msdn.microsoft.com/library/windows/desktop/dd370987)
-   [<span data-ttu-id="ae663-154">Direct2D クイック スタート</span><span class="sxs-lookup"><span data-stu-id="ae663-154">Direct2D quickstart</span></span>](https://msdn.microsoft.com/library/windows/desktop/dd535473)
-   [<span data-ttu-id="ae663-155">Direct2D と Direct3D の相互運用性に関する概要</span><span class="sxs-lookup"><span data-stu-id="ae663-155">Direct2D and Direct3D interoperability overview</span></span>](https://msdn.microsoft.com/library/windows/desktop/dd370966)
