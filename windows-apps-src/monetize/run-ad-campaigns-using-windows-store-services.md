---
author: mcleanbyron
ms.assetid: 8e6c3d3d-0120-40f4-9f90-0b0518188a1a
description: Microsoft Store プロモーション API を使うと、自分または自分の組織の Windows デベロッパー センター アカウントに登録されているアプリのプロモーション用の広告キャンペーンをプログラムで管理できます。
title: ストア サービスを使用した広告キャンペーンの実行
ms.author: mcleans
ms.date: 02/08/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: Windows 10, UWP, Microsoft Store プロモーション API, 広告キャンペーン
ms.localizationpriority: medium
ms.openlocfilehash: dd90b970a126495d7a1035256f4bdd219aee9ee5
ms.sourcegitcommit: 0ab8f6fac53a6811f977ddc24de039c46c9db0ad
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/15/2018
ms.locfileid: "1655284"
---
# <a name="run-ad-campaigns-using-store-services"></a><span data-ttu-id="29cc2-104">ストア サービスを使用した広告キャンペーンの実行</span><span class="sxs-lookup"><span data-stu-id="29cc2-104">Run ad campaigns using Store services</span></span>

<span data-ttu-id="29cc2-105">*Microsoft Store プロモーション API* を使うと、自分または自分の組織の Windows デベロッパー センター アカウントに登録されているアプリのプロモーション用の広告キャンペーンをプログラムで管理できます。</span><span class="sxs-lookup"><span data-stu-id="29cc2-105">Use the *Microsoft Store promotions API* to programmatically manage promotional ad campaigns for apps that are registered to your or your organization's Windows Dev Center account.</span></span> <span data-ttu-id="29cc2-106">この API を使用して、広告キャンペーンや、ターゲット設定、クリエイティブなど、その他の関連アセットを作成、更新、および監視できます。</span><span class="sxs-lookup"><span data-stu-id="29cc2-106">This API enables you to create, update and monitor your campaigns and other related assets such as targeting and creatives.</span></span> <span data-ttu-id="29cc2-107">この API は、大量のキャンペーンを作成する開発者や、Windows デベロッパー センター ダッシュボードを使用せずにキャンペーンを作成する必要がある開発者に特に便利です。</span><span class="sxs-lookup"><span data-stu-id="29cc2-107">This API is especially useful for developers who create large volumes of campaigns, and who want to do so without using the Windows Dev Center dashboard.</span></span> <span data-ttu-id="29cc2-108">この API は、Azure Active Directory (Azure AD) を使って、アプリまたはサービスからの呼び出しを認証します。</span><span class="sxs-lookup"><span data-stu-id="29cc2-108">This API uses Azure Active Directory (Azure AD) to authenticate the calls from your app or service.</span></span>

<span data-ttu-id="29cc2-109">次の手順で、このプロセスについて詳しく説明しています。</span><span class="sxs-lookup"><span data-stu-id="29cc2-109">The following steps describe the end-to-end process:</span></span>

1.  <span data-ttu-id="29cc2-110">すべての[前提条件](#prerequisites)を完了したことを確認します。</span><span class="sxs-lookup"><span data-stu-id="29cc2-110">Make sure that you have completed all the [prerequisites](#prerequisites).</span></span>
2.  <span data-ttu-id="29cc2-111">Microsoft Store プロモーション API のメソッドを呼び出す前に、[Azure AD アクセス トークンを取得](#obtain-an-azure-ad-access-token)する必要があります。</span><span class="sxs-lookup"><span data-stu-id="29cc2-111">Before you call a method in the Microsoft Store promotions API, [obtain an Azure AD access token](#obtain-an-azure-ad-access-token).</span></span> <span data-ttu-id="29cc2-112">トークンを取得した後、Microsoft Store プロモーション API の呼び出しでこのトークンを使用できるのは、その有効期限が切れるまでの 60 分間です。</span><span class="sxs-lookup"><span data-stu-id="29cc2-112">After you obtain a token, you have 60 minutes to use this token in calls to the Microsoft Store promotions API before the token expires.</span></span> <span data-ttu-id="29cc2-113">トークンの有効期限が切れた後は、新しいトークンを生成できます。</span><span class="sxs-lookup"><span data-stu-id="29cc2-113">After the token expires, you can generate a new token.</span></span>
3.  <span data-ttu-id="29cc2-114">[Microsoft Store プロモーション API を呼び出します](#call-the-windows-store-promotions-api)。</span><span class="sxs-lookup"><span data-stu-id="29cc2-114">[Call the Microsoft Store promotions API](#call-the-windows-store-promotions-api).</span></span>

<span data-ttu-id="29cc2-115">または、Windows デベロッパー センター ダッシュボードを使って広告キャンペーンの作成と管理を行うこともできます。Microsoft Store プロモーション API を使ってプログラムで作成した広告キャンペーンはすべて、ダッシュボードからもアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="29cc2-115">You can alternatively create and manage ad campaigns using the Windows Dev Center dashboard, and any ad campaigns that you create programmatically via the Microsoft Store promotions API can also be accessed in the dashboard.</span></span> <span data-ttu-id="29cc2-116">ダッシュボードでの広告キャンペーンの管理について詳しくは、「[アプリ向けの広告キャンペーンの作成](../publish/create-an-ad-campaign-for-your-app.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="29cc2-116">For more information about managing ad campaigns in the dashboard, see [Create an ad campaign for your app](../publish/create-an-ad-campaign-for-your-app.md).</span></span>

> [!NOTE]
> <span data-ttu-id="29cc2-117">Windows デベロッパー センター アカウントをお持ちの開発者の方はどなたでも、Microsoft Store プロモーション API を使用してアプリの広告キャンペーンを管理できます。</span><span class="sxs-lookup"><span data-stu-id="29cc2-117">Any developer with a Windows Dev Center account can use the Microsoft Store promotions API to manage ad campaigns for their apps.</span></span> <span data-ttu-id="29cc2-118">メディア エージェンシーもこの API へのアクセスを要求して、広告主の代わりに広告キャンペーンを実行できます。</span><span class="sxs-lookup"><span data-stu-id="29cc2-118">Media agencies can also request access to this API to run ad campaigns on behalf of their advertisers.</span></span> <span data-ttu-id="29cc2-119">お客様がメディア エージェンシーで、この API について詳しい情報を希望される場合、またはこの API へのアクセスを要求される場合は、storepromotionsapi@microsoft.com までリクエストをお送りください。</span><span class="sxs-lookup"><span data-stu-id="29cc2-119">If you are a media agency who wants to know more about this API or request access to it, send your request to storepromotionsapi@microsoft.com.</span></span>

<span id="prerequisites" />

## <a name="step-1-complete-prerequisites-for-using-the-microsoft-store-promotions-api"></a><span data-ttu-id="29cc2-120">手順 1: Microsoft Store プロモーション API を使うための前提条件を満たす</span><span class="sxs-lookup"><span data-stu-id="29cc2-120">Step 1: Complete prerequisites for using the Microsoft Store promotions API</span></span>

<span data-ttu-id="29cc2-121">Microsoft Store プロモーション API を呼び出すコードの作成を開始する前に、次の前提条件が満たされていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="29cc2-121">Before you start writing code to call the Microsoft Store promotions API, make sure that you have completed the following prerequisites.</span></span>

* <span data-ttu-id="29cc2-122">この API を使用して広告キャンペーンを正しく作成し開始するには、事前に、[デベロッパー センター ダッシュボードの **[アプリの宣伝]** ページを使用して、有料の広告キャンペーンを 1 つ作成する](../publish/create-an-ad-campaign-for-your-app.md)必要があります。また、このページで支払い方法を少なくとも 1 つ追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="29cc2-122">Before you can successfully create and start an ad campaign using this API, you must first [create one paid ad campaign using the **Promote your app** page in the Dev Center dashboard](../publish/create-an-ad-campaign-for-your-app.md), and you must add at least one payment instrument on this page.</span></span> <span data-ttu-id="29cc2-123">これを行うと、この API を使用して、広告キャンペーンの請求可能な配信ラインを正しく作成することができます。</span><span class="sxs-lookup"><span data-stu-id="29cc2-123">After you do this, you will be able to successfully create billable delivery lines for ad campaigns using this API.</span></span> <span data-ttu-id="29cc2-124">この API を使用して作成した広告キャンペーンの配信ラインでは、ダッシュ ボードの **[アプリの宣伝]** ページで選んだ既定の支払い方法に対して自動的に請求が行われます。</span><span class="sxs-lookup"><span data-stu-id="29cc2-124">Delivery lines for ad campaigns you create using this API will automatically bill the default payment instrument chosen on the **Promote your app** page in the dashboard.</span></span>

* <span data-ttu-id="29cc2-125">ユーザー (またはユーザーの組織) は、Azure AD ディレクトリと、そのディレクトリに対する[全体管理者](http://go.microsoft.com/fwlink/?LinkId=746654)のアクセス許可を持っている必要があります。</span><span class="sxs-lookup"><span data-stu-id="29cc2-125">You (or your organization) must have an Azure AD directory and you must have [Global administrator](http://go.microsoft.com/fwlink/?LinkId=746654) permission for the directory.</span></span> <span data-ttu-id="29cc2-126">Office 365 または Microsoft の他のビジネス サービスを既に使っている場合は、既に Azure AD ディレクトリをお持ちです。</span><span class="sxs-lookup"><span data-stu-id="29cc2-126">If you already use Office 365 or other business services from Microsoft, you already have Azure AD directory.</span></span> <span data-ttu-id="29cc2-127">それ以外の場合は、追加料金なしで[デベロッパー センター内から新しい Azure AD を作成](../publish/associate-azure-ad-with-dev-center.md#create-a-brand-new-azure-ad-to-associate-with-your-dev-center-account)できます。</span><span class="sxs-lookup"><span data-stu-id="29cc2-127">Otherwise, you can [create a new Azure AD in Dev Center](../publish/associate-azure-ad-with-dev-center.md#create-a-brand-new-azure-ad-to-associate-with-your-dev-center-account) for no additional charge.</span></span>

* <span data-ttu-id="29cc2-128">Azure AD アプリケーションをデベロッパー センター アカウントに関連付け、アプリケーションのテナント ID とクライアント ID を取得してキーを生成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="29cc2-128">You must associate an Azure AD application with your Dev Center account, retrieve the tenant ID and client ID for the application and generate a key.</span></span> <span data-ttu-id="29cc2-129">Azure AD アプリケーションは、Microsoft Store プロモーション API の呼び出し元のアプリまたはサービスを表します。</span><span class="sxs-lookup"><span data-stu-id="29cc2-129">The Azure AD application represents the app or service from which you want to call the Microsoft Store promotions API.</span></span> <span data-ttu-id="29cc2-130">テナント ID、クライアント ID、およびキーは、API に渡す Azure AD アクセス トークンを取得するために必要です。</span><span class="sxs-lookup"><span data-stu-id="29cc2-130">You need the tenant ID, client ID and key to obtain an Azure AD access token that you pass to the API.</span></span>
    > [!NOTE]
    > <span data-ttu-id="29cc2-131">この作業を行うのは一度だけです。</span><span class="sxs-lookup"><span data-stu-id="29cc2-131">You only need to perform this task one time.</span></span> <span data-ttu-id="29cc2-132">テナント ID、クライアント ID、キーがあれば、新しい Azure AD アクセス トークンの作成が必要になったときに、いつでもそれらを再利用できます。</span><span class="sxs-lookup"><span data-stu-id="29cc2-132">After you have the tenant ID, client ID and key, you can reuse them any time you need to create a new Azure AD access token.</span></span>

<span data-ttu-id="29cc2-133">Azure AD アプリケーションをデベロッパー センター アカウントに関連付け、必要な値を取得するには:</span><span class="sxs-lookup"><span data-stu-id="29cc2-133">To associate an Azure AD application with your Dev Center account and retrieve the required values:</span></span>

1.  <span data-ttu-id="29cc2-134">デベロッパー センターで、**[アカウント設定]** に移動して **[ユーザーの管理]** をクリックし、[組織のデベロッパー センター アカウントを組織の Azure AD ディレクトリに関連付けます](../publish/associate-azure-ad-with-dev-center.md)。</span><span class="sxs-lookup"><span data-stu-id="29cc2-134">In Dev Center, go to your **Account settings**, click **Manage users**, and [associate your organization's Dev Center account with your organization's Azure AD directory](../publish/associate-azure-ad-with-dev-center.md).</span></span>

2.  <span data-ttu-id="29cc2-135">**[ユーザーの管理]** ページで、**[Azure AD アプリケーションの追加]** をクリックして、デベロッパー センター アカウントのプロモーション キャンペーンの管理に使うアプリやサービスを表す Azure AD アプリケーションを追加し、**マネージャー** ロールを割り当てます。</span><span class="sxs-lookup"><span data-stu-id="29cc2-135">In the **Manage users** page, click **Add Azure AD applications**, add the Azure AD application that represents the app or service that you will use to manage promotion campaigns for your Dev Center account, and assign it the **Manager** role.</span></span> <span data-ttu-id="29cc2-136">このアプリケーションが既に Azure AD ディレクトリに存在する場合、**[Azure AD アプリケーションの追加]** ページで選んでデベロッパー センター アカウントに追加できます。</span><span class="sxs-lookup"><span data-stu-id="29cc2-136">If this application already exists in your Azure AD directory, you can select it on the **Add Azure AD applications** page to add it to your Dev Center account.</span></span> <span data-ttu-id="29cc2-137">それ以外の場合、**[Azure AD アプリケーションの追加]** ページで新しい Azure AD アプリケーションを作成できます。</span><span class="sxs-lookup"><span data-stu-id="29cc2-137">Otherwise, you can create a new Azure AD application on the **Add Azure AD applications** page.</span></span> <span data-ttu-id="29cc2-138">詳しくは、「[Azure AD アプリケーションをデベロッパー センター アカウントに追加する方法](../publish/add-users-groups-and-azure-ad-applications.md#azure-ad-applications)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="29cc2-138">For more information, see [Add Azure AD applications to your Dev Center account](../publish/add-users-groups-and-azure-ad-applications.md#azure-ad-applications).</span></span>

3.  <span data-ttu-id="29cc2-139">**[ユーザーの管理]** ページに戻り、Azure AD アプリケーションの名前をクリックしてアプリケーション設定に移動し、**[テナント ID]** と **[クライアント ID]** の値を書き留めます。</span><span class="sxs-lookup"><span data-stu-id="29cc2-139">Return to the **Manage users** page, click the name of your Azure AD application to go to the application settings, and copy down the **Tenant ID** and **Client ID** values.</span></span>

4. <span data-ttu-id="29cc2-140">**[新しいキーの追加]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="29cc2-140">Click **Add new key**.</span></span> <span data-ttu-id="29cc2-141">次の画面で、**[キー]** の値を書き留めます。</span><span class="sxs-lookup"><span data-stu-id="29cc2-141">On the following screen, copy down the **Key** value.</span></span> <span data-ttu-id="29cc2-142">このページから離れると、この情報に再度アクセスすることはできません。</span><span class="sxs-lookup"><span data-stu-id="29cc2-142">You won't be able to access this info again after you leave this page.</span></span> <span data-ttu-id="29cc2-143">詳しくは、「[Azure AD アプリケーションのキーを管理する方法](../publish/add-users-groups-and-azure-ad-applications.md#manage-keys)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="29cc2-143">For more information, see [Manage keys for an Azure AD application](../publish/add-users-groups-and-azure-ad-applications.md#manage-keys).</span></span>

<span id="obtain-an-azure-ad-access-token" />

## <a name="step-2-obtain-an-azure-ad-access-token"></a><span data-ttu-id="29cc2-144">手順 2: Azure AD のアクセス トークンを取得する</span><span class="sxs-lookup"><span data-stu-id="29cc2-144">Step 2: Obtain an Azure AD access token</span></span>

<span data-ttu-id="29cc2-145">Microsoft Store プロモーション API のいずれかのメソッドを呼び出す前に、まず API の各メソッドの **Authorization** ヘッダーに渡す Azure AD アクセス トークンを取得する必要があります。</span><span class="sxs-lookup"><span data-stu-id="29cc2-145">Before you call any of the methods in the Microsoft Store promotions API, you must first obtain an Azure AD access token that you pass to the **Authorization** header of each method in the API.</span></span> <span data-ttu-id="29cc2-146">アクセス トークンを取得した後、アクセス トークンを使用できるのは、その有効期限が切れるまでの 60 分間です。</span><span class="sxs-lookup"><span data-stu-id="29cc2-146">After you obtain an access token, you have 60 minutes to use it before it expires.</span></span> <span data-ttu-id="29cc2-147">トークンの有効期限が切れた後は、トークンを更新してそれ以降の API 呼び出しで引き続き使用できます。</span><span class="sxs-lookup"><span data-stu-id="29cc2-147">After the token expires, you can refresh the token so you can continue to use it in further calls to the API.</span></span>

<span data-ttu-id="29cc2-148">アクセス トークンを取得するには、「[クライアント資格情報を使用したサービス間の呼び出し](https://azure.microsoft.com/documentation/articles/active-directory-protocols-oauth-service-to-service/)」の手順に従って、HTTP POST を ```https://login.microsoftonline.com/<tenant_id>/oauth2/token``` エンドポイントに送信します。</span><span class="sxs-lookup"><span data-stu-id="29cc2-148">To obtain the access token, follow the instructions in [Service to Service Calls Using Client Credentials](https://azure.microsoft.com/documentation/articles/active-directory-protocols-oauth-service-to-service/) to send an HTTP POST to the ```https://login.microsoftonline.com/<tenant_id>/oauth2/token``` endpoint.</span></span> <span data-ttu-id="29cc2-149">要求の例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="29cc2-149">Here is a sample request.</span></span>

```syntax
POST https://login.microsoftonline.com/<tenant_id>/oauth2/token HTTP/1.1
Host: login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded; charset=utf-8

grant_type=client_credentials
&client_id=<your_client_id>
&client_secret=<your_client_secret>
&resource=https://manage.devcenter.microsoft.com
```

<span data-ttu-id="29cc2-150">POST URI の *tenant\_id* の値と *client \_id* および *client \_secret* のパラメーターには、前のセクションでデベロッパー センターから取得したテナント ID、クライアント ID、キーを指定します。</span><span class="sxs-lookup"><span data-stu-id="29cc2-150">For the *tenant\_id* value in the POST URI and the *client\_id* and *client\_secret* parameters, specify the tenant ID, client ID and the key for your application that you retrieved from Dev Center in the previous section.</span></span> <span data-ttu-id="29cc2-151">*resource* パラメーターには、```https://manage.devcenter.microsoft.com``` を指定します。</span><span class="sxs-lookup"><span data-stu-id="29cc2-151">For the *resource* parameter, you must specify ```https://manage.devcenter.microsoft.com```.</span></span>

<span data-ttu-id="29cc2-152">アクセス トークンの有効期限が切れた後は、[この](https://azure.microsoft.com/documentation/articles/active-directory-protocols-oauth-code/#refreshing-the-access-tokens)手順に従って更新できます。</span><span class="sxs-lookup"><span data-stu-id="29cc2-152">After your access token expires, you can refresh it by following the instructions [here](https://azure.microsoft.com/documentation/articles/active-directory-protocols-oauth-code/#refreshing-the-access-tokens).</span></span>

<span id="call-the-windows-store-promotions-api" />

## <a name="step-3-call-the-microsoft-store-promotions-api"></a><span data-ttu-id="29cc2-153">手順 3: Microsoft Store プロモーション API を呼び出す</span><span class="sxs-lookup"><span data-stu-id="29cc2-153">Step 3: Call the Microsoft Store promotions API</span></span>

<span data-ttu-id="29cc2-154">Azure AD アクセス トークンを取得したら、Microsoft Store プロモーション API を呼び出すことができます。</span><span class="sxs-lookup"><span data-stu-id="29cc2-154">After you have an Azure AD access token, you are ready to call the Microsoft Store promotions API.</span></span> <span data-ttu-id="29cc2-155">各メソッドの **Authorization** ヘッダーにアクセス トークンを渡す必要があります。</span><span class="sxs-lookup"><span data-stu-id="29cc2-155">You must pass the access token to the **Authorization** header of each method.</span></span>

<span data-ttu-id="29cc2-156">Microsoft Store プロモーション API では、キャンペーンについての概要情報を保持する*キャンペーン* オブジェクトと、広告キャンペーンの*配信ライン*、*ターゲット プロファイル*、および*クリエイティブ*を表すその他のオブジェクトで構成されるものを広告キャンペーンとします。</span><span class="sxs-lookup"><span data-stu-id="29cc2-156">In the context of the Microsoft Store promotions API, an ad campaign consists of a *campaign* object that contains high-level information about the campaign, and additional objects that represent the *delivery lines*, *targeting profiles*, and *creatives* for the ad campaign.</span></span> <span data-ttu-id="29cc2-157">この API には、これらのオブジェクトの種類ごとにグループ化されたメソッドのセットが含まれます。</span><span class="sxs-lookup"><span data-stu-id="29cc2-157">The API includes different sets of methods that are grouped by these object types.</span></span> <span data-ttu-id="29cc2-158">キャンペーンを作成するには、通常、これらのオブジェクトごとに別の POST メソッドを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="29cc2-158">To create a campaign, you typically call a different POST method for each of these objects.</span></span> <span data-ttu-id="29cc2-159">この API には、任意のオブジェクトの取得に使用できる GET メソッドと、キャンペーン、配信ライン、およびターゲット プロファイル オブジェクトの編集に使用できる PUT メソッドも用意されています。</span><span class="sxs-lookup"><span data-stu-id="29cc2-159">The API also provides GET methods you can use to retrieve any object and PUT methods you can use to edit campaign, delivery line, and targeting profile objects.</span></span>

<span data-ttu-id="29cc2-160">これらオブジェクトと関連するメソッドについての詳細は、以下の表を参照してください。</span><span class="sxs-lookup"><span data-stu-id="29cc2-160">For more information about these objects and their related methods, see the following table.</span></span>


| <span data-ttu-id="29cc2-161">オブジェクト</span><span class="sxs-lookup"><span data-stu-id="29cc2-161">Object</span></span>       | <span data-ttu-id="29cc2-162">説明</span><span class="sxs-lookup"><span data-stu-id="29cc2-162">Description</span></span>   |
|---------------|-----------------|
| <span data-ttu-id="29cc2-163">キャンペーン</span><span class="sxs-lookup"><span data-stu-id="29cc2-163">Campaigns</span></span> |  <span data-ttu-id="29cc2-164">このオブジェクトは広告キャンペーンを表し、広告キャンペーンのオブジェクト モデル階層の最上位に置かれます。</span><span class="sxs-lookup"><span data-stu-id="29cc2-164">This object represents the ad campaign, and it sits at the top of the object model hierarchy for ad campaigns.</span></span> <span data-ttu-id="29cc2-165">このオブジェクトは、実行するキャンペーンの種類 (有料、自社、またはコミュニティ)、キャンペーン目標、広告キャンペーンの配信ライン、その他の詳細情報を示します。</span><span class="sxs-lookup"><span data-stu-id="29cc2-165">This object identifies the type of campaign you are running (paid, house, or community), the campaign objective, the delivery lines for the campaign, and other details.</span></span> <span data-ttu-id="29cc2-166">1 つのキャンペーンに関連づけることができるのは、1 つのアプリのみです。</span><span class="sxs-lookup"><span data-stu-id="29cc2-166">Each campaign can be associated with only one app.</span></span><br/><br/><span data-ttu-id="29cc2-167">このオブジェクトについて詳しくは、「[広告キャンペーンの管理](manage-ad-campaigns.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="29cc2-167">For more information about the methods related to this object, see [Manage ad campaigns](manage-ad-campaigns.md).</span></span><br/><br/><span data-ttu-id="29cc2-168">**注**&nbsp;&nbsp;広告キャンペーンの作成後は、[Microsoft Store 分析 API](access-analytics-data-using-windows-store-services.md) の[広告キャンペーンのパフォーマンス データの取得](get-ad-campaign-performance-data.md)メソッドを使って、キャンペーンのパフォーマンス データを取得できます。</span><span class="sxs-lookup"><span data-stu-id="29cc2-168">**Note**&nbsp;&nbsp;After you create an ad campaign, you can retrieve performance data for the campaign by using the [Get ad campaign performance data](get-ad-campaign-performance-data.md) method in the [Microsoft Store analytics API](access-analytics-data-using-windows-store-services.md).</span></span>  |
| <span data-ttu-id="29cc2-169">配信ライン</span><span class="sxs-lookup"><span data-stu-id="29cc2-169">Delivery lines</span></span> | <span data-ttu-id="29cc2-170">キャンペーンごとに、インベントリの購入と広告の配信に使用する配信ラインが 1 つ以上あります。</span><span class="sxs-lookup"><span data-stu-id="29cc2-170">Every campaign has one or more delivery lines that are used to buy inventory and deliver your ads.</span></span> <span data-ttu-id="29cc2-171">配信ラインごとに、ターゲットと入札額を設定できます。また、予算と使用したいクリエイティブへのリンクを設定することで、支払い額を決定できます。</span><span class="sxs-lookup"><span data-stu-id="29cc2-171">For each delivery line, you can set targeting, set your bid price, and decide how much you want to spend by setting a budget and linking to creatives you want to use.</span></span><br/><br/><span data-ttu-id="29cc2-172">このオブジェクトについて詳しくは、「[広告キャンペーンの配信ラインの管理](manage-delivery-lines-for-ad-campaigns.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="29cc2-172">For more information about the methods related to this object, see [Manage delivery lines for ad campaigns](manage-delivery-lines-for-ad-campaigns.md).</span></span> |
| <span data-ttu-id="29cc2-173">ターゲット プロファイル</span><span class="sxs-lookup"><span data-stu-id="29cc2-173">Targeting profiles</span></span> | <span data-ttu-id="29cc2-174">配信ラインごとに、1 つのターゲット プロファイルを用意します。ターゲット プロファイルでは、対象にするユーザー、地域、およびインベントリの種類を指定します。</span><span class="sxs-lookup"><span data-stu-id="29cc2-174">Every delivery line has one targeting profile that specifies the users, geographies and inventory types that you want to target.</span></span> <span data-ttu-id="29cc2-175">ターゲット プロファイルは、テンプレートとして作成し、複数の配信ライン間で共有できます。</span><span class="sxs-lookup"><span data-stu-id="29cc2-175">Targeting profiles can be created as a template and shared across delivery lines.</span></span><br/><br/><span data-ttu-id="29cc2-176">このオブジェクトについて詳しくは、「[広告キャンペーンのターゲット プロファイルの管理](manage-targeting-profiles-for-ad-campaigns.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="29cc2-176">For more information about the methods related to this object, see [Manage targeting profiles for ad campaigns](manage-targeting-profiles-for-ad-campaigns.md).</span></span> |
| <span data-ttu-id="29cc2-177">クリエイティブ</span><span class="sxs-lookup"><span data-stu-id="29cc2-177">Creatives</span></span> | <span data-ttu-id="29cc2-178">配信ラインごとに、キャンペーンの一環でお客様に表示される広告を表すクリエイティブが 1 つ以上あります。</span><span class="sxs-lookup"><span data-stu-id="29cc2-178">Every delivery line has one or more creatives that represent the ads that are shown to customers as part of the campaign.</span></span> <span data-ttu-id="29cc2-179">クリエイティブは、常に同じアプリを表す場合は、同一の広告キャンペーンでなくても、1 つ以上の配信ラインに関連付けることができます。</span><span class="sxs-lookup"><span data-stu-id="29cc2-179">A creative may be associated with one or more delivery lines, even across ad campaigns, provided it always represents the same app.</span></span><br/><br/><span data-ttu-id="29cc2-180">このオブジェクトについて詳しくは、「[広告キャンペーンのクリエイティブの管理](manage-creatives-for-ad-campaigns.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="29cc2-180">For more information about the methods related to this object, see [Manage creatives for ad campaigns](manage-creatives-for-ad-campaigns.md).</span></span> |


<span data-ttu-id="29cc2-181">次の図は、キャンペーン、配信ライン、ターゲット プロファイル、クリエイティブ間の関係を表しています。</span><span class="sxs-lookup"><span data-stu-id="29cc2-181">The following diagram illustrates the relationship between campaigns, delivery lines, targeting profiles, and creatives.</span></span>

![広告キャンペーンの階層](images/ad-campaign-hierarchy.png)

## <a name="code-example"></a><span data-ttu-id="29cc2-183">コードの例</span><span class="sxs-lookup"><span data-stu-id="29cc2-183">Code example</span></span>

<span data-ttu-id="29cc2-184">次のコード例は、Azure AD アクセス トークンを取得し、C# コンソール アプリから Microsoft Store プロモーション API を呼び出す方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="29cc2-184">The following code example demonstrates how to obtain an Azure AD access token and call the Microsoft Store promotions API from a C# console app.</span></span> <span data-ttu-id="29cc2-185">このコード例を使う場合は、変数 *tenantId*、*clientId*、*clientSecret*、および *appID* を自分のシナリオに合った適切な値に割り当ててください。</span><span class="sxs-lookup"><span data-stu-id="29cc2-185">To use this code example, assign the *tenantId*, *clientId*, *clientSecret*, and *appID* variables to the appropriate values for your scenario.</span></span> <span data-ttu-id="29cc2-186">この例では、Microsoft Store プロモーション API から返される JSON データを逆シリアル化するときに、Newtonsoft の [Json.NET パッケージ](http://www.newtonsoft.com/json)が必要になります。</span><span class="sxs-lookup"><span data-stu-id="29cc2-186">This example requires the [Json.NET package](http://www.newtonsoft.com/json) from Newtonsoft to deserialize the JSON data returned by the Microsoft Store promotions API.</span></span>

[!code-cs[PromotionsApi](./code/StoreServicesExamples_Promotions/cs/Program.cs#PromotionsApiExample)]

## <a name="related-topics"></a><span data-ttu-id="29cc2-187">関連トピック</span><span class="sxs-lookup"><span data-stu-id="29cc2-187">Related topics</span></span>

* [<span data-ttu-id="29cc2-188">広告キャンペーンの管理</span><span class="sxs-lookup"><span data-stu-id="29cc2-188">Manage ad campaigns</span></span>](manage-ad-campaigns.md)
* [<span data-ttu-id="29cc2-189">広告キャンペーンの配信ラインの管理</span><span class="sxs-lookup"><span data-stu-id="29cc2-189">Manage delivery lines for ad campaigns</span></span>](manage-delivery-lines-for-ad-campaigns.md)
* [<span data-ttu-id="29cc2-190">広告キャンペーンのターゲット プロファイルの管理</span><span class="sxs-lookup"><span data-stu-id="29cc2-190">Manage targeting profiles for ad campaigns</span></span>](manage-targeting-profiles-for-ad-campaigns.md)
* [<span data-ttu-id="29cc2-191">広告キャンペーンのクリエイティブの管理</span><span class="sxs-lookup"><span data-stu-id="29cc2-191">Manage creatives for ad campaigns</span></span>](manage-creatives-for-ad-campaigns.md)
* [<span data-ttu-id="29cc2-192">広告キャンペーンのパフォーマンス データの取得</span><span class="sxs-lookup"><span data-stu-id="29cc2-192">Get ad campaign performance data</span></span>](get-ad-campaign-performance-data.md)


 
