---
author: Xansky
ms.assetid: 94B5B2E9-BAEE-4B7F-BAF1-DA4D491427D7
description: 特定のユーザーが使用する権利を持っているサブスクリプションを取得するには、Microsoft Store 購入 API の以下のメソッドを使います。
title: ユーザーのサブスクリプションの取得
ms.author: mhopkins
ms.date: 07/10/2018
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: Windows 10, UWP, Microsoft Store 購入 API, サブスクリプション
ms.localizationpriority: medium
ms.openlocfilehash: c08964b991b0cecaef6d994d399ce97301a7e8e7
ms.sourcegitcommit: 9354909f9351b9635bee9bb2dc62db60d2d70107
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/16/2018
ms.locfileid: "4688627"
---
# <a name="get-subscriptions-for-a-user"></a><span data-ttu-id="77196-104">ユーザーのサブスクリプションの取得</span><span class="sxs-lookup"><span data-stu-id="77196-104">Get subscriptions for a user</span></span>

<span data-ttu-id="77196-105">特定のユーザーが使う権利を持っているサブスクリプション アドオンを取得するには、Microsoft Store 購入 API の以下のメソッドを使います。</span><span class="sxs-lookup"><span data-stu-id="77196-105">Use this method in the Microsoft Store purchase API to get the subscription add-ons that a given user has entitlements to use.</span></span>

> [!NOTE]
> <span data-ttu-id="77196-106">このメソッドは、ユニバーサル Windows プラットフォーム (UWP) アプリ用のサブスクリプション アドオンを作成できるように Microsoft がプロビジョニングした開発者アカウントでのみ使うことができます。</span><span class="sxs-lookup"><span data-stu-id="77196-106">This method can only be used by developer accounts that have been provisioned by Microsoft to be able to create subscription add-ons for Universal Windows Platform (UWP) apps.</span></span> <span data-ttu-id="77196-107">現在のところ、サブスクリプション アドオンはほとんどの開発者アカウントで使うことができません。</span><span class="sxs-lookup"><span data-stu-id="77196-107">Subscription add-ons are currently not available to most developer accounts.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="77196-108">前提条件</span><span class="sxs-lookup"><span data-stu-id="77196-108">Prerequisites</span></span>

<span data-ttu-id="77196-109">このメソッドを使用するための要件:</span><span class="sxs-lookup"><span data-stu-id="77196-109">To use this method, you will need:</span></span>

* <span data-ttu-id="77196-110">対象ユーザー URI の値が `https://onestore.microsoft.com` の Azure AD アクセス トークン。</span><span class="sxs-lookup"><span data-stu-id="77196-110">An Azure AD access token that has the audience URI value `https://onestore.microsoft.com`.</span></span>
* <span data-ttu-id="77196-111">取得対象のサブスクリプションを所有するユーザーの ID を表す Microsoft Store ID キー。</span><span class="sxs-lookup"><span data-stu-id="77196-111">A Microsoft Store ID key that represents the identity of the user whose subscriptions you want to get.</span></span>

<span data-ttu-id="77196-112">詳しくは、「[サービスによる製品の権利の管理](view-and-grant-products-from-a-service.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="77196-112">For more information, see [Manage product entitlements from a service](view-and-grant-products-from-a-service.md).</span></span>

## <a name="request"></a><span data-ttu-id="77196-113">要求</span><span class="sxs-lookup"><span data-stu-id="77196-113">Request</span></span>


### <a name="request-syntax"></a><span data-ttu-id="77196-114">要求の構文</span><span class="sxs-lookup"><span data-stu-id="77196-114">Request syntax</span></span>

| <span data-ttu-id="77196-115">メソッド</span><span class="sxs-lookup"><span data-stu-id="77196-115">Method</span></span> | <span data-ttu-id="77196-116">要求 URI</span><span class="sxs-lookup"><span data-stu-id="77196-116">Request URI</span></span>                                            |
|--------|--------------------------------------------------------|
| <span data-ttu-id="77196-117">POST</span><span class="sxs-lookup"><span data-stu-id="77196-117">POST</span></span>   | ```https://purchase.mp.microsoft.com/v8.0/b2b/recurrences/query``` |


### <a name="request-header"></a><span data-ttu-id="77196-118">要求ヘッダー</span><span class="sxs-lookup"><span data-stu-id="77196-118">Request header</span></span>

| <span data-ttu-id="77196-119">ヘッダー</span><span class="sxs-lookup"><span data-stu-id="77196-119">Header</span></span>         | <span data-ttu-id="77196-120">型</span><span class="sxs-lookup"><span data-stu-id="77196-120">Type</span></span>   | <span data-ttu-id="77196-121">説明</span><span class="sxs-lookup"><span data-stu-id="77196-121">Description</span></span>      |
|----------------|--------|-------------------|
| <span data-ttu-id="77196-122">Authorization</span><span class="sxs-lookup"><span data-stu-id="77196-122">Authorization</span></span>  | <span data-ttu-id="77196-123">string</span><span class="sxs-lookup"><span data-stu-id="77196-123">string</span></span> | <span data-ttu-id="77196-124">必須。</span><span class="sxs-lookup"><span data-stu-id="77196-124">Required.</span></span> <span data-ttu-id="77196-125">**Bearer** &lt;*トークン*&gt; という形式の Azure AD アクセス トークン。</span><span class="sxs-lookup"><span data-stu-id="77196-125">The Azure AD access token in the form **Bearer** &lt;*token*&gt;.</span></span>                           |
| <span data-ttu-id="77196-126">Host</span><span class="sxs-lookup"><span data-stu-id="77196-126">Host</span></span>           | <span data-ttu-id="77196-127">string</span><span class="sxs-lookup"><span data-stu-id="77196-127">string</span></span> | <span data-ttu-id="77196-128">値 **purchase.mp.microsoft.com** に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="77196-128">Must be set to the value **purchase.mp.microsoft.com**.</span></span>                                            |
| <span data-ttu-id="77196-129">Content-Length</span><span class="sxs-lookup"><span data-stu-id="77196-129">Content-Length</span></span> | <span data-ttu-id="77196-130">number</span><span class="sxs-lookup"><span data-stu-id="77196-130">number</span></span> | <span data-ttu-id="77196-131">要求の本文の長さ。</span><span class="sxs-lookup"><span data-stu-id="77196-131">The length of the request body.</span></span>                                                                       |
| <span data-ttu-id="77196-132">Content-Type</span><span class="sxs-lookup"><span data-stu-id="77196-132">Content-Type</span></span>   | <span data-ttu-id="77196-133">string</span><span class="sxs-lookup"><span data-stu-id="77196-133">string</span></span> | <span data-ttu-id="77196-134">要求と応答の種類を指定します。</span><span class="sxs-lookup"><span data-stu-id="77196-134">Specifies the request and response type.</span></span> <span data-ttu-id="77196-135">現時点では、サポートされている唯一の値は **application/json** です。</span><span class="sxs-lookup"><span data-stu-id="77196-135">Currently, the only supported value is **application/json**.</span></span> |


### <a name="request-body"></a><span data-ttu-id="77196-136">要求本文</span><span class="sxs-lookup"><span data-stu-id="77196-136">Request body</span></span>

| <span data-ttu-id="77196-137">パラメーター</span><span class="sxs-lookup"><span data-stu-id="77196-137">Parameter</span></span>      | <span data-ttu-id="77196-138">型</span><span class="sxs-lookup"><span data-stu-id="77196-138">Type</span></span>   | <span data-ttu-id="77196-139">説明</span><span class="sxs-lookup"><span data-stu-id="77196-139">Description</span></span>     | <span data-ttu-id="77196-140">必須かどうか</span><span class="sxs-lookup"><span data-stu-id="77196-140">Required</span></span> |
|----------------|--------|-----------------|----------|
| <span data-ttu-id="77196-141">b2bKey</span><span class="sxs-lookup"><span data-stu-id="77196-141">b2bKey</span></span>         | <span data-ttu-id="77196-142">string</span><span class="sxs-lookup"><span data-stu-id="77196-142">string</span></span> | <span data-ttu-id="77196-143">取得対象のサブスクリプションを所有するユーザーの ID を表す [Microsoft Store ID キー](view-and-grant-products-from-a-service.md#step-4)。</span><span class="sxs-lookup"><span data-stu-id="77196-143">The [Microsoft Store ID key](view-and-grant-products-from-a-service.md#step-4) that represents the identity of the user whose subscriptions you want to get.</span></span>  | <span data-ttu-id="77196-144">○</span><span class="sxs-lookup"><span data-stu-id="77196-144">Yes</span></span>      |
| <span data-ttu-id="77196-145">continuationToken</span><span class="sxs-lookup"><span data-stu-id="77196-145">continuationToken</span></span> |  <span data-ttu-id="77196-146">文字列</span><span class="sxs-lookup"><span data-stu-id="77196-146">string</span></span>     |  <span data-ttu-id="77196-147">ユーザーが複数のサブスクリプションの権利を持っている場合、ページ制限に達すると応答本文は継続トークンを返します。</span><span class="sxs-lookup"><span data-stu-id="77196-147">If the user has entitlements to multiple subscriptions, the response body returns a continuation token when the page limit is reached.</span></span> <span data-ttu-id="77196-148">残りの製品を取得する後続の呼び出しで、この継続トークンを指定します。</span><span class="sxs-lookup"><span data-stu-id="77196-148">Provide that continuation token here in subsequent calls to retrieve remaining products.</span></span>    | <span data-ttu-id="77196-149">×</span><span class="sxs-lookup"><span data-stu-id="77196-149">No</span></span>      |
| <span data-ttu-id="77196-150">pageSize</span><span class="sxs-lookup"><span data-stu-id="77196-150">pageSize</span></span>       | <span data-ttu-id="77196-151">文字列</span><span class="sxs-lookup"><span data-stu-id="77196-151">string</span></span> | <span data-ttu-id="77196-152">1 つの応答で返すサブスクリプションの最大数。</span><span class="sxs-lookup"><span data-stu-id="77196-152">The maximum number of subscriptions to return in one response.</span></span> <span data-ttu-id="77196-153">既定値は 25 です。</span><span class="sxs-lookup"><span data-stu-id="77196-153">The default is 25.</span></span>     |  <span data-ttu-id="77196-154">×</span><span class="sxs-lookup"><span data-stu-id="77196-154">No</span></span>      |


### <a name="request-example"></a><span data-ttu-id="77196-155">要求の例</span><span class="sxs-lookup"><span data-stu-id="77196-155">Request example</span></span>

<span data-ttu-id="77196-156">次の例は、このメソッドを使って、特定のユーザーが使う権利を持っているサブスクリプション アドオンを取得する方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="77196-156">The following example demonstrates how to use this method to get the subscription add-ons that a given user has entitlements to use.</span></span> <span data-ttu-id="77196-157">*b2bKey* 値は、取得対象のサブスクリプションを持つユーザーの ID を表す [Microsoft Store ID キー](view-and-grant-products-from-a-service.md#step-4)に置き換えます。</span><span class="sxs-lookup"><span data-stu-id="77196-157">Replace the *b2bKey* value with the [Microsoft Store ID key](view-and-grant-products-from-a-service.md#step-4) that represents the identity of the user whose subscriptions you want to get.</span></span>

```json
POST https://purchase.mp.microsoft.com/v8.0/b2b/recurrences/query HTTP/1.1
Authorization: Bearer <your access token>
Content-Type: application/json
Host: https://purchase.mp.microsoft.com

{
  "b2bKey":  "eyJ0eXAiOiJ..."
}
```


## <a name="response"></a><span data-ttu-id="77196-158">応答</span><span class="sxs-lookup"><span data-stu-id="77196-158">Response</span></span>

<span data-ttu-id="77196-159">このメソッドは、ユーザーが使う権利を持っているサブスクリプション アドオンについて説明する、データ オブジェクトのコレクションを含む JSON 応答本文を返します。</span><span class="sxs-lookup"><span data-stu-id="77196-159">This method returns a JSON response body that contains a collection of data objects that describe the subscription add-ons that the user has entitlements to use.</span></span> <span data-ttu-id="77196-160">次の例は、1 つのサブスクリプションの権利を持っているユーザーの応答本文を示しています。</span><span class="sxs-lookup"><span data-stu-id="77196-160">The following example demonstrates the response body for a user who has an entitlement for one subscription.</span></span>

```json
{
  "items": [
    {
      "autoRenew":true,
      "beneficiary":"pub:gFVuEBiZHPXonkYvtdOi+tLE2h4g2Ss0ZId0RQOwzDg=",
      "expirationTime":"2017-06-11T03:07:49.2552941+00:00",
      "id":"mdr:0:bc0cb6960acd4515a0e1d638192d77b7:77d5ebee-0310-4d23-b204-83e8613baaac",
      "lastModified":"2017-01-08T21:07:51.1459644+00:00",
      "market":"US",
      "productId":"9NBLGGH52Q8X",
      "skuId":"0024",
      "startTime":"2017-01-10T21:07:49.2552941+00:00",
      "recurrenceState":"Active"
    }
  ]
}
```


### <a name="response-body"></a><span data-ttu-id="77196-161">応答本文</span><span class="sxs-lookup"><span data-stu-id="77196-161">Response body</span></span>

<span data-ttu-id="77196-162">応答本文には、次のデータが含まれています。</span><span class="sxs-lookup"><span data-stu-id="77196-162">The response body contains the following data.</span></span>

| <span data-ttu-id="77196-163">値</span><span class="sxs-lookup"><span data-stu-id="77196-163">Value</span></span>        | <span data-ttu-id="77196-164">型</span><span class="sxs-lookup"><span data-stu-id="77196-164">Type</span></span>   | <span data-ttu-id="77196-165">説明</span><span class="sxs-lookup"><span data-stu-id="77196-165">Description</span></span>            |
|---------------|--------|---------------------|
| <span data-ttu-id="77196-166">items</span><span class="sxs-lookup"><span data-stu-id="77196-166">items</span></span> | <span data-ttu-id="77196-167">配列</span><span class="sxs-lookup"><span data-stu-id="77196-167">array</span></span> | <span data-ttu-id="77196-168">指定したユーザーが使う権利を持っている各サブスクリプション アドオンに関するデータが含まれるオブジェクトの配列。</span><span class="sxs-lookup"><span data-stu-id="77196-168">An array of objects that contain data about each subscription add-on that the specified user has an entitlement to use.</span></span> <span data-ttu-id="77196-169">各オブジェクトのデータの詳細については、以下の表を参照してください。</span><span class="sxs-lookup"><span data-stu-id="77196-169">For more information about the data in each object, see the following table.</span></span>  |


<span data-ttu-id="77196-170">*items* 配列内の各オブジェクトには、次の値が保持されています。</span><span class="sxs-lookup"><span data-stu-id="77196-170">Each object in the *items* array contains the following values.</span></span>

| <span data-ttu-id="77196-171">値</span><span class="sxs-lookup"><span data-stu-id="77196-171">Value</span></span>        | <span data-ttu-id="77196-172">型</span><span class="sxs-lookup"><span data-stu-id="77196-172">Type</span></span>   | <span data-ttu-id="77196-173">説明</span><span class="sxs-lookup"><span data-stu-id="77196-173">Description</span></span>                                                                 |
|---------------|--------|-----------------------------------------------|
| <span data-ttu-id="77196-174">autoRenew</span><span class="sxs-lookup"><span data-stu-id="77196-174">autoRenew</span></span> | <span data-ttu-id="77196-175">ブール値</span><span class="sxs-lookup"><span data-stu-id="77196-175">Boolean</span></span> |  <span data-ttu-id="77196-176">現在のサブスクリプション期間の終了時にサブスクリプションが自動的に更新されるように構成されているかどうかを示します。</span><span class="sxs-lookup"><span data-stu-id="77196-176">Indicates whether the subscription is configured to automatically renew at the end of the current subscription period.</span></span>   |
| <span data-ttu-id="77196-177">beneficiary</span><span class="sxs-lookup"><span data-stu-id="77196-177">beneficiary</span></span> | <span data-ttu-id="77196-178">string</span><span class="sxs-lookup"><span data-stu-id="77196-178">string</span></span> |  <span data-ttu-id="77196-179">このサブスクリプションに関連付けられている権利の受益者 ID。</span><span class="sxs-lookup"><span data-stu-id="77196-179">The ID of the beneficiary of the entitlement that is associated with this subscription.</span></span>   |
| <span data-ttu-id="77196-180">expirationTime</span><span class="sxs-lookup"><span data-stu-id="77196-180">expirationTime</span></span> | <span data-ttu-id="77196-181">string</span><span class="sxs-lookup"><span data-stu-id="77196-181">string</span></span> | <span data-ttu-id="77196-182">サブスクリプションの有効期限が切れる日時 (ISO 8601形式)。</span><span class="sxs-lookup"><span data-stu-id="77196-182">The date and time the subscription will expire, in ISO 8601 format.</span></span> <span data-ttu-id="77196-183">このフィールドは、サブスクリプションが特定の状態のときのみ利用可能です。</span><span class="sxs-lookup"><span data-stu-id="77196-183">This field is only available when the subscription is in certain states.</span></span> <span data-ttu-id="77196-184">有効期限は通常、現在の状態の有効期限がいつ切れるかを示します。</span><span class="sxs-lookup"><span data-stu-id="77196-184">The expiration time usually indicates when the current state expires.</span></span> <span data-ttu-id="77196-185">たとえば、アクティブなサブスクリプションの場合、有効期限日は次の自動更新がいつ行われるかを示します。</span><span class="sxs-lookup"><span data-stu-id="77196-185">For example, for an active subscription, the expiration date indicates when the next automatic renewal will occur.</span></span>    |
| <span data-ttu-id="77196-186">expirationTimeWithGrace</span><span class="sxs-lookup"><span data-stu-id="77196-186">expirationTimeWithGrace</span></span> | <span data-ttu-id="77196-187">string</span><span class="sxs-lookup"><span data-stu-id="77196-187">string</span></span> | <span data-ttu-id="77196-188">日付と時刻 ISO 8601 形式で、猶予期間を含む、サブスクリプションは期限切れします。</span><span class="sxs-lookup"><span data-stu-id="77196-188">The date and time the subscription will expire including the grace period, in ISO 8601 format.</span></span> <span data-ttu-id="77196-189">この値は、とき、ユーザーが失われますサブスクリプションへのアクセス、サブスクリプションが自動的に更新に失敗した後を示します。</span><span class="sxs-lookup"><span data-stu-id="77196-189">This value indicates when the user will lose access to the subscription after the subscription has failed to automatically renew.</span></span>    |
| <span data-ttu-id="77196-190">id</span><span class="sxs-lookup"><span data-stu-id="77196-190">id</span></span> | <span data-ttu-id="77196-191">string</span><span class="sxs-lookup"><span data-stu-id="77196-191">string</span></span> |  <span data-ttu-id="77196-192">サブスクリプションの ID。</span><span class="sxs-lookup"><span data-stu-id="77196-192">The ID of the subscription.</span></span> <span data-ttu-id="77196-193">[ユーザーのサブスクリプションの請求状態を変更する](change-the-billing-state-of-a-subscription-for-a-user.md)メソッドを呼び出すときに変更するサブスクリプションを指定するには、この値を使います。</span><span class="sxs-lookup"><span data-stu-id="77196-193">Use this value to indicate which subscription you want to modify when you call the [change the billing state of a subscription for a user](change-the-billing-state-of-a-subscription-for-a-user.md) method.</span></span>    |
| <span data-ttu-id="77196-194">isTrial</span><span class="sxs-lookup"><span data-stu-id="77196-194">isTrial</span></span> | <span data-ttu-id="77196-195">ブール値</span><span class="sxs-lookup"><span data-stu-id="77196-195">Boolean</span></span> |  <span data-ttu-id="77196-196">サブスクリプションが試用版であるかどうかを示します。</span><span class="sxs-lookup"><span data-stu-id="77196-196">Indicates whether the subscription is a trial.</span></span>     |
| <span data-ttu-id="77196-197">lastModified</span><span class="sxs-lookup"><span data-stu-id="77196-197">lastModified</span></span> | <span data-ttu-id="77196-198">string</span><span class="sxs-lookup"><span data-stu-id="77196-198">string</span></span> |  <span data-ttu-id="77196-199">サブスクリプションが前回変更された日時 (ISO 8601形式)。</span><span class="sxs-lookup"><span data-stu-id="77196-199">The date and time the subscription was last modified, in ISO 8601 format.</span></span>      |
| <span data-ttu-id="77196-200">market</span><span class="sxs-lookup"><span data-stu-id="77196-200">market</span></span> | <span data-ttu-id="77196-201">string</span><span class="sxs-lookup"><span data-stu-id="77196-201">string</span></span> | <span data-ttu-id="77196-202">ユーザーがサブスクリプションを取得した国コード (2 文字の ISO 3166-1 alpha-2 形式)。</span><span class="sxs-lookup"><span data-stu-id="77196-202">The country code (in two-letter ISO 3166-1 alpha-2 format) in which the user acquired the subscription.</span></span>      |
| <span data-ttu-id="77196-203">productId</span><span class="sxs-lookup"><span data-stu-id="77196-203">productId</span></span> | <span data-ttu-id="77196-204">string</span><span class="sxs-lookup"><span data-stu-id="77196-204">string</span></span> |  <span data-ttu-id="77196-205">Microsoft Store カタログ内のサブスクリプション アドオンを表す[製品](in-app-purchases-and-trials.md#products-skus-and-availabilities)の [Store ID](in-app-purchases-and-trials.md#store-ids)。</span><span class="sxs-lookup"><span data-stu-id="77196-205">The [Store ID](in-app-purchases-and-trials.md#store-ids) for the [product](in-app-purchases-and-trials.md#products-skus-and-availabilities) that represents the subscription add-on in the Microsoft Store catalog.</span></span> <span data-ttu-id="77196-206">製品の Store ID の例は、9NBLGGH42CFD です。</span><span class="sxs-lookup"><span data-stu-id="77196-206">An example Store ID for a product is 9NBLGGH42CFD.</span></span>     |
| <span data-ttu-id="77196-207">skuId</span><span class="sxs-lookup"><span data-stu-id="77196-207">skuId</span></span> | <span data-ttu-id="77196-208">string</span><span class="sxs-lookup"><span data-stu-id="77196-208">string</span></span> |  <span data-ttu-id="77196-209">Microsoft Store カタログ内のサブスクリプション アドオンを表す [SKU](in-app-purchases-and-trials.md#products-skus-and-availabilities) の [Store ID](in-app-purchases-and-trials.md#store-ids)。</span><span class="sxs-lookup"><span data-stu-id="77196-209">The [Store ID](in-app-purchases-and-trials.md#store-ids) for the [SKU](in-app-purchases-and-trials.md#products-skus-and-availabilities) that represents the subscription add-on the Microsoft Store catalog.</span></span> <span data-ttu-id="77196-210">SKU の Store ID の例は、0010 です。</span><span class="sxs-lookup"><span data-stu-id="77196-210">An example Store ID for a SKU is 0010.</span></span>    |
| <span data-ttu-id="77196-211">startTime</span><span class="sxs-lookup"><span data-stu-id="77196-211">startTime</span></span> | <span data-ttu-id="77196-212">string</span><span class="sxs-lookup"><span data-stu-id="77196-212">string</span></span> |  <span data-ttu-id="77196-213">サブスクリプションの開始日時 (ISO 8601 形式)。</span><span class="sxs-lookup"><span data-stu-id="77196-213">The start date and time for the subscription, in ISO 8601 format.</span></span>     |
| <span data-ttu-id="77196-214">recurrenceState</span><span class="sxs-lookup"><span data-stu-id="77196-214">recurrenceState</span></span> | <span data-ttu-id="77196-215">string</span><span class="sxs-lookup"><span data-stu-id="77196-215">string</span></span>  |  <span data-ttu-id="77196-216">次のいずれかの値です。</span><span class="sxs-lookup"><span data-stu-id="77196-216">One of the following values:</span></span><ul><li><span data-ttu-id="77196-217">**None**:&nbsp;&nbsp;永続サブスクリプションを示す。</span><span class="sxs-lookup"><span data-stu-id="77196-217">**None**:&nbsp;&nbsp;This indicates a perpetual subscription.</span></span></li><li><span data-ttu-id="77196-218">**Active**:&nbsp;&nbsp;サブスクリプションがアクティブであり、ユーザーがサービスを使う権利を持っている。</span><span class="sxs-lookup"><span data-stu-id="77196-218">**Active**:&nbsp;&nbsp;The subscription is active and the user is entitled to use the services.</span></span></li><li><span data-ttu-id="77196-219">**Inactive**:&nbsp;&nbsp;サブスクリプションの有効期限が過去の日付であり、ユーザーがサブスクリプションの自動更新オプションをオフにした。</span><span class="sxs-lookup"><span data-stu-id="77196-219">**Inactive**:&nbsp;&nbsp;The subscription is past the expiration date, and the user turned off the automatic renew option for the subscription.</span></span></li><li><span data-ttu-id="77196-220">**Canceled**:&nbsp;&nbsp;サブスクリプションが、有効期限前に意図的に終了された (払い戻しあり、またはなし)。</span><span class="sxs-lookup"><span data-stu-id="77196-220">**Canceled**:&nbsp;&nbsp;The subscription has been purposefully terminated before the expiration date, with or without a refund.</span></span></li><li><span data-ttu-id="77196-221">**InDunning**:&nbsp;&nbsp;サブスクリプションが*催促中*である (つまり、サブスクリプションの有効期限が近づいているため、Microsoft がサブスクリプションを自動更新する資金を得ようとしている)。</span><span class="sxs-lookup"><span data-stu-id="77196-221">**InDunning**:&nbsp;&nbsp;The subscription is in *dunning* (that is, the subscription is nearing expiration, and Microsoft is trying to acquire funds to automatically renew the subscription).</span></span></li><li><span data-ttu-id="77196-222">**Failed**:&nbsp;&nbsp;催促期間が終了し、何回か試行された後サブスクリプションの更新に失敗した。</span><span class="sxs-lookup"><span data-stu-id="77196-222">**Failed**:&nbsp;&nbsp;The dunning period is over and the subscription failed to renew after several attempts.</span></span></li></ul><p>**<span data-ttu-id="77196-223">注:</span><span class="sxs-lookup"><span data-stu-id="77196-223">Note:</span></span>**</p><ul><li><span data-ttu-id="77196-224">**Inactive**/**Canceled**/**Failed** は終了状態です。</span><span class="sxs-lookup"><span data-stu-id="77196-224">**Inactive**/**Canceled**/**Failed** are terminal states.</span></span> <span data-ttu-id="77196-225">サブスクリプションがこれらのいずれかの状態になると、ユーザーはサブスクリプションを再購入してもう一度アクティブ化する必要があります。</span><span class="sxs-lookup"><span data-stu-id="77196-225">When a subscription enters one of these states, the user must repurchase the subscription to activate it again.</span></span> <span data-ttu-id="77196-226">ユーザーは、これらの状態でサービスを使うことはできません。</span><span class="sxs-lookup"><span data-stu-id="77196-226">The user is not entitled to use the services in these states.</span></span></li><li><span data-ttu-id="77196-227">サブスクリプションが **Canceled** になると、キャンセルの日時によって expirationTime が更新されます。</span><span class="sxs-lookup"><span data-stu-id="77196-227">When a subscription is **Canceled**, the expirationTime will be updated with the date and time of the cancellation.</span></span></li><li><span data-ttu-id="77196-228">サブスクリプションの ID は、有効期限が終了するまで同じままです。</span><span class="sxs-lookup"><span data-stu-id="77196-228">The ID of the subscription will remain the same during its entire lifetime.</span></span> <span data-ttu-id="77196-229">自動更新オプションがオンでもオフでも変更されません。</span><span class="sxs-lookup"><span data-stu-id="77196-229">It will not change if the auto-renew option is turned on or off.</span></span> <span data-ttu-id="77196-230">終了状態に達した後ユーザーがサブスクリプションを再購入した場合、新しいサブスクリプション ID が作成されます。</span><span class="sxs-lookup"><span data-stu-id="77196-230">If a user repurchases a subscription after reaching a terminal state, a new subscription ID will be created.</span></span></li><li><span data-ttu-id="77196-231">サブスクリプションの ID は、個々のサブスクリプションで任意の操作を実行するために使ってください。</span><span class="sxs-lookup"><span data-stu-id="77196-231">The ID of a subscription should be used to execute any operatoin on an individual subscription.</span></span></li><li><span data-ttu-id="77196-232">ユーザーがサブスクリプションをキャンセルまたは中止した後に再購入した場合、ユーザーの結果を照会すると、終了状態の古いサブスクリプション ID を含むエントリとアクティブ状態の新しいサブスクリプション ID を含むエントリの 2 つが返されます。</span><span class="sxs-lookup"><span data-stu-id="77196-232">When a user repurchases a subscription after cancelling or discontinuing it, if you query the results for the user you will get two entries: one with the old subscription ID in a terminal state, and one with the new subscription ID in an active state.</span></span></li><li><span data-ttu-id="77196-233">必ず、recurrenceState と expirationTime の両方を確認することをお勧めします。recurrenceState の更新は数分 (場合によって数時間) 遅れることがあるためです。</span><span class="sxs-lookup"><span data-stu-id="77196-233">It's always a good practice to check both recurrenceState and expirationTime, since updates to recurrenceState can potentially be delayed by a few minutes (or occasionally hours).</span></span>       |
| <span data-ttu-id="77196-234">cancellationDate</span><span class="sxs-lookup"><span data-stu-id="77196-234">cancellationDate</span></span> | <span data-ttu-id="77196-235">string</span><span class="sxs-lookup"><span data-stu-id="77196-235">string</span></span>   |  <span data-ttu-id="77196-236">ユーザーのサブスクリプションがキャンセルされた日時 (ISO 8601 形式)。</span><span class="sxs-lookup"><span data-stu-id="77196-236">The date and time the user's subscription was cancelled, in ISO 8601 format.</span></span>     |


## <a name="related-topics"></a><span data-ttu-id="77196-237">関連トピック</span><span class="sxs-lookup"><span data-stu-id="77196-237">Related topics</span></span>

* [<span data-ttu-id="77196-238">サービスによる製品の権利の管理</span><span class="sxs-lookup"><span data-stu-id="77196-238">Manage product entitlements from a service</span></span>](view-and-grant-products-from-a-service.md)
* [<span data-ttu-id="77196-239">ユーザーのサブスクリプションに関する請求の状態を変更する</span><span class="sxs-lookup"><span data-stu-id="77196-239">Change the billing state of a subscription for a user</span></span>](change-the-billing-state-of-a-subscription-for-a-user.md)
* [<span data-ttu-id="77196-240">製品の照会</span><span class="sxs-lookup"><span data-stu-id="77196-240">Query for products</span></span>](query-for-products.md)
* [<span data-ttu-id="77196-241">コンシューマブルな製品のフルフィルメント完了の報告</span><span class="sxs-lookup"><span data-stu-id="77196-241">Report consumable products as fulfilled</span></span>](report-consumable-products-as-fulfilled.md)
* [<span data-ttu-id="77196-242">Microsoft Store ID キーの更新</span><span class="sxs-lookup"><span data-stu-id="77196-242">Renew a Microsoft Store ID key</span></span>](renew-a-windows-store-id-key.md)
