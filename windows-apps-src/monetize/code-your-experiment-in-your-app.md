---
Description: ユニバーサル Windows プラットフォーム (UWP) アプリで A/B テストを実行するには、アプリで実験用のコードを記述する必要があります。
title: アプリの実験用のコードを記述する
ms.assetid: 6A5063E1-28CD-4087-A4FA-FBB511E9CED5
ms.date: 02/08/2017
ms.topic: article
keywords: Windows 10, UWP, Microsoft Store Services SDK, A/B テスト, 実験
ms.localizationpriority: medium
ms.openlocfilehash: edd0fbcf841dc9d8fa43873da95dc08b276a5418
ms.sourcegitcommit: b034650b684a767274d5d88746faeea373c8e34f
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2019
ms.locfileid: "57636747"
---
# <a name="code-your-app-for-experimentation"></a><span data-ttu-id="e296a-104">アプリの実験用のコードを記述する</span><span class="sxs-lookup"><span data-stu-id="e296a-104">Code your app for experimentation</span></span>

<span data-ttu-id="e296a-105">したら[プロジェクトを作成し、パートナー センターでリモート変数定義](create-a-project-and-define-remote-variables-in-the-dev-center-dashboard.md)をユニバーサル Windows プラットフォーム (UWP) アプリにコードを更新する準備が整いました。</span><span class="sxs-lookup"><span data-stu-id="e296a-105">After you [create a project and define remote variables in Partner Center](create-a-project-and-define-remote-variables-in-the-dev-center-dashboard.md), you are ready to update the code in your Universal Windows Platform (UWP) app to:</span></span>
* <span data-ttu-id="e296a-106">パートナー センターからリモート変数の値を受信します。</span><span class="sxs-lookup"><span data-stu-id="e296a-106">Receive remote variable values from Partner Center.</span></span>
* <span data-ttu-id="e296a-107">リモート変数を使用して、ユーザーのアプリ エクスペリエンスを構成する。</span><span class="sxs-lookup"><span data-stu-id="e296a-107">Use remote variables to configure app experiences for your users.</span></span>
* <span data-ttu-id="e296a-108">パートナー センターのユーザーが、実験の表示や、必要な操作を実行を示すイベントを記録 (とも呼ばれる、*変換*)。</span><span class="sxs-lookup"><span data-stu-id="e296a-108">Log events to Partner Center that indicate when users have viewed your experiment and performed a desired action (also called a *conversion*).</span></span>

<span data-ttu-id="e296a-109">この動作をアプリに追加するには、Microsoft Store Services SDK によって提供される API を使用します。</span><span class="sxs-lookup"><span data-stu-id="e296a-109">To add this behavior to your app, you'll use APIs provided by the Microsoft Store Services SDK.</span></span>

<span data-ttu-id="e296a-110">次のセクションでは、実験のバリエーションを取得して、パートナー センターにイベントをログ記録の一般的なプロセスについて説明します。</span><span class="sxs-lookup"><span data-stu-id="e296a-110">The following sections describe the general process of getting variations for your experiment and logging events to Partner Center.</span></span> <span data-ttu-id="e296a-111">後に実験用のアプリをコーディングする[パートナー センターで実験を定義する](define-your-experiment-in-the-dev-center-dashboard.md)します。</span><span class="sxs-lookup"><span data-stu-id="e296a-111">After you code your app for experimentation, you can [define an experiment in Partner Center](define-your-experiment-in-the-dev-center-dashboard.md).</span></span> <span data-ttu-id="e296a-112">実験の作成と実行のプロセスについて詳しく示すチュートリアルについては、「[A/B テストを使用して最初の実験を作成および実行する](create-and-run-your-first-experiment-with-a-b-testing.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="e296a-112">For a walkthrough that demonstrates the end-to-end process of creating and running an experiment, see [Create and run your first experiment with A/B testing](create-and-run-your-first-experiment-with-a-b-testing.md).</span></span>

> [!NOTE]
> <span data-ttu-id="e296a-113">実験では、Microsoft Store Services SDK の Api の一部を使用して、[の非同期パターン](../threading-async/asynchronous-programming-universal-windows-platform-apps.md)パートナー センターからデータを取得します。</span><span class="sxs-lookup"><span data-stu-id="e296a-113">Some of the experimentation APIs in the Microsoft Store Services SDK use the [asynchronous pattern](../threading-async/asynchronous-programming-universal-windows-platform-apps.md) to retrieve data from Partner Center.</span></span> <span data-ttu-id="e296a-114">これは、これらのメソッドの一部が、メソッドが呼び出された後に実行されることを意味し、アプリの UI は、操作が完了するまでの間、高い応答性を維持できます。</span><span class="sxs-lookup"><span data-stu-id="e296a-114">This means that part of the execution of these methods may take place after the methods are invoked, so your app's UI can remain responsive while the operations complete.</span></span> <span data-ttu-id="e296a-115">この記事のコード例に示すように、非同期パターンでは、アプリで API を呼び出すときに、**async** キーワードと **await** 演算子を使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e296a-115">The asynchronous pattern requires your app to use the **async** keyword and **await** operator when calling the APIs, as demonstrated by the code examples in this article.</span></span> <span data-ttu-id="e296a-116">慣例により、非同期メソッドの末尾には **Async** が付きます。</span><span class="sxs-lookup"><span data-stu-id="e296a-116">By convention, asynchronous methods end with **Async**.</span></span>

## <a name="configure-your-project"></a><span data-ttu-id="e296a-117">プロジェクトを構成する</span><span class="sxs-lookup"><span data-stu-id="e296a-117">Configure your project</span></span>

<span data-ttu-id="e296a-118">最初に、Microsoft Store Services SDK を開発用コンピューターにインストールして、プロジェクトに必要な参照を追加します。</span><span class="sxs-lookup"><span data-stu-id="e296a-118">To get started, install the Microsoft Store Services SDK on your development computer and add the necessary references to your project.</span></span>

1. <span data-ttu-id="e296a-119">[Microsoft Store Services SDK](microsoft-store-services-sdk.md#install-the-sdk) をインストールします。</span><span class="sxs-lookup"><span data-stu-id="e296a-119">[Install the Microsoft Store Services SDK](microsoft-store-services-sdk.md#install-the-sdk).</span></span>
2. <span data-ttu-id="e296a-120">Visual Studio でプロジェクトを開きます。</span><span class="sxs-lookup"><span data-stu-id="e296a-120">Open your project in Visual Studio.</span></span>
3. <span data-ttu-id="e296a-121">ソリューション エクスプローラーで、プロジェクト ノードを展開し、**[参照設定]** を右クリックして **[参照の追加]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="e296a-121">In Solution Explorer, expand your project node, right-click **References**, and click **Add Reference**.</span></span>
3. <span data-ttu-id="e296a-122">**[参照マネージャー]** で、**[ユニバーサル Windows]** を展開し、**[拡張機能]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="e296a-122">In **Reference Manager**, expand **Universal Windows** and click **Extensions**.</span></span>
4. <span data-ttu-id="e296a-123">SDK の一覧で、**[Microsoft Engagement Framework]** の横にあるチェック ボックスをオンにして、**[OK]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="e296a-123">In the list of SDKs, select the check box next to **Microsoft Engagement Framework** and click **OK**.</span></span>

> [!NOTE]
> <span data-ttu-id="e296a-124">この記事のコード例では、コード ファイルに **System.Threading.Tasks** 名前空間と **Microsoft.Services.Store.Engagement** 名前空間の **using** ステートメントがあることを前提としています。</span><span class="sxs-lookup"><span data-stu-id="e296a-124">The code examples in this article assume that your code file has **using** statements for the **System.Threading.Tasks** and **Microsoft.Services.Store.Engagement** namespaces.</span></span>

## <a name="get-variation-data-and-log-the-view-event-for-your-experiment"></a><span data-ttu-id="e296a-125">バリエーション データを取得し、実験のビュー イベントをログに記録する</span><span class="sxs-lookup"><span data-stu-id="e296a-125">Get variation data and log the view event for your experiment</span></span>

<span data-ttu-id="e296a-126">プロジェクトで、試験的機能の実行において変更する機能のコードを探します。</span><span class="sxs-lookup"><span data-stu-id="e296a-126">In your project, locate the code for the feature that you want to modify in your experiment.</span></span> <span data-ttu-id="e296a-127">バリエーションの 1 つのデータを取得するコードを追加、このデータを使用してテストすると、機能の動作を変更して、A に、実験用のビュー イベントをログ B は、パートナー センターでサービスをテストします。</span><span class="sxs-lookup"><span data-stu-id="e296a-127">Add code that retrieves data for a variation, use this data to modify the behavior of the feature you are testing, and then log the view event for your experiment to the A/B testing service in Partner Center.</span></span>

<span data-ttu-id="e296a-128">必要な特定のコードは、アプリによって異なりますが、次の例は基本的なプロセスを示しています。</span><span class="sxs-lookup"><span data-stu-id="e296a-128">The specific code you need will depend on your app, but the following example demonstrates the basic process.</span></span> <span data-ttu-id="e296a-129">完全なコード例については、「[A/B テストを使用して最初の実験を作成および実行する](create-and-run-your-first-experiment-with-a-b-testing.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="e296a-129">For a complete code example, see [Create and run your first experiment with A/B testing](create-and-run-your-first-experiment-with-a-b-testing.md).</span></span>

[!code-cs[ExperimentExamples](./code/StoreSDKSamples/cs/ExperimentExamples.cs#ExperimentCodeSample)]

<span data-ttu-id="e296a-130">次の手順では、このプロセスの重要な部分について詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="e296a-130">The following steps describe the important parts of this process in detail.</span></span>

1. <span data-ttu-id="e296a-131">宣言を[StoreServicesExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation) 、現在のバリエーションの 1 つの割り当てを表すオブジェクトを[StoreServicesCustomEventLogger](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicescustomeventlogger)ログの表示と変換に使用するオブジェクトパートナー センターのイベント。</span><span class="sxs-lookup"><span data-stu-id="e296a-131">Declare a [StoreServicesExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation) object that represents the current variation assignment and a [StoreServicesCustomEventLogger](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicescustomeventlogger) object that you will use to log view and conversion events to Partner Center.</span></span>

    [!code-cs[ExperimentExamples](./code/StoreSDKSamples/cs/ExperimentExamples.cs#Snippet1)]

2. <span data-ttu-id="e296a-132">取得する実験の[プロジェクト ID](run-app-experiments-with-a-b-testing.md#terms) に割り当てられる文字列変数を宣言します。</span><span class="sxs-lookup"><span data-stu-id="e296a-132">Declare a string variable that is assigned to the [project ID](run-app-experiments-with-a-b-testing.md#terms) for the experiment you want to retrieve.</span></span>
    > [!NOTE]
    > <span data-ttu-id="e296a-133">プロジェクトを取得するときに ID を[パートナー センターでプロジェクトを作成](create-a-project-and-define-remote-variables-in-the-dev-center-dashboard.md)です。</span><span class="sxs-lookup"><span data-stu-id="e296a-133">You obtain a project ID when you [create a project in Partner Center](create-a-project-and-define-remote-variables-in-the-dev-center-dashboard.md).</span></span> <span data-ttu-id="e296a-134">次に示すプロジェクト ID は例示のためのものです。</span><span class="sxs-lookup"><span data-stu-id="e296a-134">The project ID shown below is for example purposes only.</span></span>

    [!code-cs[ExperimentExamples](./code/StoreSDKSamples/cs/ExperimentExamples.cs#Snippet2)]

3. <span data-ttu-id="e296a-135">静的な [GetCachedVariationAsync](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getcachedvariationasync) メソッドを呼び出して、実験に対するキャッシュされた現在のバリエーションの割り当てを取得し、実験のプロジェクト ID をそのメソッドに渡します。</span><span class="sxs-lookup"><span data-stu-id="e296a-135">Get the current cached variation assignment for your experiment by calling the static [GetCachedVariationAsync](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getcachedvariationasync) method, and pass the project ID for your experiment to the method.</span></span> <span data-ttu-id="e296a-136">このメソッドは、[ExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariationresult.experimentvariation) プロパティを使用してバリエーションの割り当てへのアクセスを提供する [StoreServicesExperimentVariationResult](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariationresult) オブジェクトを返します。</span><span class="sxs-lookup"><span data-stu-id="e296a-136">This method returns a [StoreServicesExperimentVariationResult](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariationresult) object that provides access to the variation assignment via the [ExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariationresult.experimentvariation) property.</span></span>

    [!code-cs[ExperimentExamples](./code/StoreSDKSamples/cs/ExperimentExamples.cs#Snippet3)]

4. <span data-ttu-id="e296a-137">[IsStale](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.isstale) プロパティを確認して、キャッシュされたバリエーションの割り当てを、サーバーからリモートのバリエーションの割り当てによって更新する必要があるかどうかを判断します。</span><span class="sxs-lookup"><span data-stu-id="e296a-137">Check the [IsStale](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.isstale) property to determine whether the cached variation assignment needs to be refreshed with a remote variation assignment from the server.</span></span> <span data-ttu-id="e296a-138">更新する必要がある場合は、静的な [GetRefreshedVariationAsync](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getrefreshedvariationasync) メソッドを呼び出して、サーバーから更新されたバリエーションの割り当てを確認し、ローカルでキャッシュされたバリエーションを更新します。</span><span class="sxs-lookup"><span data-stu-id="e296a-138">If it does need to be refreshed, call the static [GetRefreshedVariationAsync](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getrefreshedvariationasync) method to check for an updated variation assignment from the server and refresh the local cached variation.</span></span>

    [!code-cs[ExperimentExamples](./code/StoreSDKSamples/cs/ExperimentExamples.cs#Snippet4)]

5. <span data-ttu-id="e296a-139">[StoreServicesExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation) オブジェクトの [GetBoolean](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getboolean)、[GetDouble](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getdouble)、[GetInt32](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getint32)、または [GetString](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getstring) の各メソッドを使用して、バリエーションの割り当ての値を取得します。</span><span class="sxs-lookup"><span data-stu-id="e296a-139">Use the [GetBoolean](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getboolean), [GetDouble](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getdouble), [GetInt32](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getint32), or [GetString](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getstring) methods of the [StoreServicesExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation) object to get the values for the variation assignment.</span></span> <span data-ttu-id="e296a-140">各メソッドで最初のパラメーターは、バリエーションを取得するの名前 (これはバリエーションの 1 つで、パートナー センターで入力したのと同じ名前です)。</span><span class="sxs-lookup"><span data-stu-id="e296a-140">In each method, the first parameter is the name of the variation that you want to retrieve (this is the same name of a variation that you enter in Partner Center).</span></span> <span data-ttu-id="e296a-141">2 番目のパラメーターがない (たとえば、ネットワーク接続がない場合)、パートナー センターから、指定した値を取得できない場合にメソッドが返す既定値と、バリエーションの 1 つのキャッシュされたバージョンをご利用いただけません。</span><span class="sxs-lookup"><span data-stu-id="e296a-141">The second parameter is the default value that the method should return if it is not able to retrieve the specified value from Partner Center (for example, if there is no network connectivity), and a cached version of the variation is not available.</span></span>

    <span data-ttu-id="e296a-142">次の例では、[GetString](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getstring) を使用して、*buttonText* という名前の変数を取得し、**Grey Button** の既定の変数値を指定します。</span><span class="sxs-lookup"><span data-stu-id="e296a-142">The following example uses [GetString](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getstring) to get a variable named *buttonText* and specifies a default variable value of **Grey Button**.</span></span>

    [!code-cs[ExperimentExamples](./code/StoreSDKSamples/cs/ExperimentExamples.cs#Snippet5)]

6. <span data-ttu-id="e296a-143">コードで、変数値を使用して、テストする機能の動作を変更します。</span><span class="sxs-lookup"><span data-stu-id="e296a-143">In your code, use the variable values to modify the behavior of the feature you are testing.</span></span> <span data-ttu-id="e296a-144">たとえば、次のコードでは *buttonText* 値を、アプリ内のボタンのコンテンツに割り当てます。</span><span class="sxs-lookup"><span data-stu-id="e296a-144">For example, the following code assigns the *buttonText* value to the content of a button in your app.</span></span> <span data-ttu-id="e296a-145">この例では、プロジェクト内の別の場所で既にこのボタンを定義していることを前提としています。</span><span class="sxs-lookup"><span data-stu-id="e296a-145">This example assumes you have already defined this button elsewhere in your project.</span></span>

    [!code-cs[ExperimentExamples](./code/StoreSDKSamples/cs/ExperimentExamples.cs#Snippet6)]

7. <span data-ttu-id="e296a-146">最後に、ログ、[ビュー イベント](run-app-experiments-with-a-b-testing.md#terms)実験、A に B は、パートナー センターでサービスをテストします。</span><span class="sxs-lookup"><span data-stu-id="e296a-146">Finally, log the [view event](run-app-experiments-with-a-b-testing.md#terms) for your experiment to the A/B testing service in Partner Center.</span></span> <span data-ttu-id="e296a-147">```logger``` フィールドを [StoreServicesCustomEventLogger](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicescustomeventlogger) オブジェクトに初期化し、[LogForVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicescustomeventlogger.logforvariation) メソッドを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="e296a-147">Initialize the ```logger``` field to a [StoreServicesCustomEventLogger](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicescustomeventlogger) object and call the [LogForVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicescustomeventlogger.logforvariation) method.</span></span> <span data-ttu-id="e296a-148">渡す、 [StoreServicesExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation) (このオブジェクトは、イベントに関するコンテキストをパートナー センターに提供します)、現在のバリエーションの 1 つの割り当てと、実験のビュー イベントの名前を表すオブジェクトします。</span><span class="sxs-lookup"><span data-stu-id="e296a-148">Pass the [StoreServicesExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation) object that represents the current variation assignment (this object provides context about the event to Partner Center) and the name of the view event for your experiment.</span></span> <span data-ttu-id="e296a-149">これは、パートナー センターでの実験用に入力したビューのイベント名と一致する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e296a-149">This must match the view event name that you enter for your experiment in Partner Center.</span></span> <span data-ttu-id="e296a-150">コードでは、実験の一部であるバリエーションをユーザーが最初に表示するタイミングを示すビュー イベントをログに記録する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e296a-150">Your code should log the view event when the user starts viewing a variation that is part of your experiment.</span></span>

    <span data-ttu-id="e296a-151">次の例では、**userViewedButton** という名前のビュー イベントをログに記録する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="e296a-151">The following example shows how to log a view event named **userViewedButton**.</span></span> <span data-ttu-id="e296a-152">この例では、実験の目的は、ユーザーにアプリ内のボタンをクリックさせることであるため、ビュー イベントは、アプリがバリエーション データ (この場合、ボタンのテキスト) を取得し、それをボタンのコンテンツに割り当てた後にログに記録されます。</span><span class="sxs-lookup"><span data-stu-id="e296a-152">In this example, the goal of the experiment is to get the user to click a button in the app, so the view event is logged after the app has retrieved the variation data (in this case, the button text) and assigned it to the content of the button.</span></span>

    [!code-cs[ExperimentExamples](./code/StoreSDKSamples/cs/ExperimentExamples.cs#Snippet7)]

## <a name="log-conversion-events-to-partner-center"></a><span data-ttu-id="e296a-153">変換イベントをパートナー センターにログインします。</span><span class="sxs-lookup"><span data-stu-id="e296a-153">Log conversion events to Partner Center</span></span>

<span data-ttu-id="e296a-154">次に、ログに記録するコードを追加[変換イベント](run-app-experiments-with-a-b-testing.md#terms)A を B は、パートナー センターでサービスをテストします。</span><span class="sxs-lookup"><span data-stu-id="e296a-154">Next, add code that logs [conversion events](run-app-experiments-with-a-b-testing.md#terms) to the A/B testing service in Partner Center.</span></span> <span data-ttu-id="e296a-155">コードでは、ユーザーが実験の目標に達したときに、コンバージョン イベントのログを記録する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e296a-155">Your code should log a conversion event when the user reaches an objective for your experiment.</span></span> <span data-ttu-id="e296a-156">必要なコードはアプリによって異なりますが、ここでは一般的な手順を示します。</span><span class="sxs-lookup"><span data-stu-id="e296a-156">The specific code you need will depend on your app, but here are the general steps.</span></span> <span data-ttu-id="e296a-157">完全なコード例については、「[A/B テストを使用して最初の実験を作成および実行する](create-and-run-your-first-experiment-with-a-b-testing.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="e296a-157">For a complete code example, see [Create and run your first experiment with A/B testing](create-and-run-your-first-experiment-with-a-b-testing.md).</span></span>

1. <span data-ttu-id="e296a-158">実験のいずれかのゴールの目的をユーザーが達成した場合に実行するコードで、[LogForVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicescustomeventlogger.logforvariation) メソッドをもう一度呼び出して、[StoreServicesExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation) オブジェクトと実験のコンバージョン イベントの名前を渡します。</span><span class="sxs-lookup"><span data-stu-id="e296a-158">In code that runs when the user reaches an objective for one of the goals of the experiment, call the [LogForVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicescustomeventlogger.logforvariation) method again and pass the [StoreServicesExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation) object and the name of a conversion event for your experiment.</span></span> <span data-ttu-id="e296a-159">これは、パートナー センターでの実験用に入力した変換イベント名のいずれかに一致しなければなりません。</span><span class="sxs-lookup"><span data-stu-id="e296a-159">This must match one of the conversion event names that you enter for your experiment in Partner Center.</span></span>

    <span data-ttu-id="e296a-160">次の例では、ボタンの **Click** イベント ハンドラーから **userClickedButton** という名前のコンバージョン イベントをログに記録します。</span><span class="sxs-lookup"><span data-stu-id="e296a-160">The following example logs a conversion event named **userClickedButton** from the **Click** event handler for a button.</span></span> <span data-ttu-id="e296a-161">この例では、実験の目的は、ユーザーにボタンをクリックさせることです。</span><span class="sxs-lookup"><span data-stu-id="e296a-161">In this example, the goal of the experiment is to get the user to click the button.</span></span>

    [!code-cs[ExperimentExamples](./code/StoreSDKSamples/cs/ExperimentExamples.cs#Snippet8)]

## <a name="next-steps"></a><span data-ttu-id="e296a-162">次のステップ</span><span class="sxs-lookup"><span data-stu-id="e296a-162">Next steps</span></span>

<span data-ttu-id="e296a-163">アプリの実験用のコードを記述したら、次の手順に進むことができます。</span><span class="sxs-lookup"><span data-stu-id="e296a-163">After you code the experiment in your app, you are ready for the following steps:</span></span>
1. <span data-ttu-id="e296a-164">[パートナー センターで、実験を定義する](define-your-experiment-in-the-dev-center-dashboard.md)します。</span><span class="sxs-lookup"><span data-stu-id="e296a-164">[Define your experiment in Partner Center](define-your-experiment-in-the-dev-center-dashboard.md).</span></span> <span data-ttu-id="e296a-165">ビュー イベント、コンバージョン イベント、A/B テストの一意のバリエーションを定義する実験を作成します。</span><span class="sxs-lookup"><span data-stu-id="e296a-165">Create an experiment that defines the view events, conversion events, and unique variations for your A/B test.</span></span>
2. <span data-ttu-id="e296a-166">[実行し、パートナー センターで実験を管理](manage-your-experiment.md)します。</span><span class="sxs-lookup"><span data-stu-id="e296a-166">[Run and manage your experiment in Partner Center](manage-your-experiment.md).</span></span>


## <a name="related-topics"></a><span data-ttu-id="e296a-167">関連トピック</span><span class="sxs-lookup"><span data-stu-id="e296a-167">Related topics</span></span>

* [<span data-ttu-id="e296a-168">プロジェクトを作成し、パートナー センターでのリモート変数の定義</span><span class="sxs-lookup"><span data-stu-id="e296a-168">Create a project and define remote variables in Partner Center</span></span>](create-a-project-and-define-remote-variables-in-the-dev-center-dashboard.md)
* [<span data-ttu-id="e296a-169">パートナー センターでの実験を定義します。</span><span class="sxs-lookup"><span data-stu-id="e296a-169">Define your experiment in Partner Center</span></span>](define-your-experiment-in-the-dev-center-dashboard.md)
* [<span data-ttu-id="e296a-170">パートナー センターで、実験を管理します。</span><span class="sxs-lookup"><span data-stu-id="e296a-170">Manage your experiment in Partner Center</span></span>](manage-your-experiment.md)
* [<span data-ttu-id="e296a-171">作成し、A で初めての実験を実行する B のテスト</span><span class="sxs-lookup"><span data-stu-id="e296a-171">Create and run your first experiment with A/B testing</span></span>](create-and-run-your-first-experiment-with-a-b-testing.md)
* [<span data-ttu-id="e296a-172">A とアプリの実験を実行する B のテスト</span><span class="sxs-lookup"><span data-stu-id="e296a-172">Run app experiments with A/B testing</span></span>](run-app-experiments-with-a-b-testing.md)
