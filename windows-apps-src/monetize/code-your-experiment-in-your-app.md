---
author: mcleanbyron
Description: To run an experiment in your Universal Windows Platform (UWP) app with A/B testing, you must code the experiment in your app.
title: アプリの実験用のコードを記述する
ms.assetid: 6A5063E1-28CD-4087-A4FA-FBB511E9CED5
ms.author: mcleans
ms.date: 02/08/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: Windows 10、UWP、Microsoft Store Services SDK、A/B テスト、実験
ms.localizationpriority: medium
ms.openlocfilehash: b0931d712ca99b429e2aaa7dec4b855f41ce55ef
ms.sourcegitcommit: c6d6f8b54253e79354f8db14e5cf3b113a3e5014
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/24/2018
ms.locfileid: "2839551"
---
# <a name="code-your-app-for-experimentation"></a><span data-ttu-id="4fd3f-103">アプリの実験用のコードを記述する</span><span class="sxs-lookup"><span data-stu-id="4fd3f-103">Code your app for experimentation</span></span>

<span data-ttu-id="4fd3f-104">[プロジェクトを作成してデベロッパー センターのダッシュ ボードのリモートの変数を定義](create-a-project-and-define-remote-variables-in-the-dev-center-dashboard.md)後をどこからでも Windows プラットフォーム (UWP) のアプリのコードを更新する準備ができたら。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-104">After you [create a project and define remote variables in the Dev Center dashboard](create-a-project-and-define-remote-variables-in-the-dev-center-dashboard.md), you are ready to update the code in your Universal Windows Platform (UWP) app to:</span></span>
* <span data-ttu-id="4fd3f-105">Windows デベロッパー センターからリモートの変数値が表示されます。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-105">Receive remote variable values from Windows Dev Center.</span></span>
* <span data-ttu-id="4fd3f-106">ユーザー用のアプリのエクスペリエンスを構成するのにはリモート変数を使用します。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-106">Use remote variables to configure app experiences for your users.</span></span>
* <span data-ttu-id="4fd3f-107">イベントをユーザーが、実験の表示し、(*変換*とも呼ばれる)、目的の操作を実行することを示すデベロッパー センターにログインします。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-107">Log events to Dev Center that indicate when users have viewed your experiment and performed a desired action (also called a *conversion*).</span></span>

<span data-ttu-id="4fd3f-108">アプリには、この動作を追加するには、Microsoft ストア サービス SDK によって提供される Api を使用します。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-108">To add this behavior to your app, you'll use APIs provided by the Microsoft Store Services SDK.</span></span>

<span data-ttu-id="4fd3f-109">次のセクションでは、おのバリエーションを取得して、デベロッパー センターへのイベント ログの記録の一般的な手順について説明します。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-109">The following sections describe the general process of getting variations for your experiment and logging events to Dev Center.</span></span> <span data-ttu-id="4fd3f-110">アプリを使って、コードを記述した後、[デベロッパー センター ダッシュ ボードのテストを定義](define-your-experiment-in-the-dev-center-dashboard.md)できます。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-110">After you code your app for experimentation, you can [define an experiment in the Dev Center dashboard](define-your-experiment-in-the-dev-center-dashboard.md).</span></span> <span data-ttu-id="4fd3f-111">実験の作成および実行のプロセスについて詳しく示すチュートリアルについては、「[A/B テストを使用して最初の実験を作成および実行する](create-and-run-your-first-experiment-with-a-b-testing.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-111">For a walkthrough that demonstrates the end-to-end process of creating and running an experiment, see [Create and run your first experiment with A/B testing](create-and-run-your-first-experiment-with-a-b-testing.md).</span></span>

> [!NOTE]
> <span data-ttu-id="4fd3f-112">Microsoft ストア サービス SDK Api 実験の一部は、デベロッパー センターからデータを取得するのに[非同期パターン](../threading-async/asynchronous-programming-universal-windows-platform-apps.md)を使用します。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-112">Some of the experimentation APIs in the Microsoft Store Services SDK use the [asynchronous pattern](../threading-async/asynchronous-programming-universal-windows-platform-apps.md) to retrieve data from Dev Center.</span></span> <span data-ttu-id="4fd3f-113">つまり、これらのメソッドの実行の一部可能性があります場所方法が行われた後、操作が完了するまで、アプリの UI が応答いらようにします。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-113">This means that part of the execution of these methods may take place after the methods are invoked, so your app's UI can remain responsive while the operations complete.</span></span> <span data-ttu-id="4fd3f-114">非同期パターンでは、アプリでは、この記事のコードの例のように、Api、通話する際に**非同期**キーワードと**待機**演算子を使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-114">The asynchronous pattern requires your app to use the **async** keyword and **await** operator when calling the APIs, as demonstrated by the code examples in this article.</span></span> <span data-ttu-id="4fd3f-115">規則により、**非同期**の非同期メソッドを終了します。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-115">By convention, asynchronous methods end with **Async**.</span></span>

## <a name="configure-your-project"></a><span data-ttu-id="4fd3f-116">プロジェクトを構成する</span><span class="sxs-lookup"><span data-stu-id="4fd3f-116">Configure your project</span></span>

<span data-ttu-id="4fd3f-117">初めに、Microsoft ストア サービス SDK 開発コンピューターにインストールし、[プロジェクトに必要な参照を追加します。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-117">To get started, install the Microsoft Store Services SDK on your development computer and add the necessary references to your project.</span></span>

1. <span data-ttu-id="4fd3f-118">[Microsoft Store Services SDK](microsoft-store-services-sdk.md#install-the-sdk) をインストールします。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-118">[Install the Microsoft Store Services SDK](microsoft-store-services-sdk.md#install-the-sdk).</span></span>
2. <span data-ttu-id="4fd3f-119">Visual Studio でプロジェクトを開きます。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-119">Open your project in Visual Studio.</span></span>
3. <span data-ttu-id="4fd3f-120">ソリューション エクスプローラーで、プロジェクト ノードを展開し、**[参照設定]** を右クリックして **[参照の追加]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-120">In Solution Explorer, expand your project node, right-click **References**, and click **Add Reference**.</span></span>
3. <span data-ttu-id="4fd3f-121">**[参照マネージャー]** で、**[ユニバーサル Windows]** を展開し、**[拡張機能]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-121">In **Reference Manager**, expand **Universal Windows** and click **Extensions**.</span></span>
4. <span data-ttu-id="4fd3f-122">SDK の一覧で、**[Microsoft Engagement Framework]** の横にあるチェック ボックスをオンにして、**[OK]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-122">In the list of SDKs, select the check box next to **Microsoft Engagement Framework** and click **OK**.</span></span>

> [!NOTE]
> <span data-ttu-id="4fd3f-123">この記事のコードの例では、コード ファイルが**System.Threading.Tasks**と**Microsoft.Services.Store.Engagement**名前空間のステートメントを**使用する**と仮定します。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-123">The code examples in this article assume that your code file has **using** statements for the **System.Threading.Tasks** and **Microsoft.Services.Store.Engagement** namespaces.</span></span>

## <a name="get-variation-data-and-log-the-view-event-for-your-experiment"></a><span data-ttu-id="4fd3f-124">バリエーションのデータを取得して、実験のビューのイベント ログに記録</span><span class="sxs-lookup"><span data-stu-id="4fd3f-124">Get variation data and log the view event for your experiment</span></span>

<span data-ttu-id="4fd3f-125">プロジェクトで、実験を変更する機能のコードを探します。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-125">In your project, locate the code for the feature that you want to modify in your experiment.</span></span> <span data-ttu-id="4fd3f-126">バリエーションのデータを取得するコードを追加、このデータを使用してテストすると、機能の動作を変更して、a、実験のイベントの表示をログイン/B デベロッパー センターでサービスをテストします。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-126">Add code that retrieves data for a variation, use this data to modify the behavior of the feature you are testing, and then log the view event for your experiment to the A/B testing service in Dev Center.</span></span>

<span data-ttu-id="4fd3f-127">必要がある特定のコードは、アプリによって異なりますが、次の例では、基本的なプロセス。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-127">The specific code you need will depend on your app, but the following example demonstrates the basic process.</span></span> <span data-ttu-id="4fd3f-128">完全なコードの例では、次を参照してください。[を作成および実行、最初に試す A B テスト/](create-and-run-your-first-experiment-with-a-b-testing.md)します。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-128">For a complete code example, see [Create and run your first experiment with A/B testing](create-and-run-your-first-experiment-with-a-b-testing.md).</span></span>

[!code-cs[ExperimentExamples](./code/StoreSDKSamples/cs/ExperimentExamples.cs#ExperimentCodeSample)]

<span data-ttu-id="4fd3f-129">次の手順では、このプロセスの詳細の重要な部分について説明します。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-129">The following steps describe the important parts of this process in detail.</span></span>

1. <span data-ttu-id="4fd3f-130">現在のバリエーションの割り当てを表す[StoreServicesExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation)オブジェクトとデベロッパー センターに表示]、[変換のイベントを記録するのに使用する[StoreServicesCustomEventLogger](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicescustomeventlogger)オブジェクトを宣言します。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-130">Declare a [StoreServicesExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation) object that represents the current variation assignment and a [StoreServicesCustomEventLogger](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicescustomeventlogger) object that you will use to log view and conversion events to Dev Center.</span></span>

    [!code-cs[ExperimentExamples](./code/StoreSDKSamples/cs/ExperimentExamples.cs#Snippet1)]

2. <span data-ttu-id="4fd3f-131">[プロジェクトの ID](run-app-experiments-with-a-b-testing.md#terms)を取得する実験に割り当てられている文字列変数を宣言します。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-131">Declare a string variable that is assigned to the [project ID](run-app-experiments-with-a-b-testing.md#terms) for the experiment you want to retrieve.</span></span>
    > [!NOTE]
    > <span data-ttu-id="4fd3f-132">プロジェクトを取得する場合に [ID][デベロッパー センターのダッシュ ボードでプロジェクトを作成](create-a-project-and-define-remote-variables-in-the-dev-center-dashboard.md)します。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-132">You obtain a project ID when you [create a project in the Dev Center dashboard](create-a-project-and-define-remote-variables-in-the-dev-center-dashboard.md).</span></span> <span data-ttu-id="4fd3f-133">次に示すプロジェクト ID はのみを目的とたとえばです。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-133">The project ID shown below is for example purposes only.</span></span>

    [!code-cs[ExperimentExamples](./code/StoreSDKSamples/cs/ExperimentExamples.cs#Snippet2)]

3. <span data-ttu-id="4fd3f-134">静的な[GetCachedVariationAsync](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getcachedvariationasync)メソッドを使用して、実験の現在のキャッシュのバリエーションの割り当てを取得して、メソッド、実験のプロジェクト ID に渡します。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-134">Get the current cached variation assignment for your experiment by calling the static [GetCachedVariationAsync](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getcachedvariationasync) method, and pass the project ID for your experiment to the method.</span></span> <span data-ttu-id="4fd3f-135">この方法では、 [ExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariationresult.experimentvariation)プロパティを通じてバリエーション割り当てへのアクセスを提供する[StoreServicesExperimentVariationResult](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariationresult)オブジェクトを返します。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-135">This method returns a [StoreServicesExperimentVariationResult](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariationresult) object that provides access to the variation assignment via the [ExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariationresult.experimentvariation) property.</span></span>

    [!code-cs[ExperimentExamples](./code/StoreSDKSamples/cs/ExperimentExamples.cs#Snippet3)]

4. <span data-ttu-id="4fd3f-136">キャッシュのバリエーションの割り当てをサーバーからリモート バリエーション割り当てに更新する必要があるかどうか決定する[IsStale](htthttps://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.isstale)プロパティを確認してください。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-136">Check the [IsStale](htthttps://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.isstale) property to determine whether the cached variation assignment needs to be refreshed with a remote variation assignment from the server.</span></span> <span data-ttu-id="4fd3f-137">で、更新する必要がある場合、は、サーバーから更新されたバリエーション割り当てを確認し、ローカル キャッシュ バリエーションを更新する静的[GetRefreshedVariationAsync](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getrefreshedvariationasync)メソッドを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-137">If it does need to be refreshed, call the static [GetRefreshedVariationAsync](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getrefreshedvariationasync) method to check for an updated variation assignment from the server and refresh the local cached variation.</span></span>

    [!code-cs[ExperimentExamples](./code/StoreSDKSamples/cs/ExperimentExamples.cs#Snippet4)]

5. <span data-ttu-id="4fd3f-138">バリエーションの割り当ての値を取得するのにには、 [StoreServicesExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation)オブジェクトの[GetBoolean](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getboolean)、 [GetDouble](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getdouble)、 [GetInt32](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getint32)、または[GetString](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getstring)メソッドを使用します。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-138">Use the [GetBoolean](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getboolean), [GetDouble](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getdouble), [GetInt32](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getint32), or [GetString](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getstring) methods of the [StoreServicesExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation) object to get the values for the variation assignment.</span></span> <span data-ttu-id="4fd3f-139">どちらの方法で最初のパラメーターが目的のバリエーションを取得するの名前 (デベロッパー センター ダッシュ ボードに入力したバリエーションの同じ名前です)。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-139">In each method, the first parameter is the name of the variation that you want to retrieve (this is the same name of a variation that you enter in your Dev Center dashboard).</span></span> <span data-ttu-id="4fd3f-140">2 番目のパラメーターがない場合は (たとえば、ネットワーク接続がない場合)、デベロッパー センターから指定した値を取得する方法を返す必要があるが、既定値は、バリエーションのキャッシュされたバージョン使用します。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-140">The second parameter is the default value that the method should return if it is not able to retrieve the specified value from Dev Center (for example, if there is no network connectivity), and a cached version of the variation is not available.</span></span>

    <span data-ttu-id="4fd3f-141">次の例では、 [GetString](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getstring)を使用して、*アドイン*をという名前の変数を取得し、**灰色] ボタン**の変数の既定値を指定します。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-141">The following example uses [GetString](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getstring) to get a variable named *buttonText* and specifies a default variable value of **Grey Button**.</span></span>

    [!code-cs[ExperimentExamples](./code/StoreSDKSamples/cs/ExperimentExamples.cs#Snippet5)]

6. <span data-ttu-id="4fd3f-142">コードでは、テストしている機能の動作を変更するのに変数の値を使用します。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-142">In your code, use the variable values to modify the behavior of the feature you are testing.</span></span> <span data-ttu-id="4fd3f-143">たとえば、次のコードは、アプリのボタンのコンテンツに*アドイン*値を割り当てます。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-143">For example, the following code assigns the *buttonText* value to the content of a button in your app.</span></span> <span data-ttu-id="4fd3f-144">この例では、定義済みこのボタン別の場所で、プロジェクトにします。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-144">This example assumes you have already defined this button elsewhere in your project.</span></span>

    [!code-cs[ExperimentExamples](./code/StoreSDKSamples/cs/ExperimentExamples.cs#Snippet6)]

7. <span data-ttu-id="4fd3f-145">A、実験の[イベントの表示](run-app-experiments-with-a-b-testing.md#terms)を最後に、ログイン/B デベロッパー センターでサービスをテストします。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-145">Finally, log the [view event](run-app-experiments-with-a-b-testing.md#terms) for your experiment to the A/B testing service in Dev Center.</span></span> <span data-ttu-id="4fd3f-146">初期化、 ```logger``` [StoreServicesCustomEventLogger](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicescustomeventlogger)オブジェクトへのフィールドし、 [LogForVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicescustomeventlogger.logforvariation)メソッドを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-146">Initialize the ```logger``` field to a [StoreServicesCustomEventLogger](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicescustomeventlogger) object and call the [LogForVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicescustomeventlogger.logforvariation) method.</span></span> <span data-ttu-id="4fd3f-147">現在のバリエーションの割り当て (このオブジェクトは、イベントに関するコンテキスト デベロッパー センター) を表す[StoreServicesExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation)オブジェクトを渡すと、実験のイベントの表示の名前。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-147">Pass the [StoreServicesExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation) object that represents the current variation assignment (this object provides context about the event to Dev Center) and the name of the view event for your experiment.</span></span> <span data-ttu-id="4fd3f-148">これは、デベロッパー センターのダッシュ ボードで、実験に入力したビューのイベント名と一致する必要があります。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-148">This must match the view event name that you enter for your experiment in the Dev Center dashboard.</span></span> <span data-ttu-id="4fd3f-149">コード、実験の一部であるバリエーションを表示するユーザーの起動時にイベントの表示をログに記録する必要があります。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-149">Your code should log the view event when the user starts viewing a variation that is part of your experiment.</span></span>

    <span data-ttu-id="4fd3f-150">次の例では、イベント**userViewedButton**という名前の表示をログに記録する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-150">The following example shows how to log a view event named **userViewedButton**.</span></span> <span data-ttu-id="4fd3f-151">この例では、実験の目的でイベントを表示しますが、アプリが、バリエーション データ (この場合は、ボタンのテキスト) を取得し、ボタンのコンテンツへの割り当てがログインしているために、アプリでは、ボタンをクリックするユーザーを取得します。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-151">In this example, the goal of the experiment is to get the user to click a button in the app, so the view event is logged after the app has retrieved the variation data (in this case, the button text) and assigned it to the content of the button.</span></span>

    [!code-cs[ExperimentExamples](./code/StoreSDKSamples/cs/ExperimentExamples.cs#Snippet7)]

## <a name="log-conversion-events-to-dev-center"></a><span data-ttu-id="4fd3f-152">デベロッパー センターへの変換のイベントを記録します。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-152">Log conversion events to Dev Center</span></span>

<span data-ttu-id="4fd3f-153">次に、[A に[変換のイベント](run-app-experiments-with-a-b-testing.md#terms)を記録するコードを追加/B デベロッパー センターでサービスをテストします。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-153">Next, add code that logs [conversion events](run-app-experiments-with-a-b-testing.md#terms) to the A/B testing service in Dev Center.</span></span> <span data-ttu-id="4fd3f-154">コードでは、ユーザーが、実験目標に達したときは、変換イベントを記録する必要があります。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-154">Your code should log a conversion event when the user reaches an objective for your experiment.</span></span> <span data-ttu-id="4fd3f-155">必要な特定のコードは、アプリでは、異なりますが、一般的な手順を紹介します。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-155">The specific code you need will depend on your app, but here are the general steps.</span></span> <span data-ttu-id="4fd3f-156">完全なコードの例では、次を参照してください。[を作成および実行、最初に試す A B テスト/](create-and-run-your-first-experiment-with-a-b-testing.md)します。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-156">For a complete code example, see [Create and run your first experiment with A/B testing](create-and-run-your-first-experiment-with-a-b-testing.md).</span></span>

1. <span data-ttu-id="4fd3f-157">コードでは、ユーザーが実験の目標の 1 つの目標に達したときに実行される、 [LogForVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicescustomeventlogger.logforvariation)メソッドをもう一度呼び出すし、 [StoreServicesExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation)オブジェクトと、実験の変換のイベントの名前。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-157">In code that runs when the user reaches an objective for one of the goals of the experiment, call the [LogForVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicescustomeventlogger.logforvariation) method again and pass the [StoreServicesExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation) object and the name of a conversion event for your experiment.</span></span> <span data-ttu-id="4fd3f-158">これは、デベロッパー センターのダッシュ ボードで、実験に入力した変換イベント名のいずれかに一致する必要があります。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-158">This must match one of the conversion event names that you enter for your experiment in the Dev Center dashboard.</span></span>

    <span data-ttu-id="4fd3f-159">次の例では、ボタンを**クリックして**イベント ハンドラーから**userClickedButton**という名前の変換のイベントを記録します。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-159">The following example logs a conversion event named **userClickedButton** from the **Click** event handler for a button.</span></span> <span data-ttu-id="4fd3f-160">この例では、実験の目的でボタンをクリックするユーザーを取得します。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-160">In this example, the goal of the experiment is to get the user to click the button.</span></span>

    [!code-cs[ExperimentExamples](./code/StoreSDKSamples/cs/ExperimentExamples.cs#Snippet8)]

## <a name="next-steps"></a><span data-ttu-id="4fd3f-161">次のステップ</span><span class="sxs-lookup"><span data-stu-id="4fd3f-161">Next steps</span></span>

<span data-ttu-id="4fd3f-162">アプリでは、実験をコードが完了したら、次の手順です。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-162">After you code the experiment in your app, you are ready for the following steps:</span></span>
1. <span data-ttu-id="4fd3f-163">[デベロッパー センター ダッシュボードで実験を定義します](define-your-experiment-in-the-dev-center-dashboard.md)。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-163">[Define your experiment in the Dev Center dashboard](define-your-experiment-in-the-dev-center-dashboard.md).</span></span> <span data-ttu-id="4fd3f-164">イベントを表示する、変換イベント、および、1 つの一意のバリエーションを定義する実験を作成する/B をテストします。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-164">Create an experiment that defines the view events, conversion events, and unique variations for your A/B test.</span></span>
2. <span data-ttu-id="4fd3f-165">[デベロッパー センター ダッシュボードで実験を実行および管理します](manage-your-experiment.md)。</span><span class="sxs-lookup"><span data-stu-id="4fd3f-165">[Run and manage your experiment in the Dev Center dashboard](manage-your-experiment.md).</span></span>


## <a name="related-topics"></a><span data-ttu-id="4fd3f-166">関連トピック</span><span class="sxs-lookup"><span data-stu-id="4fd3f-166">Related topics</span></span>

* [<span data-ttu-id="4fd3f-167">プロジェクトを作成し、デベロッパー センター ダッシュボードでリモート変数を定義する</span><span class="sxs-lookup"><span data-stu-id="4fd3f-167">Create a project and define remote variables in the Dev Center dashboard</span></span>](create-a-project-and-define-remote-variables-in-the-dev-center-dashboard.md)
* [<span data-ttu-id="4fd3f-168">デベロッパー センター ダッシュボードで実験を定義する</span><span class="sxs-lookup"><span data-stu-id="4fd3f-168">Define your experiment in the Dev Center dashboard</span></span>](define-your-experiment-in-the-dev-center-dashboard.md)
* [<span data-ttu-id="4fd3f-169">デベロッパー センター ダッシュボードで実験を管理する</span><span class="sxs-lookup"><span data-stu-id="4fd3f-169">Manage your experiment in the Dev Center dashboard</span></span>](manage-your-experiment.md)
* [<span data-ttu-id="4fd3f-170">A/B テストを使用して最初の実験を作成および実行する</span><span class="sxs-lookup"><span data-stu-id="4fd3f-170">Create and run your first experiment with A/B testing</span></span>](create-and-run-your-first-experiment-with-a-b-testing.md)
* [<span data-ttu-id="4fd3f-171">A/B テストを使用してアプリの実験を実行する</span><span class="sxs-lookup"><span data-stu-id="4fd3f-171">Run app experiments with A/B testing</span></span>](run-app-experiments-with-a-b-testing.md)
