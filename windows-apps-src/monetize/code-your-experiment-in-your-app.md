---
author: Xansky
Description: To run an experiment in your Universal Windows Platform (UWP) app with A/B testing, you must code the experiment in your app.
title: アプリの実験用のコードを記述する
ms.assetid: 6A5063E1-28CD-4087-A4FA-FBB511E9CED5
ms.author: mhopkins
ms.date: 02/08/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: Windows 10、UWP、Microsoft Store Services SDK、A/B テスト、実験
ms.localizationpriority: medium
ms.openlocfilehash: 21c6eab0e021f703c8103462a8459ea190693a10
ms.sourcegitcommit: 2c4daa36fb9fd3e8daa83c2bd0825f3989d24be8
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/25/2018
ms.locfileid: "5518759"
---
# <a name="code-your-app-for-experimentation"></a><span data-ttu-id="87218-103">アプリの実験用のコードを記述する</span><span class="sxs-lookup"><span data-stu-id="87218-103">Code your app for experimentation</span></span>

<span data-ttu-id="87218-104">[プロジェクトを作成しデベロッパー センター ダッシュ ボードでリモート変数を定義する](create-a-project-and-define-remote-variables-in-the-dev-center-dashboard.md)の後にユニバーサル Windows プラットフォーム (UWP) アプリでコードを更新する準備ができたら。</span><span class="sxs-lookup"><span data-stu-id="87218-104">After you [create a project and define remote variables in the Dev Center dashboard](create-a-project-and-define-remote-variables-in-the-dev-center-dashboard.md), you are ready to update the code in your Universal Windows Platform (UWP) app to:</span></span>
* <span data-ttu-id="87218-105">Windows デベロッパー センターからリモート変数値を受信します。</span><span class="sxs-lookup"><span data-stu-id="87218-105">Receive remote variable values from Windows Dev Center.</span></span>
* <span data-ttu-id="87218-106">リモート変数を使用して、ユーザー向けのアプリのエクスペリエンスを構成します。</span><span class="sxs-lookup"><span data-stu-id="87218-106">Use remote variables to configure app experiences for your users.</span></span>
* <span data-ttu-id="87218-107">デベロッパー センターを示すユーザーの実験を表示および (*変換*とも呼ばれます) 目的のアクションを実行したときにイベント ログに記録します。</span><span class="sxs-lookup"><span data-stu-id="87218-107">Log events to Dev Center that indicate when users have viewed your experiment and performed a desired action (also called a *conversion*).</span></span>

<span data-ttu-id="87218-108">この動作をアプリに追加するには、Microsoft Store Services SDK によって提供される Api を使用します。</span><span class="sxs-lookup"><span data-stu-id="87218-108">To add this behavior to your app, you'll use APIs provided by the Microsoft Store Services SDK.</span></span>

<span data-ttu-id="87218-109">次のセクションでは、実験のバリエーションを取得して、デベロッパー センターにイベント ログの記録の一般的なプロセスについて説明します。</span><span class="sxs-lookup"><span data-stu-id="87218-109">The following sections describe the general process of getting variations for your experiment and logging events to Dev Center.</span></span> <span data-ttu-id="87218-110">実験用のアプリのコードのことができる[デベロッパー センター ダッシュ ボードで実験を定義](define-your-experiment-in-the-dev-center-dashboard.md)します。</span><span class="sxs-lookup"><span data-stu-id="87218-110">After you code your app for experimentation, you can [define an experiment in the Dev Center dashboard](define-your-experiment-in-the-dev-center-dashboard.md).</span></span> <span data-ttu-id="87218-111">実験の作成および実行のプロセスについて詳しく示すチュートリアルについては、「[A/B テストを使用して最初の実験を作成および実行する](create-and-run-your-first-experiment-with-a-b-testing.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="87218-111">For a walkthrough that demonstrates the end-to-end process of creating and running an experiment, see [Create and run your first experiment with A/B testing](create-and-run-your-first-experiment-with-a-b-testing.md).</span></span>

> [!NOTE]
> <span data-ttu-id="87218-112">実験で、Microsoft Store Services SDK の Api のいくつかは、デベロッパー センターからデータを取得する[の非同期パターン](../threading-async/asynchronous-programming-universal-windows-platform-apps.md)を使います。</span><span class="sxs-lookup"><span data-stu-id="87218-112">Some of the experimentation APIs in the Microsoft Store Services SDK use the [asynchronous pattern](../threading-async/asynchronous-programming-universal-windows-platform-apps.md) to retrieve data from Dev Center.</span></span> <span data-ttu-id="87218-113">つまり、これらのメソッドの実行の一部があります場所メソッドが呼び出されると後、操作が完了するまで、アプリの UI を応答性の高い維持できるようにします。</span><span class="sxs-lookup"><span data-stu-id="87218-113">This means that part of the execution of these methods may take place after the methods are invoked, so your app's UI can remain responsive while the operations complete.</span></span> <span data-ttu-id="87218-114">非同期パターンでは、この記事のコード例で示されているように、Api を呼び出す場合、**非同期**キーワードと**await**演算子を使用するアプリが必要です。</span><span class="sxs-lookup"><span data-stu-id="87218-114">The asynchronous pattern requires your app to use the **async** keyword and **await** operator when calling the APIs, as demonstrated by the code examples in this article.</span></span> <span data-ttu-id="87218-115">慣例により、非同期メソッドが**非同期**で終了します。</span><span class="sxs-lookup"><span data-stu-id="87218-115">By convention, asynchronous methods end with **Async**.</span></span>

## <a name="configure-your-project"></a><span data-ttu-id="87218-116">プロジェクトを構成する</span><span class="sxs-lookup"><span data-stu-id="87218-116">Configure your project</span></span>

<span data-ttu-id="87218-117">最初に、開発用コンピューターで、Microsoft Store Services SDK をインストールし、プロジェクトに必要な参照を追加します。</span><span class="sxs-lookup"><span data-stu-id="87218-117">To get started, install the Microsoft Store Services SDK on your development computer and add the necessary references to your project.</span></span>

1. <span data-ttu-id="87218-118">[Microsoft Store Services SDK](microsoft-store-services-sdk.md#install-the-sdk) をインストールします。</span><span class="sxs-lookup"><span data-stu-id="87218-118">[Install the Microsoft Store Services SDK](microsoft-store-services-sdk.md#install-the-sdk).</span></span>
2. <span data-ttu-id="87218-119">Visual Studio でプロジェクトを開きます。</span><span class="sxs-lookup"><span data-stu-id="87218-119">Open your project in Visual Studio.</span></span>
3. <span data-ttu-id="87218-120">ソリューション エクスプローラーで、プロジェクト ノードを展開し、**[参照設定]** を右クリックして **[参照の追加]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="87218-120">In Solution Explorer, expand your project node, right-click **References**, and click **Add Reference**.</span></span>
3. <span data-ttu-id="87218-121">**[参照マネージャー]** で、**[ユニバーサル Windows]** を展開し、**[拡張機能]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="87218-121">In **Reference Manager**, expand **Universal Windows** and click **Extensions**.</span></span>
4. <span data-ttu-id="87218-122">SDK の一覧で、**[Microsoft Engagement Framework]** の横にあるチェック ボックスをオンにして、**[OK]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="87218-122">In the list of SDKs, select the check box next to **Microsoft Engagement Framework** and click **OK**.</span></span>

> [!NOTE]
> <span data-ttu-id="87218-123">この記事のコード例では、 **System.Threading.Tasks**と**Microsoft.Services.Store.Engagement**名前空間の**using**ステートメントをコード ファイルであることを前提としています。</span><span class="sxs-lookup"><span data-stu-id="87218-123">The code examples in this article assume that your code file has **using** statements for the **System.Threading.Tasks** and **Microsoft.Services.Store.Engagement** namespaces.</span></span>

## <a name="get-variation-data-and-log-the-view-event-for-your-experiment"></a><span data-ttu-id="87218-124">バリエーション データを取得して、実験のビュー イベントの記録</span><span class="sxs-lookup"><span data-stu-id="87218-124">Get variation data and log the view event for your experiment</span></span>

<span data-ttu-id="87218-125">プロジェクトで実験で変更する機能のコードを見つけます。</span><span class="sxs-lookup"><span data-stu-id="87218-125">In your project, locate the code for the feature that you want to modify in your experiment.</span></span> <span data-ttu-id="87218-126">バリエーションのデータを取得するコードを追加し、このデータを使用して、テストしている機能の動作を変更にし、実験のビュー イベントをログ B は、デベロッパー センターでサービスをテストします。</span><span class="sxs-lookup"><span data-stu-id="87218-126">Add code that retrieves data for a variation, use this data to modify the behavior of the feature you are testing, and then log the view event for your experiment to the A/B testing service in Dev Center.</span></span>

<span data-ttu-id="87218-127">必要な特定のコードは、アプリによって異なりますが、次の例は基本的なプロセスを示しています。</span><span class="sxs-lookup"><span data-stu-id="87218-127">The specific code you need will depend on your app, but the following example demonstrates the basic process.</span></span> <span data-ttu-id="87218-128">完全なコード例については[を作成および実行すると、最初の実験 B テスト](create-and-run-your-first-experiment-with-a-b-testing.md)します。</span><span class="sxs-lookup"><span data-stu-id="87218-128">For a complete code example, see [Create and run your first experiment with A/B testing](create-and-run-your-first-experiment-with-a-b-testing.md).</span></span>

[!code-cs[ExperimentExamples](./code/StoreSDKSamples/cs/ExperimentExamples.cs#ExperimentCodeSample)]

<span data-ttu-id="87218-129">次の手順では、このプロセスの詳細の重要な部分について説明します。</span><span class="sxs-lookup"><span data-stu-id="87218-129">The following steps describe the important parts of this process in detail.</span></span>

1. <span data-ttu-id="87218-130">現在のバリエーションの割り当てを表す[StoreServicesExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation)オブジェクトと使用をデベロッパー センターにビュー イベントとコンバージョン イベントをログに記録される[StoreServicesCustomEventLogger](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicescustomeventlogger)オブジェクトを宣言します。</span><span class="sxs-lookup"><span data-stu-id="87218-130">Declare a [StoreServicesExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation) object that represents the current variation assignment and a [StoreServicesCustomEventLogger](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicescustomeventlogger) object that you will use to log view and conversion events to Dev Center.</span></span>

    [!code-cs[ExperimentExamples](./code/StoreSDKSamples/cs/ExperimentExamples.cs#Snippet1)]

2. <span data-ttu-id="87218-131">[プロジェクト ID](run-app-experiments-with-a-b-testing.md#terms)を取得する実験用に割り当てられている文字列変数を宣言します。</span><span class="sxs-lookup"><span data-stu-id="87218-131">Declare a string variable that is assigned to the [project ID](run-app-experiments-with-a-b-testing.md#terms) for the experiment you want to retrieve.</span></span>
    > [!NOTE]
    > <span data-ttu-id="87218-132">プロジェクトを取得するときの ID [、デベロッパー センター ダッシュ ボードでプロジェクトを作成](create-a-project-and-define-remote-variables-in-the-dev-center-dashboard.md)します。</span><span class="sxs-lookup"><span data-stu-id="87218-132">You obtain a project ID when you [create a project in the Dev Center dashboard](create-a-project-and-define-remote-variables-in-the-dev-center-dashboard.md).</span></span> <span data-ttu-id="87218-133">たとえば、次に示すプロジェクト ID です目的でのみです。</span><span class="sxs-lookup"><span data-stu-id="87218-133">The project ID shown below is for example purposes only.</span></span>

    [!code-cs[ExperimentExamples](./code/StoreSDKSamples/cs/ExperimentExamples.cs#Snippet2)]

3. <span data-ttu-id="87218-134">静的[GetCachedVariationAsync](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getcachedvariationasync)メソッドを呼び出すことによって、実験の現在のキャッシュされたバリエーションの割り当てを取得し、実験のプロジェクト ID をメソッドに渡します。</span><span class="sxs-lookup"><span data-stu-id="87218-134">Get the current cached variation assignment for your experiment by calling the static [GetCachedVariationAsync](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getcachedvariationasync) method, and pass the project ID for your experiment to the method.</span></span> <span data-ttu-id="87218-135">このメソッドは、 [ExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariationresult.experimentvariation)プロパティを使ってバリエーションの割り当てへのアクセスを提供する[StoreServicesExperimentVariationResult](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariationresult)オブジェクトを返します。</span><span class="sxs-lookup"><span data-stu-id="87218-135">This method returns a [StoreServicesExperimentVariationResult](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariationresult) object that provides access to the variation assignment via the [ExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariationresult.experimentvariation) property.</span></span>

    [!code-cs[ExperimentExamples](./code/StoreSDKSamples/cs/ExperimentExamples.cs#Snippet3)]

4. <span data-ttu-id="87218-136">[IsStale](htthttps://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.isstale)プロパティを調べて、キャッシュされたバリエーションの割り当てをサーバーからリモートのバリエーションの割り当てを更新する必要があるかどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="87218-136">Check the [IsStale](htthttps://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.isstale) property to determine whether the cached variation assignment needs to be refreshed with a remote variation assignment from the server.</span></span> <span data-ttu-id="87218-137">更新する必要は場合、は、サーバーから更新されたバリエーションの割り当ての確認、ローカルにキャッシュされたバリエーションを更新する静的[GetRefreshedVariationAsync](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getrefreshedvariationasync)メソッドを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="87218-137">If it does need to be refreshed, call the static [GetRefreshedVariationAsync](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getrefreshedvariationasync) method to check for an updated variation assignment from the server and refresh the local cached variation.</span></span>

    [!code-cs[ExperimentExamples](./code/StoreSDKSamples/cs/ExperimentExamples.cs#Snippet4)]

5. <span data-ttu-id="87218-138">バリエーションの割り当ての値を取得するには、 [GetBoolean](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getboolean)、 [GetDouble](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getdouble)、 [GetInt32](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getint32)、または[GetString](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getstring) [StoreServicesExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation)オブジェクトのメソッドを使います。</span><span class="sxs-lookup"><span data-stu-id="87218-138">Use the [GetBoolean](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getboolean), [GetDouble](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getdouble), [GetInt32](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getint32), or [GetString](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getstring) methods of the [StoreServicesExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation) object to get the values for the variation assignment.</span></span> <span data-ttu-id="87218-139">各メソッドは、最初のパラメーターを取得するバリエーションの名前 (これは、デベロッパー センター ダッシュ ボードで入力したバリエーションの同じ名前です)。</span><span class="sxs-lookup"><span data-stu-id="87218-139">In each method, the first parameter is the name of the variation that you want to retrieve (this is the same name of a variation that you enter in your Dev Center dashboard).</span></span> <span data-ttu-id="87218-140">2 番目のパラメーターは、このメソッドは、になっていない場合 (たとえば、ネットワーク接続がない場合)、デベロッパー センターから指定された値を取得することを返す必要がありますされる既定値とバリエーションのキャッシュされたバージョンは利用できません。</span><span class="sxs-lookup"><span data-stu-id="87218-140">The second parameter is the default value that the method should return if it is not able to retrieve the specified value from Dev Center (for example, if there is no network connectivity), and a cached version of the variation is not available.</span></span>

    <span data-ttu-id="87218-141">次の例では、 [GetString](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getstring)を使用して、 *buttonText*という名前の変数を取得し、 **Grey Button**の既定の変数値を指定します。</span><span class="sxs-lookup"><span data-stu-id="87218-141">The following example uses [GetString](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation.getstring) to get a variable named *buttonText* and specifies a default variable value of **Grey Button**.</span></span>

    [!code-cs[ExperimentExamples](./code/StoreSDKSamples/cs/ExperimentExamples.cs#Snippet5)]

6. <span data-ttu-id="87218-142">コードで、変数の値を使用して、テストしている機能の動作を変更します。</span><span class="sxs-lookup"><span data-stu-id="87218-142">In your code, use the variable values to modify the behavior of the feature you are testing.</span></span> <span data-ttu-id="87218-143">たとえば、次のコードは、アプリ内のボタンのコンテンツに*buttonText*値を割り当てます。</span><span class="sxs-lookup"><span data-stu-id="87218-143">For example, the following code assigns the *buttonText* value to the content of a button in your app.</span></span> <span data-ttu-id="87218-144">この例が定義されているこのボタン別の場所で、プロジェクトを前提としています。</span><span class="sxs-lookup"><span data-stu-id="87218-144">This example assumes you have already defined this button elsewhere in your project.</span></span>

    [!code-cs[ExperimentExamples](./code/StoreSDKSamples/cs/ExperimentExamples.cs#Snippet6)]

7. <span data-ttu-id="87218-145">最後に、実験の[イベントを表示](run-app-experiments-with-a-b-testing.md#terms)しをログに記録 B は、デベロッパー センターでサービスをテストします。</span><span class="sxs-lookup"><span data-stu-id="87218-145">Finally, log the [view event](run-app-experiments-with-a-b-testing.md#terms) for your experiment to the A/B testing service in Dev Center.</span></span> <span data-ttu-id="87218-146">初期化、 ```logger``` [StoreServicesCustomEventLogger](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicescustomeventlogger)オブジェクトへのフィールドし、 [LogForVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicescustomeventlogger.logforvariation)メソッドを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="87218-146">Initialize the ```logger``` field to a [StoreServicesCustomEventLogger](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicescustomeventlogger) object and call the [LogForVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicescustomeventlogger.logforvariation) method.</span></span> <span data-ttu-id="87218-147">現在のバリエーションの割り当て (このオブジェクトは、デベロッパー センターにイベントに関するコンテキストを提供) を表す[StoreServicesExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation)オブジェクトを渡すと、実験のビュー イベントの名前。</span><span class="sxs-lookup"><span data-stu-id="87218-147">Pass the [StoreServicesExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation) object that represents the current variation assignment (this object provides context about the event to Dev Center) and the name of the view event for your experiment.</span></span> <span data-ttu-id="87218-148">これは、は、デベロッパー センター ダッシュ ボードで実験用に入力するビュー イベント名と一致する必要があります。</span><span class="sxs-lookup"><span data-stu-id="87218-148">This must match the view event name that you enter for your experiment in the Dev Center dashboard.</span></span> <span data-ttu-id="87218-149">コードをユーザーが開始して、実験の一部であるバリエーションを表示するときに、ビュー イベント ログに記録する必要があります。</span><span class="sxs-lookup"><span data-stu-id="87218-149">Your code should log the view event when the user starts viewing a variation that is part of your experiment.</span></span>

    <span data-ttu-id="87218-150">次の例では、 **userViewedButton**という名前のビュー イベントをログに記録する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="87218-150">The following example shows how to log a view event named **userViewedButton**.</span></span> <span data-ttu-id="87218-151">この例では、実験の目標は、ビュー イベントは、アプリが (この場合は、ボタンのテキスト) で、バリエーション データを取得し、ボタンのコンテンツへの割り当てが後に記録するために、アプリでボタンをクリックするユーザーを取得するのにはします。</span><span class="sxs-lookup"><span data-stu-id="87218-151">In this example, the goal of the experiment is to get the user to click a button in the app, so the view event is logged after the app has retrieved the variation data (in this case, the button text) and assigned it to the content of the button.</span></span>

    [!code-cs[ExperimentExamples](./code/StoreSDKSamples/cs/ExperimentExamples.cs#Snippet7)]

## <a name="log-conversion-events-to-dev-center"></a><span data-ttu-id="87218-152">デベロッパー センターにコンバージョン イベントをログに記録します。</span><span class="sxs-lookup"><span data-stu-id="87218-152">Log conversion events to Dev Center</span></span>

<span data-ttu-id="87218-153">A[コンバージョン イベント](run-app-experiments-with-a-b-testing.md#terms)をログに記録するコードを次に、追加 B は、デベロッパー センターでサービスをテストします。</span><span class="sxs-lookup"><span data-stu-id="87218-153">Next, add code that logs [conversion events](run-app-experiments-with-a-b-testing.md#terms) to the A/B testing service in Dev Center.</span></span> <span data-ttu-id="87218-154">コードでは、ユーザーが実験の目標に達したときは、コンバージョン イベントを記録する必要があります。</span><span class="sxs-lookup"><span data-stu-id="87218-154">Your code should log a conversion event when the user reaches an objective for your experiment.</span></span> <span data-ttu-id="87218-155">必要な特定のコードは、アプリによって異なりますが、一般的な手順を次に示します。</span><span class="sxs-lookup"><span data-stu-id="87218-155">The specific code you need will depend on your app, but here are the general steps.</span></span> <span data-ttu-id="87218-156">完全なコード例については[を作成および実行すると、最初の実験 B テスト](create-and-run-your-first-experiment-with-a-b-testing.md)します。</span><span class="sxs-lookup"><span data-stu-id="87218-156">For a complete code example, see [Create and run your first experiment with A/B testing](create-and-run-your-first-experiment-with-a-b-testing.md).</span></span>

1. <span data-ttu-id="87218-157">ユーザーが、実験の目標の 1 つの目標に達したときに実行されるコードでは、もう一度[LogForVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicescustomeventlogger.logforvariation)メソッドを呼び出すし、 [StoreServicesExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation)オブジェクトと、実験のコンバージョン イベントの名前を渡します。</span><span class="sxs-lookup"><span data-stu-id="87218-157">In code that runs when the user reaches an objective for one of the goals of the experiment, call the [LogForVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicescustomeventlogger.logforvariation) method again and pass the [StoreServicesExperimentVariation](https://docs.microsoft.com/uwp/api/microsoft.services.store.engagement.storeservicesexperimentvariation) object and the name of a conversion event for your experiment.</span></span> <span data-ttu-id="87218-158">これは、デベロッパー センター ダッシュ ボードで実験用に入力するコンバージョン イベント名のいずれかに一致する必要があります。</span><span class="sxs-lookup"><span data-stu-id="87218-158">This must match one of the conversion event names that you enter for your experiment in the Dev Center dashboard.</span></span>

    <span data-ttu-id="87218-159">次の例では、ボタンの**クリックして**イベント ハンドラーから**userClickedButton**をという名前のコンバージョン イベントを記録します。</span><span class="sxs-lookup"><span data-stu-id="87218-159">The following example logs a conversion event named **userClickedButton** from the **Click** event handler for a button.</span></span> <span data-ttu-id="87218-160">この例で、実験の目標は、ボタンをクリックするユーザーを取得するのには。</span><span class="sxs-lookup"><span data-stu-id="87218-160">In this example, the goal of the experiment is to get the user to click the button.</span></span>

    [!code-cs[ExperimentExamples](./code/StoreSDKSamples/cs/ExperimentExamples.cs#Snippet8)]

## <a name="next-steps"></a><span data-ttu-id="87218-161">次のステップ</span><span class="sxs-lookup"><span data-stu-id="87218-161">Next steps</span></span>

<span data-ttu-id="87218-162">アプリで、実験のコード、したら、次の手順。</span><span class="sxs-lookup"><span data-stu-id="87218-162">After you code the experiment in your app, you are ready for the following steps:</span></span>
1. <span data-ttu-id="87218-163">[デベロッパー センター ダッシュボードで実験を定義します](define-your-experiment-in-the-dev-center-dashboard.md)。</span><span class="sxs-lookup"><span data-stu-id="87218-163">[Define your experiment in the Dev Center dashboard](define-your-experiment-in-the-dev-center-dashboard.md).</span></span> <span data-ttu-id="87218-164">イベントの表示、コンバージョン イベント、および、1 つの一意のバリエーションを定義する実験を作成/B をテストします。</span><span class="sxs-lookup"><span data-stu-id="87218-164">Create an experiment that defines the view events, conversion events, and unique variations for your A/B test.</span></span>
2. <span data-ttu-id="87218-165">[デベロッパー センター ダッシュボードで実験を実行および管理します](manage-your-experiment.md)。</span><span class="sxs-lookup"><span data-stu-id="87218-165">[Run and manage your experiment in the Dev Center dashboard](manage-your-experiment.md).</span></span>


## <a name="related-topics"></a><span data-ttu-id="87218-166">関連トピック</span><span class="sxs-lookup"><span data-stu-id="87218-166">Related topics</span></span>

* [<span data-ttu-id="87218-167">プロジェクトを作成し、デベロッパー センター ダッシュボードでリモート変数を定義する</span><span class="sxs-lookup"><span data-stu-id="87218-167">Create a project and define remote variables in the Dev Center dashboard</span></span>](create-a-project-and-define-remote-variables-in-the-dev-center-dashboard.md)
* [<span data-ttu-id="87218-168">デベロッパー センター ダッシュボードで実験を定義する</span><span class="sxs-lookup"><span data-stu-id="87218-168">Define your experiment in the Dev Center dashboard</span></span>](define-your-experiment-in-the-dev-center-dashboard.md)
* [<span data-ttu-id="87218-169">デベロッパー センター ダッシュボードで実験を管理する</span><span class="sxs-lookup"><span data-stu-id="87218-169">Manage your experiment in the Dev Center dashboard</span></span>](manage-your-experiment.md)
* [<span data-ttu-id="87218-170">A/B テストを使用して最初の実験を作成および実行する</span><span class="sxs-lookup"><span data-stu-id="87218-170">Create and run your first experiment with A/B testing</span></span>](create-and-run-your-first-experiment-with-a-b-testing.md)
* [<span data-ttu-id="87218-171">A/B テストを使用してアプリの実験を実行する</span><span class="sxs-lookup"><span data-stu-id="87218-171">Run app experiments with A/B testing</span></span>](run-app-experiments-with-a-b-testing.md)
