---
ms.assetid: 0CBCEEA0-2B0E-44A1-A09A-F7A939632F3A
title: ストーリーボードに設定されたアニメーション
description: ストーリーボードに設定されたアニメーションは、単なる視覚なアニメーションではありません。
ms.date: 07/13/2018
ms.topic: article
keywords: Windows 10, UWP
ms.localizationpriority: medium
ms.openlocfilehash: 920ff8e295959ad6ea66cdb3b673217ff19b89e2
ms.sourcegitcommit: b5c9c18e70625ab770946b8243f3465ee1013184
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/28/2018
ms.locfileid: "7969427"
---
# <a name="storyboarded-animations"></a><span data-ttu-id="a53c1-104">ストーリーボードに設定されたアニメーション</span><span class="sxs-lookup"><span data-stu-id="a53c1-104">Storyboarded animations</span></span>

<span data-ttu-id="a53c1-105">ストーリーボードに設定されたアニメーションは、単なる視覚なアニメーションではありません。</span><span class="sxs-lookup"><span data-stu-id="a53c1-105">Storyboarded animations are not just animations in the visual sense.</span></span> <span data-ttu-id="a53c1-106">ストーリーボードに設定されたアニメーションは、依存関係プロパティの値を時間の関数として変更する手段です。</span><span class="sxs-lookup"><span data-stu-id="a53c1-106">A storyboarded animation is a way to change the value of a dependency property as a function of time.</span></span> <span data-ttu-id="a53c1-107">アニメーション ライブラリからではないストーリーボードに設定されたアニメーションが必要になる主な理由として、コントロール テンプレートまたはページ定義の一部としてコントロールの表示状態を定義できることが挙げられます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-107">One of the main reasons you might need a storyboarded animation that's not from the animation library is to define the visual state for a control, as part of a control template or page definition.</span></span>

## <a name="differences-with-silverlight-and-wpf"></a><span data-ttu-id="a53c1-108">Silverlight や WPF を使ったアニメーションとの違い</span><span class="sxs-lookup"><span data-stu-id="a53c1-108">Differences with Silverlight and WPF</span></span>

<span data-ttu-id="a53c1-109">Microsoft Silverlight または Windows Presentation Foundation (WPF) に慣れている方は、このセクションをお読みください。それ以外の方は飛ばしてくださって結構です。</span><span class="sxs-lookup"><span data-stu-id="a53c1-109">If you are familiar with Microsoft Silverlight or Windows Presentation Foundation (WPF), read this section; otherwise, you can skip it.</span></span>

<span data-ttu-id="a53c1-110">一般に、Windows ランタイム アプリのストーリーボードに設定されたアニメーションの作成は、Silverlight や WPF と似ています。</span><span class="sxs-lookup"><span data-stu-id="a53c1-110">In general, creating storyboarded animations in a Windows Runtime app is like Silverlight or WPF.</span></span> <span data-ttu-id="a53c1-111">ただし、重要な違いがいくつかあります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-111">But there are a number of important differences:</span></span>

-   <span data-ttu-id="a53c1-112">ストーリーボードに設定されたアニメーションは、UI を視覚的にアニメーション化する唯一の方法ではなく、アプリ開発者にとってもっと簡単な方法も他にあります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-112">Storyboarded animations are not the only way to visually animate a UI, nor are they necessarily the easiest way for app developers to do so.</span></span> <span data-ttu-id="a53c1-113">ストーリーボードに設定されたアニメーションを使わず、テーマ アニメーションと切り替え効果のアニメーションを使う方が設計上効率的であるケースはよくあります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-113">Rather than using storyboarded animations it's often a better design practice to use theme animations and transition animations.</span></span> <span data-ttu-id="a53c1-114">これらを使うと、複雑なアニメーション プロパティのターゲット設定を扱わずに済み、推奨 UI アニメーションをすばやく作成できます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-114">These can quickly create recommended UI animations without getting into the intricacies of animation property targeting.</span></span> <span data-ttu-id="a53c1-115">詳しくは、「[アニメーションの概要](xaml-animation.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a53c1-115">For more info see [Animations overview](xaml-animation.md).</span></span>
-   <span data-ttu-id="a53c1-116">Windows ランタイムの多くの XAML コントロールには、組み込み動作の一部としてテーマ アニメーションと切り替え効果のアニメーションが組み込まれています。</span><span class="sxs-lookup"><span data-stu-id="a53c1-116">In the Windows Runtime, many XAML controls include theme animations and transition animations as part of their built-in behavior.</span></span> <span data-ttu-id="a53c1-117">ほとんどの場合、WPF や Silverlight コントロールには既定のアニメーション動作がありませんでした。</span><span class="sxs-lookup"><span data-stu-id="a53c1-117">For the most part, WPF and Silverlight controls didn't have a default animation behavior.</span></span>
-   <span data-ttu-id="a53c1-118">UI のパフォーマンスが低下するとアニメーション システムによって判断された場合、作成したすべてのカスタム アニメーションが Windows ランタイム アプリでそのまま動くわけではありません。</span><span class="sxs-lookup"><span data-stu-id="a53c1-118">Not all custom animations you create can run by default in a Windows Runtime app, if the animation system determines that the animation might cause bad performance in your UI.</span></span> <span data-ttu-id="a53c1-119">アプリのパフォーマンスに影響を及ぼす可能性があるとシステムによって判断されたアニメーションを*依存型アニメーション*といいます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-119">Animations where the system determines there could be a performance impact are called *dependent animations*.</span></span> <span data-ttu-id="a53c1-120">"依存型" と呼ばれるのは、アニメーションのクロッキングは UI スレッドに対して直接作用するためです。この UI スレッドは、アクティブなユーザー入力やその他の更新によって UI に対してランタイムの変更の適用が試行される部分でもあります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-120">It's dependent because the clocking of your animation is directly working against the UI thread, which is also where active user input and other updates are trying to apply the runtime changes to UI.</span></span> <span data-ttu-id="a53c1-121">UI スレッドで大量のシステム リソースを消費する依存型アニメーションの場合、特定の状況においてアプリが応答していないかのように見えることがあります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-121">A dependent animation that's consuming extensive system resources on the UI thread can make the app appear unresponsive in certain situations.</span></span> <span data-ttu-id="a53c1-122">自分が作成したアニメーションが、レイアウトの変更を含め、UI スレッドのパフォーマンスへの影響を伴う可能性がある場合は、アニメーションを明示的に有効にし、動作することを確かめる必要があります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-122">If your animation causes a layout change or otherwise has the potential to impact performance on the UI thread, you often need to explicitly enable the animation to see it run.</span></span> <span data-ttu-id="a53c1-123">これを行うのが、特定のアニメーション クラスに用意されている **EnableDependentAnimation** プロパティです。</span><span class="sxs-lookup"><span data-stu-id="a53c1-123">That's what the **EnableDependentAnimation** property on specific animation classes is for.</span></span> <span data-ttu-id="a53c1-124">詳しくは、「[依存型および独立型アニメーション](./storyboarded-animations.md#dependent-and-independent-animations)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a53c1-124">See [Dependent and independent animations](./storyboarded-animations.md#dependent-and-independent-animations) for more info.</span></span>
-   <span data-ttu-id="a53c1-125">カスタム イージング関数は現在 Windows ランタイムではサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="a53c1-125">Custom easing functions are not currently supported in the Windows Runtime.</span></span>

## <a name="defining-storyboarded-animations"></a><span data-ttu-id="a53c1-126">ストーリーボードに設定されたアニメーションの定義</span><span class="sxs-lookup"><span data-stu-id="a53c1-126">Defining storyboarded animations</span></span>

<span data-ttu-id="a53c1-127">ストーリーボードに設定されたアニメーションは、依存関係プロパティの値を時間の関数として変更する手段です。</span><span class="sxs-lookup"><span data-stu-id="a53c1-127">A storyboarded animation is a way to change the value of a dependency property as a function of time.</span></span> <span data-ttu-id="a53c1-128">アニメーション化するプロパティは、アプリの UI に直接影響するプロパティであるとは限りません。</span><span class="sxs-lookup"><span data-stu-id="a53c1-128">The property you are animating is not always a property that directly affects the UI of your app.</span></span> <span data-ttu-id="a53c1-129">ただし、XAML はアプリ UI を定義するものであるため、通常は、アニメーション化の対象となる UI 関連のプロパティです。</span><span class="sxs-lookup"><span data-stu-id="a53c1-129">But since XAML is about defining UI for an app, usually it is a UI-related property you are animating.</span></span> <span data-ttu-id="a53c1-130">たとえば、[**RotateTransform**](https://msdn.microsoft.com/library/windows/apps/BR242932) の角度やボタンの背景色の値をアニメーション化することができます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-130">For example, you can animate the angle of a [**RotateTransform**](https://msdn.microsoft.com/library/windows/apps/BR242932), or the color value of a button's background.</span></span>

<span data-ttu-id="a53c1-131">ストーリーボードに設定されたアニメーションを定義する主な場面の 1 つは、コントロールの作成や再テンプレート化を担当しており、表示状態を定義する必要があるときです。</span><span class="sxs-lookup"><span data-stu-id="a53c1-131">One of the main reasons you might be defining a storyboarded animation is if you are a control author or are re-templating a control, and you are defining visual states.</span></span> <span data-ttu-id="a53c1-132">詳しくは、「[表示状態用にストーリーボードに設定されたアニメーション](https://msdn.microsoft.com/library/windows/apps/xaml/JJ819808)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a53c1-132">For more info, see [Storyboarded animations for visual states](https://msdn.microsoft.com/library/windows/apps/xaml/JJ819808).</span></span>

<span data-ttu-id="a53c1-133">表示状態とアプリのカスタム アニメーションのどちらを定義するときも、このトピックで説明するストーリーボードに設定されたアニメーションの概念と API はほぼ適用できます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-133">Whether you are defining visual states or a custom animation for an app, the concepts and APIs for storyboarded animations that are described in this topic mostly apply to either.</span></span>

<span data-ttu-id="a53c1-134">アニメーション化するためには、ストーリーボードに設定されたアニメーションでターゲットに設定するプロパティが*依存関係プロパティ*である必要があります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-134">In order to be animated, the property you are targeting with a storyboarded animation must be a *dependency property*.</span></span> <span data-ttu-id="a53c1-135">依存関係プロパティは、Windows ランタイム XAML 実装の重要な機能です。</span><span class="sxs-lookup"><span data-stu-id="a53c1-135">A dependency property is a key feature of the Windows Runtime XAML implementation.</span></span> <span data-ttu-id="a53c1-136">通常、一般的な UI 要素の書き込み可能なプロパティは依存関係プロパティとして実装されるため、アニメーション化したり、データ バインディング値を適用したり、[**Style**](https://msdn.microsoft.com/library/windows/apps/BR208849) を適用し、[**Setter**](https://msdn.microsoft.com/library/windows/apps/BR208817) でプロパティのターゲット設定を行ったりできます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-136">The writeable properties of most common UI elements are typically implemented as dependency properties, so that you can animate them, apply data-bound values, or apply a [**Style**](https://msdn.microsoft.com/library/windows/apps/BR208849) and target the property with a [**Setter**](https://msdn.microsoft.com/library/windows/apps/BR208817).</span></span> <span data-ttu-id="a53c1-137">依存関係プロパティのしくみについて詳しくは、「[依存関係プロパティの概要](https://msdn.microsoft.com/library/windows/apps/Mt185583)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a53c1-137">For more info about how dependency properties work, see [Dependency properties overview](https://msdn.microsoft.com/library/windows/apps/Mt185583).</span></span>

<span data-ttu-id="a53c1-138">ほとんどの場合、ストーリーボードに設定されたアニメーションを定義するには XAML を記述します。</span><span class="sxs-lookup"><span data-stu-id="a53c1-138">Most of the time, you define a storyboarded animation by writing XAML.</span></span> <span data-ttu-id="a53c1-139">Microsoft Visual Studio などのツールを利用すれば、XAML は自動的に生成されます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-139">If you use a tool such as Microsoft Visual Studio, it will produce the XAML for you.</span></span> <span data-ttu-id="a53c1-140">ストーリーボードに設定されたアニメーションをコードを使って定義することもできますが、あまり一般的ではありません。</span><span class="sxs-lookup"><span data-stu-id="a53c1-140">It's possible to define a storyboarded animation using code too, but that's less common.</span></span>

<span data-ttu-id="a53c1-141">シンプルな例を見てみましょう。</span><span class="sxs-lookup"><span data-stu-id="a53c1-141">Let's look at a simple example.</span></span> <span data-ttu-id="a53c1-142">この XAML の例では、[**Opacity**](/uwp/api/Windows.UI.Xaml.UIElement.Opacity) プロパティを特定の [**Rectangle**](/uwp/api/Windows.UI.Xaml.Shapes.Rectangle) オブジェクトでアニメーション化しています。</span><span class="sxs-lookup"><span data-stu-id="a53c1-142">In this XAML example, the [**Opacity**](/uwp/api/Windows.UI.Xaml.UIElement.Opacity) property is animated on a particular [**Rectangle**](/uwp/api/Windows.UI.Xaml.Shapes.Rectangle) object.</span></span>

```xaml
<Page ...>
  <Page.Resources>
    <!-- Storyboard resource: Animates a rectangle's opacity. -->
    <Storyboard x:Name="myStoryboard">
      <DoubleAnimation
        Storyboard.TargetName="MyAnimatedRectangle"
        Storyboard.TargetProperty="Opacity"
        From="1.0" To="0.0" Duration="0:0:1"/>
    </Storyboard>
  </Page.Resources>

  <!--Page root element, UI definition-->
  <Grid>
    <Rectangle x:Name="MyAnimatedRectangle"
      Width="300" Height="200" Fill="Blue"/>
  </Grid>
</Page>
```

### <a name="identifying-the-object-to-animate"></a><span data-ttu-id="a53c1-143">アニメーション化の対象となるオブジェクトの指定</span><span class="sxs-lookup"><span data-stu-id="a53c1-143">Identifying the object to animate</span></span>

<span data-ttu-id="a53c1-144">先ほどの例では、ストーリーボードで [**Rectangle**](/uwp/api/Windows.UI.Xaml.Shapes.Rectangle) の [**Opacity**](/uwp/api/Windows.UI.Xaml.UIElement.Opacity) プロパティがアニメーション化されています。</span><span class="sxs-lookup"><span data-stu-id="a53c1-144">In the previous example, the storyboard was animating the [**Opacity**](/uwp/api/Windows.UI.Xaml.UIElement.Opacity) property of a [**Rectangle**](/uwp/api/Windows.UI.Xaml.Shapes.Rectangle).</span></span> <span data-ttu-id="a53c1-145">オブジェクト自体ではアニメーションを宣言しません。</span><span class="sxs-lookup"><span data-stu-id="a53c1-145">You don't declare the animations on the object itself.</span></span> <span data-ttu-id="a53c1-146">代わりに、ストーリーボードのアニメーション定義内で宣言します。</span><span class="sxs-lookup"><span data-stu-id="a53c1-146">Instead, you do this within the animation definition of a storyboard.</span></span> <span data-ttu-id="a53c1-147">ストーリーボードは、アニメーション化するオブジェクトの XAML UI 定義のすぐ近くにない XAML で定義されるのが普通です。</span><span class="sxs-lookup"><span data-stu-id="a53c1-147">Storyboards are usually defined in XAML that's not in the immediate vicinity of the XAML UI definition of the object to animate.</span></span> <span data-ttu-id="a53c1-148">代わりに、通常は、XAML リソースとして設定します。</span><span class="sxs-lookup"><span data-stu-id="a53c1-148">Instead, they're usually set up as a XAML resource.</span></span>

<span data-ttu-id="a53c1-149">ターゲットにアニメーションを接続するには、識別用のプログラミング名でターゲットを参照します。</span><span class="sxs-lookup"><span data-stu-id="a53c1-149">To connect an animation to a target, you reference the target by its identifying programming name.</span></span> <span data-ttu-id="a53c1-150">必ず XAML UI 定義の [x:Name 属性](https://msdn.microsoft.com/library/windows/apps/Mt204788)を適用して、アニメーション化するオブジェクトに名前を付けてください。</span><span class="sxs-lookup"><span data-stu-id="a53c1-150">You should always apply the [x:Name attribute](https://msdn.microsoft.com/library/windows/apps/Mt204788) in the XAML UI definition to name the object that you want to animate.</span></span> <span data-ttu-id="a53c1-151">その後で、アニメーション定義内の [**Storyboard.TargetName**](https://msdn.microsoft.com/library/windows/apps/Hh759823) を設定することで、アニメーション化するオブジェクトのターゲット設定を行います。</span><span class="sxs-lookup"><span data-stu-id="a53c1-151">You then target the object to animate by setting [**Storyboard.TargetName**](https://msdn.microsoft.com/library/windows/apps/Hh759823) within the animation definition.</span></span> <span data-ttu-id="a53c1-152">**Storyboard.TargetName** の値には、ターゲット オブジェクトの名前文字列を使います。これは、前に別の場所で x:Name 属性を使って設定した値です。</span><span class="sxs-lookup"><span data-stu-id="a53c1-152">For the value of **Storyboard.TargetName**, you use the name string of the target object, which is what you set earlier and elsewhere with x:Name attribute.</span></span>

### <a name="targeting-the-dependency-property-to-animate"></a><span data-ttu-id="a53c1-153">アニメーション化する依存関係プロパティの指定</span><span class="sxs-lookup"><span data-stu-id="a53c1-153">Targeting the dependency property to animate</span></span>

<span data-ttu-id="a53c1-154">アニメーションの [**Storyboard.TargetProperty**](https://msdn.microsoft.com/library/windows/apps/Hh759824) の値を設定します。</span><span class="sxs-lookup"><span data-stu-id="a53c1-154">You set a value for [**Storyboard.TargetProperty**](https://msdn.microsoft.com/library/windows/apps/Hh759824) in the animation.</span></span> <span data-ttu-id="a53c1-155">これにより、アニメーション化するターゲット オブジェクトのプロパティが決まります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-155">This determines which specific property of the targeted object is animated.</span></span>

<span data-ttu-id="a53c1-156">ターゲット オブジェクトの直接のプロパティではないプロパティをターゲットにする必要があることもありますが、オブジェクトとプロパティの関係の中でより深い入れ子の状態になります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-156">Sometimes you need to target a property that's not an immediate property of the target object, but that is nested more deeply in an object-property relationship.</span></span> <span data-ttu-id="a53c1-157">アニメーション化できるプロパティの型 ([**Double**](https://msdn.microsoft.com/library/windows/apps/xaml/system.double.aspx)、[**Point**](https://msdn.microsoft.com/library/windows/apps/BR225870)、[**Color**](https://msdn.microsoft.com/library/windows/apps/Hh673723)) を参照できるまで、関係する一連のオブジェクトとプロパティの値をドリルダウンするために、これが必要になることがよくあります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-157">You often need to do this in order to drill down into a set of contributing object and property values until you can reference a property type that can be animated ([**Double**](https://msdn.microsoft.com/library/windows/apps/xaml/system.double.aspx), [**Point**](https://msdn.microsoft.com/library/windows/apps/BR225870), [**Color**](https://msdn.microsoft.com/library/windows/apps/Hh673723)).</span></span> <span data-ttu-id="a53c1-158">この概念を *"間接的なターゲット設定"* と呼び、この方法でアニメーションの対象プロパティを設定する構文を *"プロパティ パス"* と呼びます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-158">This concept is called *indirect targeting*, and the syntax for targeting a property in this way is known as a *property path*.</span></span>

<span data-ttu-id="a53c1-159">次に例を示します。</span><span class="sxs-lookup"><span data-stu-id="a53c1-159">Here's an example.</span></span> <span data-ttu-id="a53c1-160">ストーリーボードに設定されたアニメーションの一般的なシナリオの 1 つに、コントロールが特定の状態にあることを表すためにアプリ UI やコントロールの一部の色を変更するというものがあります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-160">One common scenario for a storyboarded animation is to change the color of a part of an app UI or control in order to represent that the control is in a particular state.</span></span> <span data-ttu-id="a53c1-161">たとえば、赤から緑に変化するように [**TextBlock**](https://msdn.microsoft.com/library/windows/apps/BR209652) の [**Foreground**](https://msdn.microsoft.com/library/windows/apps/BR209665) をアニメーション化するとします。</span><span class="sxs-lookup"><span data-stu-id="a53c1-161">Say you want to animate the [**Foreground**](https://msdn.microsoft.com/library/windows/apps/BR209665) of a [**TextBlock**](https://msdn.microsoft.com/library/windows/apps/BR209652), so that it turns from red to green.</span></span> <span data-ttu-id="a53c1-162">[**ColorAnimation**](https://msdn.microsoft.com/library/windows/apps/BR243066) の呼び出しが必要と思われるでしょう。それは正しいものの、</span><span class="sxs-lookup"><span data-stu-id="a53c1-162">You'd expect that a [**ColorAnimation**](https://msdn.microsoft.com/library/windows/apps/BR243066) is involved, and that's correct.</span></span> <span data-ttu-id="a53c1-163">オブジェクトの色に影響する UI 要素のプロパティは、実際には [**Color**](https://msdn.microsoft.com/library/windows/apps/Hh673723) 型ではなく、</span><span class="sxs-lookup"><span data-stu-id="a53c1-163">However, none of the properties on UI elements that affect the object's color are actually of type [**Color**](https://msdn.microsoft.com/library/windows/apps/Hh673723).</span></span> <span data-ttu-id="a53c1-164">[**Brush**](/uwp/api/Windows.UI.Xaml.Media.Brush) 型です。</span><span class="sxs-lookup"><span data-stu-id="a53c1-164">Instead, they're of type [**Brush**](/uwp/api/Windows.UI.Xaml.Media.Brush).</span></span> <span data-ttu-id="a53c1-165">そのため、アニメーションのターゲット設定に実際に必要なのは、[**SolidColorBrush**](https://msdn.microsoft.com/library/windows/apps/BR242962) クラスの [**Color**](/uwp/api/Windows.UI.Xaml.Media.SolidColorBrush.Color) プロパティです。これは、これらの色関連の UI プロパティに一般的に使われる **Brush** 派生型です。</span><span class="sxs-lookup"><span data-stu-id="a53c1-165">So what you actually need to target for animation is the [**Color**](/uwp/api/Windows.UI.Xaml.Media.SolidColorBrush.Color) property of the [**SolidColorBrush**](https://msdn.microsoft.com/library/windows/apps/BR242962) class, which is a **Brush**-derived type that's typically used for these color-related UI properties.</span></span> <span data-ttu-id="a53c1-166">アニメーションのプロパティのターゲット設定に使うプロパティ パスの作成という点に注目すると、次のようになります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-166">And here's what that looks like in terms of forming a property path for your animation's property targeting:</span></span>

```xaml
<Storyboard x:Name="myStoryboard">
  <ColorAnimation
    Storyboard.TargetName="tb1"
    Storyboard.TargetProperty="(TextBlock.Foreground).(SolidColorBrush.Color)"
    From="Red" To="Green"/>
</Storyboard>
```

<span data-ttu-id="a53c1-167">この構文について、各部分に注目して説明します。</span><span class="sxs-lookup"><span data-stu-id="a53c1-167">Here's how to think of this syntax in terms of its parts:</span></span>

- <span data-ttu-id="a53c1-168">プロパティ名は、かっこ () の各セットで囲みます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-168">Each set of () parentheses encloses a property name.</span></span>
- <span data-ttu-id="a53c1-169">プロパティ名の中にドットがありますが、そのドットは型名とプロパティ名を区切って対象のプロパティを明確にするためのものです。</span><span class="sxs-lookup"><span data-stu-id="a53c1-169">Within the property name, there's a dot, and that dot separates a type name and a property name, so that the property you're identifying is unambiguous.</span></span>
- <span data-ttu-id="a53c1-170">かっこ内にない中央のドットはステップを表します。</span><span class="sxs-lookup"><span data-stu-id="a53c1-170">The dot in the middle, the one that's not inside parentheses, is a step.</span></span> <span data-ttu-id="a53c1-171">これは、最初のプロパティ (オブジェクト) の値を受け取り、オブジェクト モデルをステップ実行してから、最初のプロパティの値の特定のサブプロパティをターゲットとするという意味に解釈されます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-171">This is interpreted by the syntax to mean, take the value of the first property (which is an object), step into its object model, and target a specific sub-property of the first property's value.</span></span>

<span data-ttu-id="a53c1-172">次に、アニメーションのターゲット設定のシナリオを示します。おそらくこうしたシナリオでは、間接的なプロパティのターゲット設定と、使う構文に似たプロパティ パス文字列を使うことになります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-172">Here's a list of animation targeting scenarios where you'll probably be using indirect property targeting, and some property path strings that approximates the syntax you'll use:</span></span>

- <span data-ttu-id="a53c1-173">[**RenderTransform**](https://msdn.microsoft.com/library/windows/apps/BR208980) に適用される、[**TranslateTransform**](https://msdn.microsoft.com/library/windows/apps/BR243027) の [**X**](https://msdn.microsoft.com/library/windows/apps/BR243029) 値のアニメーション化: </span><span class="sxs-lookup"><span data-stu-id="a53c1-173">Animating the [**X**](https://msdn.microsoft.com/library/windows/apps/BR243029) value of a [**TranslateTransform**](https://msdn.microsoft.com/library/windows/apps/BR243027), as applied to a [**RenderTransform**](https://msdn.microsoft.com/library/windows/apps/BR208980):</span></span> `(UIElement.RenderTransform).(TranslateTransform.X)`
- <span data-ttu-id="a53c1-174">[**Fill**](/uwp/api/Windows.UI.Xaml.Shapes.Shape.Fill) に適用される、[**LinearGradientBrush**](https://msdn.microsoft.com/library/windows/apps/BR210108) の [**GradientStop**](https://msdn.microsoft.com/library/windows/apps/BR210078) 内の [**Color**](/uwp/api/Windows.UI.Xaml.Media.SolidColorBrush.Color) のアニメーション化: </span><span class="sxs-lookup"><span data-stu-id="a53c1-174">Animating a [**Color**](/uwp/api/Windows.UI.Xaml.Media.SolidColorBrush.Color) within a [**GradientStop**](https://msdn.microsoft.com/library/windows/apps/BR210078) of a [**LinearGradientBrush**](https://msdn.microsoft.com/library/windows/apps/BR210108), as applied to a [**Fill**](/uwp/api/Windows.UI.Xaml.Shapes.Shape.Fill):</span></span> `(Shape.Fill).(GradientBrush.GradientStops)[0].(GradientStop.Color)`
- <span data-ttu-id="a53c1-175">[**RenderTransform**](https://msdn.microsoft.com/library/windows/apps/BR208980) に適用される、[**TransformGroup**](https://msdn.microsoft.com/library/windows/apps/BR243022) における 4 つの変換の 1 つである [**TranslateTransform**](https://msdn.microsoft.com/library/windows/apps/BR243027) の [**X**](https://msdn.microsoft.com/library/windows/apps/BR243029) 値のアニメーション化: </span><span class="sxs-lookup"><span data-stu-id="a53c1-175">Animating the [**X**](https://msdn.microsoft.com/library/windows/apps/BR243029) value of a [**TranslateTransform**](https://msdn.microsoft.com/library/windows/apps/BR243027), which is 1 of 4 transforms in a [**TransformGroup**](https://msdn.microsoft.com/library/windows/apps/BR243022), as applied to a [**RenderTransform**](https://msdn.microsoft.com/library/windows/apps/BR208980):</span></span>`(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)`

<span data-ttu-id="a53c1-176">これらの例の一部では、数を囲む角かっこが使われていることがわかります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-176">You'll notice some of these examples use square brackets around numbers.</span></span> <span data-ttu-id="a53c1-177">これはインデクサーです。</span><span class="sxs-lookup"><span data-stu-id="a53c1-177">This is an indexer.</span></span> <span data-ttu-id="a53c1-178">前のプロパティ名に値としてコレクションが含まれており、そのコレクション内からの項目 (0 から始まるインデックスで識別される) が必要であることを示しています。</span><span class="sxs-lookup"><span data-stu-id="a53c1-178">It indicates that the property name preceding it has a collection as value, and that you want an item (as identified by a zero-based index) from within that collection.</span></span>

<span data-ttu-id="a53c1-179">XAML 添付プロパティをアニメーション化することもできます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-179">You can also animate XAML attached properties.</span></span> <span data-ttu-id="a53c1-180">`(Canvas.Left)` のように、必ず完全な添付プロパティの名前をかっこで囲んでください。</span><span class="sxs-lookup"><span data-stu-id="a53c1-180">Always enclose the full attached property name in parentheses, for example `(Canvas.Left)`.</span></span> <span data-ttu-id="a53c1-181">詳しくは、「[XAML 添付プロパティのアニメーション化](./storyboarded-animations.md#animating-xaml-attached-properties)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a53c1-181">For more info, see [Animating XAML attached properties](./storyboarded-animations.md#animating-xaml-attached-properties).</span></span>

<span data-ttu-id="a53c1-182">アニメーション化するプロパティの間接的なターゲット設定をプロパティ パスで行う方法について詳しくは、「[プロパティ パス構文](https://msdn.microsoft.com/library/windows/apps/Mt185586)」または「[**Storyboard.TargetProperty 添付プロパティ**](https://msdn.microsoft.com/library/windows/apps/Hh759824)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a53c1-182">For more info on how to use a property path for indirect targeting of the property to animate, see [Property-path syntax](https://msdn.microsoft.com/library/windows/apps/Mt185586) or [**Storyboard.TargetProperty attached property**](https://msdn.microsoft.com/library/windows/apps/Hh759824).</span></span>

### <a name="animation-types"></a><span data-ttu-id="a53c1-183">アニメーション型</span><span class="sxs-lookup"><span data-stu-id="a53c1-183">Animation types</span></span>

<span data-ttu-id="a53c1-184">Windows ランタイムのアニメーション システムには、ストーリーボードに設定されたアニメーションを適用できる 3 つの型があります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-184">The Windows Runtime animation system has three specific types that storyboarded animations can apply to:</span></span>

-   <span data-ttu-id="a53c1-185">[**Double**](https://msdn.microsoft.com/library/windows/apps/xaml/system.double.aspx): 任意の [**DoubleAnimation**](https://msdn.microsoft.com/library/windows/apps/BR243136) でアニメーション化できる</span><span class="sxs-lookup"><span data-stu-id="a53c1-185">[**Double**](https://msdn.microsoft.com/library/windows/apps/xaml/system.double.aspx), can be animated with any [**DoubleAnimation**](https://msdn.microsoft.com/library/windows/apps/BR243136)</span></span>
-   <span data-ttu-id="a53c1-186">[**Point**](https://msdn.microsoft.com/library/windows/apps/BR225870): 任意の [**PointAnimation**](https://msdn.microsoft.com/library/windows/apps/BR210346) でアニメーション化できる</span><span class="sxs-lookup"><span data-stu-id="a53c1-186">[**Point**](https://msdn.microsoft.com/library/windows/apps/BR225870), can be animated with any [**PointAnimation**](https://msdn.microsoft.com/library/windows/apps/BR210346)</span></span>
-   <span data-ttu-id="a53c1-187">[**Color**](https://msdn.microsoft.com/library/windows/apps/Hh673723): 任意の [**ColorAnimation**](https://msdn.microsoft.com/library/windows/apps/BR243066) でアニメーション化できる</span><span class="sxs-lookup"><span data-stu-id="a53c1-187">[**Color**](https://msdn.microsoft.com/library/windows/apps/Hh673723), can be animated with any [**ColorAnimation**](https://msdn.microsoft.com/library/windows/apps/BR243066)</span></span>

<span data-ttu-id="a53c1-188">また、後ほど説明するオブジェクトの参照値に使える汎用 [**Object**](https://msdn.microsoft.com/library/windows/apps/xaml/system.object.aspx) アニメーション型もあります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-188">There's also a generalized [**Object**](https://msdn.microsoft.com/library/windows/apps/xaml/system.object.aspx) animation type for object reference values, which we'll discuss later.</span></span>

### <a name="specifying-the-animated-values"></a><span data-ttu-id="a53c1-189">アニメーション化された値の指定</span><span class="sxs-lookup"><span data-stu-id="a53c1-189">Specifying the animated values</span></span>

<span data-ttu-id="a53c1-190">オブジェクトとプロパティをアニメーション化のターゲットとして設定する方法については以上ですが、アニメーションを実行するとプロパティ値にどのような影響があるかについてはまだ説明していません。</span><span class="sxs-lookup"><span data-stu-id="a53c1-190">So far we've shown you how to target the object and the property to animate, but haven't yet described what the animation does to the property value when it runs.</span></span>

<span data-ttu-id="a53c1-191">ここまでで説明したアニメーションの種類は、**From**/**To**/**By** アニメーションとも呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-191">The animation types we've described are sometimes referred to as **From**/**To**/**By** animations.</span></span> <span data-ttu-id="a53c1-192">これは、アニメーションが、アニメーション定義からのこれらの入力の 1 つ以上を使って、時間の経過と共にプロパティの値を変更することを意味します。</span><span class="sxs-lookup"><span data-stu-id="a53c1-192">This means that the animation is changing the value of a property, over time, using one or more of these inputs that come from the animation definition:</span></span>

-   <span data-ttu-id="a53c1-193">開始値は **From** です。</span><span class="sxs-lookup"><span data-stu-id="a53c1-193">The value starts at the **From** value.</span></span> <span data-ttu-id="a53c1-194">**From** 値を指定しない場合、開始値は、アニメーション化されたプロパティにアニメーションの実行前に設定されていた値になります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-194">If you don't specify a **From** value, the starting value is whatever value the animated property has at the time before the animation runs.</span></span> <span data-ttu-id="a53c1-195">これは、既定値、スタイルまたはテンプレートからの値、XAML UI 定義またはアプリ コードによって個別に適用された値のいずれかである可能性があります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-195">This might be a default value, a value from a style or template, or a value specifically applied by a XAML UI definition or app code.</span></span>
-   <span data-ttu-id="a53c1-196">アニメーションの終了時の値は **To** 値です。</span><span class="sxs-lookup"><span data-stu-id="a53c1-196">At the end of the animation, the value is the **To** value.</span></span>
-   <span data-ttu-id="a53c1-197">開始値を基準とする相対的な終了値を指定するには、**By** プロパティを設定します。</span><span class="sxs-lookup"><span data-stu-id="a53c1-197">Or, to specify an ending value relative to the starting value, set the **By** property.</span></span> <span data-ttu-id="a53c1-198">**To** のプロパティの代わりに、これを設定します。</span><span class="sxs-lookup"><span data-stu-id="a53c1-198">You'd set this instead of the **To** property.</span></span>
-   <span data-ttu-id="a53c1-199">**To** 値または **By** 値を指定しない場合、終了値は、アニメーション化されたプロパティにアニメーションの実行前に設定されていた値になります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-199">If you don't specify a **To** value or a **By** value, the ending value is whatever value the animated property has at the time before the animation runs.</span></span> <span data-ttu-id="a53c1-200">この場合は、**From** 値をお勧めします。そうしないと、アニメーションによって値がまったく変更されず、開始値と終了値が同じになるためです。</span><span class="sxs-lookup"><span data-stu-id="a53c1-200">In this case you'd better have a **From** value because otherwise the animation won't change the value at all; its starting and ending values are both the same.</span></span>
-   <span data-ttu-id="a53c1-201">アニメーションには **From**、**By**、または **To** のうち少なくとも 1 つが指定されるのが一般的ですが、3 つすべてが指定されることはありません。</span><span class="sxs-lookup"><span data-stu-id="a53c1-201">An animation typically has at least one of **From**, **By** or **To** but never all three.</span></span>

<span data-ttu-id="a53c1-202">前の XAML の例に戻り、**From** 値と **To** 値、それに **Duration** をもう一度見てみましょう。</span><span class="sxs-lookup"><span data-stu-id="a53c1-202">Let's revisit the earlier XAML example and look again at the **From** and **To** values, and the **Duration**.</span></span> <span data-ttu-id="a53c1-203">この例では [**Opacity**](/uwp/api/Windows.UI.Xaml.UIElement.Opacity) プロパティをアニメーション化します。**Opacity** のプロパティ型は [**Double**](https://msdn.microsoft.com/library/windows/apps/xaml/system.double.aspx) です。</span><span class="sxs-lookup"><span data-stu-id="a53c1-203">The example is animating the [**Opacity**](/uwp/api/Windows.UI.Xaml.UIElement.Opacity) property, and the property type of **Opacity** is [**Double**](https://msdn.microsoft.com/library/windows/apps/xaml/system.double.aspx).</span></span> <span data-ttu-id="a53c1-204">そのため、ここで使うアニメーションは [**DoubleAnimation**](https://msdn.microsoft.com/library/windows/apps/BR243136) です。</span><span class="sxs-lookup"><span data-stu-id="a53c1-204">So the animation to use here is [**DoubleAnimation**](https://msdn.microsoft.com/library/windows/apps/BR243136).</span></span>

`From="1.0" To="0.0"` <span data-ttu-id="a53c1-205">アニメーションを実行するときに、[**Opacity**](/uwp/api/Windows.UI.Xaml.UIElement.Opacity) プロパティの初期値が 1 で、これが 0 になるまでアニメーション化することを示します。</span><span class="sxs-lookup"><span data-stu-id="a53c1-205">specifies that when the animation runs, the [**Opacity**](/uwp/api/Windows.UI.Xaml.UIElement.Opacity) property starts at a value of 1 and animates to 0.</span></span> <span data-ttu-id="a53c1-206">つまり、これらの [**Double**](https://msdn.microsoft.com/library/windows/apps/xaml/system.double.aspx) 値が **Opacity** プロパティに与える効果は、当初不透明な状態のオブジェクトを徐々に透明にするというものです。</span><span class="sxs-lookup"><span data-stu-id="a53c1-206">In other words, in terms of what these [**Double**](https://msdn.microsoft.com/library/windows/apps/xaml/system.double.aspx) values mean to the **Opacity** property, this animation will cause the object to start opaque and then fade to transparent.</span></span>

```xaml
...
<Storyboard x:Name="myStoryboard">
  <DoubleAnimation
    Storyboard.TargetName="MyAnimatedRectangle"
    Storyboard.TargetProperty="Opacity"
    From="1.0" To="0.0" Duration="0:0:1"/>
</Storyboard>
...
```

`Duration="0:0:1"` <span data-ttu-id="a53c1-207"> アニメーションの継続期間、つまり四角形が消える速さを指定します。</span><span class="sxs-lookup"><span data-stu-id="a53c1-207">specifies how long the animation lasts, that is, how fast the rectangle fades.</span></span> <span data-ttu-id="a53c1-208">[**Duration**](https://msdn.microsoft.com/library/windows/apps/BR243207) プロパティは、*時間*:*分*:*秒*という形式で指定します。</span><span class="sxs-lookup"><span data-stu-id="a53c1-208">A [**Duration**](https://msdn.microsoft.com/library/windows/apps/BR243207) property is specified in the form of *hours*:*minutes*:*seconds*.</span></span> <span data-ttu-id="a53c1-209">この例のアニメーションの継続時間は 1 秒ということになります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-209">The time duration in this example is one second.</span></span>

<span data-ttu-id="a53c1-210">[**Duration**](https://msdn.microsoft.com/library/windows/apps/BR242377) 値と XAML 構文について詳しくは、「[**Duration**](https://msdn.microsoft.com/library/windows/apps/BR242377)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a53c1-210">For more info about [**Duration**](https://msdn.microsoft.com/library/windows/apps/BR242377) values and the XAML syntax, see [**Duration**](https://msdn.microsoft.com/library/windows/apps/BR242377).</span></span>

> [!NOTE]
> <span data-ttu-id="a53c1-211">紹介した例の場合、アニメーション化するオブジェクトの開始状態の [**Opacity**](/uwp/api/Windows.UI.Xaml.UIElement.Opacity) が既定値か明示的な設定かを問わず常に 1 である場合は、**From** 値を省略できます。そのときアニメーションでは暗黙的な開始値が使われ、同じ結果になります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-211">For the example we showed, if you were sure that the starting state of the object being animated has [**Opacity**](/uwp/api/Windows.UI.Xaml.UIElement.Opacity) always equal to 1, either through the default or an explicit set, you could omit the **From** value, the animation would use the implicit starting value, and the result would be the same.</span></span>

### <a name="fromtoby-are-nullable"></a><span data-ttu-id="a53c1-212">From/To/By では null が許容される</span><span class="sxs-lookup"><span data-stu-id="a53c1-212">From/To/By are nullable</span></span>

<span data-ttu-id="a53c1-213">**From**、**To**、または **By** は省略でき、省略した値の代わりにアニメーション化されない現在の値を使うことができると説明しました。</span><span class="sxs-lookup"><span data-stu-id="a53c1-213">We mentioned previously that you can omit **From**, **To** or **By** and thus use current non-animated values as substitutes for a missing value.</span></span> <span data-ttu-id="a53c1-214">アニメーションの **From**、**To**、**By** の各プロパティは、想定した型ではない場合があります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-214">**From**, **To**, or **By** properties of an animation aren't of the type you might guess.</span></span> <span data-ttu-id="a53c1-215">たとえば、[**DoubleAnimation.To**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.media.animation.doubleanimation.easingfunction.aspx) プロパティの型は [**Double**](https://msdn.microsoft.com/library/windows/apps/xaml/system.double.aspx) ではなく、</span><span class="sxs-lookup"><span data-stu-id="a53c1-215">For example the type of the [**DoubleAnimation.To**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.media.animation.doubleanimation.easingfunction.aspx) property isn't [**Double**](https://msdn.microsoft.com/library/windows/apps/xaml/system.double.aspx).</span></span> <span data-ttu-id="a53c1-216">**Double** に対しては [**Nullable**](https://msdn.microsoft.com/library/windows/apps/xaml/b3h38hb0.aspx) です。</span><span class="sxs-lookup"><span data-stu-id="a53c1-216">Instead, it's a [**Nullable**](https://msdn.microsoft.com/library/windows/apps/xaml/b3h38hb0.aspx) for **Double**.</span></span> <span data-ttu-id="a53c1-217">既定値は 0 ではなく **null** です。</span><span class="sxs-lookup"><span data-stu-id="a53c1-217">And its default value is **null**, not 0.</span></span> <span data-ttu-id="a53c1-218">**null** 値により、アニメーション システムは、**From**、**To**、または **By** プロパティの値が明示的に設定されていないことを識別します。</span><span class="sxs-lookup"><span data-stu-id="a53c1-218">That **null** value is how the animation system distinguishes that you haven't specifically set a value for a **From**, **To**, or **By** property.</span></span> <span data-ttu-id="a53c1-219">VisualC ではコンポーネント拡張機能 (、C++/cli CX)、 **Nullable**型ない[**IReference**](https://msdn.microsoft.com/library/windows/apps/BR225864)を代わりに使用します。</span><span class="sxs-lookup"><span data-stu-id="a53c1-219">VisualC++ component extensions (C++/CX) doesn't have a **Nullable** type, so it uses [**IReference**](https://msdn.microsoft.com/library/windows/apps/BR225864) instead.</span></span>

### <a name="other-properties-of-an-animation"></a><span data-ttu-id="a53c1-220">アニメーションのその他のプロパティ</span><span class="sxs-lookup"><span data-stu-id="a53c1-220">Other properties of an animation</span></span>

<span data-ttu-id="a53c1-221">次のセクションで説明するプロパティはいずれも省略可能であり、ほとんどのアニメーションに適した既定値を持ちます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-221">The next properties described in this section are all optional in that they have defaults that are appropriate for most animations.</span></span>

### **<a name="autoreverse"></a><span data-ttu-id="a53c1-222">AutoReverse</span><span class="sxs-lookup"><span data-stu-id="a53c1-222">AutoReverse</span></span>**

<span data-ttu-id="a53c1-223">アニメーションで [**AutoReverse**](https://msdn.microsoft.com/library/windows/apps/BR243202) または [**RepeatBehavior**](https://msdn.microsoft.com/library/windows/apps/BR243211) を指定しなかった場合、そのアニメーションは 1 回実行され、さらに [**Duration**](https://msdn.microsoft.com/library/windows/apps/BR243207) で指定された期間実行されます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-223">If you don't specify either [**AutoReverse**](https://msdn.microsoft.com/library/windows/apps/BR243202) or [**RepeatBehavior**](https://msdn.microsoft.com/library/windows/apps/BR243211) on an animation, that animation will run once, and run for the time specified as the [**Duration**](https://msdn.microsoft.com/library/windows/apps/BR243207).</span></span>

<span data-ttu-id="a53c1-224">[**AutoReverse**](https://msdn.microsoft.com/library/windows/apps/BR243202) プロパティは、[**Duration**](https://msdn.microsoft.com/library/windows/apps/BR243207) の最後に達した後で逆にタイムラインを再生するかどうかを指定します。</span><span class="sxs-lookup"><span data-stu-id="a53c1-224">The [**AutoReverse**](https://msdn.microsoft.com/library/windows/apps/BR243202) property specifies whether a timeline plays in reverse after it reaches the end of its [**Duration**](https://msdn.microsoft.com/library/windows/apps/BR243207).</span></span> <span data-ttu-id="a53c1-225">これを **true** に設定すると、アニメーションは宣言済みの [**Duration**](https://msdn.microsoft.com/library/windows/apps/BR243207) の最後に達した後で逆に再生され、値がその終了値 (**To**) から開始値 (**From**) に変更されます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-225">If you set it to **true**, the animation reverses after it reaches the end of its declared [**Duration**](https://msdn.microsoft.com/library/windows/apps/BR243207), changing the value from its ending value (**To**) back to its starting value (**From**).</span></span> <span data-ttu-id="a53c1-226">これは、アニメーションが実質的に [**Duration**](https://msdn.microsoft.com/library/windows/apps/BR243207) の倍の時間実行されることを表します。</span><span class="sxs-lookup"><span data-stu-id="a53c1-226">This means that the animation effectively runs for double the time of its [**Duration**](https://msdn.microsoft.com/library/windows/apps/BR243207).</span></span>

### **<a name="repeatbehavior"></a><span data-ttu-id="a53c1-227">RepeatBehavior</span><span class="sxs-lookup"><span data-stu-id="a53c1-227">RepeatBehavior</span></span>**

<span data-ttu-id="a53c1-228">[**RepeatBehavior**](https://msdn.microsoft.com/library/windows/apps/BR243211) プロパティは、タイムラインの再生回数か、タイムラインを繰り返すより長い期間を指定します。</span><span class="sxs-lookup"><span data-stu-id="a53c1-228">The [**RepeatBehavior**](https://msdn.microsoft.com/library/windows/apps/BR243211) property specifies either how many times a timeline plays, or a larger duration that the timeline should repeat within.</span></span> <span data-ttu-id="a53c1-229">既定では、タイムラインの反復回数は "1x" であり、その [**Duration**](https://msdn.microsoft.com/library/windows/apps/BR243207) の間に 1 回再生され、繰り返されません。</span><span class="sxs-lookup"><span data-stu-id="a53c1-229">By default, a timeline has an iteration count of "1x", which means it plays one time for its [**Duration**](https://msdn.microsoft.com/library/windows/apps/BR243207) and does not repeat.</span></span>

<span data-ttu-id="a53c1-230">アニメーションが複数回反復して実行されるようにすることができます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-230">You can cause the animation to run multiple iterations.</span></span> <span data-ttu-id="a53c1-231">たとえば、値 "3x" により、アニメーションは 3 回実行されます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-231">For example, a value of "3x" causes the animation to run three times.</span></span> <span data-ttu-id="a53c1-232">また、[**RepeatBehavior**](https://msdn.microsoft.com/library/windows/apps/BR243211) に別の [**Duration**](https://msdn.microsoft.com/library/windows/apps/BR242377) を指定することもできます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-232">Or, you can specify a different [**Duration**](https://msdn.microsoft.com/library/windows/apps/BR242377) for [**RepeatBehavior**](https://msdn.microsoft.com/library/windows/apps/BR243211).</span></span> <span data-ttu-id="a53c1-233">その **Duration** は、アニメーション自体の **Duration** よりも長くしてください。</span><span class="sxs-lookup"><span data-stu-id="a53c1-233">That **Duration** should be longer than the **Duration** of the animation itself to be effective.</span></span> <span data-ttu-id="a53c1-234">たとえば、[**Duration**](https://msdn.microsoft.com/library/windows/apps/BR243207) が "0:0:2" のアニメーションに対して **RepeatBehavior** を "0:0:10" に指定した場合、アニメーションは 5 回繰り返されます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-234">For example, if you specify a **RepeatBehavior** of "0:0:10", for an animation that has a [**Duration**](https://msdn.microsoft.com/library/windows/apps/BR243207) of "0:0:2", that animation repeats five times.</span></span> <span data-ttu-id="a53c1-235">この値が割り切れない場合、**RepeatBehavior** の時間に達した時点でアニメーションは途切れてしまいます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-235">If these don't divide evenly, the animation gets truncated at the time that the **RepeatBehavior** time is reached, which might be partway through.</span></span> <span data-ttu-id="a53c1-236">最後に、特別な "Forever" という値を指定することもできます。この値を指定すると、アニメーションは意図的に停止されるまで無限に実行されます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-236">Finally, you can specify the special value "Forever", which causes the animation to run infinitely until it's deliberately stopped.</span></span>

<span data-ttu-id="a53c1-237">[**RepeatBehavior**](https://msdn.microsoft.com/library/windows/apps/BR210411) 値と XAML 構文について詳しくは、「[**RepeatBehavior**](https://msdn.microsoft.com/library/windows/apps/BR210411)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a53c1-237">For more info about [**RepeatBehavior**](https://msdn.microsoft.com/library/windows/apps/BR210411) values and the XAML syntax, see [**RepeatBehavior**](https://msdn.microsoft.com/library/windows/apps/BR210411).</span></span>

### **<a name="fillbehaviorstop"></a><span data-ttu-id="a53c1-238">FillBehavior="Stop"</span><span class="sxs-lookup"><span data-stu-id="a53c1-238">FillBehavior="Stop"</span></span>**

<span data-ttu-id="a53c1-239">既定では、アニメーションが終了すると、その継続期間を超過した後も、プロパティ値は最終的な **To** か、**By** で変更された値で維持されます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-239">By default, when an animation ends, the animation leaves the property value as the final **To** or **By**-modified value even after its duration is surpassed.</span></span> <span data-ttu-id="a53c1-240">ただし、[**FillBehavior**](https://msdn.microsoft.com/library/windows/apps/BR243209) プロパティの値を [**FillBehavior.Stop**](https://msdn.microsoft.com/library/windows/apps/BR210306) に設定した場合、アニメーション化された値はアニメーションが適用される前の値か、より正確には、依存関係プロパティ システムによって特定された現在の有効な値に戻ります (この違いについて詳しくは、「[依存関係プロパティの概要](https://msdn.microsoft.com/library/windows/apps/Mt185583)」をご覧ください)。</span><span class="sxs-lookup"><span data-stu-id="a53c1-240">However, if you set the value of the [**FillBehavior**](https://msdn.microsoft.com/library/windows/apps/BR243209) property to [**FillBehavior.Stop**](https://msdn.microsoft.com/library/windows/apps/BR210306), the value of the animated value reverts to whatever the value was before the animation was applied, or more precisely to the current effective value as determined by the dependency property system (for more info on this distinction, see [Dependency properties overview](https://msdn.microsoft.com/library/windows/apps/Mt185583)).</span></span>

### **<a name="begintime"></a><span data-ttu-id="a53c1-241">BeginTime</span><span class="sxs-lookup"><span data-stu-id="a53c1-241">BeginTime</span></span>**

<span data-ttu-id="a53c1-242">既定では、アニメーションの [**BeginTime**](https://msdn.microsoft.com/library/windows/apps/BR243204) は "0:0:0" であるため、上位の [**Storyboard**](https://msdn.microsoft.com/library/windows/apps/BR210490) の実行と同時に開始されます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-242">By default, the [**BeginTime**](https://msdn.microsoft.com/library/windows/apps/BR243204) of an animation is "0:0:0", so it begins as soon as its containing [**Storyboard**](https://msdn.microsoft.com/library/windows/apps/BR210490) runs.</span></span> <span data-ttu-id="a53c1-243">この動作は、**Storyboard** に複数のアニメーションが含まれており、アニメーションどうしの開始のタイミングをずらしたり、開始のタイミングを意図的に少し遅らせたりする場合には、変更できます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-243">You might change this if the **Storyboard** contains more than one animation and you want to stagger the start times of the others versus an initial animation, or to create a deliberate short delay.</span></span>

### **<a name="speedratio"></a><span data-ttu-id="a53c1-244">SpeedRatio</span><span class="sxs-lookup"><span data-stu-id="a53c1-244">SpeedRatio</span></span>**

<span data-ttu-id="a53c1-245">[**Storyboard**](https://msdn.microsoft.com/library/windows/apps/BR210490) に複数のアニメーションがある場合は、**Storyboard** を基準に 1 つ以上のアニメーションのタイム レートを変更できます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-245">If you have more than one animation in a [**Storyboard**](https://msdn.microsoft.com/library/windows/apps/BR210490) you can change the time rate of one or more of the animations relative to the **Storyboard**.</span></span> <span data-ttu-id="a53c1-246">これは、アニメーションの実行中に経過する [**Duration**](https://msdn.microsoft.com/library/windows/apps/BR242377) 時間を最終的に制御する親 **Storyboard** です。</span><span class="sxs-lookup"><span data-stu-id="a53c1-246">It's the parent **Storyboard** that ultimately controls how the [**Duration**](https://msdn.microsoft.com/library/windows/apps/BR242377) time elapses while the animations run.</span></span> <span data-ttu-id="a53c1-247">このプロパティはあまり利用されません。</span><span class="sxs-lookup"><span data-stu-id="a53c1-247">This property isn't used very often.</span></span> <span data-ttu-id="a53c1-248">詳しくは、「[**SpeedRatio**](https://msdn.microsoft.com/library/windows/apps/BR243213)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a53c1-248">For more info see [**SpeedRatio**](https://msdn.microsoft.com/library/windows/apps/BR243213).</span></span>

## <a name="defining-more-than-one-animation-in-a-storyboard"></a><span data-ttu-id="a53c1-249">**Storyboard** での複数のアニメーションの定義</span><span class="sxs-lookup"><span data-stu-id="a53c1-249">Defining more than one animation in a **Storyboard**</span></span>

<span data-ttu-id="a53c1-250">[**Storyboard**](https://msdn.microsoft.com/library/windows/apps/BR210490) のコンテンツとして、複数のアニメーション定義を設定できます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-250">The contents of a [**Storyboard**](https://msdn.microsoft.com/library/windows/apps/BR210490) can be more than one animation definition.</span></span> <span data-ttu-id="a53c1-251">同じターゲット オブジェクトの 2 種類のプロパティに関連のアニメーションを適用している場合は、複数のアニメーションが存在する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-251">You might have more than one animation if you are applying related animations to two properties of the same target object.</span></span> <span data-ttu-id="a53c1-252">たとえば、UI 要素の [**RenderTransform**](https://msdn.microsoft.com/library/windows/apps/BR208980) として使われる [**TranslateTransform**](https://msdn.microsoft.com/library/windows/apps/BR243027) の [**TranslateX**](https://msdn.microsoft.com/library/windows/apps/BR228122) プロパティと  [**TranslateY**](https://msdn.microsoft.com/library/windows/apps/BR228124) プロパティを両方とも変更する必要がある場合は、要素は対角線状に変換されます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-252">For example, you might change both the [**TranslateX**](https://msdn.microsoft.com/library/windows/apps/BR228122) and [**TranslateY**](https://msdn.microsoft.com/library/windows/apps/BR228124) properties of a [**TranslateTransform**](https://msdn.microsoft.com/library/windows/apps/BR243027) used as the [**RenderTransform**](https://msdn.microsoft.com/library/windows/apps/BR208980) of a UI element; this will cause the element to translate diagonally.</span></span> <span data-ttu-id="a53c1-253">そのためには 2 つのアニメーションが必要ですが、それらを常に一緒に実行するために、同じ **Storyboard** に設定したい場合もあります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-253">You need two different animations to accomplish that, but you might want the animations to be part of the same **Storyboard** because you always want those two animations to be run together.</span></span>

<span data-ttu-id="a53c1-254">これらのアニメーションは同じ型でなくてもよく、同じオブジェクトをターゲットにする必要もありません。</span><span class="sxs-lookup"><span data-stu-id="a53c1-254">The animations don't have to be the same type, or target the same object.</span></span> <span data-ttu-id="a53c1-255">継続時間が違っていてもかまわず、プロパティ値を共有する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="a53c1-255">They can have different durations, and don't have to share any property values.</span></span>

<span data-ttu-id="a53c1-256">親 [**Storyboard**](https://msdn.microsoft.com/library/windows/apps/BR210490) が実行されると、その中の各アニメーションも実行されます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-256">When the parent [**Storyboard**](https://msdn.microsoft.com/library/windows/apps/BR210490) runs, each of the animations within will run too.</span></span>

<span data-ttu-id="a53c1-257">[**Storyboard**](https://msdn.microsoft.com/library/windows/apps/BR210490) クラスには、実際にはアニメーション型と同様に多数の同じアニメーション プロパティがあります。どちらも [**Timeline**](https://msdn.microsoft.com/library/windows/apps/BR210517) 基底クラスを共有しているためです。</span><span class="sxs-lookup"><span data-stu-id="a53c1-257">The [**Storyboard**](https://msdn.microsoft.com/library/windows/apps/BR210490) class actually has a lot of the same animation properties as the animation types do, because both share the [**Timeline**](https://msdn.microsoft.com/library/windows/apps/BR210517) base class.</span></span> <span data-ttu-id="a53c1-258">そのため、**Storyboard** には [**RepeatBehavior**](https://msdn.microsoft.com/library/windows/apps/BR243211) か [**BeginTime**](https://msdn.microsoft.com/library/windows/apps/BR243204) を設定できます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-258">Thus, a **Storyboard** can have a [**RepeatBehavior**](https://msdn.microsoft.com/library/windows/apps/BR243211), or a [**BeginTime**](https://msdn.microsoft.com/library/windows/apps/BR243204).</span></span> <span data-ttu-id="a53c1-259">通常は、含まれるすべてのアニメーションにその動作を持たせる場合を除いて、これらを **Storyboard** に設定することはありません。</span><span class="sxs-lookup"><span data-stu-id="a53c1-259">You don't usually set these on a **Storyboard** though unless you want all the contained animations to have that behavior.</span></span> <span data-ttu-id="a53c1-260">一般に、**Storyboard** に設定されている **Timeline** プロパティはそのすべての子アニメーションに適用されます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-260">As a general rule, any **Timeline** property as set on a **Storyboard** applies to all its child animations.</span></span> <span data-ttu-id="a53c1-261">非設定の場合、**Storyboard** には、含まれるアニメーションの最も長い [**Duration**](https://msdn.microsoft.com/library/windows/apps/BR242377) 値から計算された暗黙的な継続時間が使われます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-261">If let unset, the **Storyboard** has an implicit duration that's calculated from the longest [**Duration**](https://msdn.microsoft.com/library/windows/apps/BR242377) value of the contained animations.</span></span> <span data-ttu-id="a53c1-262">子アニメーションのいずれかよりも短い [**Duration**](https://msdn.microsoft.com/library/windows/apps/BR243207) を **Storyboard** に明示的に設定すると、そのアニメーションは途中で途切れてしまいます。これは、通常は望ましくありません。</span><span class="sxs-lookup"><span data-stu-id="a53c1-262">An explicitly set [**Duration**](https://msdn.microsoft.com/library/windows/apps/BR243207) on a **Storyboard** that's shorter than one of its child animations will cause that animation to get cut off, which isn't usually desirable.</span></span>

<span data-ttu-id="a53c1-263">ストーリーボードには、同じオブジェクトの同じプロパティをターゲットにしてアニメーション化する 2 つのアニメーションを含めることはできません。</span><span class="sxs-lookup"><span data-stu-id="a53c1-263">A storyboard can't contain two animations that attempt to target and animate the same property on the same object.</span></span> <span data-ttu-id="a53c1-264">これを試みると、ストーリーボードの実行を試みたときにランタイム エラーが発生します。</span><span class="sxs-lookup"><span data-stu-id="a53c1-264">If you try this, you'll get a runtime error when the storyboard tries to run.</span></span> <span data-ttu-id="a53c1-265">この制限は、[**BeginTime**](https://msdn.microsoft.com/library/windows/apps/BR243204) 値と継続時間が意図的に異なる設定になっているためにアニメーションが時間的に重ならない場合でも適用されます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-265">This restriction applies even if the animations don't overlap in time because of deliberately different [**BeginTime**](https://msdn.microsoft.com/library/windows/apps/BR243204) values and durations.</span></span> <span data-ttu-id="a53c1-266">実際に 1 つのストーリーボードで同じプロパティにより複雑なアニメーション タイムラインを適用する場合は、キー フレーム アニメーションを使います。</span><span class="sxs-lookup"><span data-stu-id="a53c1-266">If you really want to apply a more complex animation timeline to the same property in a single storyboard, the way to do this is to use a key-frame animation.</span></span> <span data-ttu-id="a53c1-267">「[キーフレームとイージング関数のアニメーション](key-frame-and-easing-function-animations.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a53c1-267">See [Key-frame and easing function animations](key-frame-and-easing-function-animations.md).</span></span>

<span data-ttu-id="a53c1-268">アニメーション システムは、複数のアニメーションをプロパティの値に適用できます (それらが複数のストーリーボードからの入力である場合)。</span><span class="sxs-lookup"><span data-stu-id="a53c1-268">The animation system can apply more than one animation to the value of a property, if those inputs come from multiple storyboards.</span></span> <span data-ttu-id="a53c1-269">意図的にこの動作を使って同時にストーリーボードを実行するのは一般的ではありません。</span><span class="sxs-lookup"><span data-stu-id="a53c1-269">Using this behavior deliberately for simultaneously running storyboards isn't common.</span></span> <span data-ttu-id="a53c1-270">ただし、コントロールのプロパティに適用する、アプリで定義されたアニメーションによって、コントロールの表示状態モデルの一部として以前に実行されたアニメーションの **HoldEnd** 値が変更される可能性があります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-270">However it's possible that an app-defined animation that you apply to a control property will be modifying the **HoldEnd** value of an animation that was previously run as part of the control's visual state model.</span></span>

## <a name="defining-a-storyboard-as-a-resource"></a><span data-ttu-id="a53c1-271">リソースとしてのストーリーボードの定義</span><span class="sxs-lookup"><span data-stu-id="a53c1-271">Defining a storyboard as a resource</span></span>

<span data-ttu-id="a53c1-272">[**Storyboard**](https://msdn.microsoft.com/library/windows/apps/BR210490) は、アニメーション オブジェクトを入れるコンテナーです。</span><span class="sxs-lookup"><span data-stu-id="a53c1-272">A [**Storyboard**](https://msdn.microsoft.com/library/windows/apps/BR210490) is the container that you put animation objects in.</span></span> <span data-ttu-id="a53c1-273">**Storyboard** は、ページ レベルの [**Resources**](https://msdn.microsoft.com/library/windows/apps/BR208740) または [**Application.Resources**](https://msdn.microsoft.com/library/windows/apps/BR242338) で、アニメーション化の対象となるオブジェクトから利用できるリソースとして定義するのが一般的です。</span><span class="sxs-lookup"><span data-stu-id="a53c1-273">You typically define the **Storyboard** as a resource that is available to the object that you want to animate, either in page-level [**Resources**](https://msdn.microsoft.com/library/windows/apps/BR208740) or [**Application.Resources**](https://msdn.microsoft.com/library/windows/apps/BR242338).</span></span>

<span data-ttu-id="a53c1-274">次の例は、前の例の [**Storyboard**](https://msdn.microsoft.com/library/windows/apps/BR210490) がページ レベルの [**Resources**](https://msdn.microsoft.com/library/windows/apps/BR208740) の定義にどのように含まれているかを示しており、**Storyboard** は、ルート [**Page**](https://msdn.microsoft.com/library/windows/apps/BR227503) のキーを持つリソースです。</span><span class="sxs-lookup"><span data-stu-id="a53c1-274">This next example shows how the previous example [**Storyboard**](https://msdn.microsoft.com/library/windows/apps/BR210490) would be contained in a page-level [**Resources**](https://msdn.microsoft.com/library/windows/apps/BR208740) definition, where the **Storyboard** is a keyed resource of the root [**Page**](https://msdn.microsoft.com/library/windows/apps/BR227503).</span></span> <span data-ttu-id="a53c1-275">[x:Name 属性](https://msdn.microsoft.com/library/windows/apps/Mt204788)に注目してください。</span><span class="sxs-lookup"><span data-stu-id="a53c1-275">Note the [x:Name attribute](https://msdn.microsoft.com/library/windows/apps/Mt204788).</span></span> <span data-ttu-id="a53c1-276">この属性は、コードだけでなく XAML の他の要素でも後から **Storyboard** を参照できるように、**Storyboard** に対して変数名を定義する方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="a53c1-276">This attribute is how you define a variable name for the **Storyboard**, so that other elements in XAML as well as code can refer to the **Storyboard** later.</span></span>

```xaml
<Page ...>
  <Page.Resources>
    <!-- Storyboard resource: Animates a rectangle's opacity. -->
    <Storyboard x:Name="myStoryboard">
      <DoubleAnimation
        Storyboard.TargetName="MyAnimatedRectangle"
        Storyboard.TargetProperty="Opacity"
        From="1.0" To="0.0" Duration="0:0:1"/>
    </Storyboard>
  </Page.Resources>
  <!--Page root element, UI definition-->
  <Grid>
    <Rectangle x:Name="MyAnimatedRectangle"
      Width="300" Height="200" Fill="Blue"/>
  </Grid>
</Page>
```

<span data-ttu-id="a53c1-277">リソースを XAML ファイル (page.xaml や app.xaml など) の XAML ルートで定義する方法は、キーを持つリソースを XAML で編成する場合の一般的な方法です。</span><span class="sxs-lookup"><span data-stu-id="a53c1-277">Defining resources at the XAML root of a XAML file such as page.xaml or app.xaml is a common practice for how to organize keyed resources in your XAML.</span></span> <span data-ttu-id="a53c1-278">リソースを別個のファイルに分け、アプリやパッケージにマージすることもできます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-278">You also can factor resources into separate files and merge them into apps or pages.</span></span> <span data-ttu-id="a53c1-279">詳しくは、「[ResourceDictionary と XAML リソースの参照](https://msdn.microsoft.com/library/windows/apps/Mt187273)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a53c1-279">For more info, see [ResourceDictionary and XAML resource references](https://msdn.microsoft.com/library/windows/apps/Mt187273).</span></span>

> [!NOTE]
> <span data-ttu-id="a53c1-280">Windows ランタイムの XAML は [x:Key 属性](https://msdn.microsoft.com/library/windows/apps/Mt204787)か [x: Name 属性](https://msdn.microsoft.com/library/windows/apps/Mt204788)を使ったリソースの識別をサポートします。</span><span class="sxs-lookup"><span data-stu-id="a53c1-280">Windows Runtime XAML supports identifying resources either using the [x:Key attribute](https://msdn.microsoft.com/library/windows/apps/Mt204787) or the [x:Name attribute](https://msdn.microsoft.com/library/windows/apps/Mt204788).</span></span> <span data-ttu-id="a53c1-281">[**Storyboard**](https://msdn.microsoft.com/library/windows/apps/BR210490) では x: Name 属性を使う方が一般的です。これを変数名を使って参照することになるためで、その [**Begin**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.media.animation.storyboard.begin) メソッドを後で呼び出してアニメーションを実行できるようにする目的があります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-281">Using x:Name attribute is more common for a [**Storyboard**](https://msdn.microsoft.com/library/windows/apps/BR210490), because you'll want to reference it by variable name eventually, so that you can call its [**Begin**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.media.animation.storyboard.begin) method and run the animations.</span></span> <span data-ttu-id="a53c1-282">[x:Key 属性](https://msdn.microsoft.com/library/windows/apps/Mt204787)を使う場合は、[**Item**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.resourcedictionary.item) インデクサーなどの [**ResourceDictionary**](https://msdn.microsoft.com/library/windows/apps/BR208794) メソッドを使ってキーを持つリソースとしてそれを取得し、取得したオブジェクトを **Storyboard** にキャストして、**Storyboard** メソッドを使う必要があります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-282">If you do use [x:Key attribute](https://msdn.microsoft.com/library/windows/apps/Mt204787), you'll need to use [**ResourceDictionary**](https://msdn.microsoft.com/library/windows/apps/BR208794) methods such as the [**Item**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.resourcedictionary.item) indexer to retrieve it as a keyed resource and then cast the retrieved object to **Storyboard** to use the **Storyboard** methods.</span></span>

### <a name="storyboards-for-visual-states"></a><span data-ttu-id="a53c1-283">表示状態用のストーリーボード</span><span class="sxs-lookup"><span data-stu-id="a53c1-283">Storyboards for visual states</span></span>

<span data-ttu-id="a53c1-284">また、コントロールの見た目に対して表示状態のアニメーションを宣言する場合は、アニメーションを [**Storyboard**](https://msdn.microsoft.com/library/windows/apps/BR210490) ユニットに含めます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-284">You also put your animations within a [**Storyboard**](https://msdn.microsoft.com/library/windows/apps/BR210490) unit when you are declaring the visual state animations for a control's visual appearance.</span></span> <span data-ttu-id="a53c1-285">その場合、定義する **Storyboard** 要素は、[**Style**](https://msdn.microsoft.com/library/windows/apps/BR208849) (キーを持つリソースである **Style**) 内でより深く入れ子にされる [**VisualState**](https://msdn.microsoft.com/library/windows/apps/BR209007) コンテナーに含めます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-285">In that case the **Storyboard** elements you define go into a [**VisualState**](https://msdn.microsoft.com/library/windows/apps/BR209007) container that's nested more deeply in a [**Style**](https://msdn.microsoft.com/library/windows/apps/BR208849) (it's the **Style** that is the keyed resource).</span></span> <span data-ttu-id="a53c1-286">この場合、**Storyboard** に対してキーや名前は必要ありません。それは、これが、[**VisualStateManager**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.visualstatemanager) が呼び出すことができるターゲットの名前を持つ  **VisualState** であるためです。</span><span class="sxs-lookup"><span data-stu-id="a53c1-286">You don't need a key or name for your **Storyboard** in this case because it's the **VisualState** that has a target name that the [**VisualStateManager**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.visualstatemanager) can invoke.</span></span> <span data-ttu-id="a53c1-287">ページまたはアプリの **Resources** コレクションに配置する代わりに、コントロールのスタイルを別個の XAML [**ResourceDictionary**](https://msdn.microsoft.com/library/windows/apps/BR208794) ファイルに格納する方法は一般的な方法です。</span><span class="sxs-lookup"><span data-stu-id="a53c1-287">The styles for controls are often factored into separate XAML [**ResourceDictionary**](https://msdn.microsoft.com/library/windows/apps/BR208794) files rather than placed in a page or app **Resources** collection.</span></span> <span data-ttu-id="a53c1-288">詳しくは、「[表示状態用にストーリーボードに設定されたアニメーション](https://msdn.microsoft.com/library/windows/apps/xaml/JJ819808)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a53c1-288">For more info, see [Storyboarded animations for visual states](https://msdn.microsoft.com/library/windows/apps/xaml/JJ819808).</span></span>

## <a name="dependent-and-independent-animations"></a><span data-ttu-id="a53c1-289">依存型および独立型アニメーション</span><span class="sxs-lookup"><span data-stu-id="a53c1-289">Dependent and independent animations</span></span>

<span data-ttu-id="a53c1-290">ここで、アニメーション システムの動作についていくつか重要な点を紹介しておきます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-290">At this point we need to introduce some important points about how the animation system works.</span></span> <span data-ttu-id="a53c1-291">特に、アニメーションには、Windows ランタイム アプリが画面にレンダリングされるしくみや、そのレンダリングでの処理スレッドの使い方と深い関係があります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-291">In particular, animation interacts fundamentally with how a Windows Runtime app renders to the screen, and how that rendering uses processing threads.</span></span> <span data-ttu-id="a53c1-292">Windows ランタイム アプリには常にメイン UI スレッドがあり、このスレッドで現在の情報を基に画面を更新します。</span><span class="sxs-lookup"><span data-stu-id="a53c1-292">A Windows Runtime app always has a main UI thread, and this thread is responsible for updating the screen with current information.</span></span> <span data-ttu-id="a53c1-293">また、Windows ランタイム アプリには合成スレッドがあります。このスレッドは、レイアウトを表示の直前に事前計算するために使われます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-293">In addition, a Windows Runtime app has a composition thread, which is used for precalculating layouts immediately before they are shown.</span></span> <span data-ttu-id="a53c1-294">UI をアニメーション化すると、UI スレッドに対し多数の処理が発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-294">When you animate the UI, there's potential to cause a lot of work for the UI thread.</span></span> <span data-ttu-id="a53c1-295">システムは、各更新間の非常に短い時間を使って画面の大きな領域を再描画しなければなりません。</span><span class="sxs-lookup"><span data-stu-id="a53c1-295">The system must redraw large areas of the screen using fairly short time intervals between each refresh.</span></span> <span data-ttu-id="a53c1-296">これはアニメーション化されたプロパティの最新のプロパティ値を取得するために必要です。</span><span class="sxs-lookup"><span data-stu-id="a53c1-296">This is necessary for capturing the latest property value of the animated property.</span></span> <span data-ttu-id="a53c1-297">注意しないと、アニメーションによって UI の応答性が低下したり、同じ UI スレッドにある他のアプリ機能のパフォーマンスに影響したりするおそれがあります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-297">If you're not careful, there's risk that an animation can make the UI less responsive, or will impact performance of other app features that are also on the same UI thread.</span></span>

<span data-ttu-id="a53c1-298">UI スレッドの処理を遅くする可能性があると判断された各種アニメーションは、*依存型アニメーション*と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-298">The variety of animation that is determined to have some risk of slowing down the UI thread is called a *dependent animation*.</span></span> <span data-ttu-id="a53c1-299">この心配のないアニメーションは*独立型アニメーション*と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-299">An animation not subject to this risk is an *independent animation*.</span></span> <span data-ttu-id="a53c1-300">依存型アニメーションと独立型アニメーションの違いは、先ほど説明したアニメーションの型 ([**DoubleAnimation**](https://msdn.microsoft.com/library/windows/apps/BR243136) など) だけでは決まりません。</span><span class="sxs-lookup"><span data-stu-id="a53c1-300">The distinction between dependent and independent animations isn't just determined by animation types ([**DoubleAnimation**](https://msdn.microsoft.com/library/windows/apps/BR243136) and so on) as we described earlier.</span></span> <span data-ttu-id="a53c1-301">アニメーション化するプロパティや、コントロールの継承や複合などの要因によって決まります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-301">Instead, it's determined by which specific properties you are animating, and other factors like inheritance and composition of controls.</span></span> <span data-ttu-id="a53c1-302">アニメーションで UI を変更しても、UI スレッドへの影響がごく小さく、アニメーションを合成スレッドによって独立型アニメーションとして処理できることもあります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-302">There are circumstances where even if an animation does change UI, the animation can have minimal impact to the UI thread, and can instead be handled by the composition thread as an independent animation.</span></span>

<span data-ttu-id="a53c1-303">アニメーションに次のいずれかの特性がある場合は独立型と見なされます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-303">An animation is independent if it has any of these characteristics:</span></span>

-   <span data-ttu-id="a53c1-304">アニメーションの [**Duration**](https://msdn.microsoft.com/library/windows/apps/BR243207) が 0 秒である (「警告」をご覧ください)</span><span class="sxs-lookup"><span data-stu-id="a53c1-304">The [**Duration**](https://msdn.microsoft.com/library/windows/apps/BR243207) of the animation is 0 seconds (see Warning)</span></span>
-   <span data-ttu-id="a53c1-305">アニメーションのターゲットが [**UIElement.Opacity**](/uwp/api/Windows.UI.Xaml.UIElement.Opacity) である</span><span class="sxs-lookup"><span data-stu-id="a53c1-305">The animation targets [**UIElement.Opacity**](/uwp/api/Windows.UI.Xaml.UIElement.Opacity)</span></span>
-   <span data-ttu-id="a53c1-306">アニメーションのターゲットが [**UIElement**](https://msdn.microsoft.com/library/windows/apps/BR208911) プロパティ ([**Transform3D**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.uielement.transform3d.aspx)、[**RenderTransform**](https://msdn.microsoft.com/library/windows/apps/BR208980)、[**Projection**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.uielement.projection.aspx)、[**Clip**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.uielement.clip)) のサブプロパティ値である</span><span class="sxs-lookup"><span data-stu-id="a53c1-306">The animation targets a sub-property value of these [**UIElement**](https://msdn.microsoft.com/library/windows/apps/BR208911) properties: [**Transform3D**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.uielement.transform3d.aspx), [**RenderTransform**](https://msdn.microsoft.com/library/windows/apps/BR208980), [**Projection**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.uielement.projection.aspx), [**Clip**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.uielement.clip)</span></span>
-   <span data-ttu-id="a53c1-307">アニメーションのターゲットが [**Canvas.Left**](https://msdn.microsoft.com/library/windows/apps/Hh759771) または [**Canvas.Top**](https://msdn.microsoft.com/library/windows/apps/Hh759772)</span><span class="sxs-lookup"><span data-stu-id="a53c1-307">The animation targets [**Canvas.Left**](https://msdn.microsoft.com/library/windows/apps/Hh759771) or [**Canvas.Top**](https://msdn.microsoft.com/library/windows/apps/Hh759772)</span></span>
-   <span data-ttu-id="a53c1-308">アニメーションのターゲットが [**Brush**](/uwp/api/Windows.UI.Xaml.Media.Brush) 値であり、[**SolidColorBrush**](https://msdn.microsoft.com/library/windows/apps/BR242962) を使い、その [**Color**](/uwp/api/Windows.UI.Xaml.Media.SolidColorBrush.Color) をアニメーション化する</span><span class="sxs-lookup"><span data-stu-id="a53c1-308">The animation targets a [**Brush**](/uwp/api/Windows.UI.Xaml.Media.Brush) value and uses a [**SolidColorBrush**](https://msdn.microsoft.com/library/windows/apps/BR242962), animating its [**Color**](/uwp/api/Windows.UI.Xaml.Media.SolidColorBrush.Color)</span></span>
-   <span data-ttu-id="a53c1-309">アニメーションが [**ObjectAnimationUsingKeyFrames**](https://msdn.microsoft.com/library/windows/apps/BR210320) である</span><span class="sxs-lookup"><span data-stu-id="a53c1-309">The animation is an [**ObjectAnimationUsingKeyFrames**](https://msdn.microsoft.com/library/windows/apps/BR210320)</span></span>

> [!WARNING]
> <span data-ttu-id="a53c1-310">アニメーションが独立型であると見なされるためには、明示的に `Duration="0"` を設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-310">In order for your animation to be treated as independent, you must explicitly set `Duration="0"`.</span></span> <span data-ttu-id="a53c1-311">たとえば、この XAML から `Duration="0"` を削除した場合、フレームの [**KeyTime**](https://msdn.microsoft.com/library/windows/apps/BR243169) が "0:0:0" であった場合でも、アニメーションは独立型であると見なされます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-311">For example, if you remove `Duration="0"` from this XAML, the animation is treated as dependent, even though the [**KeyTime**](https://msdn.microsoft.com/library/windows/apps/BR243169) of the frame is "0:0:0".</span></span>

```xaml
<Storyboard>
  <DoubleAnimationUsingKeyFrames
    Duration="0"
    Storyboard.TargetName="Button2"
    Storyboard.TargetProperty="Width">
    <DiscreteDoubleKeyFrame KeyTime="0:0:0" Value="200"/>
  </DoubleAnimationUsingKeyFrames>
</Storyboard>
```

<span data-ttu-id="a53c1-312">アニメーションがこれらの条件を満たしていない場合は、おそらく依存型アニメーションです。</span><span class="sxs-lookup"><span data-stu-id="a53c1-312">If your animation doesn't meet these criteria, it's probably a dependent animation.</span></span> <span data-ttu-id="a53c1-313">既定では、アニメーション システムは依存型アニメーションを実行しません。</span><span class="sxs-lookup"><span data-stu-id="a53c1-313">By default, the animation system won't run a dependent animation.</span></span> <span data-ttu-id="a53c1-314">そのため、開発とテストのプロセス中に、アニメーションの実行を確認できない可能性もあります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-314">So during the process of developing and testing, you might not even be seeing your animation running.</span></span> <span data-ttu-id="a53c1-315">このアニメーションを使うことはできるものの、こうした各依存型アニメーションを明示的に有効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-315">You can still use this animation, but you must specifically enable each such dependent animation.</span></span> <span data-ttu-id="a53c1-316">アニメーションを有効にするには、アニメーション オブジェクトの **EnableDependentAnimation** プロパティを **true** に設定します </span><span class="sxs-lookup"><span data-stu-id="a53c1-316">To enable your animation, set the **EnableDependentAnimation** property of the animation object to **true**.</span></span> <span data-ttu-id="a53c1-317">(アニメーションを表す [**Timeline**](https://msdn.microsoft.com/library/windows/apps/BR210517) サブクラスごとにプロパティの実装は異なりますが、いずれも名前は `EnableDependentAnimation` です)。</span><span class="sxs-lookup"><span data-stu-id="a53c1-317">(Each [**Timeline**](https://msdn.microsoft.com/library/windows/apps/BR210517) subclass that represents an animation has a different implementation of the property but they're all named `EnableDependentAnimation`.)</span></span>

<span data-ttu-id="a53c1-318">アプリ開発者に課される依存型アニメーションを有効にするという要件は、開発経験を活かしたアニメーション システムにおける重要な設計の一側面です。</span><span class="sxs-lookup"><span data-stu-id="a53c1-318">The requirement of enabling dependent animations falling onto the app developer is a conscious design aspect of the animation system and the development experience.</span></span> <span data-ttu-id="a53c1-319">開発者は、アニメーションには UI の応答性の低下というパフォーマンス コストが存在することに注意しなければなりません。</span><span class="sxs-lookup"><span data-stu-id="a53c1-319">We want developers to be aware that animations do have a performance cost for the responsiveness of your UI.</span></span> <span data-ttu-id="a53c1-320">パフォーマンスの低いアニメーションは、フルスケールのアプリでの分離とデバッグが困難です。</span><span class="sxs-lookup"><span data-stu-id="a53c1-320">Poorly performing animations are difficult to isolate and debug in a full-scale app.</span></span> <span data-ttu-id="a53c1-321">そのため、アプリの UI エクスペリエンスに実際に必要な依存型アニメーションだけを有効にする方が適切です。</span><span class="sxs-lookup"><span data-stu-id="a53c1-321">So it's better to turn on only the dependent animations you really need for your app's UI experience.</span></span> <span data-ttu-id="a53c1-322">多くのサイクルを使う装飾的なアニメーションによりアプリのパフォーマンスが低下しないように注意する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-322">We didn't want to make it too easy to compromise your app's performance because of decorative animations that use a lot of cycles.</span></span> <span data-ttu-id="a53c1-323">アニメーションのパフォーマンスに関するヒントについて詳しくは、「[アニメーションとメディアの最適化](https://msdn.microsoft.com/library/windows/apps/Mt204774)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a53c1-323">For more info on performance tips for animation, see [Optimize animations and media](https://msdn.microsoft.com/library/windows/apps/Mt204774).</span></span>

<span data-ttu-id="a53c1-324">アプリ開発者は、**EnableDependentAnimation** が **true** でも、依存型アニメーションを常に無効にするアプリ全体の設定を適用することもできます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-324">As an app developer, you can also choose to apply an app-wide setting that always disables dependent animations, even those where **EnableDependentAnimation** is **true**.</span></span> <span data-ttu-id="a53c1-325">「[**Timeline.AllowDependentAnimations**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.media.animation.timeline.allowdependentanimations)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a53c1-325">See [**Timeline.AllowDependentAnimations**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.media.animation.timeline.allowdependentanimations).</span></span>

> [!TIP]
> <span data-ttu-id="a53c1-326">Visual Studio を使ってコントロールの表示状態を構成すると、表示状態プロパティに依存型アニメーションを適用しようとするたびに、デザイナーによって警告が生成されます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-326">If you are composing visual states for a control using Visual Studio, the designer will produce warnings whenever you attempt to apply a dependent animation to a visual state property.</span></span>

## <a name="starting-and-controlling-an-animation"></a><span data-ttu-id="a53c1-327">アニメーションの開始と制御</span><span class="sxs-lookup"><span data-stu-id="a53c1-327">Starting and controlling an animation</span></span>

<span data-ttu-id="a53c1-328">ここまでで説明した内容だけでは、実際にはアニメーションは動作せず、適用もされません。</span><span class="sxs-lookup"><span data-stu-id="a53c1-328">Everything we've shown you so far doesn't actually cause an animation to run or be applied!</span></span> <span data-ttu-id="a53c1-329">アニメーションが開始および実行されるまでは、アニメーションが XAML で宣言している値の変更は行われません。</span><span class="sxs-lookup"><span data-stu-id="a53c1-329">Until the animation is started and is running, the value changes that an animation is declaring in XAML are latent and won't happen yet.</span></span> <span data-ttu-id="a53c1-330">アプリの有効期間またはユーザー エクスペリエンスに関連する何らかの方法で、アニメーションを明示的に開始する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-330">You must explicitly start an animation in some way that's related to the app lifetime or the user experience.</span></span> <span data-ttu-id="a53c1-331">最も単純なレベルでは、アニメーションの親である [**Storyboard**](https://msdn.microsoft.com/library/windows/apps/BR210490) で [**Begin**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.media.animation.storyboard.begin) メソッドを呼び出してアニメーションを開始します。</span><span class="sxs-lookup"><span data-stu-id="a53c1-331">At the simplest level, you start an animation by calling the [**Begin**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.media.animation.storyboard.begin) method on the [**Storyboard**](https://msdn.microsoft.com/library/windows/apps/BR210490) that's the parent for that animation.</span></span> <span data-ttu-id="a53c1-332">XAML からメソッドを直接呼び出すことはできないため、アニメーションを有効にする場合は、必ずコードから行うことになります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-332">You can't call methods from XAML directly, so whatever you do to enable your animations, you'll be doing it from code.</span></span> <span data-ttu-id="a53c1-333">アプリのページまたはコンポーネントのコード ビハインドか、コントロールのロジック (カスタム コントロール クラスを定義する場合) を使うことになります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-333">That will either be the code-behind for the pages or components of your app, or perhaps the logic of your control if you're defining a custom control class.</span></span>

<span data-ttu-id="a53c1-334">通常は、[**Begin**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.media.animation.storyboard.begin) を呼び出し、継続時間が過ぎるまで単純にアニメーションを実行します。</span><span class="sxs-lookup"><span data-stu-id="a53c1-334">Typically, you'll call [**Begin**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.media.animation.storyboard.begin) and just let the animation run to its duration completion.</span></span> <span data-ttu-id="a53c1-335">ただし、[**Pause**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.media.animation.storyboard.pause.aspx)、[**Resume**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.media.animation.storyboard.resume.aspx)、[**Stop**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.media.animation.storyboard.stop) メソッドを使って実行時に [**Storyboard**](https://msdn.microsoft.com/library/windows/apps/BR210490) を制御することも、高度なアニメーション コントロールのシナリオに使われるその他の API を使うこともできます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-335">However, you can also use [**Pause**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.media.animation.storyboard.pause.aspx), [**Resume**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.media.animation.storyboard.resume.aspx) and [**Stop**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.media.animation.storyboard.stop) methods to control the [**Storyboard**](https://msdn.microsoft.com/library/windows/apps/BR210490) at run-time, as well as other APIs that are used for more advanced animation control scenarios.</span></span>

<span data-ttu-id="a53c1-336">無限に繰り返すアニメーション (`RepeatBehavior="Forever"`) を含むストーリーボードで [**Begin**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.media.animation.storyboard.begin) を呼び出すと、アニメーションは、それを含むページがアンロードされるか、[**Pause**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.media.animation.storyboard.pause.aspx) または [**Stop**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.media.animation.storyboard.stop) を明示的に呼び出すまで実行されます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-336">When you call [**Begin**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.media.animation.storyboard.begin) on a storyboard that contains an animation that repeats infinitely (`RepeatBehavior="Forever"`), that animation runs until the page containing it is unloaded, or you specifically call [**Pause**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.media.animation.storyboard.pause.aspx) or [**Stop**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.media.animation.storyboard.stop).</span></span>

### <a name="starting-an-animation-from-app-code"></a><span data-ttu-id="a53c1-337">アプリ コードからのアニメーションの開始</span><span class="sxs-lookup"><span data-stu-id="a53c1-337">Starting an animation from app code</span></span>

<span data-ttu-id="a53c1-338">アニメーションは、自動的に開始することも、ユーザー操作に応答して開始することもできます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-338">You can either start animations automatically, or in response to user actions.</span></span> <span data-ttu-id="a53c1-339">自動的に開始する場合は、通常、アニメーション トリガーとして機能する [**Loaded**](https://msdn.microsoft.com/library/windows/apps/BR208723) などのオブジェクト有効期間イベントを使います。</span><span class="sxs-lookup"><span data-stu-id="a53c1-339">For the automatic case, you typically use an object lifetime event such as [**Loaded**](https://msdn.microsoft.com/library/windows/apps/BR208723) to act as the animation trigger.</span></span> <span data-ttu-id="a53c1-340">このとき便利なのが **Loaded** イベントです。その時点で UI は対話式操作に対応しているうえ、アニメーションが先頭で切れることもありません。UI の別の部分がまだ読み込んでいるためです。</span><span class="sxs-lookup"><span data-stu-id="a53c1-340">The **Loaded** event is a good event to use for this because at that point the UI is ready for interaction, and the animation won't be cut off at the beginning because another part of UI was still loading.</span></span>

<span data-ttu-id="a53c1-341">この例では、[**PointerPressed**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.uielement.pointerpressed) イベントを四角形に関連付けて、ユーザーが四角形をクリックしたときにアニメーションが開始されるようにしています。</span><span class="sxs-lookup"><span data-stu-id="a53c1-341">In this example, the [**PointerPressed**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.uielement.pointerpressed) event is attached to the rectangle so that when the user clicks the rectangle, the animation begins.</span></span>

```xaml
<Rectangle PointerPressed="Rectangle_Tapped"
  x:Name="MyAnimatedRectangle"
  Width="300" Height="200" Fill="Blue"/>
```

<span data-ttu-id="a53c1-342">イベント ハンドラーは、[**Storyboard**](https://msdn.microsoft.com/library/windows/apps/BR210490) の [**Begin**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.media.animation.storyboard.begin) メソッドを使って **Storyboard** (アニメーション) を開始します。</span><span class="sxs-lookup"><span data-stu-id="a53c1-342">The event handler start the [**Storyboard**](https://msdn.microsoft.com/library/windows/apps/BR210490) (the animation) by using the [**Begin**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.media.animation.storyboard.begin) method of the **Storyboard**.</span></span>

```csharp
myStoryboard.Begin();
```

```cppwinrt
myStoryboard().Begin();
```

```cpp
myStoryboard->Begin();
```

```vb
myStoryBoard.Begin()
```

<span data-ttu-id="a53c1-343">アニメーションが値を適用した後、他のロジックを実行する必要がある場合は、[**Completed**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.media.animation.timeline.completed.aspx) イベントを処理できます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-343">You can handle the [**Completed**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.media.animation.timeline.completed.aspx) event if you want other logic to run after the animation has finished applying values.</span></span> <span data-ttu-id="a53c1-344">また、プロパティ システム/アニメーション操作のトラブルシューティングには、[**GetAnimationBaseValue**](https://msdn.microsoft.com/library/windows/apps/BR242358) メソッドが役立つ場合があります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-344">Also, for troubleshooting property system/animation interactions, the [**GetAnimationBaseValue**](https://msdn.microsoft.com/library/windows/apps/BR242358) method can be useful.</span></span>

> [!TIP]
> <span data-ttu-id="a53c1-345">アプリ コードからアニメーションを開始するアプリのシナリオを実現するためにコードを記述している際に、アニメーションや切り替えが、独自の UI シナリオのためのアニメーション ライブラリに既に存在するかどうかをもう一度確かめたい場合があります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-345">Whenever you are coding for an app scenario where you are starting an animation from app code, you might want to review again whether an animation or transition already exists in the animation library for your UI scenario.</span></span> <span data-ttu-id="a53c1-346">ライブラリ アニメーションは使いやすいうえ、すべての Windows ランタイム アプリで UI エクスペリエンスの一貫性を高めるのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-346">The library animations enable a more consistent UI experience across all Windows Runtime apps, and are easier to use.</span></span>

 

### <a name="animations-for-visual-states"></a><span data-ttu-id="a53c1-347">表示状態用のアニメーション</span><span class="sxs-lookup"><span data-stu-id="a53c1-347">Animations for visual states</span></span>

<span data-ttu-id="a53c1-348">コントロールの表示状態を定義するために使われる [**Storyboard**](https://msdn.microsoft.com/library/windows/apps/BR210490) の実行動作は、アプリがストーリーボードを直接実行する方法とは異なります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-348">The run behavior for a [**Storyboard**](https://msdn.microsoft.com/library/windows/apps/BR210490) that's used to define a control's visual state is different from how an app might run a storyboard directly.</span></span> <span data-ttu-id="a53c1-349">XAML で表示状態の定義に適用されるとおり、**Storyboard** は上位の [**VisualState**](https://msdn.microsoft.com/library/windows/apps/BR209007) の要素であり、状態全体は [**VisualStateManager**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.visualstatemanager) API を使って制御されます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-349">As applied to a visual state definition in XAML, the **Storyboard** is an element of a containing [**VisualState**](https://msdn.microsoft.com/library/windows/apps/BR209007), and the state as a whole is controlled by using the [**VisualStateManager**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.visualstatemanager) API.</span></span> <span data-ttu-id="a53c1-350">含まれるアニメーションは、上位の [**VisualState** がコントロールによって使われるときにアニメーション値と **Timeline**](https://msdn.microsoft.com/library/windows/apps/BR210517) プロパティに従って実行されます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-350">Any animations within will run according to their animation values and [**Timeline**](https://msdn.microsoft.com/library/windows/apps/BR210517) properties when the containing **VisualState** is used by a control.</span></span> <span data-ttu-id="a53c1-351">詳しくは、「[表示状態用にストーリーボードに設定されたアニメーション](https://msdn.microsoft.com/library/windows/apps/xaml/JJ819808)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a53c1-351">For more info, see [Storyboards for visual states](https://msdn.microsoft.com/library/windows/apps/xaml/JJ819808).</span></span> <span data-ttu-id="a53c1-352">表示状態については、明確な [**FillBehavior**](https://msdn.microsoft.com/library/windows/apps/BR243209) は異なります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-352">For visual states, the apparent [**FillBehavior**](https://msdn.microsoft.com/library/windows/apps/BR243209) is different.</span></span> <span data-ttu-id="a53c1-353">表示状態が別の状態に変化すると、新しい表示状態でプロパティに新しいアニメーションを明示的に適用しない場合でも、前の表示状態とそのアニメーションによって適用されるすべてのプロパティの変更が取り消されます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-353">If a visual state is changed to another state, all the property changes applied by the previous visual state and its animations are canceled, even if the new visual state doesn't specifically apply a new animation to a property.</span></span>

### <a name="storyboard-and-eventtrigger"></a><span data-ttu-id="a53c1-354">**Storyboard** と **EventTrigger**</span><span class="sxs-lookup"><span data-stu-id="a53c1-354">**Storyboard** and **EventTrigger**</span></span>

<span data-ttu-id="a53c1-355">XAML で完全に宣言できるアニメーションをある方法で開始できます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-355">There is one way to start an animation that can be declared entirely in XAML.</span></span> <span data-ttu-id="a53c1-356">しかし、この手法は幅広く使われていません。</span><span class="sxs-lookup"><span data-stu-id="a53c1-356">However, this technique isn't widely used anymore.</span></span> <span data-ttu-id="a53c1-357">これは、[**VisualStateManager**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.visualstatemanager) がサポートされる前の WPF と旧バージョンの Silverlight で使われていた構文です。</span><span class="sxs-lookup"><span data-stu-id="a53c1-357">It's a legacy syntax from WPF and early versions of Silverlight prior to [**VisualStateManager**](https://msdn.microsoft.com/library/windows/apps/windows.ui.xaml.visualstatemanager) support.</span></span> <span data-ttu-id="a53c1-358">この [**EventTrigger**](https://msdn.microsoft.com/library/windows/apps/BR242390) 構文はインポートまたは互換性の理由から Windows ランタイム XAML でも機能するものの、[**FrameworkElement.Loaded**](https://msdn.microsoft.com/library/windows/apps/BR208723) イベントに基づくトリガー動作でのみ機能します。他のイベントのトリガーを試みると、例外がスローされるか、コンパイルに失敗します。</span><span class="sxs-lookup"><span data-stu-id="a53c1-358">This [**EventTrigger**](https://msdn.microsoft.com/library/windows/apps/BR242390) syntax still works in Windows Runtime XAML for import/compatibility reasons, but only works for a trigger behavior based on the [**FrameworkElement.Loaded**](https://msdn.microsoft.com/library/windows/apps/BR208723) event; attempting to trigger off other events will throw exceptions or fail to compile.</span></span> <span data-ttu-id="a53c1-359">詳しくは、「[**EventTrigger**](https://msdn.microsoft.com/library/windows/apps/BR242390)」または「[**BeginStoryboard**](https://msdn.microsoft.com/library/windows/apps/BR243053)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a53c1-359">For more info, see [**EventTrigger**](https://msdn.microsoft.com/library/windows/apps/BR242390) or [**BeginStoryboard**](https://msdn.microsoft.com/library/windows/apps/BR243053).</span></span>

## <a name="animating-xaml-attached-properties"></a><span data-ttu-id="a53c1-360">XAML 添付プロパティのアニメーション化</span><span class="sxs-lookup"><span data-stu-id="a53c1-360">Animating XAML attached properties</span></span>

<span data-ttu-id="a53c1-361">一般的なシナリオではありませんが、アニメーション化された値を XAML 添付プロパティに適用できます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-361">It's not a common scenario, but you can apply an animated value to a XAML attached property.</span></span> <span data-ttu-id="a53c1-362">添付プロパティの概要とその動作について詳しくは、「[添付プロパティの概要](https://msdn.microsoft.com/library/windows/apps/Mt185579)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a53c1-362">For more info on what attached properties are and how they work, see [Attached properties overview](https://msdn.microsoft.com/library/windows/apps/Mt185579).</span></span> <span data-ttu-id="a53c1-363">添付プロパティをターゲットとして設定するには、プロパティ名をかっこで囲む[プロパティ パス構文](https://msdn.microsoft.com/library/windows/apps/Mt185586)が必要です。</span><span class="sxs-lookup"><span data-stu-id="a53c1-363">Targeting an attached property requires a [property-path syntax](https://msdn.microsoft.com/library/windows/apps/Mt185586) that encloses the property name in parentheses.</span></span> <span data-ttu-id="a53c1-364">個別の整数値を適用する [**ObjectAnimationUsingKeyFrames**](https://msdn.microsoft.com/library/windows/apps/BR210320) を使って、[**Canvas.ZIndex**](https://msdn.microsoft.com/library/windows/apps/Hh759773) などの組み込み添付プロパティをアニメーション化することができます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-364">You can animate the built-in attached properties such as [**Canvas.ZIndex**](https://msdn.microsoft.com/library/windows/apps/Hh759773) by using an [**ObjectAnimationUsingKeyFrames**](https://msdn.microsoft.com/library/windows/apps/BR210320) that applies discrete integer values.</span></span> <span data-ttu-id="a53c1-365">ただし、Windows ランタイム XAML 実装の制限があるため、カスタム添付プロパティをアニメーション化することはできません。</span><span class="sxs-lookup"><span data-stu-id="a53c1-365">However, an existing limitation of the Windows Runtime XAML implementation is that you cannot animate a custom attached property.</span></span>

## <a name="more-animation-types-and-next-steps-for-learning-about-animating-your-ui"></a><span data-ttu-id="a53c1-366">その他のアニメーションの種類、UI のアニメーション化に関する次の学習ステップ</span><span class="sxs-lookup"><span data-stu-id="a53c1-366">More animation types, and next steps for learning about animating your UI</span></span>

<span data-ttu-id="a53c1-367">ここまで、2 つの値の間をアニメーション化し、アニメーションの実行中に必要に応じて値を線形補間するカスタム アニメーションについて説明してきました。</span><span class="sxs-lookup"><span data-stu-id="a53c1-367">Up to now, we've shown the custom animations that are animating between two values, and then linearly interpolating the values as necessary while the animation runs.</span></span> <span data-ttu-id="a53c1-368">これらは、**From**/**To**/**By** アニメーションと呼ばれています。</span><span class="sxs-lookup"><span data-stu-id="a53c1-368">These are called **From**/**To**/**By** animations.</span></span> <span data-ttu-id="a53c1-369">これ以外に、開始から終了までの間の中間値を宣言できるタイプのアニメーションもあります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-369">But there's another animation type that enables you to declare intermediate values that fall between the start and end.</span></span> <span data-ttu-id="a53c1-370">これらは*キー フレーム アニメーション*と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="a53c1-370">These are called *key-frame animations*.</span></span> <span data-ttu-id="a53c1-371">**From**/**To**/**By** アニメーションまたはキー フレーム アニメーションの補間ロジックを変更する方法もあります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-371">There's also a way to alter the interpolation logic on either a **From**/**To**/**By** animation or a key-frame animation.</span></span> <span data-ttu-id="a53c1-372">それには、イージング関数を適用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a53c1-372">This involves applying an easing function.</span></span> <span data-ttu-id="a53c1-373">これらの概念について詳しくは、「[キーフレームとイージング関数のアニメーション](key-frame-and-easing-function-animations.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a53c1-373">For more info on these concepts, see [Key-frame and easing function animations](key-frame-and-easing-function-animations.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="a53c1-374">関連トピック</span><span class="sxs-lookup"><span data-stu-id="a53c1-374">Related topics</span></span>

* [<span data-ttu-id="a53c1-375">プロパティ パス構文</span><span class="sxs-lookup"><span data-stu-id="a53c1-375">Property-path syntax</span></span>](https://msdn.microsoft.com/library/windows/apps/Mt185586)
* [<span data-ttu-id="a53c1-376">依存関係プロパティの概要</span><span class="sxs-lookup"><span data-stu-id="a53c1-376">Dependency properties overview</span></span>](https://msdn.microsoft.com/library/windows/apps/Mt185583)
* [<span data-ttu-id="a53c1-377">キー フレームとイージング関数のアニメーション</span><span class="sxs-lookup"><span data-stu-id="a53c1-377">Key-frame and easing function animations</span></span>](key-frame-and-easing-function-animations.md)
* [<span data-ttu-id="a53c1-378">表示状態用にストーリーボードに設定されたアニメーション</span><span class="sxs-lookup"><span data-stu-id="a53c1-378">Storyboarded animations for visual states</span></span>](https://msdn.microsoft.com/library/windows/apps/xaml/JJ819808)
* [<span data-ttu-id="a53c1-379">コントロール テンプレート</span><span class="sxs-lookup"><span data-stu-id="a53c1-379">Control templates</span></span>](https://msdn.microsoft.com/library/windows/apps/Mt210948)
* [**<span data-ttu-id="a53c1-380">Storyboard</span><span class="sxs-lookup"><span data-stu-id="a53c1-380">Storyboard</span></span>**](https://msdn.microsoft.com/library/windows/apps/BR210490)
* [**<span data-ttu-id="a53c1-381">Storyboard.TargetProperty</span><span class="sxs-lookup"><span data-stu-id="a53c1-381">Storyboard.TargetProperty</span></span>**](https://msdn.microsoft.com/library/windows/apps/Hh759824)
 

 




