---
title: Unity のプレハブとサインインの XBL
description: ソーシャル プレハブと Xbox Live のソーシャル サービスのスクリプトの例について説明します
ms.date: 01/24/2018
ms.topic: get-started-article
keywords: xbox live、xbox、ゲーム、uwp、windows 10、1 つ xbox、unity
ms.openlocfilehash: a893858dac11fa848c2601df2c1bd6292b72ac6d
ms.sourcegitcommit: b034650b684a767274d5d88746faeea373c8e34f
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2019
ms.locfileid: "57660037"
---
# <a name="unity-prefabs-and-scripted-sign-in"></a><span data-ttu-id="acbf5-104">Unity のプレハブとスクリプト化されたサインイン</span><span class="sxs-lookup"><span data-stu-id="acbf5-104">Unity Prefabs and Scripted Sign-In</span></span>

<span data-ttu-id="acbf5-105">この記事では、Unity プロジェクトを Xbox Live サインインの追加を説明します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-105">This article will guide you through adding Xbox Live sign-in to your Unity projects.</span></span> <span data-ttu-id="acbf5-106">ダウンロードした場合、サインインを実現する 2 つの方法がある、 [Xbox Live の Unity プラグイン](https://github.com/Microsoft/xbox-live-unity-plugin)します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-106">There are two ways you can achieve sign-in if you have downloaded the [Xbox Live Unity Plugin](https://github.com/Microsoft/xbox-live-unity-plugin).</span></span> <span data-ttu-id="acbf5-107">プラグイン内に含まれるプレハブを使用するか、スクリプトと含まれるライブラリを使用して、独自のカスタムの Gameobject に Xbox Live サインイン スクリプト可能性があります。</span><span class="sxs-lookup"><span data-stu-id="acbf5-107">You may either use the prefabs contained within the plugin or use the scripts and included libraries to script Xbox Live sign-in into your own custom GameObjects.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="acbf5-108">この記事では、更新が (1804 のリリース) を 2018 年の月に行われる前に、プラグインのバージョンに適用されます。</span><span class="sxs-lookup"><span data-stu-id="acbf5-108">This article applies to a version of the plugin prior to an update made in May of 2018 (1804 Release).</span></span> <span data-ttu-id="acbf5-109">その後は、Xbox Live プラグインをインストールするか、またはまだダウンロードしない場合は、サインインが実行方法に大きな違いのある新しいバージョンがあります。</span><span class="sxs-lookup"><span data-stu-id="acbf5-109">If you installed the Xbox Live Plugin after that time, or have not yet downloaded it you may have a newer version which has significant differences to how sign-in is performed.</span></span> <span data-ttu-id="acbf5-110">これだけでなくこのプラグインのスクリーン ショットが一致しないこと、この最新リリースのものが表示されます。</span><span class="sxs-lookup"><span data-stu-id="acbf5-110">In addition to this you will find that the screenshots in this plugin do not match those of the most recent release.</span></span> <span data-ttu-id="acbf5-111">代わりを参照してください、[に関する記事を更新されたサインイン プレハブ](playerauthentication-prefab-sign-in.md)だけでなく[サインイン スクリプトを実行して更新されたメソッドの詳細を示す記事](sign-in-manager.md)します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-111">Please instead refer to the [article for the updated sign-in prefab](playerauthentication-prefab-sign-in.md) as well as [the article detailing the updated methods for scripting sign-in](sign-in-manager.md).</span></span>

## <a name="before-you-begin"></a><span data-ttu-id="acbf5-112">始める前に</span><span class="sxs-lookup"><span data-stu-id="acbf5-112">Before you begin</span></span>

<span data-ttu-id="acbf5-113">Unity ゲームを Xbox Live のソーシャル サービスの追加を開始する前に、いくつかの手順進む前に完了する必要があります。</span><span class="sxs-lookup"><span data-stu-id="acbf5-113">Before you start adding Xbox Live social services to your Unity game there are a few steps you'll need to complete before diving in.</span></span> <span data-ttu-id="acbf5-114">まず、ダウンロードし、統合されていることを確認してください、 [Xbox Live の Unity プラグイン](https://github.com/Microsoft/xbox-live-unity-plugin)します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-114">First, make sure that you have downloaded and integrated the [Xbox Live Unity plugin](https://github.com/Microsoft/xbox-live-unity-plugin).</span></span> <span data-ttu-id="acbf5-115">タイトルを予約し、経由で公開したい 2 つ目は、 [Microsoft 開発センター](https://developer.microsoft.com/en-us/games/uwp)します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-115">Second, you'll want to have your title reserved and published through the [Microsoft Development Center](https://developer.microsoft.com/en-us/games/uwp).</span></span> <span data-ttu-id="acbf5-116">読み取り[新しい Xbox Live クリエーターズ プログラムのタイトルを作成する](../get-started-with-creators/create-and-test-a-new-creators-title.md)手順については、タイトルを公開する方法。</span><span class="sxs-lookup"><span data-stu-id="acbf5-116">Read [Create a new Xbox Live Creators Program title](../get-started-with-creators/create-and-test-a-new-creators-title.md) for instructions on publishing your title.</span></span>
<span data-ttu-id="acbf5-117">最後に、読み取る[構成 Xbox Live で Unity](../get-started-with-creators/configure-xbox-live-in-unity.md) Unity の環境を正しく設定して、Xbox Live サービスを使用するタイトルを構成します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-117">Finally,  read [Configure Xbox Live In Unity](../get-started-with-creators/configure-xbox-live-in-unity.md) to setup your Unity environment properly and configure your title to use Xbox Live services.</span></span> <span data-ttu-id="acbf5-118">時間、Xbox Live の有効なタイトルに使用できるツールと Xbox Live を実装 Unity で 2 つの主な方法の詳細については、Unity プロジェクトを正しく設定する、: プレハブとスクリプト。</span><span class="sxs-lookup"><span data-stu-id="acbf5-118">Once your Unity project is set up properly, it's time to learn about the tools you can use in your Xbox Live enabled title, as well as the two main ways you can implement Xbox Live in Unity: prefabs and scripts.</span></span>

## <a name="prefabs"></a><span data-ttu-id="acbf5-119">プレハブ</span><span class="sxs-lookup"><span data-stu-id="acbf5-119">Prefabs</span></span>

<span data-ttu-id="acbf5-120">Unity では、コンポーネントとプロパティを持つ完全な GameObject を格納できるアセットのプレハブ型があります。</span><span class="sxs-lookup"><span data-stu-id="acbf5-120">Unity has a prefab asset type that allows you to store a GameObject complete with components and properties.</span></span> <span data-ttu-id="acbf5-121">プレハブは、Unity シーンに新しいオブジェクトのインスタンスを作成するテンプレートとして機能します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-121">The prefab acts as a template from which you can create new object instances in your Unity scene.</span></span>
<span data-ttu-id="acbf5-122">[詳細については、Unity の web サイトからプレハブは](https://unity3d.com/learn/tutorials/topics/interface-essentials/prefabs-concept-usage)します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-122">[Learn more about prefabs from the Unity website](https://unity3d.com/learn/tutorials/topics/interface-essentials/prefabs-concept-usage).</span></span>

<span data-ttu-id="acbf5-123">Xbox Live の Unity プラグインを利用するプロジェクトで使用できるいくつかのプレハブは、Xbox Live 機能。</span><span class="sxs-lookup"><span data-stu-id="acbf5-123">The Xbox Live Unity plugin provides a few prefabs that you can use in your project to utilize Xbox Live features.</span></span> <span data-ttu-id="acbf5-124">この記事で説明されているプレハブは、サインインすることにより[マルチ ユーザー サポートを追加](../get-started-with-creators/add-multi-user-support.md)タイトル、または表示の Xbox Live で署名されたフレンド リストをプロファイルします。</span><span class="sxs-lookup"><span data-stu-id="acbf5-124">The prefabs described in this article will allow you to sign in, [add multi-user support](../get-started-with-creators/add-multi-user-support.md) to your title, or display the friends list of a signed in Xbox Live profile.</span></span> <span data-ttu-id="acbf5-125">これらおよびその他のプレハブの下に見つけることができます、**プロジェクト**タブで、次のパス。**資産 > Xbox Live > プレハブ**します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-125">You can find these and other prefabs under the **Project** tab by following the path: **Assets > Xbox Live > Prefabs**.</span></span>

### <a name="the-userprofile-prefab"></a><span data-ttu-id="acbf5-126">UserProfile プレハブ</span><span class="sxs-lookup"><span data-stu-id="acbf5-126">The UserProfile prefab</span></span>

<span data-ttu-id="acbf5-127">最初、最も重要なソーシャル プレハブは、 **UserProfile** prefab します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-127">The first and most important social prefab is the **UserProfile** prefab.</span></span> <span data-ttu-id="acbf5-128">**UserProfile**プレハブは、Xbox Live にサインインを許可するために必要なすべてのものです。</span><span class="sxs-lookup"><span data-stu-id="acbf5-128">The **UserProfile** prefab has everything required to allow an Xbox Live sign-in.</span></span> <span data-ttu-id="acbf5-129">これは、する必要があります、サインイン ユーザー Xbox Live サービスを使用する前に、非常に重要です。</span><span class="sxs-lookup"><span data-stu-id="acbf5-129">This is very important as you must sign-in a user before using Xbox Live services.</span></span> <span data-ttu-id="acbf5-130">プレハブには、サインイン ボタンとゲーマータグ、Gamerpic、ゲーマー、player で、ログインしている表現の GameObject の両方が含まれます。</span><span class="sxs-lookup"><span data-stu-id="acbf5-130">The prefab contains both the sign-in button and a GameObject to represent a logged in player by their Gamertag, Gamerpic, and Gamerscore.</span></span>

> [!NOTE]
> <span data-ttu-id="acbf5-131">含める必要があります、その他の Xbox Live のプレハブを使用するために、 **UserProfile** prefab または手動でサインインしている API を呼び出します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-131">In order to use any of the other Xbox Live prefabs, you must include a **UserProfile** prefab or manually invoke the sign-in API.</span></span>

![資産と階層のユーザー プロファイルのプレハブ](../images/unity/unity-userprofile-views.png)

<span data-ttu-id="acbf5-133">展開する場合、 **UserProfile**のプレハブ、**プロジェクト**パネルまたは、**階層**シーンに追加された後に表示されている、 **UserProfile**プレハブは、その内部に 2 つの Gameobject を含まれています。</span><span class="sxs-lookup"><span data-stu-id="acbf5-133">If you expand the **UserProfile** prefab in the **Project** panel or in the **hierarchy** after it’s been added to a scene, you’ll see that the **UserProfile** prefab contains two GameObjects inside of it.</span></span> <span data-ttu-id="acbf5-134">最初のオブジェクトが、 **SignInPanel**サインイン ボタンのエクスペリエンスが含まれています。</span><span class="sxs-lookup"><span data-stu-id="acbf5-134">The first object is the **SignInPanel** which contains the sign-in button experience.</span></span> <span data-ttu-id="acbf5-135">2 番目のオブジェクトは、 **ProfileInfo**にサインインした後、ユーザーに関する情報を格納します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-135">The second object is the **ProfileInfo** which will contain the information about the user once they sign in.</span></span> <span data-ttu-id="acbf5-136">**UserProfile**プレハブは、サインイン済みのローカルで、タイトルに Xbox Live ユーザーの情報を表す何を使用します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-136">The **UserProfile** prefab is what you will use to represent the information of any Xbox Live user signed-in locally to your title.</span></span>

### <a name="the-xboxliveuser-prefab"></a><span data-ttu-id="acbf5-137">XboxLiveUser プレハブ</span><span class="sxs-lookup"><span data-stu-id="acbf5-137">The XboxLiveUser prefab</span></span>

<span data-ttu-id="acbf5-138">**UserProfile**プレハブと呼ばれる、コード内の 2 つ目のソーシャル プレハブを使用して、 **XboxLiveUser**します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-138">The **UserProfile** prefab uses a second social prefab in its code called the **XboxLiveUser**.</span></span> <span data-ttu-id="acbf5-139">コードでインスタンス化するだけですが、シーンの階層構造に追加する必要はありませんので、このプレハブの使用はすぐに明らかではありません。</span><span class="sxs-lookup"><span data-stu-id="acbf5-139">This prefab's use is not immediately evident as it does not need to be added to the scene hierarchy, as it may simply be instantiated in code.</span></span> <span data-ttu-id="acbf5-140">**XboxLiveUser**ビジュアル表現がない Xbox Live ユーザーに関連する詳細が含まれます。</span><span class="sxs-lookup"><span data-stu-id="acbf5-140">The **XboxLiveUser** has no visual representation, it simply contains the details that pertain to the Xbox Live user.</span></span> <span data-ttu-id="acbf5-141">インスタンスが必要、 **XboxLiveUser**のすべてのインスタンス、 **UserProfile**します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-141">You will need an instance of the **XboxLiveUser** for every instance of the **UserProfile**.</span></span> <span data-ttu-id="acbf5-142">これは重要な場合に[マルチ ユーザー サポートを追加する](../get-started-with-creators/add-multi-user-support.md)をタイトルにします。</span><span class="sxs-lookup"><span data-stu-id="acbf5-142">This is important when [adding multi-user support](../get-started-with-creators/add-multi-user-support.md) to your title.</span></span> <span data-ttu-id="acbf5-143">サインイン後に、ユーザーに関する情報を保持するだけでなくこのプレハブは、Xbox Live ユーザーをサインインに使用したコードのラッパーではもします。</span><span class="sxs-lookup"><span data-stu-id="acbf5-143">In addition to holding information about the user after sign-in this prefab is also a wrapper for the code used to sign-in an Xbox Live user.</span></span>

## <a name="sign-in-with-the-userprofile-prefab"></a><span data-ttu-id="acbf5-144">UserProfile プレハブを使用してサインイン</span><span class="sxs-lookup"><span data-stu-id="acbf5-144">Sign-in with the UserProfile prefab</span></span>

<span data-ttu-id="acbf5-145">Xbox Live の Unity プラグインのプレハブは、特定の開発タスクをはるかに簡単にするために存在します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-145">The Xbox Live Unity plugin prefabs exist to make certain development tasks much easier.</span></span> <span data-ttu-id="acbf5-146">Xbox Live にサインインを使用する必要があります単に、Unity プロジェクト用に有効にする、 **UserProfile**と**XboxLiveServices** Unity と共にプレハブ**EventSystem**します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-146">To enable Xbox Live sign-in for your Unity project you will simply need to use the **UserProfile** and **XboxLiveServices** prefabs along with a Unity **EventSystem**.</span></span>

<span data-ttu-id="acbf5-147">最初にドラッグして、 **UserProfile**シーンのプレハブします。</span><span class="sxs-lookup"><span data-stu-id="acbf5-147">First drag the **UserProfile** prefab into a scene.</span></span> <span data-ttu-id="acbf5-148">理想的には、 **UserProfile**プロジェクトの最初のメニュー画面に配置する必要があります。</span><span class="sxs-lookup"><span data-stu-id="acbf5-148">Ideally the **UserProfile** should be placed on the initial menu screen of your project.</span></span>

![ユーザー プロファイルを階層にドラッグします。](../images/unity/drag-userprofile.gif)

<span data-ttu-id="acbf5-150">加え、 **UserProfile**プレハブのことを確認する必要がありますも、 **XboxLiveServices**プレハブは、プロジェクトの最初のシーンには少なくとも内に存在します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-150">In addition to the **UserProfile** prefab you will also need to make sure that the **XboxLiveServices** prefab is present in at least the first scene of your project.</span></span>
<span data-ttu-id="acbf5-151">**XboxLiveServices**プレハブは、特定のプレハブにデバッグするための情報をログに実行されたかどうかを切り替えることができます。</span><span class="sxs-lookup"><span data-stu-id="acbf5-151">The **XboxLiveServices** prefab allows you to toggle whether or not certain prefabs will log information for debugging.</span></span> <span data-ttu-id="acbf5-152">これはプレハブの動作を確認するために役立ちます。</span><span class="sxs-lookup"><span data-stu-id="acbf5-152">This is useful for checking on prefab behavior.</span></span>

![xboxliveservices プレハブの確認します。](../images/unity/check-for-xboxliveservices.gif)

<span data-ttu-id="acbf5-154">最後に、 **UserProfile**も必要です、 **EventSystem**正常に実行します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-154">Finally, the **UserProfile** also requires an **EventSystem** to run properly.</span></span> <span data-ttu-id="acbf5-155">これにはサインイン シーンを右クリックし をクリックして追加できます**GameObject に UI が--> EventSystem-->** します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-155">This can be added by right-clicking on the sign-in scene then clicking through **GameObject --> UI --> EventSystem**.</span></span>

![イベント システムを追加します。](../images/unity/add_event_system.gif)

<span data-ttu-id="acbf5-157">再生モードを入力すると、サービスが自動的にユーザーにサインインします。</span><span class="sxs-lookup"><span data-stu-id="acbf5-157">If you enter play mode, the service will sign in a user automatically.</span></span> <span data-ttu-id="acbf5-158">Unity は、Xbox Live SDK は、Xbox Live サービスへの呼び出しをシミュレートし、使用するための戻る仮のデータを送信します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-158">In Unity, the Xbox Live SDK simulates calls to the Xbox Live service and sends back fake data for you to work with.</span></span> <span data-ttu-id="acbf5-159">ライブ データを表示するのには、UWP アプリケーションとしてプロジェクトをビルドし、Visual Studio から実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="acbf5-159">In order to view live data, you will need to build the project as a UWP application and run it from Visual Studio.</span></span> <span data-ttu-id="acbf5-160">詳しくは、「[Unity で Xbox Live を構成する](../get-started-with-creators/configure-xbox-live-in-unity.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="acbf5-160">See [Configure Xbox Live in Unity](../get-started-with-creators/configure-xbox-live-in-unity.md) for more information.</span></span> <span data-ttu-id="acbf5-161">入力すると、Unity で再生モード、プレハブはゲーマータグ、Gamerpic プレイヤーのゲーマーなどの情報をシミュレートする仮のデータで設定されます。</span><span class="sxs-lookup"><span data-stu-id="acbf5-161">When you enter play mode in Unity, the prefab will be populated with the fake data, which will simulate information such as the Gamertag, Gamerpic and Gamerscore of a player.</span></span> <span data-ttu-id="acbf5-162">これは、情報を表示する必要があります、 **UserProfile** prefab します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-162">This is the information that should be displayed by the **UserProfile** prefab.</span></span>

<span data-ttu-id="acbf5-163">成功したサインインの次のようになります:![成功したユーザー プロファイルの再生](../images/unity/correct-user-profile-play.gif)</span><span class="sxs-lookup"><span data-stu-id="acbf5-163">A successful sign-in will look like the following: ![successful userprofile play](../images/unity/correct-user-profile-play.gif)</span></span>

<span data-ttu-id="acbf5-164">Xbox Live への接続に、プロジェクトを構成していない場合は、正しく再生モードを入力すると、サインイン ボタンを無効にして、エラー メッセージを表示します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-164">If you have not configured your project to connect to Xbox Live properly entering play mode will disable the sign-in button and display an error message.</span></span>

<span data-ttu-id="acbf5-165">次は、無効な Xbox Live アプリ構成により失敗したサインインの例です。</span><span class="sxs-lookup"><span data-stu-id="acbf5-165">The following is an example of a failed sign-in due to a bad Xbox Live app configuration.</span></span>
<span data-ttu-id="acbf5-166">![ユーザー プロファイルの再生に失敗しました](../images/unity/flawed-user-profile-play.gif)</span><span class="sxs-lookup"><span data-stu-id="acbf5-166">![failed userprofile play](../images/unity/flawed-user-profile-play.gif)</span></span>

## <a name="scripting-sign-in"></a><span data-ttu-id="acbf5-167">サインイン スクリプト</span><span class="sxs-lookup"><span data-stu-id="acbf5-167">Scripting sign-in</span></span>

<span data-ttu-id="acbf5-168">使用する方法がわかったら、 **UserProfile** prefab しまうが最適にプレハブの機能を制御する基になるスクリプトを見ています。</span><span class="sxs-lookup"><span data-stu-id="acbf5-168">Now that you know how to use the **UserProfile** prefab it would be best to look at the underlying script that governs the functionality of the prefab.</span></span> <span data-ttu-id="acbf5-169">確認する場合、 **UserProfile**で、**インスペクター**があると表示されます、 **UserProfile.cs**スクリプトがアタッチされてです。</span><span class="sxs-lookup"><span data-stu-id="acbf5-169">If you look at the **UserProfile** in the **Inspector** you will see that it has a **UserProfile.cs** script attached to it.</span></span> <span data-ttu-id="acbf5-170">このスクリプトにはすべてのサインインを表示するには、プロファイル情報を読み込み、ユーザーがサインインする必要があります。</span><span class="sxs-lookup"><span data-stu-id="acbf5-170">This script has everything you need to sign in a user and load profile information you'd like to display on sign-in.</span></span> <span data-ttu-id="acbf5-171">ただし、(時間の経過と共に更新される可能性があります) を全体のプレハブを調べる代わりここ、Xbox Live ユーザーをサインインに必要なものを理解するためのコードのいくつかのサンプル行を確認します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-171">However, instead of looking at the entire prefab (which may be updated over time) we are going to look at a few sample lines of code to understand what is needed to sign-in an Xbox Live user.</span></span>

### <a name="the-xboxliveuser-class"></a><span data-ttu-id="acbf5-172">XboxLiveUser クラス</span><span class="sxs-lookup"><span data-stu-id="acbf5-172">The XboxLiveUser class</span></span>

<span data-ttu-id="acbf5-173">ユーザーをサインインに必要な呼び出しがラップされる、`XboxLiveUserInfo`クラス。</span><span class="sxs-lookup"><span data-stu-id="acbf5-173">The calls needed to sign-in a user are wrapped in the `XboxLiveUserInfo` class.</span></span> <span data-ttu-id="acbf5-174">**UserProfile.cs**スクリプトのインスタンスがあることが表示されます、`XboxLiveUserInfo`と呼ばれるクラス`XboxLiveUser`します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-174">In the **UserProfile.cs** script you will see that there is an instance of the `XboxLiveUserInfo` class called `XboxLiveUser`.</span></span> <span data-ttu-id="acbf5-175">私たちは、サンプル コードで同じ変数名を使用します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-175">We will use the same variable name in our example code.</span></span> <span data-ttu-id="acbf5-176">`XboxLiveUserInfo`クラスにはインスタンスが含まれています、`XboxLiveUser`と呼ばれるクラス`User`としてメンバー変数のいずれか。</span><span class="sxs-lookup"><span data-stu-id="acbf5-176">The `XboxLiveUserInfo` class contains an instance of the `XboxLiveUser` class called `User` as one of its member variables.</span></span> <span data-ttu-id="acbf5-177">`XboxLiveUser`クラスには、サインインに必要なサインイン機能が含まれています、`XboxLiveUser`します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-177">The `XboxLiveUser` class contains the sign-in functions required to sign in the `XboxLiveUser`.</span></span> <span data-ttu-id="acbf5-178">インスタンスを使用、`XboxLiveUser`クラス`User`サインインのゲーマータグ、Gamerpic、およびゲーマーなどのユーザーもそれらを説明する情報を取得したりします。</span><span class="sxs-lookup"><span data-stu-id="acbf5-178">You will use the instance of the `XboxLiveUser` class `User` to sign-in users as well as to gain information that describes them like their Gamertag, Gamerpic, and Gamerscore.</span></span> <span data-ttu-id="acbf5-179">これには、インスタンスを初期化する必要があります、`XboxLiveUserInfo`クラスし、その結果を使用して、`XboxLiveUserInfo.User`に呼び出し、サインインします。</span><span class="sxs-lookup"><span data-stu-id="acbf5-179">In order to do this you must initialize an instance of the `XboxLiveUserInfo` class and use the resulting `XboxLiveUserInfo.User` to call sign-in.</span></span>

### <a name="initialize-the-xboxliveuser"></a><span data-ttu-id="acbf5-180">XboxLiveUser を初期化します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-180">Initialize the XboxLiveUser</span></span>

<span data-ttu-id="acbf5-181">実際にそれらを Xbox Live にサインインする前に、最初の手順は、Xbox Live ユーザーを初期化します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-181">Initializing the Xbox Live User is the first step before actually signing them into Xbox Live.</span></span> <span data-ttu-id="acbf5-182">これは、コードの中で非常に単純を使用して、`XboxLiveUserInfo.Initialize()`関数。</span><span class="sxs-lookup"><span data-stu-id="acbf5-182">This is done very simply in code by using the `XboxLiveUserInfo.Initialize()` function.</span></span>
<span data-ttu-id="acbf5-183">サンプル コードで使用して、`XboxLiveUser`としてメンバー変数、`XboxLiveUserInfo`をインスタンス化と初期化のサインインを使用するようにします。</span><span class="sxs-lookup"><span data-stu-id="acbf5-183">In our example code we use the `XboxLiveUser` member variable as our `XboxLiveUserInfo` instance and initialize that to use for sign-in.</span></span>

```csharp
    void ButtonClickTask()
    {
        this.StartCoroutine(this.InitializeXboxLiveUser());
    }

    public IEnumerator InitializeXboxLiveUserAndCallSignIn()
    {
        // Disable the sign-in button
        SignInButton.interactable = false;

        this.XboxLiveUser.Initialize();

        //Wait until the Xbox User has been initialized to call SignInAsync()
        yield return new WaitUntil(() => this.XboxLiveUser != null && this.XboxLiveUser.User != null);
        this.StartCoroutine(this.SignInAsync());
    }
```

<span data-ttu-id="acbf5-184">このサンプル コードで検索とするが表示されます、`XboxLiveUserInfo.Initialize()`ボタン クリックに応答する関数が呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="acbf5-184">Looking at this sample code you will see that the `XboxLiveUserInfo.Initialize()` function is called in response to a button click.</span></span> <span data-ttu-id="acbf5-185">完全な**UserProfile.cs** prefab スクリプトに自動サインインを可能にするコードがあります、`XboxLiveUserInfo.Initialize()`操作が呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="acbf5-185">The full **UserProfile.cs** prefab script has code that allows for automatic sign-in where `XboxLiveUserInfo.Initialize()` is called without interaction.</span></span>
<span data-ttu-id="acbf5-186">`XboxLiveUserInfo.Initialize()`新しい関数が作成されます`XboxLiveUserInfo.User`に含まれているサインイン関数を呼び出すことができます、`XboxLiveUserInfo.User`クラス。</span><span class="sxs-lookup"><span data-stu-id="acbf5-186">The `XboxLiveUserInfo.Initialize()` function will create a new `XboxLiveUserInfo.User` which will allow us to call the sign-in functions contained in the `XboxLiveUserInfo.User` class.</span></span>

### <a name="call-sign-in"></a><span data-ttu-id="acbf5-187">呼び出しのサインイン</span><span class="sxs-lookup"><span data-stu-id="acbf5-187">Call Sign-In</span></span>

<span data-ttu-id="acbf5-188">XboxLiveUser が初期化された後を呼び出し、サインイン時間が。</span><span class="sxs-lookup"><span data-stu-id="acbf5-188">Once the XboxLiveUser has been initialized it's time to call sign-in.</span></span> <span data-ttu-id="acbf5-189">**UserProfile.cs**でというサインイン、 `SignInAsync()` UserProfile.cs の関数。</span><span class="sxs-lookup"><span data-stu-id="acbf5-189">In **UserProfile.cs** sign-in is called in the `SignInAsync()` function of UserProfile.cs.</span></span> <span data-ttu-id="acbf5-190">前の例では待つだけで、`XboxLiveUser`を呼び出す前に初期化、`SignInAsync()`関数。</span><span class="sxs-lookup"><span data-stu-id="acbf5-190">In the previous example code we simply wait for the `XboxLiveUser` to be initialized before calling the `SignInAsync()` function.</span></span>

> [!NOTE]
> <span data-ttu-id="acbf5-191">待機する必要がある、`XboxLiveUser`ため、サインインを呼び出す前に初期化される、`XboxLiveUser`が含まれています、`XboxLiveUser.User`に呼び出し、サインインに使用されるプロパティ。</span><span class="sxs-lookup"><span data-stu-id="acbf5-191">It is necessary to wait for the `XboxLiveUser` to be initialized before calling sign-in because the `XboxLiveUser` contains the `XboxLiveUser.User` property which is used to call sign-in.</span></span>

<span data-ttu-id="acbf5-192">**UserProfile.cs** 、`SignInAsync()`関数には、ユーザーがサインインするために使用する 2 つのサインイン機能が含まれています。</span><span class="sxs-lookup"><span data-stu-id="acbf5-192">In **UserProfile.cs** the `SignInAsync()` function contains two sign-in functions that may be used to sign in the user.</span></span> <span data-ttu-id="acbf5-193">`XboxLiveUser.User.SignInSilentlyAsync()` `XboxLiveUser.User.SignInAsync()`これらは、ユーザーをサインインする関数。</span><span class="sxs-lookup"><span data-stu-id="acbf5-193">`XboxLiveUser.User.SignInSilentlyAsync()` and `XboxLiveUser.User.SignInAsync()` These are the functions that sign the user in.</span></span> <span data-ttu-id="acbf5-194">`SignInAsync()`関数は、これらの関数を適切に使用する方法の良い例です。</span><span class="sxs-lookup"><span data-stu-id="acbf5-194">The `SignInAsync()` function is a good example of how to use these functions appropriately.</span></span> <span data-ttu-id="acbf5-195">次のコード サンプルでは、2 つのサインインに関数を呼び出すための 1 つの適切なメソッドを示します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-195">The following code sample shows one appropriate method for calling the two sign-in functions:</span></span>

```csharp
SignInStatus signInStatus;
TaskYieldInstruction<SignInResult> signInSilentlyTask = this.XboxLiveUser.User.SignInSilentlyAsync().AsCoroutine();
yield return signInSilentlyTask;

signInStatus = signInSilentlyTask.Result.Status;
if (signInSilentlyTask.Result.Status != SignInStatus.Success)
{
    TaskYieldInstruction<SignInResult> signInTask = this.XboxLiveUser.User.SignInAsync().AsCoroutine();
    yield return signInTask;

    signInStatus = signInTask.Result.Status;
}
```

<span data-ttu-id="acbf5-196">この例では、サインインの呼び出しの結果は、変数に格納されます`signInStatus`します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-196">In this example the results of the sign-in calls are stored in the variable `signInStatus`.</span></span> <span data-ttu-id="acbf5-197">これにより、またはサインインが成功したかどうかを確認し、それに従って動作することができます。</span><span class="sxs-lookup"><span data-stu-id="acbf5-197">This allows us to check whether or not the sign-in was successful and act accordingly.</span></span> <span data-ttu-id="acbf5-198">関数は、まずしようとサインインにサイレント モードでは、この例ではサイレント サインインが失敗すると、関数を呼び出して通常サインオン関数。</span><span class="sxs-lookup"><span data-stu-id="acbf5-198">In this example the function first attempts to sign-in silently, then if the silent sign in fails the function calls the normal sign in function.</span></span> <span data-ttu-id="acbf5-199">ユーザー サインインがサインインしている関数のいずれかに成功した呼び出しを作成したら。</span><span class="sxs-lookup"><span data-stu-id="acbf5-199">Once you have a successful call to one of the sign-in functions you will have signed in the user.</span></span> <span data-ttu-id="acbf5-200">使用できるように、`XboxLiveUser.User`を取得し、サインインしているユーザーに関する詳細を表示します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-200">You can now use the `XboxLiveUser.User` to obtain and display details about the signed in user.</span></span> <span data-ttu-id="acbf5-201">見て、`LoadProfileInfo()`関数**UserProfile.cs**を使用する方法の例については、`XboxLiveUser.User`サインインしているユーザーに関する情報を表示します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-201">Take a look at the `LoadProfileInfo()` function in **UserProfile.cs** for an example of how to use the `XboxLiveUser.User` to display information about a signed in user.</span></span>

## <a name="build-and-test-sign-in"></a><span data-ttu-id="acbf5-202">ビルドし、テストにサインイン</span><span class="sxs-lookup"><span data-stu-id="acbf5-202">Build and test sign-in</span></span>

<span data-ttu-id="acbf5-203">エディターでタイトルを実行しているとき、Xbox Live の機能を使おうとすると仮のデータが表示されます。</span><span class="sxs-lookup"><span data-stu-id="acbf5-203">When running your title in the editor, you will see fake data when you try to use Xbox Live functionality.</span></span> <span data-ttu-id="acbf5-204">で実際のプロファイルを使用してサインインして、タイトルで Xbox Live の機能をテストするには、UWP ソリューションを構築し、Visual Studio で実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="acbf5-204">To sign in with a real profile and test out Xbox Live functionality in your title, you'll need to build a UWP solution and run it in Visual Studio.</span></span>  <span data-ttu-id="acbf5-205">次の手順では、Unity での UWP プロジェクトをビルドできます。</span><span class="sxs-lookup"><span data-stu-id="acbf5-205">You can build the UWP project in Unity by following these steps:</span></span>

1. <span data-ttu-id="acbf5-206">開く、 **Build Settings**ウィンドウを選択して**ファイル** > **Build Settings**します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-206">Open the **Build Settings** window by selecting **File** > **Build Settings**.</span></span>
2. <span data-ttu-id="acbf5-207">すべての下で、ビルドに含めるシーンを追加、 **Scenes In Build**セクション。</span><span class="sxs-lookup"><span data-stu-id="acbf5-207">Add all of the scenes that you want to include in your build under the **Scenes In Build** section.</span></span>
3. <span data-ttu-id="acbf5-208">切り替えて、**ユニバーサル Windows プラットフォーム**を選択して**ユニバーサル Windows プラットフォーム\*\*\*\*[プラットフォーム]** をクリック**スイッチ プラットフォーム**.</span><span class="sxs-lookup"><span data-stu-id="acbf5-208">Switch to the **Universal Windows Platform** by selecting **Universal Windows Platform** under **Platform** and clicking **Switch Platform**.</span></span>
4. <span data-ttu-id="acbf5-209">設定**SDK**に**10.0.15063.0**以上。</span><span class="sxs-lookup"><span data-stu-id="acbf5-209">Set **SDK** to **10.0.15063.0** or greater.</span></span>
5. <span data-ttu-id="acbf5-210">スクリプトのデバッグ チェックを有効にする**UnityC#プロジェクト**します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-210">To enable script debugging check **Unity C# Projects**.</span></span>
6. <span data-ttu-id="acbf5-211">クリックして**ビルド**し、プロジェクトの場所を指定します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-211">Click **Build** and specify the location of the project.</span></span>

<span data-ttu-id="acbf5-212">ビルドが完了すると、Unity には、Visual Studio での実行に必要になる新しい UWP ソリューション ファイルが生成が。</span><span class="sxs-lookup"><span data-stu-id="acbf5-212">Once the build has finished, Unity will have generated a new UWP solution file which you will need to run in Visual Studio:</span></span>

1. <span data-ttu-id="acbf5-213">指定したフォルダーを開きます **&lt;ProjectName&gt;.sln** Visual Studio でします。</span><span class="sxs-lookup"><span data-stu-id="acbf5-213">In the folder that you specified, open **&lt;ProjectName&gt;.sln** in Visual Studio.</span></span>
2. <span data-ttu-id="acbf5-214">上部にあるツールバーで選択**x64**を展開し、**ローカル マシン**します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-214">In the toolbar at the top, select **x64** and deploy to the **Local Machine**.</span></span>

<span data-ttu-id="acbf5-215">有効にした場合**スクリプトのデバッグ**Unity から UWP ソリューションを構築したときに、スクリプトに置かれます、**アセンブリ CSharp (ユニバーサル Windows)** プロジェクト。</span><span class="sxs-lookup"><span data-stu-id="acbf5-215">If you enabled **script debugging** when you built the UWP solution from Unity, then your scripts will be located under the **Assembly-CSharp (Universal Windows)** project.</span></span>

> [!NOTE]
> <span data-ttu-id="acbf5-216">Visual Studio のビルドを使用して、実際のデータを使用して、ゲームをテストする、前に以下の[このチェックリスト](test-visual-studio-build.md)タイトルが Xbox Live サービスにアクセスできるようにします。</span><span class="sxs-lookup"><span data-stu-id="acbf5-216">Before using your Visual Studio build to test your game with real data, follow [this checklist](test-visual-studio-build.md) to help ensure your title will be able to access the Xbox Live service.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="acbf5-217">トラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="acbf5-217">Troubleshooting</span></span>

<span data-ttu-id="acbf5-218">発生した場合、Xbox Live へのサインインの問題では、読み取りを再試行してください[トラブルシューティング Xbox Live サインイン](../using-xbox-live/troubleshooting/troubleshooting-sign-in.md)します。</span><span class="sxs-lookup"><span data-stu-id="acbf5-218">If you're having issues signing in to Xbox Live try reading [Troubleshooting Xbox Live sign-in](../using-xbox-live/troubleshooting/troubleshooting-sign-in.md).</span></span>
