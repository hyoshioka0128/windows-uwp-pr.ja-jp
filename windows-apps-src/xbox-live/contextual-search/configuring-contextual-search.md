---
title: コンテキスト検索の構成
author: KevinAsgari
description: ゲーム クリップやゲーム配信にタグ付けするようにコンテキスト検索を構成する方法について説明します。
ms.assetid: 6cb2cb10-811a-4b20-9b9b-a3fc59a033c2
ms.author: kevinasg
ms.date: 04/04/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: Xbox Live, Xbox, ゲーム, UWP, Windows 10, Xbox One, サービス構成, コンテキスト検索, ゲーム クリップ, 配信
ms.localizationpriority: medium
ms.openlocfilehash: 79197dc7db3f15aba5fc9d494a5e8408878f0dba
ms.sourcegitcommit: 68fcac3288d5698a13dbcbd57f51b30592f24860
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/19/2018
ms.locfileid: "4058739"
---
# <a name="configuring-contextual-search"></a><span data-ttu-id="bc29f-104">コンテキスト検索の構成</span><span class="sxs-lookup"><span data-stu-id="bc29f-104">Configuring Contextual Search</span></span>

## <a name="configuration-info"></a><span data-ttu-id="bc29f-105">構成情報</span><span class="sxs-lookup"><span data-stu-id="bc29f-105">Configuration Info</span></span>

### <a name="designing-your-data"></a><span data-ttu-id="bc29f-106">データの設計</span><span class="sxs-lookup"><span data-stu-id="bc29f-106">Designing Your Data</span></span>
<span data-ttu-id="bc29f-107">コンテキスト検索に対応するようにタイトルを構成するときは、タイトルを独特なものにする要素について検討することが重要です。</span><span class="sxs-lookup"><span data-stu-id="bc29f-107">When configuring your title for Contextual Search, it's important to think about the things that make your title unique.</span></span>  <span data-ttu-id="bc29f-108">ユーザーがビデオ コンテンツを探している場合、真っ先に検索しようとするのは何でしょうか。</span><span class="sxs-lookup"><span data-stu-id="bc29f-108">If a user is looking for video content, what would be top of mind to search for?</span></span>  <span data-ttu-id="bc29f-109">データの粒度をどのくらいにする必要があるでしょうか。</span><span class="sxs-lookup"><span data-stu-id="bc29f-109">How granular does the data need to be?</span></span>

<span data-ttu-id="bc29f-110">コンテキスト検索はコンテンツのフィルター処理と並べ替えの両方の機能をサポートします。そのため、メタデータはこれらの検索構造を反映していて、広い対象範囲を保証するものである必要があります。</span><span class="sxs-lookup"><span data-stu-id="bc29f-110">Contextual Search supports the ability to both filter and sort content, so your metadata should reflect these search constructs to ensure great coverage.</span></span>  <span data-ttu-id="bc29f-111">ゲームのデータを 2 つの軸で考えることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="bc29f-111">A good rules of thumb is to think of your game's data in two pivots:</span></span>
1. <span data-ttu-id="bc29f-112">ゲームの状態: </span><span class="sxs-lookup"><span data-stu-id="bc29f-112">Game State - ex.</span></span>  <span data-ttu-id="bc29f-113">レベル、キャラクター、武器、マップ、ロール、チェックポイント/ストーリー ポイント、DLC など</span><span class="sxs-lookup"><span data-stu-id="bc29f-113">Level, Character, Weapon, Map, Role, Checkpoint/Story Point, DLC</span></span>
2. <span data-ttu-id="bc29f-114">ユーザー スキル: </span><span class="sxs-lookup"><span data-stu-id="bc29f-114">User Skill - ex.</span></span> <span data-ttu-id="bc29f-115">K/D 比率、名声、ランク、スピード ラン タイムなど</span><span class="sxs-lookup"><span data-stu-id="bc29f-115">K/D Ratio, Prestige, Rank, Speed Run Time</span></span>

<span data-ttu-id="bc29f-116">最初の軸はコンテンツのフィルター処理に適しており、2 番目の軸は並べ替えに適しています。</span><span class="sxs-lookup"><span data-stu-id="bc29f-116">The first pivot is great for filtering content, the second is great for sorting.</span></span>  <span data-ttu-id="bc29f-117">また、表示されるコンテンツの種類に応じて、統計粒度のレベルを変えることが重要です。</span><span class="sxs-lookup"><span data-stu-id="bc29f-117">Additionally, depending on the type of content being surfaced, varying levels of stat granularity are important.</span></span>  <span data-ttu-id="bc29f-118">配信の場合、どのような時点でもアクティブな配信の数は限られていることを考慮すると、粒度の低いデータの方が検索が成功する可能性は確実に高くなります。</span><span class="sxs-lookup"><span data-stu-id="bc29f-118">For broadcasts, assuming there is a limited number of active broadcasts at any given time, lower granularity data will ensure a higher likelihood of a successful search.</span></span>  <span data-ttu-id="bc29f-119">ゲーム クリップの場合、クリップの数は増え続けるので、より粒度の高いデータの方がより正確な結果が保証されます。</span><span class="sxs-lookup"><span data-stu-id="bc29f-119">For game clips, the number continually increases, so finer granularity data will ensure more accurate results.</span></span>

<span data-ttu-id="bc29f-120">多くの場合、このようなデータは、リッチ プレゼンスやヒーロー情報などの Xbox Live 機能のために作成済みであることから、コンテキスト検索の構成は、既に完了している作業の成果を活用する絶好の機会です。</span><span class="sxs-lookup"><span data-stu-id="bc29f-120">It's quite likely that you already have this data created for Xbox Live features like Rich Presence or Hero Stats, so this is a great opportunity to leverage already completed work.</span></span>

<span data-ttu-id="bc29f-121">統計を使用してコンテンツをフィルター処理する場合は、コンテキスト検索のすべての統計に対していつでもクエリを実行できるようにしておくことが重要です。</span><span class="sxs-lookup"><span data-stu-id="bc29f-121">If you are using stats to filter content, be aware that all Contextual Search stats are available to query at any time.</span></span>  <span data-ttu-id="bc29f-122">それに応じて、このコンテキスト検索をサポートするようにイベント処理を設計してください。</span><span class="sxs-lookup"><span data-stu-id="bc29f-122">You should design your eventing accordingly to support this.</span></span>

<span data-ttu-id="bc29f-123">たとえば、SinglePlayerMap や MultiplayerMap のような統計を使用してコンテンツをフィルター処理する場合、プレイヤーは一度に 1 つのマップにしか存在できません。</span><span class="sxs-lookup"><span data-stu-id="bc29f-123">For example, if you are using stats like SinglePlayerMap and MultiplayerMap to filter content, the player is only going to be in one of them at once.</span></span>  <span data-ttu-id="bc29f-124">ただし、どちらの値もサービスからいつでもクエリすることができます。</span><span class="sxs-lookup"><span data-stu-id="bc29f-124">However, both values will be available to query from the service at any time.</span></span>  <span data-ttu-id="bc29f-125">また、一方を設定したら、もう一方をクリアすることが重要です。</span><span class="sxs-lookup"><span data-stu-id="bc29f-125">It’s important that as you set one, you clear out the other.</span></span>  <span data-ttu-id="bc29f-126">文字列ベースの統計については、空の文字列が適しています (UI 構成でオプションとしてその文字列を含めないでください)。</span><span class="sxs-lookup"><span data-stu-id="bc29f-126">For string based stats, an empty string is great (make sure not to include that in your UI configuration as an option).</span></span>

### <a name="configuring-a-stat-for-contextual-search"></a><span data-ttu-id="bc29f-127">コンテキスト検索のための統計の構成</span><span class="sxs-lookup"><span data-stu-id="bc29f-127">Configuring a Stat for Contextual Search</span></span>
<span data-ttu-id="bc29f-128">タグ付けに使用するイベントや統計の設定が済んでいれば、コンテキスト検索のためにタイトルを構成する作業は簡単です。</span><span class="sxs-lookup"><span data-stu-id="bc29f-128">Configuring your title for Contextual Search is easy once you've set up the Events and Stats that power the tagging.</span></span>  <span data-ttu-id="bc29f-129">既によくご存知ない場合は、コンテキスト検索の設定では、その他の既存の XDP または Windows デベロッパー センターのドキュメントを参照してください。</span><span class="sxs-lookup"><span data-stu-id="bc29f-129">See other existing XDP or Windows Dev Center documentation on setting up Contextual Search if you're not already familiar.</span></span>

![](../images/contextual_search/config02.png)

<span data-ttu-id="bc29f-130">上の画像は、XDP のメインのサービス構成部分で [Contextual Search] (コンテキスト検索) タイルをクリックした後のメイン ページの例です。</span><span class="sxs-lookup"><span data-stu-id="bc29f-130">The image above is an example of the main page after you click the Contextual Search tile in the main Service configuration portion of XDP.</span></span>

<span data-ttu-id="bc29f-131">このページを初めて表示する場合でも、コンテキスト検索のために構成済みの統計が表示されていることがあります。</span><span class="sxs-lookup"><span data-stu-id="bc29f-131">Even if this is the first time you've visited this page, it's possible that you will see stats already configured for Contextual Search.</span></span>  <span data-ttu-id="bc29f-132">これは、すべてのヒーロー情報がコンテキスト検索のために自動的に設定されるためです。</span><span class="sxs-lookup"><span data-stu-id="bc29f-132">This is because all your Hero Stats are automatically set up for Contextual Search.</span></span> <span data-ttu-id="bc29f-133">これらのヒーロー情報は、構成に保持しておく必要はありませんが、通常は並べ替えに適しています (また、既に自動的に完了しています)。</span><span class="sxs-lookup"><span data-stu-id="bc29f-133">You're not required to keep these Hero stats in your configuration, but they are generally excellent for sorting (and already done for you).</span></span>

<span data-ttu-id="bc29f-134">現在、コンテキスト検索のために構成できる統計インスタンスの最大数は 10 です。</span><span class="sxs-lookup"><span data-stu-id="bc29f-134">Presently, the maximum number of stat instances you can configure for Contextual Search is 10.</span></span>

<span data-ttu-id="bc29f-135">このページでは、それぞれの統計は次のような形式で表されます: 優先度 - 表示名 (統計インスタンス名)</span><span class="sxs-lookup"><span data-stu-id="bc29f-135">On this page, each of the stats is represented in the following manner: Priority - Display Name (Stat Instance Name)</span></span>

<span data-ttu-id="bc29f-136">これらの各項目は次のセクションで詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="bc29f-136">Each of these will be explained in more detail in the next section.</span></span>

![](../images/contextual_search/config01.png)

<span data-ttu-id="bc29f-137">上の画像は、コンテキスト検索の統計を新規作成したり、既存の統計を編集したりする場合に選ぶと表示される画面です。</span><span class="sxs-lookup"><span data-stu-id="bc29f-137">The above image is the screen that will appear if you choose to create a new Contextual Search stat or edit and existing one.</span></span>

<span data-ttu-id="bc29f-138">コンテキスト検索の統計を正しく構成するには、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="bc29f-138">To successfully configure a stat for Contextual Search, complete the following steps:</span></span>
1. <span data-ttu-id="bc29f-139">統計インスタンスを選択します。</span><span class="sxs-lookup"><span data-stu-id="bc29f-139">Choose your stat instance.</span></span>

  ![](../images/contextual_search/config03.png)

  <span data-ttu-id="bc29f-140">統計インスタンスのみがサポートされていることに注意してください。統計テンプレートは使用できません。</span><span class="sxs-lookup"><span data-stu-id="bc29f-140">Please note that only stat instances are supported - stat templates are not accepted.</span></span>  <span data-ttu-id="bc29f-141">可視性 (XDP または Windows デベロッパー センターの [統計] 部分で構成されている) 統計インスタンスに対して設定した注意する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bc29f-141">You should also be aware of the visibility you've set for the stat instance (configured in the Stats portion of XDP or Windows Dev Center).</span></span>  <span data-ttu-id="bc29f-142">**[開く]** とマークされた統計のみがサード パーティー エクスペリエンスに表示されます。</span><span class="sxs-lookup"><span data-stu-id="bc29f-142">Only stats that are marked as **Open** will appear in third party experiences.</span></span>

2. <span data-ttu-id="bc29f-143">統計の優先度 ([Priority]) を選択します。</span><span class="sxs-lookup"><span data-stu-id="bc29f-143">Choose your stat Priority.</span></span> <span data-ttu-id="bc29f-144">これは、検索エクスペリエンス/アルゴリズムにおけるこの統計の重要性を、他の統計との相対値で示すための方法です。</span><span class="sxs-lookup"><span data-stu-id="bc29f-144">This is a way to delineate the importance of this stat relative to others for search experiences/algorithms.</span></span>  <span data-ttu-id="bc29f-145">許容値は 1 ～ 10 です (1 が最高)。</span><span class="sxs-lookup"><span data-stu-id="bc29f-145">The acceptable values are 1-10 (1 is the highest).</span></span>  <span data-ttu-id="bc29f-146">この値を 0 または空白のままにすると無視されます。</span><span class="sxs-lookup"><span data-stu-id="bc29f-146">Leave as 0 or blank for this to be ignored.</span></span>
3. <span data-ttu-id="bc29f-147">表示名 ([Display Name]) を追加します。</span><span class="sxs-lookup"><span data-stu-id="bc29f-147">Add your Display Name.</span></span>  <span data-ttu-id="bc29f-148">これはローカライズ可能な文字列で、エンド ユーザーに対して表示されます。</span><span class="sxs-lookup"><span data-stu-id="bc29f-148">This is a localizable string that is exposed to the end user.</span></span>
4. <span data-ttu-id="bc29f-149">この統計を結果のフィルター処理または並べ替えに使用するかどうかを、チェック ボックスで選択します。</span><span class="sxs-lookup"><span data-stu-id="bc29f-149">Check whether you will use this stat to Filter or Sort the results.</span></span>  <span data-ttu-id="bc29f-150">一部のインスタンスでは両方のチェック ボックスをオンにすることができます (統計の値が数値であり、定義した範囲に収まっている場合)。</span><span class="sxs-lookup"><span data-stu-id="bc29f-150">You can check both in certain instances (if the value of the stat is a number - preferably in a Defined Range).</span></span>
5. <span data-ttu-id="bc29f-151">統計値の表現方法を選択します。</span><span class="sxs-lookup"><span data-stu-id="bc29f-151">Choose how your stat value is represented.</span></span>  <span data-ttu-id="bc29f-152">この場合、3 つのオプションがあります。</span><span class="sxs-lookup"><span data-stu-id="bc29f-152">In the case you have 3 options.</span></span>
   * <span data-ttu-id="bc29f-153">[Raw Value] (未処理の値) - 統計はそのまま表され、範囲の要件は適用されません。</span><span class="sxs-lookup"><span data-stu-id="bc29f-153">Raw Value - The stat is represented as is and has no range requirements.</span></span>  <span data-ttu-id="bc29f-154">並べ替えに使用するのに最適です。</span><span class="sxs-lookup"><span data-stu-id="bc29f-154">This is best used for sorting.</span></span>
   * <span data-ttu-id="bc29f-155">[Set] (セット) - 値は個別のローカライズ可能な文字列にマップされます。</span><span class="sxs-lookup"><span data-stu-id="bc29f-155">Set - The values are mapped to individual localizable strings.</span></span>  <span data-ttu-id="bc29f-156">フィルター処理に使用するのに最適です。</span><span class="sxs-lookup"><span data-stu-id="bc29f-156">This is best used for filtering.</span></span>
   * <span data-ttu-id="bc29f-157">[Range] (範囲) - 値は最小および最大の範囲内に収まります。</span><span class="sxs-lookup"><span data-stu-id="bc29f-157">Range - The values fall within a min and max range.</span></span>  <span data-ttu-id="bc29f-158">この種類の表現方法は、データに基づいたフィルター処理と並べ替えの両方を行いたい場合に適しています。</span><span class="sxs-lookup"><span data-stu-id="bc29f-158">This type is great if you want to filter and sort from this data.</span></span>

#### <a name="explaining-sets"></a><span data-ttu-id="bc29f-159">セットの説明</span><span class="sxs-lookup"><span data-stu-id="bc29f-159">Explaining Sets</span></span>
<span data-ttu-id="bc29f-160">セットとは、潜在的な統計値を、エンド ユーザーに表示できるローカライズ可能な文字列にマップする方法のことです。</span><span class="sxs-lookup"><span data-stu-id="bc29f-160">If you aren't familiar with Sets, they are a way to map potential stat values to localizable strings that can be exposed to an end user.</span></span>  <span data-ttu-id="bc29f-161">セットは、フィルター処理に使用するコンテキスト検索の統計にとって非常に重要です。</span><span class="sxs-lookup"><span data-stu-id="bc29f-161">They are very important to the Contextual Search stats you want to filter with.</span></span>

<span data-ttu-id="bc29f-162">{% raw %} たとえば、SinglePlayerMap という整数の統計があるとします。</span><span class="sxs-lookup"><span data-stu-id="bc29f-162">{% raw %} As an examples, let’s say I have an integer Stat called SinglePlayerMap.</span></span>  <span data-ttu-id="bc29f-163">一連の数値をエンド ユーザーに提示しても意味がありません。</span><span class="sxs-lookup"><span data-stu-id="bc29f-163">Showing a bunch of numbers to end users doesn’t make any sense.</span></span>  <span data-ttu-id="bc29f-164">代わりに、```{{0, “Blood Gulch”}, {1, “Lockout”}, {2, “Zanzibar”}}``` のようなマッピングのセットを作成します。</span><span class="sxs-lookup"><span data-stu-id="bc29f-164">So instead, I create a Set of mappings like ```{{0, “Blood Gulch”}, {1, “Lockout”}, {2, “Zanzibar”}}```.</span></span>  <span data-ttu-id="bc29f-165">ユーザーには文字列が表示されますが、開発側はコンテキスト検索の検索クエリの一部として数値を使用します。</span><span class="sxs-lookup"><span data-stu-id="bc29f-165">The user will see the string, but we use the number as part of the Contextual Search search-query.</span></span>  <span data-ttu-id="bc29f-166">セットでは、整数または文字列をローカライズされた文字列にマップすることができます。</span><span class="sxs-lookup"><span data-stu-id="bc29f-166">You can map integers or strings to localized strings in Sets.</span></span>
<span data-ttu-id="bc29f-167">{% endraw %}</span><span class="sxs-lookup"><span data-stu-id="bc29f-167">{% endraw %}</span></span>

### <a name="updating-your-contextual-search-document"></a><span data-ttu-id="bc29f-168">コンテキスト検索ドキュメントの更新</span><span class="sxs-lookup"><span data-stu-id="bc29f-168">Updating Your Contextual Search Document</span></span>
<span data-ttu-id="bc29f-169">現時点では配信 (揮発性のデータ) のみがサポートされているため、現状ではコンテキスト検索ドキュメント上で統計を容易に変更できます。</span><span class="sxs-lookup"><span data-stu-id="bc29f-169">At present, you can easily change the stats on your Contextual Search document as we only support broadcasting at the moment (which is volatile data).</span></span>  <span data-ttu-id="bc29f-170">(2015 年 9 月に) ゲーム クリップのタグ付けのサポートが開始された後は、統計を追加または削除する場合に、既にインデックス付けされているクリップに影響を及ぼすことになります。</span><span class="sxs-lookup"><span data-stu-id="bc29f-170">Once we begin to support game clip tagging (September 2015), if you decided to add or remove stats, you will be impacting clips that have already been indexed.</span></span>  <span data-ttu-id="bc29f-171">新しい状態を追加する場合、変更が有効になった後に作成された配信やゲーム クリップのみがタグ付けされ、新しい状態を使用したクエリで、新しくタグ付けされたものが結果にh表示されます。以前のゲーム クリップはこの状態に対してクエリ可能になりません。コンテキスト検索ドキュメントから、状態を削除すると、ゲーム クリップに関連づけられた以前の状態は意味がなくなり、結果が返りません。</span><span class="sxs-lookup"><span data-stu-id="bc29f-171">If you add a new stat, only game clips and broadcasts created after the change goes into effect will be tagged and surfaced in queries using the new stat. Old game clips will not be query-able from this stat. If you remove a stat from the Contextual Search document, the old stat attached to the game clip will be useless and will not be returned.</span></span>
