---
title: "Xbox Integrated Multiplayer の概要"
author: KevinAsgari
description: "マルチプレイヤー、ネットワーキング、チャットに関する Xbox Live ゲーム用オール イン ワン ソリューションである Xbox Integrated Multiplayer (XIM) について説明します。"
ms.assetid: edbb28e6-1b6c-4f12-a9c6-fa8961de99a8
ms.author: kevinasg
ms.date: 04-04-2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: "Xbox Live, Xbox, ゲーム, UWP, Windows 10, Xbox One"
ms.openlocfilehash: 17e50c808a95ee3cab2f0d35342341d425534ab3
ms.sourcegitcommit: 90fbdc0e25e0dff40c571d6687143dd7e16ab8a8
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/06/2017
---
# <a name="xbox-integrated-multiplayer-overview"></a><span data-ttu-id="a95e4-104">Xbox Integrated Multiplayer の概要</span><span class="sxs-lookup"><span data-stu-id="a95e4-104">Xbox Integrated Multiplayer overview</span></span>

 <span data-ttu-id="a95e4-105">Xbox Integrated Multiplayer (XIM) は、Xbox Live サービスの機能を使用してマルチプレイヤー向けのリアルタイム ネットワーキングおよびチャット コミュニケーションをゲームに簡単に追加できる自己完結型のインターフェイスです。</span><span class="sxs-lookup"><span data-stu-id="a95e4-105">Xbox Integrated Multiplayer (XIM) is a self-contained interface for easily adding multiplayer real-time networking and chat communication to your game through the power of Xbox Live services.</span></span> <span data-ttu-id="a95e4-106">いくつかの重要な概念があります。</span><span class="sxs-lookup"><span data-stu-id="a95e4-106">It's oriented around a few key concepts:</span></span>

 - <span data-ttu-id="a95e4-107">**XIM ネットワーク** - 特定のマルチプレイヤー エクスペリエンスに参加している相互接続されたユーザーのセットの論理表現、およびそのコレクションを記述する基本状態。</span><span class="sxs-lookup"><span data-stu-id="a95e4-107">**XIM network** - A logical representation of a set of interconnected users participating in a particular multiplayer experience, as well as basic state describing that collection.</span></span> <span data-ttu-id="a95e4-108">参加者は一度に 1 つの XIM ネットワークにだけ参加できますが、概念的な XIM ネットワークの間をシームレスに移動できます。</span><span class="sxs-lookup"><span data-stu-id="a95e4-108">Participants can be in only one XIM network at a time, but can move seamlessly from one conceptual XIM network to another.</span></span>
 - `xim_player` <span data-ttu-id="a95e4-109">- ローカルまたはリモート デバイスにサインインして XIM ネットワークに参加している個別ユーザーを表すオブジェクト。</span><span class="sxs-lookup"><span data-stu-id="a95e4-109">- An object representing an individual human user signed in on a local or remote device and participating in a XIM network.</span></span> <span data-ttu-id="a95e4-110">1 人の物理ユーザーが XIM ネットワークに参加し、いったん退出してから、再び同じ XIM ネットワークに参加した場合は、2 人の異なるプレイヤー インスタンスと見なされます。</span><span class="sxs-lookup"><span data-stu-id="a95e4-110">A single physical user that joins, leaves, and then rejoins the same XIM network is considered to be two separate player instances.</span></span>
 - `xim_authority` <span data-ttu-id="a95e4-111">- XIM ネットワーク内ですべての参加者に対するゲーム固有の状態の一貫したビューを管理する権限と責任を持つ単一のエンティティを表すオブジェクト。</span><span class="sxs-lookup"><span data-stu-id="a95e4-111">- An object representing a single entity with the permission for and responsibility of managing a consistent view of game-specific state within a XIM network for all participants.</span></span> <span data-ttu-id="a95e4-112">このオブジェクトの使用はオプションです。</span><span class="sxs-lookup"><span data-stu-id="a95e4-112">The use of this object is optional.</span></span> <span data-ttu-id="a95e4-113">このソフトウェア リリースでは現在、このオブジェクトの機能を利用できません。</span><span class="sxs-lookup"><span data-stu-id="a95e4-113">Its functionality is also currently not available in this software release.</span></span>
 - `xim_state_change` <span data-ttu-id="a95e4-114">- XIM ネットワークのいくつかの側面での非同期の変更に関するローカル デバイスに対する通知を表す構造体。</span><span class="sxs-lookup"><span data-stu-id="a95e4-114">- A structure representing a notification to the local device regarding an asynchronous change in some aspect of the XIM network.</span></span>
 - `xim::start/finish_processing_state_changes` <span data-ttu-id="a95e4-115">- 非同期操作を実行し、処理する結果を `xim_state_change` 構造体の形式で取得して、処理の完了後に関連するリソースを解放するために、アプリのすべての UI フレームによって呼び出されるメソッドのペア。</span><span class="sxs-lookup"><span data-stu-id="a95e4-115">- The pair of methods called by the app every UI frame to perform asynchronous operations, to retrieve results to be handled in the form of `xim_state_change` structures, and then to free the associated resources when finished.</span></span>
 - <span data-ttu-id="a95e4-116">**マッチメイキング** - 既存のソーシャル関係を必要としないで XIM ネットワークに参加するために同じ関心またはスキル レベルを持つ新しいリモート プレイヤーを発見するオプションのプロセス。</span><span class="sxs-lookup"><span data-stu-id="a95e4-116">**Matchmaking** - The optional process of discovering additional remote players with similar interests or skill levels to participate in a XIM network without requiring an existing social relationship.</span></span>

<span data-ttu-id="a95e4-117">概念としては、アプリはライブラリを使用してローカル デバイス上の一連のユーザーを構成し、新しいプレイヤーとして XIM ネットワークに移動します。</span><span class="sxs-lookup"><span data-stu-id="a95e4-117">At a very high level, the app uses the library to configure a set of users on the local device to be moved into a XIM network as new players.</span></span> <span data-ttu-id="a95e4-118">リモート デバイスのアプリ インスタンスは独自のユーザーで同じことを行い、それぞれがすべての UI フレームで処理状態の変更を継続的に開始および終了するため、すべての参加インスタンスに `xim_state_change` の更新が提供されます。この更新には、その XIM ネットワークに参加するローカルおよびリモートの `xim_player` が記述されています。</span><span class="sxs-lookup"><span data-stu-id="a95e4-118">As app instances on remote devices do the same thing with their own users, and each continually start + finish processing state changes every UI frame, every participating instance is provided `xim_state_change` updates describing the local and remote `xim_player`s joining that XIM network.</span></span>

<span data-ttu-id="a95e4-119">XIM ネットワーク内では、アプリは、アバター移動の更新などの、独自のゲーム固有データ メッセージを送信できます。</span><span class="sxs-lookup"><span data-stu-id="a95e4-119">Within the XIM network, the app can send its own game-specific data messages, such as avatar movement updates.</span></span> <span data-ttu-id="a95e4-120">これらは、他のプレイヤーを対象にすることも、(最善のネットワーク品質、安定性、プレイヤーの評判、他の要因に基づいて) 参加デバイスの 1 つに存在するように自動的に選択された `xim_authority` を対象にすることもできます。その `xim_authority` デバイス上のアプリは、プレイヤーにメッセージを返送できます。これらのメッセージは通常、ネットワークの効率と競合を調整するためにマージされます。</span><span class="sxs-lookup"><span data-stu-id="a95e4-120">These may target other players, or a `xim_authority` automatically selected to reside on one of the participating devices (based on the best network quality, stability, player reputation and other factors) so the app on that `xim_authority` device can send messages back out to players, typically merging them for network efficiency and to arbitrate conflicts.</span></span> <span data-ttu-id="a95e4-121">受信されたすべてのメッセージは、意図されるソースとローカル宛先を示す `xim_state_change` としてアプリに配信されます。</span><span class="sxs-lookup"><span data-stu-id="a95e4-121">All received messages are delivered to the app as a `xim_state_change` indicating the intended source and local destination(s).</span></span>

<span data-ttu-id="a95e4-122">プライバシー設定とアプリの構成で許可されるすべてのプレイヤー間では、音声とテキストのチャット通信も自動的に提供されます。</span><span class="sxs-lookup"><span data-stu-id="a95e4-122">Voice and text chat communication is also automatically provided among all players where privacy settings and app configuration allow it.</span></span> <span data-ttu-id="a95e4-123">音声からテキストまたはテキストから音声の変換を有効にしているプレイヤーの場合は、XIM は、この変換を透過的に実行して受信音声を表すチャット テキスト メッセージを配信し、送信チャット テキスト メッセージに対する合成された音声を再生します。</span><span class="sxs-lookup"><span data-stu-id="a95e4-123">For players that have enabled speech-to-text or text-to-speech conversion, XIM will transparently perform this translation to deliver chat text messages representing incoming speech audio and play synthesized speech audio for outgoing chat text messages, respectively.</span></span>

<span data-ttu-id="a95e4-124">プレイヤーが XIM ネットワークへの参加を停止すると (正常終了またはネットワーク接続の問題のため)、`xim_player` が退出したことを示す `xim_state_change` 更新がすべてのアプリ インスタンスに提供されます。</span><span class="sxs-lookup"><span data-stu-id="a95e4-124">When a player stops participating in the XIM network (gracefully or due to network connectivity problems), `xim_state_change` updates are provided to all app instances indicating the `xim_player` has left.</span></span> <span data-ttu-id="a95e4-125">`xim_authority` として選択されたデバイスが退出になると、権限の移動を開始することが、すべてのアプリ インスタンスに同じように通知されます。また、再同期用の代替 `xim_authority` にデータ バッファーをオプションで提供することで、ゲーム固有状態の "調整" が開始されます。</span><span class="sxs-lookup"><span data-stu-id="a95e4-125">If the device selected to be the `xim_authority` departs, the app instances are similarly informed that the authority has begun moving and to start "reconciling" any game-specific state by optionally providing a data buffer to the replacement `xim_authority` for resynchronization purposes.</span></span> <span data-ttu-id="a95e4-126">新しい権限は、すべてのプレイヤーからの必要な調整データを解釈し、"調整された" データ バッファーをすべてのプレイヤーに提供して、権限の移動と再同期プロセスを完了できます。</span><span class="sxs-lookup"><span data-stu-id="a95e4-126">The new authority can interpret the reconciliation data from all players as desired and in turn provide a "reconciled" data buffer back to all players to complete the authority move and resynchronization process.</span></span> <span data-ttu-id="a95e4-127">プレイヤーが XIM ネットワークに参加するときに、追加コードなしで権限によって現在の権限に関するゲームの状態を提供できるように、新しく参加するデバイスにも同じ基本調整手順が提供されます。</span><span class="sxs-lookup"><span data-stu-id="a95e4-127">The same basic reconciliation procedure is also offered to newly participating devices so that the authority can conveniently provide them the current authoritative game state when their players join the XIM network, with no extra code.</span></span> <span data-ttu-id="a95e4-128">権限の状態の変化はこのソフトウェア リリースでは現在サポートされていないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="a95e4-128">Note that authority state changes are not currently provided in this software release.</span></span>

<span data-ttu-id="a95e4-129">アプリは、複数の手段で参加する XIM ネットワークを決定できます。</span><span class="sxs-lookup"><span data-stu-id="a95e4-129">An app can determine the XIM network in which to participate through several means.</span></span> <span data-ttu-id="a95e4-130">多くの場合、アプリはローカル ユーザーをユーザーのフレンドが使用できる新しいネットワークに自動的に移動することで開始されます。ローカル ユーザーはそこで招待を送信することも、XIM ネットワークを参加可能なアクティビティとして (プレイヤー カードなどを通じて) 検出可能な状態にすることもできます。</span><span class="sxs-lookup"><span data-stu-id="a95e4-130">Often the app starts up by automatically moving the local users to a new network available to the users' friends, where the local users can send invitations or have their XIM network discovered as a joinable activity (via player cards, for example).</span></span> <span data-ttu-id="a95e4-131">このようにソーシャルな手段で検出されたユーザーの準備が整うと、アプリは Xbox Live の "マッチメイキング" プロセスを開始して、すべてのプレイヤーを新しい XIM ネットワークに移動できます。XIM ネットワークには、必要に応じてチーム/敵リストを埋めるための "マッチングされた" 追加リモート プレイヤーも含まれます。</span><span class="sxs-lookup"><span data-stu-id="a95e4-131">Once these socially discovered users are ready, the app can initiate the Xbox Live "matchmaking" process and move all the players to a new XIM network that also contains additional "matched" remote players to fill out team/opponent lists as desired.</span></span> <span data-ttu-id="a95e4-132">次に、そのマルチプレイヤー エクスペリエンスが完了すると、アプリ インスタンスは、新しいプライベート XIM ネットワークに、またはマッチメイキングで見つかった別のランダム XIM ネットワークに、ローカル プレイヤーを (必要に応じて、マッチメイキング前の元のリモート プレイヤーも) 移動できます。</span><span class="sxs-lookup"><span data-stu-id="a95e4-132">Then, when that multiplayer experience is completed, app instances can move their local players-- and optionally the original pre-matchmaking remote players as well-- back into a new private XIM network, or into another random XIM network found through matchmaking.</span></span> <span data-ttu-id="a95e4-133">音声およびテキスト チャットは、全体を通して引き続き使用できます。</span><span class="sxs-lookup"><span data-stu-id="a95e4-133">Voice and text chat remain available throughout.</span></span> <span data-ttu-id="a95e4-134">このように XIM ネットワーク間でプレイヤーを簡単に移動できることが API の中核であり、この動作には、優れたソーシャル ゲーム エクスペリエンスに対する期待が反映されています。</span><span class="sxs-lookup"><span data-stu-id="a95e4-134">This ease of moving players from XIM network to XIM network is central to the API and reflects modern expectations of good, highly social gaming experiences.</span></span>

<span data-ttu-id="a95e4-135">開始するには、「[XIM の使用](xbox-integrated-multiplayer/using-xim.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a95e4-135">To get started see [Using XIM](xbox-integrated-multiplayer/using-xim.md).</span></span>

## <a name="xims-relationship-to-other-modules"></a><span data-ttu-id="a95e4-136">他のモジュールに対する XIM の関係</span><span class="sxs-lookup"><span data-stu-id="a95e4-136">XIM's relationship to other modules</span></span>

<span data-ttu-id="a95e4-137">XIM は、基本的なマルチプレイヤーのニーズを持つゲームに対して便利なオールインワンのインターフェイスを提供するように設計されています。</span><span class="sxs-lookup"><span data-stu-id="a95e4-137">XIM is designed to provide a convenient, all-in-one interface for games with basic multiplayer needs.</span></span> <span data-ttu-id="a95e4-138">この機能は、複数のモジュールの機能 (Xbox Services API (XSAPI) の `multiplayer_manager` モジュール、`Microsoft::Xbox::GameChat` ライブラリ、`Windows::Networking::XboxLive` セキュア マルチプレイヤー ネットワークなど) を、1 つの合理化された API にカプセル化します。</span><span class="sxs-lookup"><span data-stu-id="a95e4-138">It encapsulates the functionality of several modules-- notably the Xbox Services API (XSAPI) `multiplayer_manager` module, the `Microsoft::Xbox::GameChat` library, and `Windows::Networking::XboxLive` secure multiplayer networking-- as a single streamlined API.</span></span> <span data-ttu-id="a95e4-139">これにより、最大限の柔軟性と制御を必要としないマルチプレイヤー ゲームを構築するときに関係するコード、タスク、概念の量が減ります。</span><span class="sxs-lookup"><span data-stu-id="a95e4-139">This reduces the typical amount of code, tasks, and concepts involved when building multiplayer games that don't require the absolute maximum flexibility or control.</span></span> <span data-ttu-id="a95e4-140">ただし、要件が XIM の簡素化の想定と一致しないアプリでは、代わりにこれらのコンポーネントを直接使用できます。</span><span class="sxs-lookup"><span data-stu-id="a95e4-140">Apps whose requirements don't align with XIM's simplifying assumptions, however, may wish to use those components directly instead.</span></span>

<span data-ttu-id="a95e4-141">XIM では、基になるコンポーネントを介してマルチプレイヤー セッション ディレクトリ (MPSD) セッション ドキュメントやネットワーク転送などを管理する必要性の排除を目的としていますが、別のプレイヤー ロスターまたは通信メッシュの一部としてこれらを同時/サイド バイ サイドに使用することも不可能ではありません。</span><span class="sxs-lookup"><span data-stu-id="a95e4-141">While XIM is intended to remove the need to manage things like Multiplayer Session Directory (MPSD) session documents or a network transport through the underlying components, it does not preclude their simultaneous/side-by-side use as part of a separate player roster or communication mesh.</span></span> <span data-ttu-id="a95e4-142">その場合、XIM と独自のメカニズムの間でネットワーク リソースの使用を調整する責任はアプリ側が負う必要があります。</span><span class="sxs-lookup"><span data-stu-id="a95e4-142">In this case it's the app's responsibility to ensure cooperative network resource usage between XIM and its own mechanisms.</span></span> <span data-ttu-id="a95e4-143">XIM では現在、外部入力のみによるユーザー リストを使用した専用のチャット ソリューションとして簡単に利用できるように、"帯域外予約" がサポートされています。</span><span class="sxs-lookup"><span data-stu-id="a95e4-143">XIM currently supports "out of band reservations" to ease its use as a dedicated chat solution whose user list is driven solely by external input.</span></span>

<span data-ttu-id="a95e4-144">Xbox Live は、マルチプレイヤー ゲームに役立つ他の多くの機能を提供しますが、マルチプレイヤー チャットおよびネットワーク通信のセットアップへの直接的な関係はあまりないため、このモジュールには含まれていません。</span><span class="sxs-lookup"><span data-stu-id="a95e4-144">Xbox Live provides many other features that are valuable to multiplayer games but are less directly involved in setting up multiplayer chat and network communication, and are therefore not wrapped by this module.</span></span> <span data-ttu-id="a95e4-145">プレイヤー フィードバック、実績、ランキング、ストレージなどについては、Xbox Services API (XSAPI) をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a95e4-145">Apps are encouraged to look to the Xbox Services API (XSAPI) for player feedback, achievements, leaderboards, storage, and much more.</span></span>


## <a name="using-xim-as-a-dedicated-chat-solution-via-out-of-band-reservations"></a><span data-ttu-id="a95e4-146">帯域外予約を介した専用チャット ソリューションとしての XIM の使用</span><span class="sxs-lookup"><span data-stu-id="a95e4-146">Using XIM as a dedicated chat solution via out-of-band reservations</span></span>

<span data-ttu-id="a95e4-147">ほとんどのアプリでは、プレイヤーが集まるあらゆる場面の処理に XIM を使います。</span><span class="sxs-lookup"><span data-stu-id="a95e4-147">Most apps use XIM to handle every aspect of getting players together.</span></span> <span data-ttu-id="a95e4-148">一般的なマルチプレイヤー シナリオ全体をサポートするために必要なすべての機能を集めていることが、"Xbox 統合マルチプレイヤー" と呼ばれる理由です。</span><span class="sxs-lookup"><span data-stu-id="a95e4-148">After all, a focus on assembling all the features needed to support common multiplayer scenarios end-to-end is the reason it's called "Xbox Integrated Multiplayer".</span></span> <span data-ttu-id="a95e4-149">ただし、専用のインターネット サーバーを使用して独自のネットワーキング ソリューションを実装しているアプリでも、信頼性が高く待機時間が短い低コストのピア ツー ピア チャット通信を利用できます。</span><span class="sxs-lookup"><span data-stu-id="a95e4-149">However some apps that implement their own networking solutions using dedicated Internet servers would also like the advantages of establishing reliable, low latency, low cost peer-to-peer chat communication.</span></span> <span data-ttu-id="a95e4-150">XIM ではこのようなニーズを把握し、現在では拡張モードをサポートしています。これを利用すると、XIM API 外で必要になる外部プレーヤー管理機能を補強するピア通信を簡素化できます。</span><span class="sxs-lookup"><span data-stu-id="a95e4-150">XIM recognizes this need, and currently supports an extension mode to take advantage of its simplified peer communication to augment external player management happening outside the XIM API.</span></span>

> <span data-ttu-id="a95e4-151">帯域外予約を介した XIM の使用について詳しくは、「[XIM 予約](xbox-integrated-multiplayer/xim-reservations.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="a95e4-151">For detailed documentation on using XIM via out-of-band reservations see [XIM Reservations](xbox-integrated-multiplayer/xim-reservations.md).</span></span>
