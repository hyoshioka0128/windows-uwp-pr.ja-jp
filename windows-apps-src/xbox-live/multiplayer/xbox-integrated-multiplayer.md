---
title: Xbox Integrated Multiplayer
description: マルチプレイヤー、ネットワーキング、チャットに関する Xbox Live ゲーム用オール イン ワン ソリューションである Xbox Integrated Multiplayer (XIM) について説明します。
ms.assetid: edbb28e6-1b6c-4f12-a9c6-fa8961de99a8
ms.date: 01/25/2018
ms.topic: article
keywords: Xbox Live, Xbox, ゲーム, UWP, Windows 10, Xbox One, Xbox Integrated Multiplayer
localizationpriority: medium
ms.openlocfilehash: aa82b1042f710d81d83b98767802c7538fd53fba
ms.sourcegitcommit: b034650b684a767274d5d88746faeea373c8e34f
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/06/2019
ms.locfileid: "57641777"
---
# <a name="xbox-integrated-multiplayer-xim"></a><span data-ttu-id="98c11-104">Xbox Integrated Multiplayer (XIM)</span><span class="sxs-lookup"><span data-stu-id="98c11-104">Xbox Integrated Multiplayer (XIM)</span></span>

- [<span data-ttu-id="98c11-105">概要</span><span class="sxs-lookup"><span data-stu-id="98c11-105">Overview</span></span>](#overview)
- [<span data-ttu-id="98c11-106">概念</span><span class="sxs-lookup"><span data-stu-id="98c11-106">Concepts</span></span>](#concepts)
- [<span data-ttu-id="98c11-107">機能</span><span class="sxs-lookup"><span data-stu-id="98c11-107">Features</span></span>](#features)
- [<span data-ttu-id="98c11-108">その他のモジュールへのリレーションシップ</span><span class="sxs-lookup"><span data-stu-id="98c11-108">Relationship to other modules</span></span>](#relationship-to-other-modules)

## <a name="overview"></a><span data-ttu-id="98c11-109">概要</span><span class="sxs-lookup"><span data-stu-id="98c11-109">Overview</span></span>

<span data-ttu-id="98c11-110">Xbox Integrated Multiplayer (XIM) は、Xbox Live サービスの機能を使用してマルチプレイヤー向けのリアルタイム ネットワーキングおよびチャット コミュニケーションをゲームに簡単に追加できる自己完結型のインターフェイスです。</span><span class="sxs-lookup"><span data-stu-id="98c11-110">Xbox Integrated Multiplayer (XIM) is a self-contained interface for easily adding multiplayer real-time networking and chat communication to your game through the power of Xbox Live services.</span></span> <span data-ttu-id="98c11-111">XIM インターフェイスでは、プロジェクトのコンパイルにおいて、C++/CX と従来の C++ のいずれかを選択する必要がなく、どちらも使用できます。</span><span class="sxs-lookup"><span data-stu-id="98c11-111">The XIM interface does not require a project to choose between compiling with C++/CX versus traditional C++; it can be used with either.</span></span> <span data-ttu-id="98c11-112">また、この実装では、致命的ではないエラーの報告手段として例外をスローしないため、必要な場合には、例外が発生しないプロジェクトから簡単に使用できます。</span><span class="sxs-lookup"><span data-stu-id="98c11-112">The implementation also doesn't throw exceptions as a means of non-fatal error reporting so you can consume it easily from exception-free projects if preferred.</span></span>

<span data-ttu-id="98c11-113">開始するには、「[XIM の使用](xbox-integrated-multiplayer/using-xim.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="98c11-113">To get started see [Using XIM](xbox-integrated-multiplayer/using-xim.md).</span></span> <span data-ttu-id="98c11-114">使用する場合C#を参照してください[を使用して XIM C#](xbox-integrated-multiplayer/using-xim-cs.md)します。</span><span class="sxs-lookup"><span data-stu-id="98c11-114">If you are using C#, see [Using XIM C#](xbox-integrated-multiplayer/using-xim-cs.md).</span></span>

## <a name="concepts"></a><span data-ttu-id="98c11-115">概念</span><span class="sxs-lookup"><span data-stu-id="98c11-115">Concepts</span></span>

<span data-ttu-id="98c11-116">XIM がいくつかの主要な概念を中心に。</span><span class="sxs-lookup"><span data-stu-id="98c11-116">XIM is oriented around a few key concepts:</span></span>

- <span data-ttu-id="98c11-117">XIM ネットワーク - 相互接続されたユーザーが、特定のマルチ プレーヤー エクスペリエンスだけでなくそのコレクションを記述する基本的な状態に参加している一連の論理表現。</span><span class="sxs-lookup"><span data-stu-id="98c11-117">XIM network - A logical representation of a set of interconnected users participating in a particular multiplayer experience, as well as basic state describing that collection.</span></span> <span data-ttu-id="98c11-118">参加者は一度に 1 つの XIM ネットワークにだけ参加できますが、概念的な XIM ネットワークの間をシームレスに移動できます。</span><span class="sxs-lookup"><span data-stu-id="98c11-118">Participants can be in only one XIM network at a time, but can move seamlessly from one conceptual XIM network to another.</span></span>
- <span data-ttu-id="98c11-119">マッチメイ キング - ソーシャルに既存のリレーションシップを必要とせず、XIM ネットワークに参加するには、同様の関心やスキル レベルの追加のリモート プレーヤーを検出する省略可能なプロセスです。</span><span class="sxs-lookup"><span data-stu-id="98c11-119">Matchmaking - The optional process of discovering additional remote players with similar interests or skill levels to participate in a XIM network without requiring an existing social relationship.</span></span>
- <span data-ttu-id="98c11-120">このクエリを実行するには - XIM を検出する省略可能な処理が参加者の間で既存のソーシャル関係を必要とせずにネットワークします。</span><span class="sxs-lookup"><span data-stu-id="98c11-120">Querying - The optional process of discovering XIM networks without requiring an existing social relationship between participants.</span></span>
- <span data-ttu-id="98c11-121">`xim_player` -ローカルまたはリモート デバイスにサインインし、XIM ネットワークに参加している個々 の人間ユーザーを表すオブジェクト。</span><span class="sxs-lookup"><span data-stu-id="98c11-121">`xim_player` - An object representing an individual human user signed in on a local or remote device and participating in a XIM network.</span></span> <span data-ttu-id="98c11-122">1 人の物理ユーザーが XIM ネットワークに参加し、いったん退出してから、再び同じ XIM ネットワークに参加した場合は、2 人の異なるプレイヤー インスタンスと見なされます。</span><span class="sxs-lookup"><span data-stu-id="98c11-122">A single physical user that joins, leaves, and then rejoins the same XIM network is considered to be two separate player instances.</span></span>
- <span data-ttu-id="98c11-123">`xim_state_change` -XIM ネットワークの一部の側面で非同期の変更に関するローカルのデバイスに通知を表す構造。</span><span class="sxs-lookup"><span data-stu-id="98c11-123">`xim_state_change` - A structure representing a notification to the local device regarding an asynchronous change in some aspect of the XIM network.</span></span>
- <span data-ttu-id="98c11-124">`xim::start_processing_state_changes` `xim::finish_processing_state_changes` -メソッドのペアで、アプリでの形式で処理する結果を取得する非同期操作を実行するすべての UI フレームと呼ばれる`xim_state_change`構造体、順を完了すると、関連付けられているリソースを解放します。</span><span class="sxs-lookup"><span data-stu-id="98c11-124">`xim::start_processing_state_changes` and `xim::finish_processing_state_changes` - The pair of methods called by the app every UI frame to perform asynchronous operations, to retrieve results to be handled in the form of `xim_state_change` structures, and then to free the associated resources when finished.</span></span>

<span data-ttu-id="98c11-125">非常に高いレベルでは、ゲームのアプリケーションは、サインイン済みのローカル デバイス上で新しいプレーヤーとして XIM ネットワークに移動するのにユーザーのセットを構成するのに XIM ライブラリを使用します。</span><span class="sxs-lookup"><span data-stu-id="98c11-125">At a very high level, the game application uses the XIM library to configure a set of users signed-in on the local device to be moved into a XIM network as new players.</span></span> <span data-ttu-id="98c11-126">アプリによる呼び出し`xim::start_processing_state_changes`と`xim::finish_processing_state_changes`UI のすべてのフレーム。</span><span class="sxs-lookup"><span data-stu-id="98c11-126">The app calls `xim::start_processing_state_changes` and `xim::finish_processing_state_changes` every UI frame.</span></span> <span data-ttu-id="98c11-127">参加しているすべてのインスタンスが提供される XIM ネットワークに、ユーザーを追加するリモート デバイス上でのアプリのインスタンスに、`xim_state_change`更新プログラムをローカルとリモートを記述する`xim_player`s XIM そのネットワークに参加します。</span><span class="sxs-lookup"><span data-stu-id="98c11-127">As app instances on remote devices add their users into a XIM network, every participating instance is provided `xim_state_change` updates describing the local and remote `xim_player`s joining that XIM network.</span></span> <span data-ttu-id="98c11-128">プレイヤーが XIM ネットワークへの参加を停止すると (正常終了またはネットワーク接続の問題のため)、`xim_player` が退出したことを示す `xim_state_change` 更新がすべてのアプリ インスタンスに提供されます。</span><span class="sxs-lookup"><span data-stu-id="98c11-128">When a player stops participating in the XIM network (gracefully or due to network connectivity problems), `xim_state_change` updates are provided to all app instances indicating the `xim_player` has left.</span></span>

<span data-ttu-id="98c11-129">アプリは、複数の手段で参加する XIM ネットワークを決定できます。</span><span class="sxs-lookup"><span data-stu-id="98c11-129">An app can determine the XIM network in which to participate through several means.</span></span> <span data-ttu-id="98c11-130">多くの場合、アプリはローカル ユーザーをユーザーのフレンドが使用できる新しいネットワークに自動的に移動することで開始されます。ローカル ユーザーはそこで招待を送信することも、XIM ネットワークを参加可能なアクティビティとして (プレイヤー カードなどを通じて) 検出可能な状態にすることもできます。</span><span class="sxs-lookup"><span data-stu-id="98c11-130">Often the app starts up by automatically moving the local users to a new network available to the users' friends, where the local users can send invitations or have their XIM network discovered as a joinable activity (via player cards, for example).</span></span> <span data-ttu-id="98c11-131">このようにソーシャルな手段で検出されたユーザーの準備が整うと、アプリは Xbox Live の "マッチメイキング" プロセスを開始して、すべてのプレイヤーを新しい XIM ネットワークに移動できます。XIM ネットワークには、必要に応じてチーム/敵リストを埋めるための "マッチングされた" 追加リモート プレイヤーも含まれます。</span><span class="sxs-lookup"><span data-stu-id="98c11-131">Once these socially discovered users are ready, the app can initiate the Xbox Live "matchmaking" process and move all the players to a new XIM network that also contains additional "matched" remote players to fill out team/opponent lists as desired.</span></span> <span data-ttu-id="98c11-132">次に、そのマルチプレイヤー エクスペリエンスが完了すると、アプリ インスタンスは、新しいプライベート XIM ネットワークに、またはマッチメイキングで見つかった別のランダム XIM ネットワークに、ローカル プレイヤーを (必要に応じて、マッチメイキング前の元のリモート プレイヤーも) 移動できます。</span><span class="sxs-lookup"><span data-stu-id="98c11-132">Then, when that multiplayer experience is completed, app instances can move their local players-- and optionally the original pre-matchmaking remote players as well-- back into a new private XIM network, or into another random XIM network found through matchmaking.</span></span> <span data-ttu-id="98c11-133">音声およびテキスト チャットは、全体を通して引き続き使用できます。</span><span class="sxs-lookup"><span data-stu-id="98c11-133">Voice and text chat remain available throughout.</span></span> <span data-ttu-id="98c11-134">このように XIM ネットワーク間でプレイヤーを簡単に移動できることが API の中核であり、この動作には、優れたソーシャル ゲーム エクスペリエンスに対する期待が反映されています。</span><span class="sxs-lookup"><span data-stu-id="98c11-134">This ease of moving players from XIM network to XIM network is central to the API and reflects modern expectations of good, highly social gaming experiences.</span></span>

<span data-ttu-id="98c11-135">クライアント/サーバー モデルではなく XIM ネットワークはピア デバイスの完全に接続されているメッシュでは論理的にします。</span><span class="sxs-lookup"><span data-stu-id="98c11-135">As opposed to a client-server model, a XIM network is logically a fully-connected mesh of peer devices.</span></span> <span data-ttu-id="98c11-136">このドキュメントのセクションのように、すべてのプレーヤーが API を使用して、他に直接送信できます。</span><span class="sxs-lookup"><span data-stu-id="98c11-136">As described in the section of this document, any player can send directly to any other through the API.</span></span> <span data-ttu-id="98c11-137">参加しているデバイスでも XIM ネットワーク全体の状態に影響するすべてのメソッドを呼び出すことができます。</span><span class="sxs-lookup"><span data-stu-id="98c11-137">All methods that affect the state of the XIM network as a whole can be invoked by any participating device.</span></span>

<span data-ttu-id="98c11-138">複数の参加者によって同一の XIM ネットワーク状態を同時に変更できないようにアプリ側で設定されていない場合、XIM は、last-write-wins のシンプルな競合解決を使用します。</span><span class="sxs-lookup"><span data-stu-id="98c11-138">XIM uses simple last-write-wins conflict resolution if the app doesn't otherwise prevent more than one participant modifying the same XIM network state at effectively the same time.</span></span> <span data-ttu-id="98c11-139">つまり、XIM が"host"または「サーバー」の役割の概念を適用しません。</span><span class="sxs-lookup"><span data-stu-id="98c11-139">This means that XIM doesn't impose any role concepts for "host" or "server".</span></span> <span data-ttu-id="98c11-140">XIM はから別の参加者が、プレーヤーが XIM ネットワークを離れるときにアプリで定義された役割を移行のサポートなどの独自の概念を使用してアプリを制限しません。</span><span class="sxs-lookup"><span data-stu-id="98c11-140">XIM also doesn't constrain apps from using their own concepts, such as support for migrating app-defined roles to another participant when a player leaves a XIM network.</span></span>

## <a name="features"></a><span data-ttu-id="98c11-141">機能</span><span class="sxs-lookup"><span data-stu-id="98c11-141">Features</span></span>

- <span data-ttu-id="98c11-142">監視し、プレーヤーのプライバシー設定を尊重する音声とテキストのチャット コミュニケーション ゲームを提供します。</span><span class="sxs-lookup"><span data-stu-id="98c11-142">Provides game with voice and text chat communication that observes and respects player privacy settings</span></span>

    <span data-ttu-id="98c11-143">プライバシー設定とアプリの構成で許可されるすべてのプレイヤー間では、音声とテキストのチャット通信も自動的に提供されます。</span><span class="sxs-lookup"><span data-stu-id="98c11-143">Voice and text chat communication is also automatically provided among all players where privacy settings and app configuration allow it.</span></span> <span data-ttu-id="98c11-144">音声からテキストまたはテキストから音声の変換を有効にしているプレイヤーの場合は、XIM は、この変換を透過的に実行して受信音声を表すチャット テキスト メッセージを配信し、送信チャット テキスト メッセージに対する合成された音声を再生します。</span><span class="sxs-lookup"><span data-stu-id="98c11-144">For players that have enabled speech-to-text or text-to-speech conversion, XIM will transparently perform this translation to deliver chat text messages representing incoming speech audio and play synthesized speech audio for outgoing chat text messages, respectively.</span></span>

- <span data-ttu-id="98c11-145">により、独自のゲームに固有のデータのメッセージを送信するゲーム</span><span class="sxs-lookup"><span data-stu-id="98c11-145">Allows game to send its own game-specific data messages</span></span>

    <span data-ttu-id="98c11-146">XIM ネットワーク内では、アプリは、アバター移動の更新などの、独自のゲーム固有データ メッセージを送信できます。</span><span class="sxs-lookup"><span data-stu-id="98c11-146">Within the XIM network, the app can send its own game-specific data messages, such as avatar movement updates.</span></span> <span data-ttu-id="98c11-147">受信されたすべてのメッセージは、意図されるソースとローカル宛先を示す `xim_state_change` としてアプリに配信されます。</span><span class="sxs-lookup"><span data-stu-id="98c11-147">All received messages are delivered to the app as a `xim_state_change` indicating the intended source and local destination(s).</span></span>

- <span data-ttu-id="98c11-148">帯域外の予約を使用して専用のチャット ソリューションとしての関数</span><span class="sxs-lookup"><span data-stu-id="98c11-148">Functions as a dedicated chat solution via out-of-band reservations</span></span>

    <span data-ttu-id="98c11-149">帯域外予約を介した XIM の使用について詳しくは、「[XIM 予約](xbox-integrated-multiplayer/xim-reservations.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="98c11-149">For detailed documentation on using XIM via out-of-band reservations see [XIM Reservations](xbox-integrated-multiplayer/xim-reservations.md).</span></span>

- <span data-ttu-id="98c11-150">例外制御不要か C + で使用できると/cli/CX または従来の C++</span><span class="sxs-lookup"><span data-stu-id="98c11-150">Exception-free and can be used with either C++/CX or traditional C++</span></span>

## <a name="relationship-to-other-modules"></a><span data-ttu-id="98c11-151">その他のモジュールへのリレーションシップ</span><span class="sxs-lookup"><span data-stu-id="98c11-151">Relationship to other modules</span></span>

<span data-ttu-id="98c11-152">XIM は、基本的なマルチプレイヤーのニーズを持つゲームに対して便利なオールインワンのインターフェイスを提供するように設計されています。</span><span class="sxs-lookup"><span data-stu-id="98c11-152">XIM is designed to provide a convenient, all-in-one interface for games with basic multiplayer needs.</span></span> <span data-ttu-id="98c11-153">この機能は、複数のモジュールの機能 (Xbox Services API (XSAPI) の `multiplayer_manager` モジュール、`xbox::services::game_chat_2` ライブラリ、`Windows::Networking::XboxLive` セキュア マルチプレイヤー ネットワークなど) を、1 つの合理化された API にカプセル化します。</span><span class="sxs-lookup"><span data-stu-id="98c11-153">It encapsulates the functionality of several modules-- notably the Xbox Services API (XSAPI) `multiplayer_manager` module, the `xbox::services::game_chat_2` library, and `Windows::Networking::XboxLive` secure multiplayer networking-- as a single streamlined API.</span></span> <span data-ttu-id="98c11-154">これにより、最大限の柔軟性と制御を必要としないマルチプレイヤー ゲームを構築するときに関係するコード、タスク、概念の量が減ります。</span><span class="sxs-lookup"><span data-stu-id="98c11-154">This reduces the typical amount of code, tasks, and concepts involved when building multiplayer games that don't require the absolute maximum flexibility or control.</span></span> <span data-ttu-id="98c11-155">ただし、要件が XIM の簡素化の想定と一致しないアプリでは、代わりにこれらのコンポーネントを直接使用できます。</span><span class="sxs-lookup"><span data-stu-id="98c11-155">Apps whose requirements don't align with XIM's simplifying assumptions, however, may wish to use those components directly instead.</span></span>

<span data-ttu-id="98c11-156">XIM では、基になるコンポーネントを介してマルチプレイヤー セッション ディレクトリ (MPSD) セッション ドキュメントやネットワーク転送などを管理する必要性の排除を目的としていますが、別のプレイヤー ロスターまたは通信メッシュの一部としてこれらを同時/サイド バイ サイドに使用することも不可能ではありません。</span><span class="sxs-lookup"><span data-stu-id="98c11-156">While XIM is intended to remove the need to manage things like Multiplayer Session Directory (MPSD) session documents or a network transport through the underlying components, it does not preclude their simultaneous/side-by-side use as part of a separate player roster or communication mesh.</span></span> <span data-ttu-id="98c11-157">その場合、XIM と独自のメカニズムの間でネットワーク リソースの使用を調整する責任はアプリ側が負う必要があります。</span><span class="sxs-lookup"><span data-stu-id="98c11-157">In this case it's the app's responsibility to ensure cooperative network resource usage between XIM and its own mechanisms.</span></span> <span data-ttu-id="98c11-158">XIM では現在、外部入力のみによるユーザー リストを使用した専用のチャット ソリューションとして簡単に利用できるように、"帯域外予約" がサポートされています。</span><span class="sxs-lookup"><span data-stu-id="98c11-158">XIM currently supports "out of band reservations" to ease its use as a dedicated chat solution whose user list is driven solely by external input.</span></span>

<span data-ttu-id="98c11-159">Xbox Live は、マルチプレイヤー ゲームに役立つ他の多くの機能を提供しますが、マルチプレイヤー チャットおよびネットワーク通信のセットアップへの直接的な関係はあまりないため、このモジュールには含まれていません。</span><span class="sxs-lookup"><span data-stu-id="98c11-159">Xbox Live provides many other features that are valuable to multiplayer games but are less directly involved in setting up multiplayer chat and network communication, and are therefore not wrapped by this module.</span></span> <span data-ttu-id="98c11-160">アプリは player 実績、ランキング、ストレージ、およびその他 Xbox サービス API (XSAPI) を検索することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="98c11-160">Apps are encouraged to look to the Xbox Services API (XSAPI) for player achievements, leaderboards, storage, and much more.</span></span>
