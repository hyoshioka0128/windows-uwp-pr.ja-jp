---
title: SmartMatch マッチメイキング
author: KevinAsgari
description: マルチプレイヤー ゲームでプレイヤーをマッチングする Xbox Live SmartMatch マッチメイキング サービスについて説明します。
ms.assetid: ba0c1ecb-e928-4e86-9162-8cb456b697ff
ms.author: kevinasg
ms.date: 04/04/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: Xbox Live, Xbox, ゲーム, UWP, Windows 10, Xbox One, マルチプレイヤー, マッチメイキング, SmartMatch
ms.localizationpriority: medium
ms.openlocfilehash: 8fe8ad244b9b7a650af4fc77c4adbb1805023ecf
ms.sourcegitcommit: d10fb9eb5f75f2d10e1c543a177402b50fe4019e
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/12/2018
ms.locfileid: "4567529"
---
# <a name="smartmatch-matchmaking"></a><span data-ttu-id="b34ad-104">SmartMatch マッチメイキング</span><span class="sxs-lookup"><span data-stu-id="b34ad-104">SmartMatch Matchmaking</span></span>

<span data-ttu-id="b34ad-105">この記事は次のセクションで構成されています。</span><span class="sxs-lookup"><span data-stu-id="b34ad-105">This article has the following sections</span></span>
* <span data-ttu-id="b34ad-106">SmartMatch の概要</span><span class="sxs-lookup"><span data-stu-id="b34ad-106">Introduction to SmartMatch</span></span>
* <span data-ttu-id="b34ad-107">SmartMatch のランタイム操作</span><span class="sxs-lookup"><span data-stu-id="b34ad-107">SmartMatch Runtime Operations</span></span>
* <span data-ttu-id="b34ad-108">タイトルの SmartMatch の構成</span><span class="sxs-lookup"><span data-stu-id="b34ad-108">Configuring SmartMatch for your Title</span></span>
* <span data-ttu-id="b34ad-109">SmartMatch 構成時のチーム ルールの定義</span><span class="sxs-lookup"><span data-stu-id="b34ad-109">Defining team rules during SmartMatch configuration</span></span>
* <span data-ttu-id="b34ad-110">ターゲット セッションの初期化と QoS</span><span class="sxs-lookup"><span data-stu-id="b34ad-110">Target Session Initialization and QoS</span></span>

## <a name="introduction-to-smartmatch"></a><span data-ttu-id="b34ad-111">SmartMatch の概要</span><span class="sxs-lookup"><span data-stu-id="b34ad-111">Introduction to SmartMatch</span></span>

<span data-ttu-id="b34ad-112">XSAPI は、[Multiplayer Manager API](../multiplayer-manager/multiplayer-manager-api-overview.md) によってラップされている、SmartMatch と呼ばれるマッチメイキング サービスを提供します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-112">The XSAPI provides a matchmaking service, called SmartMatch, that is wrapped by the [Multiplayer Manager API](../multiplayer-manager/multiplayer-manager-api-overview.md).</span></span>  <span data-ttu-id="b34ad-113">API の高度な使用方法については「**MatchmakingService クラス**」で解説していますが、Multiplayer Manager を使用して実装できないマッチメイキングのシナリオがある場合は、担当 DAM を介してフィードバックをご提供ください。</span><span class="sxs-lookup"><span data-stu-id="b34ad-113">For advanced API usage, you can refer to the **MatchmakingService Class**, but if you find you have a matchmaking scenario not possible to implement using the Multiplayer Manager, please provide feedback to us via your DAM.</span></span>  <span data-ttu-id="b34ad-114">どちらの API を使用するかにかかわらず、この記事の概念情報が適用されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-114">Regardless of which API you use, the conceptual information in this article applies.</span></span>

<span data-ttu-id="b34ad-115">SmartMatch マッチメイキングは、プレイヤーをユーザー情報および一緒にプレイしたいユーザーのマッチメイキング要求に基づいてグループ化します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-115">SmartMatch matchmaking groups players based on user information and the matchmaking request for the users who want to play together.</span></span> <span data-ttu-id="b34ad-116">マッチメイキングはサーバー ベースであり、ユーザーはサービスに要求を送信し、後からマッチが見つかったときに通知を受けます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-116">Matchmaking is server-based, meaning that users provide a request to the service, and they are later notified when a match is found.</span></span> <span data-ttu-id="b34ad-117">Xbox One 用のタイトルをビルドするとき、「[SmartMatch マッチメイキングの使用](using-smartmatch-matchmaking.md)」に説明されているように、SmartMatch を使用できます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-117">When building a title for Xbox One, you can use SmartMatch as described in [Using SmartMatch Matchmaking](using-smartmatch-matchmaking.md).</span></span> <span data-ttu-id="b34ad-118">または、「[独自のマッチメイキング サービスの使用](https://developer.microsoft.com/en-us/games/xbox/docs/xboxlive/xbox-live-partners/multiplayer-and-networking/using-your-own-matchmaking-service)」に説明されているように、独自のマッチメイキング サービスを使用できます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-118">alternatively, you can your own matchmaking service as described in [using your own matchmaking service](https://developer.microsoft.com/en-us/games/xbox/docs/xboxlive/xbox-live-partners/multiplayer-and-networking/using-your-own-matchmaking-service).</span></span> <span data-ttu-id="b34ad-119">このリンクにアクセスするには、Xbox Live 開発に対して有効にされている Microsoft デベロッパー センター アカウントが必要なことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="b34ad-119">Note that accessing this link requires that you have a Microsoft dev center account which is enabled for Xbox Live development.</span></span>

### <a name="about-smartmatch"></a><span data-ttu-id="b34ad-120">SmartMatch について</span><span class="sxs-lookup"><span data-stu-id="b34ad-120">About SmartMatch</span></span>

<span data-ttu-id="b34ad-121">マッチメイキング サービスは、MPSD を緊密に連携してマッチメイキングを簡素化します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-121">The matchmaking service works closely with MPSD to simplify matchmaking.</span></span> <span data-ttu-id="b34ad-122">それにより、タイトルは、ユーザーがタイトル内でシングル プレイヤーでプレイしているときなど、バックグラウンドでマッチメイキングを容易に行うことができます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-122">It allows titles to easily do matchmaking in the background, for example while the user is playing single-player within the title.</span></span>

<span data-ttu-id="b34ad-123">マッチメイキングに参加したい個人またはグループは、マッチ チケット セッションを作成し、マッチメイキング サービスを要求してマッチを設定する他のプレイヤーを検索します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-123">Individuals or groups that want to enter matchmaking create a match ticket session, then request the matchmaking service to find other players with whom to set up a match.</span></span> <span data-ttu-id="b34ad-124">これにより、一定期間マッチメイキング サービス内に常駐する一時的な "マッチ チケット" が作成されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-124">This results in the creation of a temporary "match ticket" residing within the matchmaking service for a period of time.</span></span>

<span data-ttu-id="b34ad-125">マッチメイキング サービスは、構成、プレイヤーごとに格納される統計情報、マッチ要求時に指定される追加の情報に基づいて、一緒にプレイするセッションを選択します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-125">The matchmaking service chooses sessions to play together based on configuration, statistics stored for each player, and any additional information given at the time of the match request.</span></span> <span data-ttu-id="b34ad-126">次に、サービスは、マッチしたすべてのプレイヤーを含むマッチ ターゲット セッションを作成し、ユーザーのタイトルにマッチを通知します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-126">The service then creates a match target session that contains all players who have been matched, and notifies the users' titles of the match.</span></span>

<span data-ttu-id="b34ad-127">ターゲット セッションの準備ができると、タイトルは QoS チェックを実行してグループが一緒にプレイできることを確認し、何も問題ない場合、プレイを開始します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-127">When the target session is ready, titles perform QoS checks to confirm that the group can play together, and then begin play if all is well.</span></span> <span data-ttu-id="b34ad-128">QoS プロセスおよびマッチメイキングされたゲーム プレイ中、タイトルは、MPSD 内でセッション状態を最新の状態に保ち、セッションの変更に関する通知を MPSD から受信します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-128">During the QoS process and matchmade game play, titles keep the session state up to date within MPSD, and they receive notifications from MPSD about changes to the session.</span></span> <span data-ttu-id="b34ad-129">こうした変更には、ユーザーの入退出、セッション アービターの変更が含まれます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-129">Such changes include users coming and going, and changes to the session arbiter.</span></span>


### <a name="match-ticket-session"></a><span data-ttu-id="b34ad-130">マッチ チケット セッション</span><span class="sxs-lookup"><span data-stu-id="b34ad-130">Match Ticket Session</span></span>

<span data-ttu-id="b34ad-131">マッチ チケット セッションは、マッチを行うプレイヤーのクライアントを表します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-131">A match ticket session represents the clients for the players who want to make a match.</span></span> <span data-ttu-id="b34ad-132">ゲームに基づいて、ロビーに一緒にいる見知らぬユーザーのグループに基づいて、または他のタイトル固有のプレイヤーのグループに基づいて作成されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-132">It is created based on a game, or on a group of strangers who are in a lobby together, or on other title-specific groupings of players.</span></span> <span data-ttu-id="b34ad-133">チケット セッションは、追加のプレイヤーを探している既に進行中のゲーム セッションの場合もあります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-133">In some cases, the ticket session might be a game session already in progress that is looking for more players.</span></span>


### <a name="match-ticket"></a><span data-ttu-id="b34ad-134">マッチ チケット</span><span class="sxs-lookup"><span data-stu-id="b34ad-134">Match Ticket</span></span>

<span data-ttu-id="b34ad-135">マッチメイキングにチケット セッションを送信するとマッチ チケットが作成され、マッチ チケットはマッチメイキングの試行を追跡します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-135">Submitting a ticket session to matchmaking results in the creation of a match ticket that tracks the matchmaking attempt.</span></span> <span data-ttu-id="b34ad-136">ゲーム マップ、プレイヤー レベルなどのチケット内の属性は、チケット セッション内のプレイヤーの属性と共に、マッチを判断するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-136">Attributes in the ticket, for example, game map or player level, along with attributes of the players in the ticket session, are used to determine the match.</span></span>
#### <a name="hoppers"></a><span data-ttu-id="b34ad-137">ホッパー</span><span class="sxs-lookup"><span data-stu-id="b34ad-137">Hoppers</span></span>

<span data-ttu-id="b34ad-138">ホッパーは、マッチ チケットが集められる論理的な場所です。</span><span class="sxs-lookup"><span data-stu-id="b34ad-138">Hoppers are logical places where match tickets are collected.</span></span> <span data-ttu-id="b34ad-139">同じホッパーの内部にあるチケットのみがマッチング可能です。</span><span class="sxs-lookup"><span data-stu-id="b34ad-139">Only tickets within the same hopper can be matched.</span></span> <span data-ttu-id="b34ad-140">タイトルには複数のホッパーを含めることができます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-140">A title can have multiple hoppers.</span></span> <span data-ttu-id="b34ad-141">たとえば、タイトルでは、プレイヤーのスキルがマッチングに最も重要な項目であるホッパーを作成できます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-141">For example, a title might create one hopper for which player skill is the most important item for matching.</span></span> <span data-ttu-id="b34ad-142">同じダウンロード可能なコンテンツを購入している場合のみプレイヤーがマッチされる、別のホッパーを使用できます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-142">It might use another hopper in which players are only matched if they have purchased the same downloadable content.</span></span>


#### <a name="hopper-rules"></a><span data-ttu-id="b34ad-143">ホッパー ルール</span><span class="sxs-lookup"><span data-stu-id="b34ad-143">Hopper Rules</span></span>

<span data-ttu-id="b34ad-144">ホッパー ルールは、グループ化するプレイヤーを決定するためにマッチメイキング サービスが使用する基準の定義を提供します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-144">Hopper rules provide definitions of the criteria that the matchmaking service uses for deciding on the players to group together.</span></span> <span data-ttu-id="b34ad-145">以下の 2 種類のルールがあります。   必須ルール - マッチ チケットの互換性認定のために満たされる必要があります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-145">There are two types of rules:   MUST rules -- have to be satisfied for match tickets to be considered compatible.</span></span>
-   <span data-ttu-id="b34ad-146">推奨ルール -- ルールに一致するマッチ チケットは、そうでないマッチ チケットよりも優先されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-146">SHOULD rules -- a match ticket matching a rule is favored over one that does not.</span></span>

<span data-ttu-id="b34ad-147">上記の各カテゴリー内に複数の種類のルールがあります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-147">Within each of these categories, there are several specific types of rules.</span></span> <span data-ttu-id="b34ad-148">詳細については、「**SmartMatch のランタイム操作**」のランタイム操作の構成情報を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b34ad-148">For more information, see runtime operation configuration information in **SmartMatch Runtime Operations**.</span></span>


### <a name="match-target-session"></a><span data-ttu-id="b34ad-149">マッチ ターゲット セッション</span><span class="sxs-lookup"><span data-stu-id="b34ad-149">Match Target Session</span></span>

<span data-ttu-id="b34ad-150">マッチしたグループが見つかったら、サービスではマッチ ターゲット セッションが作成され、一緒にマッチされたチケット セッションのすべてのプレイヤー用の場所が予約されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-150">Once a matched group has been found, the service creates a match target session and reserves places for all the players from the ticket sessions that are matched together.</span></span>


## <a name="smartmatch-runtime-operations"></a><span data-ttu-id="b34ad-151">SmartMatch のランタイム操作</span><span class="sxs-lookup"><span data-stu-id="b34ad-151">SmartMatch Runtime Operations</span></span>



| <span data-ttu-id="b34ad-152">注意</span><span class="sxs-lookup"><span data-stu-id="b34ad-152">Note</span></span>                                                                                                                                  |
|----------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="b34ad-153">タイトルで SmartMatch マッチメイキングを使用する方法については、「[SmartMatch マッチメイキングの使用](using-smartmatch-matchmaking.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b34ad-153">For information about using SmartMatch matchmaking in your title, see [Using SmartMatch Matchmaking](using-smartmatch-matchmaking.md).</span></span> |


### <a name="creating-a-match-ticket-session-and-a-match-ticket"></a><span data-ttu-id="b34ad-154">マッチ チケット セッションとマッチ チケットの作成</span><span class="sxs-lookup"><span data-stu-id="b34ad-154">Creating a Match Ticket Session and a Match Ticket</span></span>

<span data-ttu-id="b34ad-155">マッチメイキングの "スカウト" として指定されたクライアントは、マッチ チケット セッションを設定して、マッチメイキングに参加するプレイヤーのグループを表します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-155">A client designated as the matchmaking "scout" sets up a match ticket session to represent a group of players who want to enter matchmaking.</span></span> <span data-ttu-id="b34ad-156">このグループ内のすべてのプレイヤーが MultiplayerSession.Join メソッドを使用してセッションに参加します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-156">All players in this group join the session using the MultiplayerSession.Join method.</span></span> <span data-ttu-id="b34ad-157">セッションにプレイヤーが設定されると、タイトルはセッションを MatchmakingService.CreateMatchTicketAsync メソッドを使用してマッチメイキング サービスに送信し、セッションを表すマッチ チケットが作成されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-157">Once the session is populated with players, the title submits the session to the matchmaking service using the MatchmakingService.CreateMatchTicketAsync method, which creates a match ticket that represents the session.</span></span>

| <span data-ttu-id="b34ad-158">注意</span><span class="sxs-lookup"><span data-stu-id="b34ad-158">Note</span></span>                                                                                                                                                        |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="b34ad-159">SmartMatch サービスは、CreateMatchTicketAsync 操作中にチケット セッションの /servers/matchmaking/properties/system/status フィールドを "Searching" に更新します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-159">The SmartMatch service updates the /servers/matchmaking/properties/system/status field in the ticket session to "Searching" during the CreateMatchTicketAsync operation.</span></span> |

<span data-ttu-id="b34ad-160">マッチ チケット作成メソッドからの応答は CreateMatchTicketResponse オブジェクトです。</span><span class="sxs-lookup"><span data-stu-id="b34ad-160">The response from the match ticket creation method is a CreateMatchTicketResponse object.</span></span> <span data-ttu-id="b34ad-161">この応答には、マッチ チケット ID、チケットの削除によってマッチメイキングをキャンセルするために使用できる GUID が含まれます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-161">This response contains the match ticket ID, a GUID that can be used to cancel matchmaking by deleting the ticket.</span></span> <span data-ttu-id="b34ad-162">さらに、プレイヤーの期待の設定で使用される、ホッパーの平均待機時間が応答に含まれます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-162">Additionally, an average wait time for the hopper is included in the response to use in setting player expectations.</span></span>

| <span data-ttu-id="b34ad-163">注意</span><span class="sxs-lookup"><span data-stu-id="b34ad-163">Note</span></span>                                                                                                                                                                                                                                                                                                                                 |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="b34ad-164">保持する必要がある特定のゲーム統計情報データがない限り、CreateMatchTicketAsync を呼び出すときにタイトルで PreserveSessionMode.Never 値を使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="b34ad-164">Unless there is specific game stat data that needs to be preserved, it is recommended that titles use the PreserveSessionMode.Never value when calling CreateMatchTicketAsync.</span></span> <span data-ttu-id="b34ad-165">PreserveSessionMode.Never を使用すると、マッチメイキングが高速になり、ゲームの検索ではなくゲームのホスティングのためのユーザー インターフェイス オプションを用意する必要がなくなります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-165">Using PreserveSessionMode.Never allows faster matchmaking, and removes the need to have user interface options for hosting a game opposed to searching for a game.</span></span> |


### <a name="setting-matchmaking-attributes-on-the-session-and-players"></a><span data-ttu-id="b34ad-166">セッションおよびプレイヤーでのマッチメイキング属性の設定</span><span class="sxs-lookup"><span data-stu-id="b34ad-166">Setting Matchmaking Attributes on the Session and Players</span></span>

<span data-ttu-id="b34ad-167">チケット セッションを送信するときに、タイトルは、マッチメイキング サービスがセッションを他のセッションとグループ化するために使用するセッションおよびプレイヤーの属性を設定します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-167">When submitting the ticket session, the title sets session and player attributes that the matchmaking service uses to group the session with other sessions.</span></span> <span data-ttu-id="b34ad-168">属性は、チケット レベルまたはメンバーごとのレベルで指定できます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-168">Attributes can be specified at the ticket level or at the per-member level.</span></span>


### <a name="setting-matchmaking-attributes-at-the-match-ticket-level"></a><span data-ttu-id="b34ad-169">マッチ チケット レベルでのマッチメイキング属性の設定</span><span class="sxs-lookup"><span data-stu-id="b34ad-169">Setting Matchmaking Attributes at the Match Ticket Level</span></span>

<span data-ttu-id="b34ad-170">タイトルは、MatchmakingService.CreateMatchTicketAsync メソッドの ticketAttributesJson パラメーターで、マッチ チケット レベルでの属性を送信します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-170">The title submits attributes at the match ticket level in the ticketAttributesJson parameter of the MatchmakingService.CreateMatchTicketAsync method.</span></span> <span data-ttu-id="b34ad-171">チケット レベルで指定された属性は、メンバーごとのレベルで指定された同じ属性をオーバーライドします。</span><span class="sxs-lookup"><span data-stu-id="b34ad-171">Attributes specified at the ticket level override the same attributes specified at the per-member level.</span></span>


#### <a name="setting-matchmaking-attributes-at-the-per-member-level"></a><span data-ttu-id="b34ad-172">メンバーごとのレベルでのマッチメイキング属性の設定</span><span class="sxs-lookup"><span data-stu-id="b34ad-172">Setting Matchmaking Attributes at the Per-member Level</span></span>

<span data-ttu-id="b34ad-173">タイトルは、マッチ チケット セッション内の各メンバーでメンバーごとの属性を指定します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-173">The title specifies per-member attributes on each member within the match ticket session.</span></span> <span data-ttu-id="b34ad-174">これらは、MultiplayerSession.SetCurrentUserMemberCustomPropertyJson メソッドを呼び出し、プロパティ名 "matchAttrs" を使用して設定されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-174">These are set by calling the MultiplayerSession.SetCurrentUserMemberCustomPropertyJson method, using a property name of "matchAttrs".</span></span> <span data-ttu-id="b34ad-175">この呼び出しは、属性をチケット セッション内の各プレイヤーの /members/{index}/properties/custom/matchAttrs フィールドに配置します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-175">This call places the attributes in the /members/{index}/properties/custom/matchAttrs field on each player within the ticket session.</span></span>

<span data-ttu-id="b34ad-176">マッチメイ キング プロセス均一メンバーごとの各ホッパーの Xbox Live 構成 UI でその属性に対して指定した均一化メソッドに基づいて、単一のチケット レベル属性です。</span><span class="sxs-lookup"><span data-stu-id="b34ad-176">The matchmaking process "flattens" each per-member into a single ticket-level attribute, based on the flatten method specified for that attribute in the Xbox Live configuration UI for the hopper.</span></span> <span data-ttu-id="b34ad-177">これは、 [XDP](https://xdp.xboxlive.com)または[Windows デベロッパー センター](https://developer.microsoft.com/dashboard/windows/overview)で構成できます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-177">This can be configured on [XDP](https://xdp.xboxlive.com) or [Windows Dev Center](https://developer.microsoft.com/dashboard/windows/overview).</span></span>


### <a name="making-the-match"></a><span data-ttu-id="b34ad-178">マッチの実行</span><span class="sxs-lookup"><span data-stu-id="b34ad-178">Making the Match</span></span>

<span data-ttu-id="b34ad-179">設定されたチケット セッションとマッチ チケットを使用して、マッチメイキング サービスは、表されたチケット セッションを他のグループを表す他のチケット セッションとマッチさせ、マッチ ターゲット セッションを作成または識別します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-179">With the ticket session and the match ticket set up, the matchmaking service matches the represented ticket session with other ticket sessions representing other groups, and creates or identifies a match target session.</span></span> <span data-ttu-id="b34ad-180">また、サービスは、ターゲット セッションでマッチされたプレイヤーの予約を作成し、チケット セッションをマッチ済みとしてマークします。</span><span class="sxs-lookup"><span data-stu-id="b34ad-180">The service also creates reservations for the matched players in the target session, and then marks the ticket sessions as matched.</span></span> <span data-ttu-id="b34ad-181">MPSD は、チケット セッションのこの変更をタイトルに通知します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-181">MPSD then notifies the title of this change to the ticket session.</span></span>

<span data-ttu-id="b34ad-182">次に、タイトルは十分なプレイヤーが現れたことを確認するためにターゲット セッションを初期化し、サービスの品質 (QoS) チェックを実行してプレイヤーが互いに正しく接続できることを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-182">Now the title must initialize the target session in order to confirm that enough players have shown up, and perform quality of service (QoS) checks to ensure that they can connect to one another successfully.</span></span> <span data-ttu-id="b34ad-183">初期化や QoS が失敗した場合、タイトルは、別のグループを見つけることができるよう、マッチメイキングに再送信するようにチケット セッションをマークします。</span><span class="sxs-lookup"><span data-stu-id="b34ad-183">If initialization and/or QoS fails, the title marks the ticket session to be resubmitted to matchmaking so that another group can be found.</span></span> <span data-ttu-id="b34ad-184">このプロセスの詳細については、「**ターゲット セッションの初期化と QoS**」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b34ad-184">For more information on this process, see **Target Session Initialization and QoS**.</span></span>

<span data-ttu-id="b34ad-185">マッチ アクティビティ中、以下の変更がセッションの JSON オブジェクトに対して行われます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-185">During match activity, the following changes are made to the JSON objects for the session:</span></span>

-   <span data-ttu-id="b34ad-186">/servers/matchmaking/properties/system/status フィールドが "found" に設定されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-186">/servers/matchmaking/properties/system/status field set to "found".</span></span>
-   <span data-ttu-id="b34ad-187">/servers/matchmaking/properties/system/targetSessionRef フィールドがターゲット セッションに設定されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-187">/servers/matchmaking/properties/system/targetSessionRef field set to target session.</span></span>
-   <span data-ttu-id="b34ad-188">各チケット セッションの /members/{index}/properties/custom/matchAttrs フィールドが /members/{index}/constants/custom/matchmakingResult/playerAttrs フィールドにコピーされます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-188">/members/{index}/properties/custom/matchAttrs field for each ticket session copied to the members/{index}/constants/custom/matchmakingResult/playerAttrs field.</span></span>
-   <span data-ttu-id="b34ad-189">各プレイヤーについて、チケット属性がマッチ チケット内の ticketAttributes フィールドから /members/{index}/constants/custom/matchmakingResult/ticketAttrs フィールドにコピーされます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-189">For each player, ticket attributes copied from the ticketAttributes field in the match ticket to /members/{index}/constants/custom/matchmakingResult/ticketAttrs field.</span></span>


### <a name="maintaining-the-match-ticket"></a><span data-ttu-id="b34ad-190">マッチ チケットの維持</span><span class="sxs-lookup"><span data-stu-id="b34ad-190">Maintaining the Match Ticket</span></span>

<span data-ttu-id="b34ad-191">マッチメイキング サービスは、マッチ チケットがセッションに対して作成されたときのチケット セッションのスナップショットを使用します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-191">The matchmaking service uses a snapshot of the ticket session at the time when the match ticket is created for the session.</span></span> <span data-ttu-id="b34ad-192">したがって、プレイヤーがチケット セッションに参加した場合やマッチ チケット セッションを抜けた場合、タイトルはマッチメイキング サービスを使用してマッチ チケットを削除し作成しなおす必要があります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-192">Thus, if any players join or leave the ticket session, the title must use the matchmaking service to delete and recreate the match ticket.</span></span>


### <a name="filling-spots-in-an-in-progress-game-session"></a><span data-ttu-id="b34ad-193">進行中のゲーム セッションでのプレイヤーの補充</span><span class="sxs-lookup"><span data-stu-id="b34ad-193">Filling Spots in an In-Progress Game Session</span></span>

<span data-ttu-id="b34ad-194">タイトルは、既存のゲーム セッションをマッチ チケット セッションとして再利用して、既に進行中のゲームに参加するプレイヤーを見つけたり、ラウンドが完了して一部のプレイヤーが抜けた後でゲーム セッションのプレイヤーを補充したりすることができます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-194">A title can reuse an existing game session as a match ticket session to find more players to join a game that's already in progress, or fill a game session after a round has completed and some players left.</span></span> <span data-ttu-id="b34ad-195">このプロセスは "バックフィル" と呼ばれています。</span><span class="sxs-lookup"><span data-stu-id="b34ad-195">This process is known as "backfill".</span></span>

<span data-ttu-id="b34ad-196">バックフィルを実行する方法の 1 つは、preserveSession パラメーターを PreserveSessionMode.Always に設定して **MatchmakingService.CreateMatchTicketAsync メソッド**を呼び出し、進行中のセッションを "保持" するマッチ チケットを作成することです。</span><span class="sxs-lookup"><span data-stu-id="b34ad-196">One way to perform backfill is to create a match ticket that will "preserve" the in-progress session, by calling **MatchmakingService.CreateMatchTicketAsync Method** with the preserveSession parameter set to PreserveSessionMode.Always.</span></span> <span data-ttu-id="b34ad-197">マッチメイキング サービスは、既存のセッションがマッチメイキング プロセス全体を通じて保持され、結果としてターゲット セッションになるようにします。</span><span class="sxs-lookup"><span data-stu-id="b34ad-197">The matchmaking service then ensures that the existing session preserved throughout the matchmaking process, and becomes the resultant target session.</span></span>

<span data-ttu-id="b34ad-198">このパターンには潜在的な欠点があります。preserveSession が Always に設定された 2 つのセッションを結合することができないため、これらのセッションは互いにマッチできません。</span><span class="sxs-lookup"><span data-stu-id="b34ad-198">There are potential drawbacks to this pattern, as two sessions with preserveSession set to Always will not be able to match with each other since they cannot be combined.</span></span> <span data-ttu-id="b34ad-199">これにより、バックフィル マッチメイキングが非常に低速になる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-199">This can result in very slow backfill matchmaking.</span></span> <span data-ttu-id="b34ad-200">このシナリオを回避するために、タイトルでは、ゲーム状態の保持を必要とする場合のみ PreserveSessionMode.Always を使用するようにしてください。</span><span class="sxs-lookup"><span data-stu-id="b34ad-200">To avoid this scenario, a title should only use PreserveSessionMode.Always if it requires preservation of game state.</span></span> <span data-ttu-id="b34ad-201">それ以外の場合は、PreserveSessionMode.Never を設定し、マッチが見つかったときにプレイヤーを新しい targetSession に移行します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-201">Otherwis set PreserveSessionMode.Never and migrate the players to the new targetSession when a match is found.</span></span>


### <a name="deleting-the-match-ticket"></a><span data-ttu-id="b34ad-202">マッチ チケットの削除</span><span class="sxs-lookup"><span data-stu-id="b34ad-202">Deleting the Match Ticket</span></span>

<span data-ttu-id="b34ad-203">マッチ チケットを削除するには、タイトルで **MatchmakingService.DeleteMatchTicketAsync メソッド**を呼び出します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-203">To delete the match ticket the title calls **MatchmakingService.DeleteMatchTicketAsync Method**.</span></span> <span data-ttu-id="b34ad-204">チケットの削除時、マッチメイキング サービスは以下を行います。</span><span class="sxs-lookup"><span data-stu-id="b34ad-204">On deletion of the ticket the matchmaking service:</span></span>

1.  <span data-ttu-id="b34ad-205">チケット セッションでユーザーのマッチメイキングを停止します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-205">Stops matchmaking for the users in the ticket session.</span></span>
2.  <span data-ttu-id="b34ad-206">チケット セッションの /servers/matchmaking/properties/system/status フィールドを "canceled" に更新します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-206">Updates the /servers/matchmaking/properties/system/status field in the ticket session to "canceled".</span></span>


### <a name="matchmaking-for-games-using-xbox-live-compute"></a><span data-ttu-id="b34ad-207">Xbox Live Compute を使用したゲームのマッチメイキング</span><span class="sxs-lookup"><span data-stu-id="b34ad-207">Matchmaking for Games Using Xbox Live Compute</span></span>

<span data-ttu-id="b34ad-208">次の例は、Live Compute サービスを使用した高レベルのマッチメイキングを示しています。</span><span class="sxs-lookup"><span data-stu-id="b34ad-208">The following example demonstrates the high level matchmaking using Live Compute services.</span></span> <span data-ttu-id="b34ad-209">同様の方法を、サード パーティー リソースにホストされているゲームに適用できます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-209">A similar approach can apply to games hosted on third-party resources.</span></span>

1.  <span data-ttu-id="b34ad-210">'スカウト' クライアントは、グループを表すためのチケット セッションを作成します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-210">The 'scout' client creates a ticket session to represent the group.</span></span> <span data-ttu-id="b34ad-211">このセッションには、候補となるデータセンターのリストが含まれます。このリストは、/constants/system/measurementServerAddresses のセッション構成内にあります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-211">This session contains a list of potential datacenters, located in the session configuration in /constants/system/measurementServerAddresses.</span></span> <span data-ttu-id="b34ad-212">このリストは、セッション テンプレート (データセンター リストが静的である場合) から取得されるか、Live Compute サービスから受信した後のセッションの作成時にクライアントから取得されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-212">It comes from either the session template, if the datacenter list is static, or from the client at session creation after receiving it from the Live Compute service.</span></span> <span data-ttu-id="b34ad-213">このセッションの targetSessionConstants/custom/gameServerPlatform オブジェクトには、gsiSetId、gameVariantId、および maxAllowedPlayers の値も含まれています。</span><span class="sxs-lookup"><span data-stu-id="b34ad-213">This session also contains gsiSetId, gameVariantId, and maxAllowedPlayers values in the targetSessionConstants/custom/gameServerPlatform object.</span></span>
2.  <span data-ttu-id="b34ad-214">グループに属する他のすべてのクライアントがチケット セッションに参加します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-214">All other clients in the group join the ticket session.</span></span>
3.  <span data-ttu-id="b34ad-215">グループのすべてのメンバーが、チケット セッションの /constants/system オブジェクトの measurementServerAddresses 値をダウンロードします。</span><span class="sxs-lookup"><span data-stu-id="b34ad-215">All members of the group download the measurementServerAddresses values from the /constants/system object for the ticket session.</span></span> <span data-ttu-id="b34ad-216">次に、各メンバーは、プラットフォーム API を使用して各アドレスに ping を実行して、/members/{index}/properties/system/serverMeasurements で定義される、優先するデータ センターの順序付きリストをセッションにアップロードします。</span><span class="sxs-lookup"><span data-stu-id="b34ad-216">Each member then ping each address using the platform API and upload an ordered list of preferred data centers to the session, as defined in /members/{index}/properties/system/serverMeasurements.</span></span>

| <span data-ttu-id="b34ad-217">注意</span><span class="sxs-lookup"><span data-stu-id="b34ad-217">Note</span></span>                                                                                                                                                                                                                                                                                                                                                                       |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="b34ad-218">タイトルは、セッションの measurementServerAddresses 値を **MultiplayerSession.SetMeasurementServerAddresses メソッド**および **MultiplayerSessionConstants.MeasurementServerAddressesJson プロパティ**を使用して設定および取得できます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-218">The title can set and retrieve the measurementServerAddresses values from the session using **MultiplayerSession.SetMeasurementServerAddresses Method** and the **MultiplayerSessionConstants.MeasurementServerAddressesJson Property**.</span></span> |

4.  <span data-ttu-id="b34ad-219">'スカウト' クライアントは、チケット セッションへの参照を渡して **MatchmakingService.CreateMatchTicketAsync メソッド**を呼び出します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-219">The 'scout' client calls **MatchmakingService.CreateMatchTicketAsync Method**, passing in a reference to the ticket session.</span></span>

| <span data-ttu-id="b34ad-220">注意</span><span class="sxs-lookup"><span data-stu-id="b34ad-220">Note</span></span>                                                                                                                                                                                                  |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="b34ad-221">チケット セッション オブジェクトの定数が一致していない場合、CreateMatchTicket メソッドは失敗する場合があります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-221">If ticket session objects have mismatched constants, the CreateMatchTicket method may fail.</span></span> <span data-ttu-id="b34ad-222">これは、ホッパーに必須ルールを追加し、定数が一致しないプレイヤーのマッチを防止することで回避できます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-222">This can be avoided by adding a MUST rule to the hopper and prevent the matching of players with mismatched constants.</span></span> |

5.  <span data-ttu-id="b34ad-223">**MatchTicketDetailsResponse.PreserveSession プロパティ**が Never に設定されている場合、マッチメイキング サービスは各メンバーからのサーバー測定値をチケットの内部表現にコピーしてから、収集した値をチケット用の単一のコレクションに均一化し、"特別な" チケット属性として格納します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-223">If the **MatchTicketDetailsResponse.PreserveSession Property** is set to Never, the matchmaking service copies the server measurements from each member into the internal representation of the ticket before flattening the collected them into a single collection for the ticket and stored as a "special" ticket attribute.</span></span>
6.  <span data-ttu-id="b34ad-224">**MatchTicketDetailsResponse.PreserveSession プロパティ**が Always に設定されている場合、サーバー測定値は使用されません。</span><span class="sxs-lookup"><span data-stu-id="b34ad-224">If **MatchTicketDetailsResponse.PreserveSession Property** is set to Always, the server measurements are not used.</span></span> <span data-ttu-id="b34ad-225">代わりに、マッチメイキング サービスは、セッションの /properties/system/matchmaking/serverConnectionString 値を、サイズ 1 で遅延ゼロの serverMeasurements コレクションとしてチケットの内部表現にコピーします。</span><span class="sxs-lookup"><span data-stu-id="b34ad-225">Instead, the matchmaking service copies the /properties/system/matchmaking/serverConnectionString value for the session into the internal representation of the ticket, as a serverMeasurements collection of size 1 with latency zero.</span></span>
7.  <span data-ttu-id="b34ad-226">マッチメイキング サービスでは、サーバー測定値コレクションを考慮に入れて、チケット セッションが他のグループを表すその他のチケット セッションとマッチングされます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-226">The matchmaking service matches the ticket session with others representing other groups, taking the server measurement collections into account.</span></span> <span data-ttu-id="b34ad-227">同じデータセンターの優先度が高いグループ間でのマッチングが試行されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-227">It tries to match the group with other groups that have the same datacenters preferred highly.</span></span>
8.  <span data-ttu-id="b34ad-228">マッチしたグループが見つかったら、マッチメイキング サービスではターゲット セッションが作成または識別され、一緒にマッチされたチケット セッションのすべてのプレイヤーが追加されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-228">Once a matched group has been found, the matchmaking service creates or identifies a target session and adds all the players from the ticket sessions that are matched together.</span></span> <span data-ttu-id="b34ad-229">サービスでは、マッチされたグループの最終的に均一化されたサーバー測定値が /properties/system/serverConnectionStringCandidates に書き込まれます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-229">The service writes the final flattened server measurements for the matched group into /properties/system/serverConnectionStringCandidates.</span></span> <span data-ttu-id="b34ad-230">次に、ターゲット セッションの新しいメンバーごとに、最初のサーバー測定値が /members/{index}/constants/system/matchmakingResult/serverMeasurements に書き込まれます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-230">It then writes the original server measurements for each new member in the target session to /members/{index}/constants/system/matchmakingResult/serverMeasurements.</span></span>
9.  <span data-ttu-id="b34ad-231">すべてのクライアントは、前述のように、ターゲット セッションで初期化を実行します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-231">All clients perform initialization on the target session as discussed above.</span></span> <span data-ttu-id="b34ad-232">ただし、クライアントは Live Compute に接続するため、接続確認のための QoS を互いに実行しません。</span><span class="sxs-lookup"><span data-stu-id="b34ad-232">However, because the clients will be connecting to Live Compute, they do not perform QoS with one another to confirm connectivity.</span></span>
10. <span data-ttu-id="b34ad-233">一部またはすべてのクライアントが **GameServerPlatformService.AllocateClusterAsync メソッド**を呼び出します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-233">Some or all clients call **GameServerPlatformService.AllocateClusterAsync Method**.</span></span> <span data-ttu-id="b34ad-234">最初の呼び出しによって割り当てがトリガーされ、それ以外の呼び出しでは受信確認のみを受け取ります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-234">The first one triggers the allocation, while the others receive only an acknowledgement.</span></span> <span data-ttu-id="b34ad-235">このメソッドによって、MPSD からターゲット セッションが取得され、負荷などの Live Compute 固有の情報のみならずターゲット セッション内のデータセンター優先順位に基づいて、データセンターが選択されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-235">The method gets the target session from MPSD and chooses a dataceter based on the datacenter preferences in the target session, as well as load and other Live Compute-specific knowledge.</span></span>
11. <span data-ttu-id="b34ad-236">すべてのクライアントがプレイします。</span><span class="sxs-lookup"><span data-stu-id="b34ad-236">All clients play.</span></span>

## <a name="configuring-smartmatch-for-your-title"></a><span data-ttu-id="b34ad-237">タイトルの SmartMatch の構成</span><span class="sxs-lookup"><span data-stu-id="b34ad-237">Configuring SmartMatch for your Title</span></span>


### <a name="configuration-of-smartmatch-matchmaking-runtime-operations"></a><span data-ttu-id="b34ad-238">SmartMatch マッチメイキング ランタイム操作の構成</span><span class="sxs-lookup"><span data-stu-id="b34ad-238">Configuration of SmartMatch Matchmaking Runtime Operations</span></span>

<span data-ttu-id="b34ad-239">SmartMatch マッチメイ キングのすべての構成は、 [Xbox デベロッパー ポータル (XDP)](https://xdp.xboxlive.com)または[Windows デベロッパー センター](https://developer.microsoft.com/dashboard/windows/overview)を通じて行われます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-239">All configuration of SmartMatch matchmaking occurs through the [Xbox Developer Portal (XDP)](https://xdp.xboxlive.com) or [Windows Dev Center](https://developer.microsoft.com/dashboard/windows/overview).</span></span> <span data-ttu-id="b34ad-240">構成にはタイトルの [ServiceConfiguration] -&gt; [Multiplayer & Matchmaking] セクションを使用します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-240">Configuration uses the ServiceConfiguration-&gt;Multiplayer & Matchmaking section for a title.</span></span>


#### <a name="matchmaking-session-template-configuration"></a><span data-ttu-id="b34ad-241">マッチメイキング セッション テンプレートの構成</span><span class="sxs-lookup"><span data-stu-id="b34ad-241">Matchmaking Session Template Configuration</span></span>

<span data-ttu-id="b34ad-242">「[SmartMatch マッチメイキング]()」で説明したように、マッチメイキングに関連するセッションには、マッチ チケット セッションとマッチ ターゲット セッションの 2 種類があります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-242">As discussed in [SmartMatch Matchmaking](), there are two types of session related to matchmaking, the match ticket session and the match target session.</span></span> <span data-ttu-id="b34ad-243">基本的には、チケット セッションはマッチメイキング サービスへの入力で、ターゲット セッションは出力です。</span><span class="sxs-lookup"><span data-stu-id="b34ad-243">Basically, a ticket session is the input to the matchmaking service, while the target session is the output.</span></span> <span data-ttu-id="b34ad-244">セッション テンプレートを構成するときは、各セッションの種類のテンプレートを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-244">When configuring session templates, you should create a template for each session type.</span></span>

<span data-ttu-id="b34ad-245">チケット セッションでは、専用テンプレートを使用できます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-245">For a ticket session, you might use a dedicated template.</span></span> <span data-ttu-id="b34ad-246">または、ゲーム プレイへの使用を意図していないロビー セッションまたは他のセッション用にテンプレートを再利用できます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-246">Alternatively, you can reuse a template for a lobby session or other session not intended to be used for game play.</span></span>

| <span data-ttu-id="b34ad-247">重要</span><span class="sxs-lookup"><span data-stu-id="b34ad-247">Important</span></span>                                                                                      |
|-------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="b34ad-248">チケット セッションでは QoS チェックを有効にしてはなりません。また、"ゲームプレイ" 機能でマークしてはなりません。</span><span class="sxs-lookup"><span data-stu-id="b34ad-248">The ticket session must not have QoS checks enabled, and must not be marked with the "gameplay" capability.</span></span> |

<span data-ttu-id="b34ad-249">ターゲット セッションでは、マッチメイキングされるゲーム プレイ向けのテンプレートを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-249">For a target session, you must use a template that is intended for matchmade game play.</span></span> <span data-ttu-id="b34ad-250">ゲーム プレイの開始前にピア間の QoS チェックを有効にする設定が含まれている必要があり、"ゲームプレイ" 機能でマークされている必要があります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-250">It should have settings that enable QoS checks between peers prior to the start of game play, and must be marked with the "gameplay" capability.</span></span>

<span data-ttu-id="b34ad-251">Config XDP またはデベロッパー センターの UI では、各セッションをマップする 1 つまたは複数のホッパー、各どのセッション一緒にマッチされたそのホッパー内を決定するルールが含まれます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-251">With the config UI for XDP or Dev Center, you can map each session to one or more hoppers, each containing rules that determine how sessions are matched together in that hopper.</span></span> <span data-ttu-id="b34ad-252">詳細については、「マッチメイキングの基本的なホッパー構成」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b34ad-252">For more information, see Basic Hopper Configuration for Matchmaking.</span></span>


#### <a name="basic-hopper-configuration-for-matchmaking"></a><span data-ttu-id="b34ad-253">マッチメイキングの基本的なホッパー構成</span><span class="sxs-lookup"><span data-stu-id="b34ad-253">Basic Hopper Configuration for Matchmaking</span></span>

<span data-ttu-id="b34ad-254">このセクションでは、基本的なホッパー フィールドを構成するのに使用するフィールドを定義します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-254">This section defines the fields used to configure basic hopper fields.</span></span> <span data-ttu-id="b34ad-255">この構成の後、「ホッパー ルールの構成」に説明されているように、ホッパー ルールを構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-255">After this configuration, you must configure the hopper rules, as described in Configuration of Hopper Rules.</span></span>

![](../../images/multiplayer/session_template_hopper_edit.png)


###### <a name="name"></a><span data-ttu-id="b34ad-256">Name</span><span class="sxs-lookup"><span data-stu-id="b34ad-256">Name</span></span>

<span data-ttu-id="b34ad-257">セッションをマッチメイキングへ送信するときに使用されるホッパーの名前。</span><span class="sxs-lookup"><span data-stu-id="b34ad-257">The name of the hopper that is used when submitting a session to matchmaking.</span></span> <span data-ttu-id="b34ad-258">この名前は、マッチ チケットの作成中に **CreateMatchTicketAsync** メソッドへのパラメーターとして渡される値と一致する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-258">This name must match the value passed as a parameter to the **CreateMatchTicketAsync** method during creation of the match ticket.</span></span>


###### <a name="minmax-group-size"></a><span data-ttu-id="b34ad-259">Min/Max Group Size</span><span class="sxs-lookup"><span data-stu-id="b34ad-259">Min/Max Group Size</span></span>

<span data-ttu-id="b34ad-260">ホッパー内のセッションから作成されるプレイヤー グループの最小および最大サイズ。</span><span class="sxs-lookup"><span data-stu-id="b34ad-260">The minimum and maximum sizes for the player group that is to be created from sessions in the hopper.</span></span> <span data-ttu-id="b34ad-261">マッチメイキング サービスは、マッチされるグループを、最大グループ サイズまで、可能な限り大きく作成しようとします。</span><span class="sxs-lookup"><span data-stu-id="b34ad-261">The matchmaking service attempts to create a matched group that is as large as possible, up to the maximum group size.</span></span> <span data-ttu-id="b34ad-262">ただし、マッチされるグループは、最小グループ サイズを満たすために十分なプレイヤーを集めることができる場合に作成します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-262">However, it does create a matched group if it can assemble enough players to meet the minimum group size.</span></span>


###### <a name="should-rule-expansion-cycles"></a><span data-ttu-id="b34ad-263">Should Rule Expansion Cycles</span><span class="sxs-lookup"><span data-stu-id="b34ad-263">Should Rule Expansion Cycles</span></span>

<span data-ttu-id="b34ad-264">SHOULD ルールの場合、マッチメイキング サービスは、成功するマッチが見つからない場合、検索領域を増やし、指定されたマッチメイキング ルールを徐々に緩和しようとします。</span><span class="sxs-lookup"><span data-stu-id="b34ad-264">For a SHOULD rule, the matchmaking service attempts to increase the search space and relax the provided matchmaking rules over time if no successful match is found.</span></span> <span data-ttu-id="b34ad-265">このプロセスは、[Should Rule Expansion Cycles] フィールドを使用して指定される、複数のサイクルに対して実行されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-265">This process is performed over multiple cycles, as specified using the Should Rule Expansion Cycles field.</span></span> <span data-ttu-id="b34ad-266">最後の拡張サイクルで SHOULD ルールは削除されるため、チケットのマッチを妨げなくなります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-266">Upon the last expansion cycle, the SHOULD rules are dropped so that they no longer prevent tickets from matching.</span></span> <span data-ttu-id="b34ad-267">ただし、複数のチケットが使用可能な場合は、最適なマッチを判断するために引き続き使用されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-267">However, they are still used to determine the best match if multiple tickets are available.</span></span> <span data-ttu-id="b34ad-268">Number と QoS 型のみが、削除される前に拡張されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-268">Only number and QoS types are expanded before they are dropped.</span></span> <span data-ttu-id="b34ad-269">このトピックの「ホッパー ルールの構成」も参照してください。</span><span class="sxs-lookup"><span data-stu-id="b34ad-269">See also Configuration of Hopper Rules in this topic.</span></span>

<span data-ttu-id="b34ad-270">Should Rule Explansion Cycles 設定の値を増加させると、SHOULD ルール拡張のサイクル数が増えますが、マッチメイキングの時間も増加します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-270">Increasing the value of the Should Rule Explansion Cycles setting provides more cycles for SHOULD rule expansion, but also increases matchmaking duration.</span></span> <span data-ttu-id="b34ad-271">既定値は 3 で、ほとんどの構成で一般的に十分です。</span><span class="sxs-lookup"><span data-stu-id="b34ad-271">The default value is 3, which is generally sufficient for most configurations.</span></span>

| <span data-ttu-id="b34ad-272">重要</span><span class="sxs-lookup"><span data-stu-id="b34ad-272">Important</span></span>                                                                                                                                                                        |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="b34ad-273">拡張サイクルは 5 秒の固定間隔で発生します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-273">Expansion cycles occur at fixed time intervals of 5 seconds.</span></span> <span data-ttu-id="b34ad-274">最後の拡張サイクルで、すべての "推奨" ルールは、残りのマッチメイキングを試行するときに考慮されなくなります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-274">Upon the last expansion cycle, all "Should" rules are no longer taken into account for the remainder of the matchmaking attempt.</span></span> |

##### <a name="ranked-hopper"></a><span data-ttu-id="b34ad-275">ランク ホッパー</span><span class="sxs-lookup"><span data-stu-id="b34ad-275">Ranked Hopper</span></span>
<span data-ttu-id="b34ad-276">通常、SmartMatch はブロックされているプレイヤーがマッチングされることを防ぎます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-276">Ordinarily SmartMatch will prevent blocked players from being matched.</span></span> <span data-ttu-id="b34ad-277">[Ranked Hopper] がチェックされている場合、プレイヤーがこのシステムを使用してよりスキルの高いプレイヤーを回避することを防ぐために、このロジックがバイパスされます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-277">If Ranked Hopper is checked, this logic is bypassed to prevent players from using this system to avoid players of greater skill.</span></span>

#### <a name="configuration-of-hopper-rules"></a><span data-ttu-id="b34ad-278">ホッパー ルールの構成</span><span class="sxs-lookup"><span data-stu-id="b34ad-278">Configuration of Hopper Rules</span></span>

<span data-ttu-id="b34ad-279">このセクションでは、ホッパーのルールを構成するのに使用するフィールドを定義します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-279">This section defines the fields used to configure rules for a hopper.</span></span>

###### <a name="common-rule-fields"></a><span data-ttu-id="b34ad-280">Common Rule Fields</span><span class="sxs-lookup"><span data-stu-id="b34ad-280">Common Rule Fields</span></span>

<span data-ttu-id="b34ad-281">このセクションで定義されているフィールドはすべてのホッパー ルールに共通です。</span><span class="sxs-lookup"><span data-stu-id="b34ad-281">The fields defined in this section are common to all hopper rules.</span></span>

**<span data-ttu-id="b34ad-282">ルール名</span><span class="sxs-lookup"><span data-stu-id="b34ad-282">Rule Name</span></span>**

<span data-ttu-id="b34ad-283">構成目的でルールに表示されるフレンドリ名。</span><span class="sxs-lookup"><span data-stu-id="b34ad-283">The friendly name displayed for the rule for configuration purposes.</span></span>

**<span data-ttu-id="b34ad-284">ルールの種類</span><span class="sxs-lookup"><span data-stu-id="b34ad-284">Rule Type</span></span>**

<span data-ttu-id="b34ad-285">ルールの種類。</span><span class="sxs-lookup"><span data-stu-id="b34ad-285">The rule type.</span></span> <span data-ttu-id="b34ad-286">オプションは [MUST] および [SHOULD] です。</span><span class="sxs-lookup"><span data-stu-id="b34ad-286">Options are MUST and SHOULD.</span></span> <span data-ttu-id="b34ad-287">マッチメイキングが成功するには、MUST ルールが満たされる必要があります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-287">MUST rules have to be satisfied for successful matchmaking.</span></span> <span data-ttu-id="b34ad-288">成功したマッチを見つけるには、SHOULD ルールを緩和したり削除したりすることができます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-288">SHOULD rules can be relaxed and/or removed to find a successful match.</span></span> <span data-ttu-id="b34ad-289">このプロセスの詳細については、「SHOULD ルール拡張の構成」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b34ad-289">See Configuration of SHOULD Rule Expansion for more details on this process.</span></span>


**<span data-ttu-id="b34ad-290">データ型</span><span class="sxs-lookup"><span data-stu-id="b34ad-290">Data Type</span></span>**

<span data-ttu-id="b34ad-291">マッチメイキング ルールの属性のデータ型。</span><span class="sxs-lookup"><span data-stu-id="b34ad-291">The data type of the attribute of the matchmaking rule.</span></span> <span data-ttu-id="b34ad-292">設定可能な値:   [Number]。</span><span class="sxs-lookup"><span data-stu-id="b34ad-292">Possible values are:   Number.</span></span> <span data-ttu-id="b34ad-293">単純な 32 ビットの数値を指定します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-293">Specify a simple 32-bit numerical value.</span></span>
-   <span data-ttu-id="b34ad-294">[String]。</span><span class="sxs-lookup"><span data-stu-id="b34ad-294">String.</span></span> <span data-ttu-id="b34ad-295">最大 128 文字の Unicode 文字列を指定します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-295">Specify a Unicode string of up to 128 characters.</span></span>
-   <span data-ttu-id="b34ad-296">[Collection]。</span><span class="sxs-lookup"><span data-stu-id="b34ad-296">Collection.</span></span> <span data-ttu-id="b34ad-297">文字列の配列を指定します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-297">Specify an array of strings.</span></span> <span data-ttu-id="b34ad-298">この値を使用して、ダウンロード コンテンツ (DLC)、チーム メンバーシップ、またはプレイヤーの役割設定を識別します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-298">Use this value to identify downloadable content (DLC), squad membership, or role preference for players.</span></span>
-   <span data-ttu-id="b34ad-299">[Quality of Service]。</span><span class="sxs-lookup"><span data-stu-id="b34ad-299">Quality of Service.</span></span> <span data-ttu-id="b34ad-300">マッチメイキングにレイテンシー QoS データを含めるためのカスタム データ型を指定します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-300">Specify a custom data type for including latency QoS data in matchmaking.</span></span> <span data-ttu-id="b34ad-301">このようなルールは、マッチメイキング ホッパーあたり 1 つだけ使用してください。</span><span class="sxs-lookup"><span data-stu-id="b34ad-301">Only one such rule should be used per matchmaking hopper.</span></span>

| <span data-ttu-id="b34ad-302">注意</span><span class="sxs-lookup"><span data-stu-id="b34ad-302">Note</span></span> |
|----------|
| <span data-ttu-id="b34ad-303">この制限がタイトルで問題となる場合は、デベロッパー アカウント マネージャーに問い合わせてください。</span><span class="sxs-lookup"><span data-stu-id="b34ad-303">Please contact your Developer Account Manager if this limit is problematic for your title.</span></span> |

-   <span data-ttu-id="b34ad-304">[Total Value]。</span><span class="sxs-lookup"><span data-stu-id="b34ad-304">Total Value.</span></span> <span data-ttu-id="b34ad-305">送信されたマッチメイキング値を合計するカスタム データ型を指定します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-305">Specify a custom data type that sums up submitted matchmaking values.</span></span> <span data-ttu-id="b34ad-306">この値を使用して、結果として得られる合計を特定の範囲内に収める、または正確な値にすることができます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-306">You can use this value to ensure that the resulting sum is within a specific range or is an exact value.</span></span>
-   <span data-ttu-id="b34ad-307">[Team]。</span><span class="sxs-lookup"><span data-stu-id="b34ad-307">Team.</span></span> <span data-ttu-id="b34ad-308">マッチメイキング要求に含まれるプレイヤーのチームのカスタム データ型を指定します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-308">Specify a custom data type for the teams of players included in matchmaking requests.</span></span> <span data-ttu-id="b34ad-309">この値を使用して、単一のマッチ チケット内のプレイヤーが複数のチームに分散されるのを回避できます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-309">You can use this value to avoid splitting players within a single match ticket among multiple teams.</span></span>


###### <a name="data-type-specific-rule-fields"></a><span data-ttu-id="b34ad-310">データ型に固有のルール フィールド</span><span class="sxs-lookup"><span data-stu-id="b34ad-310">Data Type-specific Rule Fields</span></span>

<span data-ttu-id="b34ad-311">このセクションでは、一部のデータ型に適用されるが、その他のデータ型には適用されないルールを定義するために使用するフィールドを定義します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-311">This section defines fields used to define rules that apply to some data types, but not to others.</span></span> <span data-ttu-id="b34ad-312">UI は、明確にするデータの種類を特定のルールに適用できる必要があります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-312">The UI should be able to clarify which data types apply to particular rules.</span></span>

**<span data-ttu-id="b34ad-313">Allow Wildcards</span><span class="sxs-lookup"><span data-stu-id="b34ad-313">Allow Wildcards</span></span>**

<span data-ttu-id="b34ad-314">マッチ チケットで属性を省略できるかどうかを示す値。</span><span class="sxs-lookup"><span data-stu-id="b34ad-314">A value that indicates if the attribute can be omitted in the match ticket.</span></span> <span data-ttu-id="b34ad-315">省略される場合、チケットは、この属性の値に関係なく、その他のチケットと互換性を持つようになります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-315">If it is omitted, the ticket becomes compatible with any other ticket, regardless of the value for this attribute.</span></span>


**<span data-ttu-id="b34ad-316">Attribute Source</span><span class="sxs-lookup"><span data-stu-id="b34ad-316">Attribute Source</span></span>**

<span data-ttu-id="b34ad-317">データ型の値のソース。</span><span class="sxs-lookup"><span data-stu-id="b34ad-317">The source of the data type value.</span></span> <span data-ttu-id="b34ad-318">使用できるソースは次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="b34ad-318">Possible sources are:</span></span>
- <span data-ttu-id="b34ad-319">[Title provided]。</span><span class="sxs-lookup"><span data-stu-id="b34ad-319">Title provided.</span></span> <span data-ttu-id="b34ad-320">データ値は、マッチ チケットで送信されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-320">The data value is submitted in the match ticket.</span></span>
-   <span data-ttu-id="b34ad-321">[User stat instance]。</span><span class="sxs-lookup"><span data-stu-id="b34ad-321">User stat instance.</span></span> <span data-ttu-id="b34ad-322">データ値は、UserStatistics サービスから自動的に取得されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-322">The data value is automatically retrieved from the UserStatistics service.</span></span>


**<span data-ttu-id="b34ad-323">属性名</span><span class="sxs-lookup"><span data-stu-id="b34ad-323">Attribute Name</span></span>**

<span data-ttu-id="b34ad-324">属性値のソースの名前。</span><span class="sxs-lookup"><span data-stu-id="b34ad-324">The name of the attribute value source.</span></span> <span data-ttu-id="b34ad-325">マッチ チケット内のプロパティ名またはユーザー統計情報の名前のいずれかです。</span><span class="sxs-lookup"><span data-stu-id="b34ad-325">It is either the property name in the match ticket or the name of a user statistic.</span></span>


**<span data-ttu-id="b34ad-326">既定値</span><span class="sxs-lookup"><span data-stu-id="b34ad-326">Default Value</span></span>**

<span data-ttu-id="b34ad-327">マッチメイキング要求に対して値が指定されていない、または使用できない場合の、データ型の既定値。</span><span class="sxs-lookup"><span data-stu-id="b34ad-327">The default value for the data type, if no value is specified or available for the matchmaking request.</span></span> <span data-ttu-id="b34ad-328">[Allow Wildcards] フィールドが選択されていて、値が指定されていない場合、既定値は適用されません。</span><span class="sxs-lookup"><span data-stu-id="b34ad-328">The default value is not applied when the Allow Wildcards field is selected and no value is specified.</span></span>


**<span data-ttu-id="b34ad-329">Weight</span><span class="sxs-lookup"><span data-stu-id="b34ad-329">Weight</span></span>**

<span data-ttu-id="b34ad-330">ルールの重要性。</span><span class="sxs-lookup"><span data-stu-id="b34ad-330">The importance of the rule.</span></span> <span data-ttu-id="b34ad-331">Weight は、マッチメイキングおよびルール拡張中にどのルールを優先するかを示すために使用できます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-331">The weight can be used to indicate which rules are prioritized during matchmaking and rule expansion.</span></span> <span data-ttu-id="b34ad-332">Weight の値は正数で、既定では 1 に設定されています。</span><span class="sxs-lookup"><span data-stu-id="b34ad-332">The weight value must be positive, and defaults to 1.</span></span>


**<span data-ttu-id="b34ad-333">Flatten Method</span><span class="sxs-lookup"><span data-stu-id="b34ad-333">Flatten Method</span></span>**

<span data-ttu-id="b34ad-334">Number データ型のみ。</span><span class="sxs-lookup"><span data-stu-id="b34ad-334">Number data types only.</span></span> <span data-ttu-id="b34ad-335">マッチを満たすために複数の値がどのように組み合わされるかを示す値。</span><span class="sxs-lookup"><span data-stu-id="b34ad-335">A value that indicates how multiple values are combined to satisfy a match.</span></span> <span data-ttu-id="b34ad-336">単一のマッチ チケット内および複数のチケットにわたる異なるプレイヤーの複数の値に適用されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-336">It applies to multiple values for different players in a single match ticket and across multiple tickets.</span></span> <span data-ttu-id="b34ad-337">設定できる値は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="b34ad-337">The possible values are:</span></span>
-  <span data-ttu-id="b34ad-338">Min/Max。</span><span class="sxs-lookup"><span data-stu-id="b34ad-338">Min/Max.</span></span> <span data-ttu-id="b34ad-339">異なるマッチ チケットからの複数の値の最小または最大値を使用します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-339">Use the minimum or maximum value of multiple values from different match tickets.</span></span>
-   <span data-ttu-id="b34ad-340">Average。</span><span class="sxs-lookup"><span data-stu-id="b34ad-340">Average.</span></span> <span data-ttu-id="b34ad-341">複数のマッチ チケットに含まれている複数の値の平均値を使用します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-341">Use average value of multiple values from different match tickets.</span></span>


**<span data-ttu-id="b34ad-342">Max Diff</span><span class="sxs-lookup"><span data-stu-id="b34ad-342">Max Diff</span></span>**

<span data-ttu-id="b34ad-343">Number データ型のみ。</span><span class="sxs-lookup"><span data-stu-id="b34ad-343">Number data types only.</span></span> <span data-ttu-id="b34ad-344">ルールを満たすために 2 つの比較される値の間で許容される数値の最大差。</span><span class="sxs-lookup"><span data-stu-id="b34ad-344">The maximum acceptable numerical difference between two compared values to satisfy a rule.</span></span> <span data-ttu-id="b34ad-345">SHOULD ルールの場合、この値はルール拡張の開始点です。</span><span class="sxs-lookup"><span data-stu-id="b34ad-345">For a SHOULD rule, this value is the starting point for rule expansion.</span></span>


**<span data-ttu-id="b34ad-346">Set Operation</span><span class="sxs-lookup"><span data-stu-id="b34ad-346">Set Operation</span></span>**

<span data-ttu-id="b34ad-347">Collection データ型のみ。</span><span class="sxs-lookup"><span data-stu-id="b34ad-347">Collection data types only.</span></span> <span data-ttu-id="b34ad-348">設定値のグループのマッチ時に実行する操作。</span><span class="sxs-lookup"><span data-stu-id="b34ad-348">The operation to perform on matching the group of set values.</span></span> <span data-ttu-id="b34ad-349">使用できるオプションは次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="b34ad-349">The possible options are:</span></span>
- <span data-ttu-id="b34ad-350">[Intersection]。</span><span class="sxs-lookup"><span data-stu-id="b34ad-350">Intersection.</span></span> <span data-ttu-id="b34ad-351">2 つのコレクションを、それらの交差の量に基づいてマッチさせます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-351">Match two collections based on the amount of intersection between them.</span></span> <span data-ttu-id="b34ad-352">この設定により、類似または同一のコレクション値になります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-352">This setting results in similar or identical collection values.</span></span>
-   <span data-ttu-id="b34ad-353">[Difference]。</span><span class="sxs-lookup"><span data-stu-id="b34ad-353">Difference.</span></span> <span data-ttu-id="b34ad-354">2 つのコレクションを、それらの差の量に基づいてマッチさせます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-354">Match two collections based on the amount of difference between them.</span></span>
-   <span data-ttu-id="b34ad-355">[Role Preference]。</span><span class="sxs-lookup"><span data-stu-id="b34ad-355">Role Preference.</span></span> <span data-ttu-id="b34ad-356">役割ベースのゲーム モードでプレイヤーの役割の設定に基づいてコレクションをマッチさせます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-356">Match collections based on the preferences for the role of a player in role-based game modes.</span></span>


**<span data-ttu-id="b34ad-357">Target Intersection</span><span class="sxs-lookup"><span data-stu-id="b34ad-357">Target Intersection</span></span>**

<span data-ttu-id="b34ad-358">[Set Operation] 構成の一部。</span><span class="sxs-lookup"><span data-stu-id="b34ad-358">Part of Set Operation configuration.</span></span> <span data-ttu-id="b34ad-359">マッチされる前の、2 つのコレクションの最小の交差または最大の差。</span><span class="sxs-lookup"><span data-stu-id="b34ad-359">The minimal intersection or maximum difference for two collections before they are matched.</span></span>


**<span data-ttu-id="b34ad-360">Network Topology</span><span class="sxs-lookup"><span data-stu-id="b34ad-360">Network Topology</span></span>**

<span data-ttu-id="b34ad-361">Quality of service データ型のみ。</span><span class="sxs-lookup"><span data-stu-id="b34ad-361">Quality of service data type only.</span></span> <span data-ttu-id="b34ad-362">QoS に使用されるネットワーク トポロジー。</span><span class="sxs-lookup"><span data-stu-id="b34ad-362">The network topology that is used for QoS.</span></span> <span data-ttu-id="b34ad-363">可能な値は、[Peer to Peer]、[Peer to Host]、および [Client/Server] です。</span><span class="sxs-lookup"><span data-stu-id="b34ad-363">Possible values are Peer to Peer, Peer to Host, and Client/Server.</span></span>


**<span data-ttu-id="b34ad-364">Maximum Latency/Scaling Maximum</span><span class="sxs-lookup"><span data-stu-id="b34ad-364">Maximum Latency/Scaling Maximum</span></span>**  
<span data-ttu-id="b34ad-365">Quality of service データ型のみ。</span><span class="sxs-lookup"><span data-stu-id="b34ad-365">Quality of service data type only.</span></span> <span data-ttu-id="b34ad-366">指定されたネットワーク トポロジー内でマッチメイキングを成功させるための最大遅延。</span><span class="sxs-lookup"><span data-stu-id="b34ad-366">The maximum latency for successful matchmaking within the specified network topology.</span></span> <span data-ttu-id="b34ad-367">[Client-Server] の [Quality of service] SHOULD ルールを使用するとき、この値は (必須の遅延ではなく) スケーリング値として扱われます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-367">This value is treated as a scaling value (as opposed to a required latency) when using a Client-Server Quality of service should rule.</span></span>


| <span data-ttu-id="b34ad-368">注意</span><span class="sxs-lookup"><span data-stu-id="b34ad-368">Note</span></span>                                                                                                                                                           |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="b34ad-369">さらに、ホッパーには既定の評判ルールも適用されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-369">In addition, default reputation rules are also applied to a hopper.</span></span> <span data-ttu-id="b34ad-370">これらのルールは削除できません。マッチメイキング中に評判の処理を正しく行うために使用されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-370">These rules cannot be removed and are used to ensure correct handling of reputation during matchmaking.</span></span> |


**<span data-ttu-id="b34ad-371">Allow Waiting for Roles</span><span class="sxs-lookup"><span data-stu-id="b34ad-371">Allow Waiting for Roles</span></span>**

<span data-ttu-id="b34ad-372">Collection Role Preferences データ型のみ。</span><span class="sxs-lookup"><span data-stu-id="b34ad-372">Collection Role Preferences data type only.</span></span> <span data-ttu-id="b34ad-373">すべての利用可能な役割を埋めるためにマッチ サービスがマッチメイキング チケットを保持するかどうかを指定します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-373">Specifies if the match service holds the matchmaking ticket in order to fill all available roles.</span></span>


###### <a name="expansion-delta"></a><span data-ttu-id="b34ad-374">Expansion Delta</span><span class="sxs-lookup"><span data-stu-id="b34ad-374">Expansion Delta</span></span>

<span data-ttu-id="b34ad-375">送信されたルールを各拡張生成のためにどのぐらい緩和するかを示す値。</span><span class="sxs-lookup"><span data-stu-id="b34ad-375">Value indicating how much to relax the submitted rule for each expansion generation.</span></span> <span data-ttu-id="b34ad-376">拡張デルタは、Max Diff 値に加えて適用されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-376">The expansion delta is applied in addition to the Max Diff value.</span></span> <span data-ttu-id="b34ad-377">詳細については、「例 1 (ルール拡張)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b34ad-377">See Example 1 (Rule Expansion) for details.</span></span>

<span data-ttu-id="b34ad-378">拡張デルタを使用して、複数の数値を異なる速度で拡張することもできます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-378">You can also use the expansion delta to expand multiple number values at different speeds.</span></span> <span data-ttu-id="b34ad-379">すべてのルールに適用されるため、拡張サイクル構成設定を通じてこれを行うことはできません。</span><span class="sxs-lookup"><span data-stu-id="b34ad-379">This is not possible through the expansion cycle configuration setting because it applies to all rules.</span></span> <span data-ttu-id="b34ad-380">代わりに、小数の拡張値 (0.4 など) を使用します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-380">Instead, the approach is to use decimal expansion values, for example, 0.4.</span></span> <span data-ttu-id="b34ad-381">拡張は、新しい整数に達したときにのみ発生します。これにより、同じ数の拡張サイクルに対しても、異なる拡張速度が可能になります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-381">An expansion only occurs when a new integer is reached, which allows for different expansion speeds, even for the same number of expansion cycles.</span></span>


###### <a name="qos-expansion-peer-to-peer-peer-to-host"></a><span data-ttu-id="b34ad-382">QoS 拡張 (ピア ツー ピア、ピア ツー ホスト)</span><span class="sxs-lookup"><span data-stu-id="b34ad-382">QoS Expansion (Peer-to-Peer, Peer-to-Host)</span></span>
<span data-ttu-id="b34ad-383">ピア ゲーム用の Quality of Service 型の拡張の場合、拡張デルタを構成することはできません。</span><span class="sxs-lookup"><span data-stu-id="b34ad-383">For quality of service type expansion for peer games, the expansion delta cannot be configured.</span></span> <span data-ttu-id="b34ad-384">代わりに、以下の拡張方法のいずれかを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-384">Instead, you should use one of the following expansion strategies.</span></span>

<table>

<tr>

<tr>
<td>
<b>1. <span data-ttu-id="b34ad-385">MaxLatency が 256 未満。</span><span class="sxs-lookup"><span data-stu-id="b34ad-385">MaxLatency < 256.</span></span></b><p/><p/>

<span data-ttu-id="b34ad-386">拡張は MaxLatency \* 拡張サイクルで実行されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-386">Expansion is performed at MaxLatency \* Expansion Cycle.</span></span><p/>
<span data-ttu-id="b34ad-387">たとえば、初期値が 200 の場合、最初のサイクルで 200 が使用され、2 番目のサイクルでは 400 が使用されます。以降についても同様です。</span><span class="sxs-lookup"><span data-stu-id="b34ad-387">For example, if the initial value is 200, then 200 is used in the first cycle, 400 in the second cycle, and so on.</span></span>
</td>
</tr>

<tr>
<td>
<b>2. <span data-ttu-id="b34ad-388">MaxLatency が 256 以上。</span><span class="sxs-lookup"><span data-stu-id="b34ad-388">MaxLatency > or equal to 256</span></span></b><p/><p/>

<span data-ttu-id="b34ad-389">拡張は、50 から MaxLatency-256 まで線形的に行われます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-389">Expansion linearly scales from 50 to MaxLatency - 256.</span></span><p/>
<span data-ttu-id="b34ad-390">たとえば、初期値が 556 の場合、値は、サイクルの数にわたって 50 から 300 まで線形的に拡張します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-390">For example, if the initial value is 556, the value scales linearly from 50 to 300 over the number of cycles.</span></span> <span data-ttu-id="b34ad-391">つまり、6 つのサイクルが選ばれた場合、値は 50、100、150、200、250、および 300 になります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-391">That is, if six cycles were chosen, then the values would be 50, 100, 150, 200, 250, and 300.</span></span> <span data-ttu-id="b34ad-392">5 つのサイクルが選ばれた場合、値は 50、112.5、175、237.5、および 300 になります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-392">If five cycles were chosen, the values would be 50, 112.5, 175, 237.5, and 300.</span></span>
</td>
</tr>

</tr>
</table>

##### <a name="qos-expansion-client-server"></a><span data-ttu-id="b34ad-393">QoS 拡張 (クライアント/サーバー)</span><span class="sxs-lookup"><span data-stu-id="b34ad-393">QoS Expansion (Client-Server)</span></span>
<span data-ttu-id="b34ad-394">専用サーバーを使用しているとき、拡張は相対的な優先度に基づきます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-394">When using dedicated servers, the expansion is based on relative preference.</span></span> <span data-ttu-id="b34ad-395">早期の拡張サイクルでは、最も優先度の高いサーバーのみが考慮されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-395">Only most preferred servers will be considered in early expansion cycles.</span></span> <span data-ttu-id="b34ad-396">時間が経過すると、より優先度の低い他のサーバーが使用されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-396">Over time, other, less preferred servers will be used.</span></span> <span data-ttu-id="b34ad-397">適切な拡張を保証するために、Scaling Maximum と呼ばれる、MaxLatency に似た値が必要です。</span><span class="sxs-lookup"><span data-stu-id="b34ad-397">To ensure appropriate expansion, we require a value similar to MaxLatency, called Scaling Maximum.</span></span> <span data-ttu-id="b34ad-398">この Scaling Maximum は引き続き、最大の許容 ping 時間に設定する必要がありますが、この値は ping 時間の絶対要件を提供するのではなく、プレイヤーによって提供される異なったサーバー ping 時間の相対的スケールを与えます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-398">This Scaling Maximum should still be set to the largest acceptable ping time—however, this value gives a relative scale for the different server ping times provided by a player, as opposed to providing an absolute requirement for ping times.</span></span> <span data-ttu-id="b34ad-399">要求でリストから削除することにより、許容できない ping 時間のサーバーを意図的に除外できることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="b34ad-399">Note that you may intentionally exclude servers with unacceptable ping times by removing them from the list in the request.</span></span>

#### <a name="example-1-rule-expansion"></a><span data-ttu-id="b34ad-400">例 1 (ルール拡張)</span><span class="sxs-lookup"><span data-stu-id="b34ad-400">Example 1 (Rule Expansion)</span></span>

<span data-ttu-id="b34ad-401">マッチメイキングにはプレイヤー レベルが使用されます。プレイヤーは、レベルの近さに基づいて大まかにマッチされます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-401">Player level is used for matchmaking, and players are matched loosely, based on the closeness of their levels.</span></span> <span data-ttu-id="b34ad-402">レベル間の違いが最も少ないプレイヤーが優先されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-402">Players with the least amount of difference between their levels are preferred.</span></span>

-   <span data-ttu-id="b34ad-403">プレイヤー レベルのルール</span><span class="sxs-lookup"><span data-stu-id="b34ad-403">Player Level Rule</span></span>
-   <span data-ttu-id="b34ad-404">[Rule Type]: SHOULD</span><span class="sxs-lookup"><span data-stu-id="b34ad-404">Rule Type: SHOULD</span></span>
-   <span data-ttu-id="b34ad-405">[Data Type]: Number</span><span class="sxs-lookup"><span data-stu-id="b34ad-405">Data Type: Number</span></span>
-   <span data-ttu-id="b34ad-406">[Max Diff]: 1</span><span class="sxs-lookup"><span data-stu-id="b34ad-406">Max Diff: 1</span></span>
-   <span data-ttu-id="b34ad-407">[Expansion Delta]: 2</span><span class="sxs-lookup"><span data-stu-id="b34ad-407">Expansion Delta: 2</span></span>
-   <span data-ttu-id="b34ad-408">[Flatten Method]: Average</span><span class="sxs-lookup"><span data-stu-id="b34ad-408">Flatten Method: Average</span></span>

<span data-ttu-id="b34ad-409">既定では、プレイヤー レベルの必要な差は 1 以下です。</span><span class="sxs-lookup"><span data-stu-id="b34ad-409">By default, the required difference between player levels is 1 or less.</span></span> <span data-ttu-id="b34ad-410">この差の範囲内でマッチが見つかった場合、プレイヤーはマッチされます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-410">If a match is found within this difference, players are matched.</span></span> <span data-ttu-id="b34ad-411">最初の一致が見つからない場合、プレイヤー レベル値は反復ごとに 2 拡張されます (既定では 3 反復)。</span><span class="sxs-lookup"><span data-stu-id="b34ad-411">If no initial match is found, the player level value is expanded by 2 for each iteration (three iterations by default).</span></span> <span data-ttu-id="b34ad-412">このシナリオの結果、レベル 20 のプレイヤーのマッチメイキング動作は次の表に示すようになります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-412">This scenario results in a matchmaking behavior for a player at level 20, as shown in the table below.</span></span>

| <span data-ttu-id="b34ad-413">手順</span><span class="sxs-lookup"><span data-stu-id="b34ad-413">Step</span></span>                    | <span data-ttu-id="b34ad-414">マッチ候補のレベル値</span><span class="sxs-lookup"><span data-stu-id="b34ad-414">Level Value for Potential Match Candidates</span></span> | <span data-ttu-id="b34ad-415">マッチを成功させるための効果的なレベルの差</span><span class="sxs-lookup"><span data-stu-id="b34ad-415">Effective Level Distance for Successful Match</span></span> |
|-----|
| <span data-ttu-id="b34ad-416">初期の送信値</span><span class="sxs-lookup"><span data-stu-id="b34ad-416">Initial Submitted Value</span></span> | <span data-ttu-id="b34ad-417">19-21</span><span class="sxs-lookup"><span data-stu-id="b34ad-417">19-21</span></span>                                      | <span data-ttu-id="b34ad-418">1</span><span class="sxs-lookup"><span data-stu-id="b34ad-418">1</span></span>                                             |
| <span data-ttu-id="b34ad-419">拡張サイクル 1</span><span class="sxs-lookup"><span data-stu-id="b34ad-419">Expansion Cycle 1</span></span>       | <span data-ttu-id="b34ad-420">17-23</span><span class="sxs-lookup"><span data-stu-id="b34ad-420">17-23</span></span>                                      | <span data-ttu-id="b34ad-421">3</span><span class="sxs-lookup"><span data-stu-id="b34ad-421">3</span></span>                                             |
| <span data-ttu-id="b34ad-422">拡張サイクル 2</span><span class="sxs-lookup"><span data-stu-id="b34ad-422">Expansion Cycle 2</span></span>       | <span data-ttu-id="b34ad-423">15-25</span><span class="sxs-lookup"><span data-stu-id="b34ad-423">15-25</span></span>                                      | <span data-ttu-id="b34ad-424">5</span><span class="sxs-lookup"><span data-stu-id="b34ad-424">5</span></span>                                             |
| <span data-ttu-id="b34ad-425">拡張サイクル 3</span><span class="sxs-lookup"><span data-stu-id="b34ad-425">Expansion Cycle 3</span></span>       | <span data-ttu-id="b34ad-426">13-27</span><span class="sxs-lookup"><span data-stu-id="b34ad-426">13-27</span></span>                                      | <span data-ttu-id="b34ad-427">7</span><span class="sxs-lookup"><span data-stu-id="b34ad-427">7</span></span>                                             |

<span data-ttu-id="b34ad-428">拡張サイクルが続くにつれ、マッチを成功させるための効果的なレベルの差は、[Max Diff] 値を変更することなく増加します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-428">As the expansion cycles continue, the effective level distance for a successful match increases without altering the Max Diff value.</span></span> <span data-ttu-id="b34ad-429">プレイヤー レベル値のみが緩和されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-429">Only the player level value is relaxed.</span></span>


#### <a name="example-2-collection-rule"></a><span data-ttu-id="b34ad-430">例 2 (コレクション ルール)</span><span class="sxs-lookup"><span data-stu-id="b34ad-430">Example 2 (Collection Rule)</span></span>

<span data-ttu-id="b34ad-431">ゲームは、プレイヤーに対して利用可能な 3 種類の DLC をリリースします。</span><span class="sxs-lookup"><span data-stu-id="b34ad-431">The game releases three types of DLC that are available for players.</span></span> <span data-ttu-id="b34ad-432">このマッチメイキング ルールは、"DLC のみ" のゲーム プレイ マッチメイキングに適用されます。プレイヤーは、他のプレイヤーとマッチメイキングされるためには、少なくとも 1 つの DLC を所有している必要があります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-432">This matchmaking rule is applied to "DLC only" game play matchmaking, and a player should own at least one DLC to be matchmade with other players.</span></span>

-   <span data-ttu-id="b34ad-433">プレイヤー DLC ルール</span><span class="sxs-lookup"><span data-stu-id="b34ad-433">Player DLC Rule</span></span>
-   <span data-ttu-id="b34ad-434">[Rule Type]: MUST</span><span class="sxs-lookup"><span data-stu-id="b34ad-434">Rule Type: MUST</span></span>
-   <span data-ttu-id="b34ad-435">[Data Type]: Collection</span><span class="sxs-lookup"><span data-stu-id="b34ad-435">Data Type: Collection</span></span>
-   <span data-ttu-id="b34ad-436">[Set Operation]: [Intersection]</span><span class="sxs-lookup"><span data-stu-id="b34ad-436">Set Operation: Intersection</span></span>
-   <span data-ttu-id="b34ad-437">[Target Intersection]: 1</span><span class="sxs-lookup"><span data-stu-id="b34ad-437">Target Intersection: 1</span></span>

<span data-ttu-id="b34ad-438">プレイヤーは、自分の DLC を評価し、次の表に示す値をマッチ チケットで送信します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-438">Players evaluate their DLCs and submit the values shown in the next table in their match tickets.</span></span>

| <span data-ttu-id="b34ad-439">注意</span><span class="sxs-lookup"><span data-stu-id="b34ad-439">Note</span></span>                                                                                                                                   |
|-----------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="b34ad-440">次の表で、コレクション値は DLC の所有を示しています。</span><span class="sxs-lookup"><span data-stu-id="b34ad-440">In the table below, the collection value indicates the ownership of the DLC.</span></span> <span data-ttu-id="b34ad-441">DLC をプレイヤーが利用可能な場合は 1 に設定され、利用可能でない場合は 0 に設定されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-441">It is set to 1 if the DLC is available for the player and to 0 if not.</span></span> |

| <span data-ttu-id="b34ad-442">プレイヤー</span><span class="sxs-lookup"><span data-stu-id="b34ad-442">Player</span></span>   | <span data-ttu-id="b34ad-443">コレクション値</span><span class="sxs-lookup"><span data-stu-id="b34ad-443">Collection Value</span></span> | <span data-ttu-id="b34ad-444">プレイヤーとのマッチ</span><span class="sxs-lookup"><span data-stu-id="b34ad-444">Matched with Players</span></span> | <span data-ttu-id="b34ad-445">注意</span><span class="sxs-lookup"><span data-stu-id="b34ad-445">Note</span></span>           |
|----------|------------------|----------------------|----------------|
| <span data-ttu-id="b34ad-446">プレイヤー 1</span><span class="sxs-lookup"><span data-stu-id="b34ad-446">Player 1</span></span> | <span data-ttu-id="b34ad-447">{ "1", "1", "1"}</span><span class="sxs-lookup"><span data-stu-id="b34ad-447">{ "1", "1", "1"}</span></span> | <span data-ttu-id="b34ad-448">3</span><span class="sxs-lookup"><span data-stu-id="b34ad-448">3</span></span>                    | <span data-ttu-id="b34ad-449">すべての DLC を所有</span><span class="sxs-lookup"><span data-stu-id="b34ad-449">Owns all DLCs</span></span>  |
| <span data-ttu-id="b34ad-450">プレイヤー 2</span><span class="sxs-lookup"><span data-stu-id="b34ad-450">Player 2</span></span> | <span data-ttu-id="b34ad-451">{ "0", "0", "0"}</span><span class="sxs-lookup"><span data-stu-id="b34ad-451">{ "0", "0", "0"}</span></span> | <span data-ttu-id="b34ad-452">なし</span><span class="sxs-lookup"><span data-stu-id="b34ad-452">None</span></span>                 | <span data-ttu-id="b34ad-453">DLC を所有していない</span><span class="sxs-lookup"><span data-stu-id="b34ad-453">Owns no DLC</span></span>    |
| <span data-ttu-id="b34ad-454">プレイヤー 3</span><span class="sxs-lookup"><span data-stu-id="b34ad-454">Player 3</span></span> | <span data-ttu-id="b34ad-455">{ "1", "0", "0"}</span><span class="sxs-lookup"><span data-stu-id="b34ad-455">{ "1", "0", "0"}</span></span> | <span data-ttu-id="b34ad-456">1</span><span class="sxs-lookup"><span data-stu-id="b34ad-456">1</span></span>                    | <span data-ttu-id="b34ad-457">最初の DLC を所有</span><span class="sxs-lookup"><span data-stu-id="b34ad-457">Owns first DLC</span></span> |

<span data-ttu-id="b34ad-458">例において [Target Intersection] を 2 に設定した場合、交差は 1 のみであるため、プレイヤー 1 と 3 はマッチされません。</span><span class="sxs-lookup"><span data-stu-id="b34ad-458">If the target intersection in the example is set to 2, players 1 and 3 will not be matched, since the intersection between them is only 1.</span></span>

#### <a name="example-3-avoid-previous-players"></a><span data-ttu-id="b34ad-459">例 3 (以前のプレイヤーを避ける)</span><span class="sxs-lookup"><span data-stu-id="b34ad-459">Example 3 (Avoid previous players)</span></span>
<span data-ttu-id="b34ad-460">タイトルは、最近一緒にプレイしたプレイヤーとのゲームを避けることを優先します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-460">The title prefers avoiding a game with the player most recently played.</span></span>
* <span data-ttu-id="b34ad-461">[Rule Type]: MUST</span><span class="sxs-lookup"><span data-stu-id="b34ad-461">Rule Type: MUST</span></span>
* <span data-ttu-id="b34ad-462">[Data Type]: Collection</span><span class="sxs-lookup"><span data-stu-id="b34ad-462">Data Type: Collection</span></span>
* <span data-ttu-id="b34ad-463">[Set Operation]: Difference</span><span class="sxs-lookup"><span data-stu-id="b34ad-463">Set Operation: Difference</span></span>
* <span data-ttu-id="b34ad-464">[Target Intersection]: 0</span><span class="sxs-lookup"><span data-stu-id="b34ad-464">Target Intersection: 0</span></span>

## <a name="defining-team-rules-during-smartmatch-configuration"></a><span data-ttu-id="b34ad-465">SmartMatch 構成時のチーム ルールの定義</span><span class="sxs-lookup"><span data-stu-id="b34ad-465">Defining team rules during SmartMatch configuration</span></span>

### <a name="configuring-team-rules"></a><span data-ttu-id="b34ad-466">チーム ルールの構成</span><span class="sxs-lookup"><span data-stu-id="b34ad-466">Configuring Team Rules</span></span>

<span data-ttu-id="b34ad-467">チーム ルールを設定するには、1 つで、選んだ構成のプラットフォーム (XDP またはデベロッパー センター) を作成して開始します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-467">To set up the Team Rule, begin by creating one in on your chosen configuration platform (XDP or Dev Center).</span></span> <span data-ttu-id="b34ad-468">ゲームがこのホッパーでマッチングされたチケットから作成するチーム サイズを入力します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-468">Fill out the team sizes your game expects to create from the tickets matched in this hopper.</span></span> <span data-ttu-id="b34ad-469">たとえば、4 対 4 を想定しているゲームでは、それぞれの最大サイズが 4 で、名前が異なる 2 つのエントリを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-469">For instance, if your game expects 4v4, you should create two entries, expecting a maximum size of 4 each, and a different name.</span></span> <span data-ttu-id="b34ad-470">最小チーム サイズもあります。これは、チームのプレイヤー数が最大数より少なくてもゲームをプレイできるようにする場合に使用します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-470">There is a minimum team size as well--use this if a game can be played with fewer players on a team.</span></span> <span data-ttu-id="b34ad-471">それ以外の場合は、最大サイズと最小サイズを同じ値にします。</span><span class="sxs-lookup"><span data-stu-id="b34ad-471">Otherwise, the minimum and maximum should be the same value.</span></span>


#### <a name="using-team-rules"></a><span data-ttu-id="b34ad-472">チーム ルールの使用</span><span class="sxs-lookup"><span data-stu-id="b34ad-472">Using Team Rules</span></span>

<span data-ttu-id="b34ad-473">チーム ルールの構成後、ホッパー内のチケットは、分割なしで各グループをチームに組み込むことができない場合はマッチングされなくなります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-473">Once the Team Rule is configured, tickets within the hopper will be prevented from matching if there is no way to fit their groups into teams without causing a split.</span></span> <span data-ttu-id="b34ad-474">ルールによって、チーム割り当ての結果が members/constants/custom/matchmakingresult/initialTeam の下のターゲット セッションに書き込まれます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-474">The rule will write the resulting team allocation to the target session, under members/constants/custom/matchmakingresult/initialTeam.</span></span> <span data-ttu-id="b34ad-475">これは推奨される割り当てにすぎません。タイトルは、プレイヤーを再編成することによりさらに良いゲームにできると判断することもできますが、その場合も、チケットが別々のチームに分割されないようにします。</span><span class="sxs-lookup"><span data-stu-id="b34ad-475">Note that this is simply a suggested allocation--the title may find that by rearranging the players it may create a better game, while still preventing tickets from splitting into different teams.</span></span>

<span data-ttu-id="b34ad-476">進行中のゲームに対してチケットが作成される場合、チーム ルールは追加情報を必要とします。</span><span class="sxs-lookup"><span data-stu-id="b34ad-476">If a ticket is created for a game that is in progress, the Team Rule will require additional information.</span></span> <span data-ttu-id="b34ad-477">たとえば、8 人のプレイヤーが 4 対 4 のゲーム内にいるときに、2 人のプレイヤーが離脱または接続解除したとします。</span><span class="sxs-lookup"><span data-stu-id="b34ad-477">Suppose, for instance, that 8 players are in a 4v4 game, when two players drop or are disconnected.</span></span> <span data-ttu-id="b34ad-478">タイトルはそれらの空きを埋める必要がありますが、ゲームがプレイ中の間はチームを再編成できません。</span><span class="sxs-lookup"><span data-stu-id="b34ad-478">The title would like to fill in those empty spots, but it cannot reshuffle the teams while the game is being played.</span></span>

<span data-ttu-id="b34ad-479">進行中のゲームの補充を実行しようとしていることは、PreserveSession フィールドが "always" に設定されたチケットによって表されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-479">Attempts to fill games in progress are represented by tickets with the PreserveSession field set to "always".</span></span> <span data-ttu-id="b34ad-480">このような場合、チームは既にプレイヤーに割り当てられているので、タイトルは現在のチーム割り当てを指定して、マッチで各チームの空き数がわかるようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-480">In cases like this, because teams have already been allocated to players, the title must specify the current team allocation, so Match will know how many spaces are open on each team.</span></span> <span data-ttu-id="b34ad-481">各プレイヤーがいるチームの名前を提供するために、各プレイヤーは自分のチーム名を members/me/properties/system/groups の下のゲーム セッションに書き込みます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-481">To supply the names of the teams each player is on, each player writes their team name into the game session, under members/me/properties/system/groups.</span></span> <span data-ttu-id="b34ad-482">このフィールドは JArray です。</span><span class="sxs-lookup"><span data-stu-id="b34ad-482">This field is a JArray.</span></span>

<span data-ttu-id="b34ad-483">前述のプロパティがゲーム セッションに書き込まれると、1 人のプレイヤーが、さらにプレイヤーを探そうとして、そのセッションのチケットを作成します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-483">Once the above properties are written to the game session, one player creates a ticket for the session, in an attempt to find more players.</span></span> <span data-ttu-id="b34ad-484">チケットが実行されると、マッチは参加するプレイヤーによる推奨チームを members/constants/custom/matchmakingresult/initialTeam に再び書き込みます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-484">When the ticket is fulfilled, Match will again write the suggested team of any players who join into members/constants/custom/matchmakingresult/initialTeam</span></span>


###### <a name="preferring-even-teams"></a><span data-ttu-id="b34ad-485">同等サイズのチームを優先する</span><span class="sxs-lookup"><span data-stu-id="b34ad-485">Preferring even teams</span></span>

<span data-ttu-id="b34ad-486">さらに、マッチはまず最もサイズの大きいチームによって作成されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-486">Additionally, matches will be made with the largest teams first.</span></span> <span data-ttu-id="b34ad-487">このため、仮定の 4 対 4 ホッパーでは、4 プレイヤーのチケットが、4 プレイヤーのチケットがなくなるまで先にマッチングされます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-487">This means that in a hypothetical 4v4 hopper, tickets of 4 players will be matched together first, until no tickets of 4 remain.</span></span> <span data-ttu-id="b34ad-488">続いて 3 プレイヤーのチケットどうしがマッチングされ、その次は 2 プレイヤーのチケットのマッチングに進みます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-488">Tickets of 3 then continue, pulling singletons as they need to, and so forth.</span></span> <span data-ttu-id="b34ad-489">この方法では、同等サイズのチケットが存在し、他のルールで禁止されていなければ、通常は同等サイズのチケットどうしが対戦することになります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-489">In this manner, tickets of similar size will generally play against each other, if they are present and not prevented by other rules.</span></span> <span data-ttu-id="b34ad-490">チーム ルールの優先度は他のルールよりもかなり高いことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="b34ad-490">Note that this gives the Team Rule fairly strong precedence over other rules.</span></span> <span data-ttu-id="b34ad-491">たとえば、ユーザーが限られており、高スキルでサイズが 4 のチケットが 1 つ (A)、低スキルでサイズが 4 のチケットが 1 つ (B)、および高スキルでサイズが 1 のチケットが 4 つ (C ～ F) からなると仮定します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-491">For example, suppose you have a limited population, consisting of one ticket of size 4 with high skill(A), one ticket of size 4 with low skill(B), and four tickets of size 1 with high skill(C-F).</span></span> <span data-ttu-id="b34ad-492">チーム ルールにより、マッチでは A と C、D、E、F ではなく、A と B のマッチングが優先されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-492">The Team Rule will cause Match to prefer A and B matching, as opposed to A, C, D, E, and F.</span></span>


###### <a name="should-variant"></a><span data-ttu-id="b34ad-493">推奨ルールとの違い</span><span class="sxs-lookup"><span data-stu-id="b34ad-493">Should Variant</span></span>

<span data-ttu-id="b34ad-494">必須ルールは、すべての生成でチケットの分割を阻止し、同等サイズのチームを優先する分類を提供します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-494">The Must rule prevents ticket splitting in all generations, and provides the prefer-even-teams sorting.</span></span> <span data-ttu-id="b34ad-495">推奨ルールは、最後の生成までは同じで、その後はチケットが分割される可能性がありますが、同等サイズのチームを優先する分類は引き続き有効です。</span><span class="sxs-lookup"><span data-stu-id="b34ad-495">The Should rule is identical until the last generation--once there, tickets may be split, although the prefer-even-teams sorting will still be active.</span></span>

## <a name="target-session-initialization-and-qos"></a><span data-ttu-id="b34ad-496">ターゲット セッションの初期化と QoS</span><span class="sxs-lookup"><span data-stu-id="b34ad-496">Target Session Initialization and QoS</span></span>

<span data-ttu-id="b34ad-497">プレイヤーのグループは、「[SmartMatch マッチメイキング]()」に説明されているように、SmartMatch マッチメイキングによってターゲット セッションにマッチされます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-497">A group of players is matched into a target session by SmartMatch matchmaking, as described in [SmartMatch Matchmaking]().</span></span> <span data-ttu-id="b34ad-498">タイトルは、十分なプレイヤーが参加したこと、また、必要に応じて互いに正常に接続できることを確認するための手順を実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-498">The title must take steps to confirm that enough players have joined that they can successfully connect to one another if they need to.</span></span> <span data-ttu-id="b34ad-499">このプロセスは、ターゲット セッションの初期化と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-499">This process is known as target session initialization.</span></span>

<span data-ttu-id="b34ad-500">ピア ツー ピア ネットワーク トポロジーを使用するゲームの場合、ターゲット セッションの初期化の重要な要素は QoS の測定と評価です。</span><span class="sxs-lookup"><span data-stu-id="b34ad-500">For games using peer-to-peer network topologies, an important aspect of target session initialization is QoS measurement and evaluation.</span></span> <span data-ttu-id="b34ad-501">関係する操作は、Xbox One 本体間 (または本体とサーバー間) の遅延と帯域幅の測定、およびノード間のネットワーク接続が良好であるかどうかを判断するための測定値の評価です。</span><span class="sxs-lookup"><span data-stu-id="b34ad-501">Associated operations are the measurement of latency and bandwidth between Xbox One consoles (or between consoles and servers), and the evaluation of the resulting measurements to determine whether the network connection between nodes is good.</span></span>

<span data-ttu-id="b34ad-502">次のフロー チャートは、ターゲット セッションの初期化と QoS 処理を実装する方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="b34ad-502">The following flow chart illustrates how to implement the initialization of the target session and QoS operations.</span></span>

![](../../images/multiplayer/Multiplayer_2015_Matchmaking_QoS.png)

### <a name="managed-initialization"></a><span data-ttu-id="b34ad-503">初期化の管理</span><span class="sxs-lookup"><span data-stu-id="b34ad-503">Managed Initialization</span></span>

<span data-ttu-id="b34ad-504">MPSD は、"初期化の管理" という機能をサポートします。この機能を通じて、セッションに関与するクライアント間でターゲット セッションの初期化プロセスを調整します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-504">MPSD supports a feature called "managed initialization" through which it coordinates the target session initialization process across the clients involved in a session.</span></span> <span data-ttu-id="b34ad-505">MPSD は、セッションの初期化ステージおよび関連付けられたタイムアウトを自動的に追跡し、必要に応じてクライアント間の接続を評価します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-505">MPSD automatically tracks the initialization stages and the associated timeouts for the session, and evaluates the connectivity among clients if needed.</span></span> <span data-ttu-id="b34ad-506">初期化の管理は、**MultiplayerManagedInitialization クラス**によって表されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-506">Managed initialization is represented by the **MultiplayerManagedInitialization Class**.</span></span>

| <span data-ttu-id="b34ad-507">注意</span><span class="sxs-lookup"><span data-stu-id="b34ad-507">Note</span></span>                                                                                                                  |
|------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="b34ad-508">タイトルで SmartMatch マッチメイキングを使用して MPSD の初期化の管理機能を活用することを強くお勧めします。</span><span class="sxs-lookup"><span data-stu-id="b34ad-508">It is highly recommended for your title using SmartMatch matchmaking to take advantage of the MPSD managed initialization feature.</span></span> |


#### <a name="managed-initialization-episodes-and-stages"></a><span data-ttu-id="b34ad-509">初期化の管理のエピソードおよびステージ</span><span class="sxs-lookup"><span data-stu-id="b34ad-509">Managed Initialization Episodes and Stages</span></span>

<span data-ttu-id="b34ad-510">ターゲット セッションでは、マッチメイキングが新しいプレイヤーをセッションに追加するたびに初期化の管理が行われます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-510">A target session undergoes managed initialization any time matchmaking adds new players to the session.</span></span> <span data-ttu-id="b34ad-511">SmartMatch は、セッション メンバーをユーザー状態 Reserved として追加します。つまり、各メンバーはスロットを占有しますが、まだセッションには参加していません。</span><span class="sxs-lookup"><span data-stu-id="b34ad-511">SmartMatch adds session members as user state Reserved, meaning that each member takes up a slot but has not yet joined the session.</span></span> <span data-ttu-id="b34ad-512">新しいプレイヤーの各グループは、新しい初期化エピソードをトリガーします。</span><span class="sxs-lookup"><span data-stu-id="b34ad-512">Each group of new players triggers a new initialization episode.</span></span>

<span data-ttu-id="b34ad-513">初期化の完了時、各プレイヤーはプロセスに成功または失敗します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-513">Upon completion of initialization, each player either succeeds or fails the process.</span></span> <span data-ttu-id="b34ad-514">初期化に成功したプレイヤーは、ターゲット セッションを使用してプレイできます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-514">A player who succeeds in initializing can play using the target session.</span></span> <span data-ttu-id="b34ad-515">失敗したプレイヤーは、マッチメイキングに再送信され、別のセッションにマッチされる必要があります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-515">A player who fails must be resubmitted to matchmaking to be matched into another session.</span></span> <span data-ttu-id="b34ad-516">セッションが *preserveSession* パラメーターを Always に設定してマッチメイキングに送信される場合、セッションの既存のメンバーで初期化されません。それらのメンバーは適切に設定されていると MPSD が想定するためです。</span><span class="sxs-lookup"><span data-stu-id="b34ad-516">For cases where a session is submitted to matchmaking with the *preserveSession* parameter set to Always, the pre-existing members of the session do not undergo initialization, as MPSD assumes them to be properly set up.</span></span>

<span data-ttu-id="b34ad-517">初期化の管理の各エピソードは以下のステージで構成されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-517">Each managed initialization episode consists of these stages:</span></span>

-   <span data-ttu-id="b34ad-518">参加 - セッション メンバーは自身をセッションに書き込んでユーザー状態を Reserved から Active に移行し、セキュア デバイス アドレスなどの基本データをアップロードします。</span><span class="sxs-lookup"><span data-stu-id="b34ad-518">Joining -- session members write themselves to the session to move their user state from Reserved to Active, and upload basic data, such as secure device address.</span></span>
-   <span data-ttu-id="b34ad-519">測定 - ピア ベースのトポロジーでは、セッション メンバーは互いに QoS を測定し、結果をセッションにアップロードします。</span><span class="sxs-lookup"><span data-stu-id="b34ad-519">Measurement -- for peer-based topologies, session members measure QoS to one another, and upload the results to the session.</span></span>
-   <span data-ttu-id="b34ad-520">評価 - MPSD は、最後の 2 段階の結果を評価し、セッションやメンバーが正常に初期化されたかどうかを判断します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-520">Evaluation -- MPSD evaluates the results of the last two stages, and determines whether the session and/or members have successfully initialized.</span></span>

<span data-ttu-id="b34ad-521">タイトル コードは、セッション上で動作して、各ユーザー (およびその結果としてセッション) の参加および測定フェーズを進めます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-521">The title code operates on the session to advance each user (and therefore the session) through the joining and measurement phases.</span></span> <span data-ttu-id="b34ad-522">評価ステージが成功または失敗した後、プレイを開始する、またはマッチメイキングに戻ることができます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-522">It then can either start play or go back to matchmaking after the evaluation stage has succeeded or failed.</span></span>


### <a name="configuring-the-target-session-for-initialization"></a><span data-ttu-id="b34ad-523">初期化のためのターゲット セッションの構成</span><span class="sxs-lookup"><span data-stu-id="b34ad-523">Configuring the Target Session for Initialization</span></span>

<span data-ttu-id="b34ad-524">タイトルは、初期化されるターゲット セッションで定数を使用して、初期化の管理プロセスを構成できます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-524">The title can configure the managed initialization process using constants in the target session being initialized.</span></span> <span data-ttu-id="b34ad-525">これらの定数は、バージョン 107 (推奨されるテンプレート バージョン) のセッション テンプレートでは /constants/system の下で設定されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-525">These constants are set under /constants/system in the session template with version 107, the recommended template version.</span></span> <span data-ttu-id="b34ad-526">2 種類の構成設定を行うことができます。初期化の管理プロセスを全体として構成する設定と、QoS 要件を構成する設定です。</span><span class="sxs-lookup"><span data-stu-id="b34ad-526">Two types of configuration settings can be made: settings that configure the managed initialization process as a whole, and settings that configure QoS requirements.</span></span> <span data-ttu-id="b34ad-527">一般的なタイトル シナリオのセッション テンプレートの例については、「[MPSD セッション テンプレート](multiplayer-session-directory.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="b34ad-527">See [MPSD Session Templates](multiplayer-session-directory.md) for examples of session templates for common title scenarios.</span></span>

| <span data-ttu-id="b34ad-528">注意</span><span class="sxs-lookup"><span data-stu-id="b34ad-528">Note</span></span>                                                                                                                              |
|------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="b34ad-529">QoS 要件がターゲット セッションの初期化構成で定義されていない場合、初期化中の測定ステージはスキップされます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-529">If QoS requirements are not defined in the target session initialization configuration the measurement stage during initialization is skipped.</span></span> |


#### <a name="configuring-managed-initialization-as-a-whole"></a><span data-ttu-id="b34ad-530">全体としての初期化の管理の構成</span><span class="sxs-lookup"><span data-stu-id="b34ad-530">Configuring Managed Initialization as a Whole</span></span>

<span data-ttu-id="b34ad-531">以下は、初期化の管理を全体的に制御する場合に設定するフィールドです。</span><span class="sxs-lookup"><span data-stu-id="b34ad-531">Below are the fields to set to control managed initialization overall.</span></span> <span data-ttu-id="b34ad-532">これらは /constants/system/memberInitialization オブジェクトの一部です。</span><span class="sxs-lookup"><span data-stu-id="b34ad-532">They are part of the /constants/system/memberInitialization object:</span></span>
- <span data-ttu-id="b34ad-533">joinTimeout。</span><span class="sxs-lookup"><span data-stu-id="b34ad-533">joinTimeout.</span></span> <span data-ttu-id="b34ad-534">初期化エピソードの開始後に MPSD が各メンバーの参加を待機する時間を指定します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-534">Specifies how long MPSD waits for each member to join, after the initialization episode has begun.</span></span> <span data-ttu-id="b34ad-535">既定値は 10 秒です。</span><span class="sxs-lookup"><span data-stu-id="b34ad-535">Default is 10 seconds.</span></span>
-   <span data-ttu-id="b34ad-536">measurementTimeout。</span><span class="sxs-lookup"><span data-stu-id="b34ad-536">measurementTimeout.</span></span> <span data-ttu-id="b34ad-537">測定ステージの開始後に MPSD が各メンバーの QoS 測定結果のアップロードを待機する時間を指定します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-537">Specifies how long MPSD waits for each member to upload QoS measurement results, after the measurement stage has begun.</span></span> <span data-ttu-id="b34ad-538">既定値は 30000 秒です。</span><span class="sxs-lookup"><span data-stu-id="b34ad-538">Default is 30000 seconds.</span></span>
-   <span data-ttu-id="b34ad-539">membersNeededToStart。</span><span class="sxs-lookup"><span data-stu-id="b34ad-539">membersNeededToStart.</span></span> <span data-ttu-id="b34ad-540">最初の初期化エピソードが成功するために初期化で成功する必要があるメンバーの数を指定します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-540">Specifies the number of members who must succeed at initialization for the first initialization episode to succeed.</span></span> <span data-ttu-id="b34ad-541">既定値は 1 です。</span><span class="sxs-lookup"><span data-stu-id="b34ad-541">Default is 1.</span></span>

| <span data-ttu-id="b34ad-542">注意</span><span class="sxs-lookup"><span data-stu-id="b34ad-542">Note</span></span>                                              |
|----------------------------------------------------------------|
| <span data-ttu-id="b34ad-543">このしきい値が満たされない場合は、すべてのメンバーが初期化に失敗します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-543">If this threshold is not met, all members fail initialization.</span></span> |


#### <a name="configuring-qos-requirements"></a><span data-ttu-id="b34ad-544">QoS 要件の構成</span><span class="sxs-lookup"><span data-stu-id="b34ad-544">Configuring QoS Requirements</span></span>

<span data-ttu-id="b34ad-545">QoS は、タイトルがピア ツー ピアまたはピアー ツー ホスト トポロジーを使用する場合のみ、初期化中に必要です。</span><span class="sxs-lookup"><span data-stu-id="b34ad-545">QoS is only needed during initialization if the title uses a peer-to-peer or peer-to-host topology.</span></span> <span data-ttu-id="b34ad-546">各トポロジーは、/constants/system/ の下にあるトポロジー固有の定数にマップされます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-546">Each topology maps to a topology-specific constant under /constants/system/.</span></span>
###### <a name="configuring-qos-requirements-for-peer-to-peer-topology"></a><span data-ttu-id="b34ad-547">ピア ツー ピア トポロジーの QoS 要件の構成</span><span class="sxs-lookup"><span data-stu-id="b34ad-547">Configuring QoS Requirements for Peer-to-peer Topology</span></span>

| <span data-ttu-id="b34ad-548">注意</span><span class="sxs-lookup"><span data-stu-id="b34ad-548">Note</span></span>                                                                                                                                                                                         |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="b34ad-549">ピアー ツー ピアー トポロジーでタイトルが QoS 要件設定を行うことはまれです。</span><span class="sxs-lookup"><span data-stu-id="b34ad-549">It is rare for titles to make QoS requirement settings for the peer-to-peer topology.</span></span> <span data-ttu-id="b34ad-550">これらの設定は、非常に制約が厳しく、厳格なネットワーク アドレス変換 (NAT) を使用するプレイヤーで問題が発生します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-550">These settings are very restrictive and cause problems for players with strict network address translations (NATs).</span></span> |

<span data-ttu-id="b34ad-551">ピア ツー ピア トポロジーの QOS 要件は、peerToPeerRequirements オブジェクトで設定されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-551">Peer-to-peer topology QOS requirements are set in the peerToPeerRequirements object.</span></span> <span data-ttu-id="b34ad-552">すべてのクライアントが他のすべてのクライアントに接続できることが必要です。</span><span class="sxs-lookup"><span data-stu-id="b34ad-552">Every client must be able to connect to every other client.</span></span> <span data-ttu-id="b34ad-553">このオブジェクトには、次の関連フィールドがあります。</span><span class="sxs-lookup"><span data-stu-id="b34ad-553">The object has the following pertinent fields:</span></span>
-   <span data-ttu-id="b34ad-554">latencyMaximum。</span><span class="sxs-lookup"><span data-stu-id="b34ad-554">latencyMaximum.</span></span> <span data-ttu-id="b34ad-555">任意の 2 つのクライアント間の最大遅延時間を指定します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-555">Specifies the maximum latency between any two clients.</span></span>
-   <span data-ttu-id="b34ad-556">bandwidthMinimum。</span><span class="sxs-lookup"><span data-stu-id="b34ad-556">bandwidthMinimum.</span></span> <span data-ttu-id="b34ad-557">任意の 2 つのクライアント間の最小帯域幅を指定します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-557">Specifies the minimum bandwidth between any two clients.</span></span>


###### <a name="configuring-qos-requirements-for-peer-to-host-topology"></a><span data-ttu-id="b34ad-558">ピア ツー ホスト トポロジーの QoS 要件の構成</span><span class="sxs-lookup"><span data-stu-id="b34ad-558">Configuring QoS Requirements for Peer-to-host Topology</span></span>

<span data-ttu-id="b34ad-559">ピア ツー ホスト トポロジーの QOS 要件は、peerToHostRequirements オブジェクトで設定されます。</span><span class="sxs-lookup"><span data-stu-id="b34ad-559">Peer-to-host topology QOS requirements are set in the peerToHostRequirements object.</span></span> <span data-ttu-id="b34ad-560">すべてのクライアントが単一の共通ホストに接続できることが必要です。</span><span class="sxs-lookup"><span data-stu-id="b34ad-560">Every client must be able to connect to a single common host.</span></span> <span data-ttu-id="b34ad-561">このオブジェクトが構成され、初期化が成功した場合、MPSD は、可能性のあるホスト ("ホスト候補" と呼ばれます) であるクライアントの初期リストを作成します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-561">If this object is configured and initialization succeeds, MPSD will create an initial list of clients that are potential hosts, known as the "host candidates."</span></span> <span data-ttu-id="b34ad-562">設定するフィールドは次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="b34ad-562">Here are the fields to set:</span></span>
-   <span data-ttu-id="b34ad-563">latencyMaximum。</span><span class="sxs-lookup"><span data-stu-id="b34ad-563">latencyMaximum.</span></span> <span data-ttu-id="b34ad-564">各ピアとホストの間の最大遅延時間を指定します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-564">Specifies the maximum latency between each peer and the host.</span></span>
-   <span data-ttu-id="b34ad-565">bandwidthDownMinimum。</span><span class="sxs-lookup"><span data-stu-id="b34ad-565">bandwidthDownMinimum.</span></span> <span data-ttu-id="b34ad-566">各ピアとホストの間の最小ダウンストリーム帯域幅を指定します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-566">Specifies the minimum downstream bandwidth between each peer and the host.</span></span>
-   <span data-ttu-id="b34ad-567">bandwidthUpMinimum。</span><span class="sxs-lookup"><span data-stu-id="b34ad-567">bandwidthUpMinimum.</span></span> <span data-ttu-id="b34ad-568">各ピアとホストの間の最小アップストリーム帯域幅を指定します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-568">Specifies the minimum upstream bandwidth between each peer and the host.</span></span>
-   <span data-ttu-id="b34ad-569">hostSelectionMetric。</span><span class="sxs-lookup"><span data-stu-id="b34ad-569">hostSelectionMetric.</span></span> <span data-ttu-id="b34ad-570">ホストを選択するために使用するメトリックを指定します。</span><span class="sxs-lookup"><span data-stu-id="b34ad-570">Specifies the metric used to select the host.</span></span>

## <a name="see-also"></a><span data-ttu-id="b34ad-571">関連項目</span><span class="sxs-lookup"><span data-stu-id="b34ad-571">See also</span></span>

[<span data-ttu-id="b34ad-572">タイトルの SmartMatch の構成</span><span class="sxs-lookup"><span data-stu-id="b34ad-572">Configuring SmartMatch for your Title</span></span>]()

[<span data-ttu-id="b34ad-573">MPSD セッション テンプレート</span><span class="sxs-lookup"><span data-stu-id="b34ad-573">MPSD Session Templates</span></span>](multiplayer-session-directory.md)

[<span data-ttu-id="b34ad-574">SmartMatch のランタイム操作</span><span class="sxs-lookup"><span data-stu-id="b34ad-574">SmartMatch Runtime Operations</span></span>]()
