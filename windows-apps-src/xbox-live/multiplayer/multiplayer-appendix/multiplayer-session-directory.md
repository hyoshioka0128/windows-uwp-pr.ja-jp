---
title: マルチプレイヤー セッション ディレクトリ
author: KevinAsgari
description: Xbox Live マルチプレイヤー セッション ディレクトリ (MPSD) について説明します。
ms.assetid: a9b029ea-4cc1-485a-8253-e1c74184f35e
ms.author: kevinasg
ms.date: 04/04/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: Xbox Live, Xbox, ゲーム, UWP, Windows 10, Xbox One, MPSD, マルチプレイヤー セッション ディレクトリ
ms.localizationpriority: medium
ms.openlocfilehash: d69867e2ba5d56eb47007732ae7197c9991be4c4
ms.sourcegitcommit: 933e71a31989f8063b020746fdd16e9da94a44c4
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/11/2018
ms.locfileid: "4531174"
---
# <a name="multiplayer-session-directory-mpsd"></a><span data-ttu-id="85b55-104">マルチプレイヤー セッション ディレクトリ (MPSD)</span><span class="sxs-lookup"><span data-stu-id="85b55-104">Multiplayer Session Directory (MPSD)</span></span>

<span data-ttu-id="85b55-105">この記事は、次のセクションで構成されています。</span><span class="sxs-lookup"><span data-stu-id="85b55-105">This article contains the following sections:</span></span>

* <span data-ttu-id="85b55-106">MPSD 概要</span><span class="sxs-lookup"><span data-stu-id="85b55-106">MPSD Overview</span></span>
* <span data-ttu-id="85b55-107">MPSD の変更通知処理および切断検出</span><span class="sxs-lookup"><span data-stu-id="85b55-107">MPSD Change Notification Handling and Disconnect Detection</span></span>
* <span data-ttu-id="85b55-108">セッションへの MPSD ハンドル</span><span class="sxs-lookup"><span data-stu-id="85b55-108">MPSD Handles to Sessions</span></span>
* <span data-ttu-id="85b55-109">セッション更新の同期</span><span class="sxs-lookup"><span data-stu-id="85b55-109">Synchronization of Session Updates</span></span>
* <span data-ttu-id="85b55-110">MPSD の呼び出し</span><span class="sxs-lookup"><span data-stu-id="85b55-110">Calling MPSD</span></span>
* <span data-ttu-id="85b55-111">MPSD セッション テンプレート</span><span class="sxs-lookup"><span data-stu-id="85b55-111">MPSD Session Templates</span></span>
* <span data-ttu-id="85b55-112">マルチプレイヤー セッション エクスプローラー</span><span class="sxs-lookup"><span data-stu-id="85b55-112">Multiplayer Session Explorer</span></span>

## <a name="session-overview"></a><span data-ttu-id="85b55-113">セッションの概要</span><span class="sxs-lookup"><span data-stu-id="85b55-113">Session Overview</span></span>

### <a name="what-is-mpsd"></a><span data-ttu-id="85b55-114">MPSD の概要</span><span class="sxs-lookup"><span data-stu-id="85b55-114">What is MPSD?</span></span>

<span data-ttu-id="85b55-115">マルチプレイヤー セッション ディレクトリ (MPSD) は、複数のクライアントにわたってゲームのマルチプレイヤー システム メタデータを一元化する、Xbox Live クラウドで動作するサービスです。</span><span class="sxs-lookup"><span data-stu-id="85b55-115">Multiplayer session directory (MPSD) is a service operating in the Xbox Live cloud that centralizes a game's multiplayer system metadata across multiple clients.</span></span> <span data-ttu-id="85b55-116">これは **MultiplayerService クラス**によってラップされます。</span><span class="sxs-lookup"><span data-stu-id="85b55-116">It is wrapped by the **MultiplayerService Class**.</span></span>

<span data-ttu-id="85b55-117">MPSD により、タイトルは、ユーザーのグループを接続するために必要な基本情報を共有できます。</span><span class="sxs-lookup"><span data-stu-id="85b55-117">MPSD allows titles to share the basic information needed to connect a group of users.</span></span> <span data-ttu-id="85b55-118">セッション機能が同期され、一貫性が保たれます。</span><span class="sxs-lookup"><span data-stu-id="85b55-118">It ensures that session functionality is synchronized and consistent.</span></span> <span data-ttu-id="85b55-119">招待の送信/受け入れおよびゲーマー カード経由での参加において、シェルおよび本体のオペレーティング システムと調整します。</span><span class="sxs-lookup"><span data-stu-id="85b55-119">It coordinates with the shell and console operating system in sending/accepting invites and in being joined via the gamer card.</span></span>


### <a name="mpsd-sessions"></a><span data-ttu-id="85b55-120">MPSD セッション</span><span class="sxs-lookup"><span data-stu-id="85b55-120">MPSD Sessions</span></span>

<span data-ttu-id="85b55-121">MPSD セッションは、**MultiplayerSession クラス**によって、1 人以上のユーザーがゲームを使用するシナリオとして表されます。</span><span class="sxs-lookup"><span data-stu-id="85b55-121">An MPSD session is represented by the **MultiplayerSession Class** as the scenario in which one or more people use a game.</span></span> <span data-ttu-id="85b55-122">セッションは、Xbox Live クラウドに存在するセキュア JSON ドキュメントとして MPSD によって保存されます。</span><span class="sxs-lookup"><span data-stu-id="85b55-122">A session is stored by MPSD as a secure JSON document residing in the Xbox Live cloud.</span></span> <span data-ttu-id="85b55-123">MPSD セッションの具体的な特性は次のとおりです。タイトルによって作成され、管理されます。</span><span class="sxs-lookup"><span data-stu-id="85b55-123">Specifically, an MPSD session has the following characteristics:   Is created and managed by titles.</span></span>

-   <span data-ttu-id="85b55-124">一意の URI を持ちます。</span><span class="sxs-lookup"><span data-stu-id="85b55-124">Has a unique URI.</span></span> <span data-ttu-id="85b55-125">詳細については、「**セッション ディレクトリ URI**」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="85b55-125">For more information, see **Session Directory URIs**.</span></span>
-   <span data-ttu-id="85b55-126">ユーザー (セッション メンバーと呼ばれます) 間の接続を可能にします。</span><span class="sxs-lookup"><span data-stu-id="85b55-126">Enables connectivity among users, called session members.</span></span>
-   <span data-ttu-id="85b55-127">メンバーごとの属性、ゲーム設定、ブートストラップ情報、ゲーム サーバー情報など、ゲーム プレイを可能にするために役立つ情報を格納します。</span><span class="sxs-lookup"><span data-stu-id="85b55-127">Stores data useful for enabling game play, for example, per-member attributes, game settings, bootstrapping information, and game server information.</span></span>

<span data-ttu-id="85b55-128">MPSD は、マルチプレイヤー ゲームの設定で使用される複数のセッション バリエーションをサポートします。</span><span class="sxs-lookup"><span data-stu-id="85b55-128">MPSD supports several session variations for use in setting up multiplayer games.</span></span> <span data-ttu-id="85b55-129">すべてのセッションに、プレイヤーの Xbox ユーザー ID (XUID) およびセキュア デバイス アソシエーション アドレス データが含まれます。</span><span class="sxs-lookup"><span data-stu-id="85b55-129">Every session contains players' Xbox user identifiers (XUIDs) and secure device association address data.</span></span>

-   <span data-ttu-id="85b55-130">ゲーム プレイのパターンとして使用されるゲーム セッション。</span><span class="sxs-lookup"><span data-stu-id="85b55-130">Game session, used as the pattern for game play.</span></span> <span data-ttu-id="85b55-131">ゲーム セッションは、ピア ツー ピア、ピア ツー ホスト、ピア ツー サーバー、またはこれらのタイプのハイブリッドです。</span><span class="sxs-lookup"><span data-stu-id="85b55-131">A game session can be peer-to-peer, peer-to-host, peer-to-server, or a hybrid of these types.</span></span>
-   <span data-ttu-id="85b55-132">チケット セッション。マッチメイキング中にマッチの状態を追跡するために使用されるヘルパー セッションです。</span><span class="sxs-lookup"><span data-stu-id="85b55-132">Ticket session, a helper session used to track the state of a match during matchmaking.</span></span> <span data-ttu-id="85b55-133">多くの場合ロビー セッションでもあり、ゲーム セッションの場合もあります。</span><span class="sxs-lookup"><span data-stu-id="85b55-133">It is often also a lobby session, and can sometimes be a game session.</span></span> <span data-ttu-id="85b55-134">「[SmartMatch マッチメイキング](smartmatch-matchmaking.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="85b55-134">See [SmartMatch Matchmaking](smartmatch-matchmaking.md).</span></span>
-   <span data-ttu-id="85b55-135">ターゲット セッション。マッチされるゲーム プレイを表すためにマッチメイキング中に作成されるヘルパー セッション。</span><span class="sxs-lookup"><span data-stu-id="85b55-135">Target session, a helper session created during matchmaking to represent the matched game play.</span></span> <span data-ttu-id="85b55-136">ほぼ常にゲーム セッションでもあります。</span><span class="sxs-lookup"><span data-stu-id="85b55-136">It is almost always also a game session.</span></span> <span data-ttu-id="85b55-137">「[SmartMatch マッチメイキング](smartmatch-matchmaking.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="85b55-137">See [SmartMatch Matchmaking](smartmatch-matchmaking.md).</span></span>
-   <span data-ttu-id="85b55-138">ロビー セッション。ゲーム セッションへの参加を待機している、招待されたプレイヤーを入れるために使用されるヘルパー セッション。</span><span class="sxs-lookup"><span data-stu-id="85b55-138">Lobby session, a helper session used to accommodate invited players who are waiting to join a game session.</span></span> <span data-ttu-id="85b55-139">多くのタイトルは、ロビー セッションとゲーム セッションの両方を作成します。</span><span class="sxs-lookup"><span data-stu-id="85b55-139">Many titles create both a lobby session and a game session.</span></span> <span data-ttu-id="85b55-140">詳細については、「**タイトルでのプレイヤーの管理**」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="85b55-140">For more information, see **Managing players in your title**.</span></span>

## <a name="mpsd-change-notification-handling-and-disconnect-detection"></a><span data-ttu-id="85b55-141">MPSD の変更通知処理および切断検出</span><span class="sxs-lookup"><span data-stu-id="85b55-141">MPSD Change Notification Handling and Disconnect Detection</span></span>

<span data-ttu-id="85b55-142">MPSD では、クライアントはリアルタイム アクティビティ サービス Web ソケットを使用して MPSD に接続できます。</span><span class="sxs-lookup"><span data-stu-id="85b55-142">MPSD enables clients to connect to it using the real-time activity service web socket.</span></span> <span data-ttu-id="85b55-143">その接続は以下の目的で使用されます。</span><span class="sxs-lookup"><span data-stu-id="85b55-143">The connection is used to:</span></span>

-   <span data-ttu-id="85b55-144">セッションの変更が発生したときに、タイトルが開始するイベント サブスクリプションに基づいて、簡単な通知 (ショルダー タップ) を送信する。</span><span class="sxs-lookup"><span data-stu-id="85b55-144">Send down brief notifications (shoulder taps) when session changes occur, based on event subscriptions that titles initiate.</span></span>
-   <span data-ttu-id="85b55-145">ユーザーの切断を検出する。</span><span class="sxs-lookup"><span data-stu-id="85b55-145">Detect user disconnections.</span></span>
-   <span data-ttu-id="85b55-146">ユーザーを非アクティブとして設定し、その後、切断検出に基づいてセッションからユーザーを削除する。</span><span class="sxs-lookup"><span data-stu-id="85b55-146">Set users as inactive and subsequently remove them from the session, based on disconnect detection.</span></span>


### <a name="making-user-connections"></a><span data-ttu-id="85b55-147">ユーザー接続の実行</span><span class="sxs-lookup"><span data-stu-id="85b55-147">Making User Connections</span></span>

<span data-ttu-id="85b55-148">XSAPI ライブラリは、クライアントと MPSD 間の接続を管理します。</span><span class="sxs-lookup"><span data-stu-id="85b55-148">The XSAPI library manages the connection between the client and MPSD.</span></span> <span data-ttu-id="85b55-149">タイトルは最初に **MultiplayerService.EnableMultiplayerSubscriptions メソッド**を呼び出します。</span><span class="sxs-lookup"><span data-stu-id="85b55-149">The title first calls the **MultiplayerService.EnableMultiplayerSubscriptions Method**.</span></span> <span data-ttu-id="85b55-150">このメソッドは、クライアントがマルチプレイヤー目的でリアルタイム アクティビティ接続を使用することを XSAPI に伝えます。</span><span class="sxs-lookup"><span data-stu-id="85b55-150">This method tells XSAPI that the client intends to use a real-time activity connection for multiplayer purposes.</span></span> <span data-ttu-id="85b55-151">その後、タイトルが現在のユーザーを Active 状態に設定して **MultiplayerService.WriteSessionAsync メソッド**または **MultiplayerService.WriteSessionByHandleAsync メソッド**を初めて呼び出すと、接続が作成され、MPSD にフックされます。</span><span class="sxs-lookup"><span data-stu-id="85b55-151">Then, when the title makes its first call to the **MultiplayerService.WriteSessionAsync Method** or the **MultiplayerService.WriteSessionByHandleAsync Method**, with the current user set to the Active state, a connection is created and hooked up to MPSD.</span></span>

| <span data-ttu-id="85b55-152">注意</span><span class="sxs-lookup"><span data-stu-id="85b55-152">Note</span></span>                                                                                                                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="85b55-153">セッション通知を有効にし、切断を検知するには、セッション テンプレートで connectionRequiredForActiveMembers を true に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="85b55-153">To enable session notifications and detect disconnections the session template has to set the connectionRequiredForActiveMembers to true.</span></span> |

| <span data-ttu-id="85b55-154">注意</span><span class="sxs-lookup"><span data-stu-id="85b55-154">Note</span></span>                                                                                                                                                                                                                                                                                                                            |
|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="85b55-155">以前のバージョンの XSAPI では、タイトルは、リアルタイム アクティビティ サービスへのユーザー接続を作成するために **RealTimeActivityService.ConnectAsync メソッド**を呼び出していました。</span><span class="sxs-lookup"><span data-stu-id="85b55-155">In former versions of XSAPI, titles called the **RealTimeActivityService.ConnectAsync Method** to create user connections to the real-time activity service.</span></span> <span data-ttu-id="85b55-156">2015 マルチプレイヤーでは、このメソッドは何も行わず、接続はオンデマンドで作成されます。</span><span class="sxs-lookup"><span data-stu-id="85b55-156">For the 2015 Multiplayer, this method does nothing, and the connection is created on demand.</span></span> |

### <a name="subscribing-for-session-changes"></a><span data-ttu-id="85b55-157">セッション変更のサブスクライブ</span><span class="sxs-lookup"><span data-stu-id="85b55-157">Subscribing for Session Changes</span></span>

<span data-ttu-id="85b55-158">MPSD は、興味を引くことが変更されたことを簡単に伝えるために "ショルダー タップ" を使用します。</span><span class="sxs-lookup"><span data-stu-id="85b55-158">MPSD uses a "shoulder tap" as a lightweight notification that something of interest has changed.</span></span> <span data-ttu-id="85b55-159">タイトルは、変更されたリソースを取得して、変更の正確な性質を判断する必要があります。</span><span class="sxs-lookup"><span data-stu-id="85b55-159">The title should retrieve the modified resource to determine the exact nature of the change.</span></span> <span data-ttu-id="85b55-160">サブスクリプションが有効になっていると、タイトルは、**MultiplayerSession.SetSessionChangeSubscription メソッド**を呼び出してセッション変更に関するショルダー タップをサブスクライブすることができます。</span><span class="sxs-lookup"><span data-stu-id="85b55-160">With subscriptions enabled, the title can subscribe for shoulder taps on session changes with a call to the **MultiplayerSession.SetSessionChangeSubscription Method**.</span></span> <span data-ttu-id="85b55-161">「[方法: MPSD セッション変更通知のサブスクライブ](multiplayer-how-tos.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="85b55-161">See [How to: Subscribe for MPSD Session Change Notifications](multiplayer-how-tos.md).</span></span>


### <a name="handling-shoulder-taps"></a><span data-ttu-id="85b55-162">ショルダー タップの処理</span><span class="sxs-lookup"><span data-stu-id="85b55-162">Handling Shoulder Taps</span></span>

<span data-ttu-id="85b55-163">セッションに対する変更がタイトルのそのセッションのサブスクリプションに一致すると、MPSD は **RealTimeActivityService.MultiplayerSessionChanged イベント**を使用してタイトルに変更を通知します。</span><span class="sxs-lookup"><span data-stu-id="85b55-163">When a change to a session matches the title's subscription for that session, MPSD notifies the title of the change using the **RealTimeActivityService.MultiplayerSessionChanged Event**.</span></span> <span data-ttu-id="85b55-164">タイトルは、セッションを取得し、取得したセッションのバージョンを以前にキャッシュしたビューと比較し、必要に応じてアクションを実行します。</span><span class="sxs-lookup"><span data-stu-id="85b55-164">The title should then retrieve the session and compare the retrieved version of the session with the previous cached view, and take actions appropriately.</span></span>


### <a name="handling-notifications-of-connection-state-changes"></a><span data-ttu-id="85b55-165">接続状態の変更に関する通知の処理</span><span class="sxs-lookup"><span data-stu-id="85b55-165">Handling Notifications of Connection State Changes</span></span>

<span data-ttu-id="85b55-166">タイトルは、MPSD への接続の状態の変更についても通知を受けることができます。</span><span class="sxs-lookup"><span data-stu-id="85b55-166">The title can also be notified about changes in the health of the connection to MPSD.</span></span> <span data-ttu-id="85b55-167">2 つのイベントがこれらの変更を通知します。   \*\* RealTimeActivityService.MultiplayerSubscriptionsLost イベント \*\* -- リアルタイム アクティビティ サービスを使用する MPSD へのタイトルの接続が失われたときに発生します。</span><span class="sxs-lookup"><span data-stu-id="85b55-167">Two events signal these changes:   \*\* RealTimeActivityService.MultiplayerSubscriptionsLost Event \*\* -- fired when the title's connection to MPSD using the real-time activity service is lost.</span></span> <span data-ttu-id="85b55-168">このイベントが発生した場合、タイトルはマルチプレイヤーをシャットダウンする必要があります。</span><span class="sxs-lookup"><span data-stu-id="85b55-168">When this event occurs, the title should shut down the multiplayer.</span></span>
-   <span data-ttu-id="85b55-169">\*\* RealTimeActivityService.ConnectionStateChanged イベント \*\* -- リアルタイム アクティビティ サービスへのタイトルの接続の状態が一時的に変更したときに発生します。</span><span class="sxs-lookup"><span data-stu-id="85b55-169">\*\* RealTimeActivityService.ConnectionStateChanged Event \*\* -- fired upon a temporary change in the health of the title's connection to the real-time activity service.</span></span> <span data-ttu-id="85b55-170">タイトルは、このイベントの受信時にアクションを実行する必要はありませんが、診断目的でイベントを使用すると役に立つ場合があります。</span><span class="sxs-lookup"><span data-stu-id="85b55-170">The title is not required to take any action upon receiving this event, but it might be useful to use the event for diagnostic purposes.</span></span>


### <a name="disconnecting-clients"></a><span data-ttu-id="85b55-171">クライアントの切断</span><span class="sxs-lookup"><span data-stu-id="85b55-171">Disconnecting Clients</span></span>

<span data-ttu-id="85b55-172">タイトルのクライアントは、タイトルが **RealTimeActivityService.DisableMultiplayerSubscriptions メソッド**を呼び出して通知を無効にすると、MPSD から切断します。</span><span class="sxs-lookup"><span data-stu-id="85b55-172">Clients for your title disconnect from MPSD when the title disables notifications with a call to the **RealTimeActivityService.DisableMultiplayerSubscriptions Method**.</span></span> <span data-ttu-id="85b55-173">この呼び出しの直後に、**MultiplayerSubscriptionsLost** イベントが発生し、クライアントが MPSD から切断されたことを示します。</span><span class="sxs-lookup"><span data-stu-id="85b55-173">Shortly after this call, the **MultiplayerSubscriptionsLost** event fires, indicating that a client has disconnected from MPSD.</span></span>

| <span data-ttu-id="85b55-174">注意</span><span class="sxs-lookup"><span data-stu-id="85b55-174">Note</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="85b55-175">以前のマルチプレイヤーのバージョンでは、タイトルは、リアルタイム アクティビティ サービスから切断するために \*\* RealTimeActivityService.Disconnect メソッド \*\* を呼び出しました。</span><span class="sxs-lookup"><span data-stu-id="85b55-175">In earlier multiplayer versions, titles called the \*\* RealTimeActivityService.Disconnect Method \*\* to disconnect from the real-time activity service.</span></span> <span data-ttu-id="85b55-176">2015 マルチプレイヤーでは、このメソッドは何も行いません。</span><span class="sxs-lookup"><span data-stu-id="85b55-176">For the 2015 Multiplayer, this method does nothing.</span></span> <span data-ttu-id="85b55-177">プレゼンスのリアルタイム アクティビティ サービス サブスクリプションなど、Web ソケット接続のユーザーがいない場合、切断は **DisableMultiplayerSubscriptions** が呼び出された後で自動的に発生します。</span><span class="sxs-lookup"><span data-stu-id="85b55-177">The disconnection occurs automatically after **DisableMultiplayerSubscriptions** is called, if there are no users of the web socket connection, for example, a real-time activity service subscription to presence.</span></span> |


### <a name="disconnect-detection"></a><span data-ttu-id="85b55-178">切断の検出</span><span class="sxs-lookup"><span data-stu-id="85b55-178">Disconnect Detection</span></span>

<span data-ttu-id="85b55-179">MPSD は、その切断検出機能を使用して、ユーザーの正常でない切断をすばやく確認します。</span><span class="sxs-lookup"><span data-stu-id="85b55-179">MPSD uses its disconnect detection feature to quickly find out when a user disconnects ungracefully.</span></span> <span data-ttu-id="85b55-180">正常でない切断は、プレイヤーのネットワークが失敗した、またはタイトルがクラッシュしたときに発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="85b55-180">An ungraceful disconnect might occur when a player's network fails, or when a title crashes.</span></span> <span data-ttu-id="85b55-181">MPSD は、切断されたプレイヤーの状態を Active から Inactive に変更し、メンバーのセッションへのサブスクリプションに基づいて、必要に応じて他のセッション メンバーに変更を通知します。</span><span class="sxs-lookup"><span data-stu-id="85b55-181">MPSD changes the disconnected player's state from Active to Inactive, and notifies other session members of the change as appropriate, based on the members' subscriptions to the session.</span></span>

## <a name="mpsd-handles-to-sessions"></a><span data-ttu-id="85b55-182">セッションへの MPSD ハンドル</span><span class="sxs-lookup"><span data-stu-id="85b55-182">MPSD Handles to Sessions</span></span>

<span data-ttu-id="85b55-183">MPSD セッション ハンドルは、その他の型指定されたデータも含めることができるセッションへの抽象的で不変の参照です。</span><span class="sxs-lookup"><span data-stu-id="85b55-183">An MPSD session handle is an abstract and immutable reference to a session that can also contain additional typed data.</span></span> <span data-ttu-id="85b55-184">ファイル ハンドルに似ています。</span><span class="sxs-lookup"><span data-stu-id="85b55-184">It is similar to a file handle.</span></span> <span data-ttu-id="85b55-185">すべてのハンドルには、ハンドル ID (GUID) と、サービス構成 ID (SCID)、セッション テンプレート、およびセッション名で構成される完全セッション参照があります。</span><span class="sxs-lookup"><span data-stu-id="85b55-185">All handles have a handle ID (GUID) and a full session reference consisting of service configuration ID (SCID), session template, and session name.</span></span> <span data-ttu-id="85b55-186">ハンドルを更新することはできませんが、作成、読み取り、および削除は可能です。</span><span class="sxs-lookup"><span data-stu-id="85b55-186">A handle cannot be updated, but it can be created, read, and deleted.</span></span>

| <span data-ttu-id="85b55-187">注意</span><span class="sxs-lookup"><span data-stu-id="85b55-187">Note</span></span>                                                                                                                                   |
|-----------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="85b55-188">ハンドルは、存在しないセッションを指し示すことができます。</span><span class="sxs-lookup"><span data-stu-id="85b55-188">A handle can point to a session that does not exist.</span></span> <span data-ttu-id="85b55-189">存在しないセッション名を使用してハンドルを作成しても、新しいセッションは作成されません。</span><span class="sxs-lookup"><span data-stu-id="85b55-189">Creating a handle using a nonexistent session name does not cause a new session to be created.</span></span> |


### <a name="handle-types"></a><span data-ttu-id="85b55-190">ハンドルの型</span><span class="sxs-lookup"><span data-stu-id="85b55-190">Handle Types</span></span>

<span data-ttu-id="85b55-191">2015 マルチプレイヤーは、このセクションに記載されているハンドルの型をサポートします。</span><span class="sxs-lookup"><span data-stu-id="85b55-191">2015 Multiplayer supports the handle types described in this section.</span></span>

#### <a name="invite-handle"></a><span data-ttu-id="85b55-192">招待ハンドル</span><span class="sxs-lookup"><span data-stu-id="85b55-192">Invite Handle</span></span>

<span data-ttu-id="85b55-193">招待ハンドルは、特定のユーザーへの招待を表します。</span><span class="sxs-lookup"><span data-stu-id="85b55-193">An invite handle represents an invitation (invite) to a specific person.</span></span> <span data-ttu-id="85b55-194">型固有のデータには、招待元のユーザー、招待対象のユーザー、招待を説明するコンテキスト文字列 (たとえば、特定のゲーム モード) があります。</span><span class="sxs-lookup"><span data-stu-id="85b55-194">Type-specific data includes source person, target person, and context string describing the invite, for example, a specific game mode.</span></span>

<span data-ttu-id="85b55-195">招待ハンドルは、開いているセッションへの読み取り/書き込みアクセスを許可します。</span><span class="sxs-lookup"><span data-stu-id="85b55-195">An invite handle grants read-write access to an open session.</span></span> <span data-ttu-id="85b55-196">セッションが閉じられている場合、ハンドルは読み取り専用のセッション アクセスを許可します。</span><span class="sxs-lookup"><span data-stu-id="85b55-196">If the session is closed, the handle grants read-only session access.</span></span>

| <span data-ttu-id="85b55-197">注意</span><span class="sxs-lookup"><span data-stu-id="85b55-197">Note</span></span>                                                |
|------------------------------------------------------------------|
| <span data-ttu-id="85b55-198">MPSD は、セッションがいっぱいまたは閉じている場合でも招待を作成できます。</span><span class="sxs-lookup"><span data-stu-id="85b55-198">MPSD can create an invite even if the session is full or closed.</span></span> |


#### <a name="activity-handle"></a><span data-ttu-id="85b55-199">アクティビティ ハンドル</span><span class="sxs-lookup"><span data-stu-id="85b55-199">Activity Handle</span></span>

<span data-ttu-id="85b55-200">アクティビティ ハンドルは、その時点でユーザーが何をしているかを示します。</span><span class="sxs-lookup"><span data-stu-id="85b55-200">An activity handle indicates what a user is doing at the moment.</span></span> <span data-ttu-id="85b55-201">ユーザーのアクティビティは、 **MultiplayerActivityDetails クラス**によって表されます。</span><span class="sxs-lookup"><span data-stu-id="85b55-201">The user's activity is represented by the **MultiplayerActivityDetails Class**.</span></span>

| <span data-ttu-id="85b55-202">注意</span><span class="sxs-lookup"><span data-stu-id="85b55-202">Note</span></span>                                                                                                                                                                                                                      |
|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="85b55-203">アクティビティ ハンドルを明示的に削除することもできますが、削除できるのは特定のユーザーの所有タイトルのみです。</span><span class="sxs-lookup"><span data-stu-id="85b55-203">An activity handle can also be explicitly deleted, but only by the owning title for a specific user.</span></span> <span data-ttu-id="85b55-204">この削除は、**MultiplayerService.ClearActivityAsync メソッド**を使用して行われます。</span><span class="sxs-lookup"><span data-stu-id="85b55-204">This deletion is done using the **MultiplayerService.ClearActivityAsync Method**.</span></span> |


### <a name="creating-an-invite-handle"></a><span data-ttu-id="85b55-205">招待ハンドルの作成</span><span class="sxs-lookup"><span data-stu-id="85b55-205">Creating an Invite Handle</span></span>

<span data-ttu-id="85b55-206">招待ハンドルを作成するには、タイトルで **MultiplayerService.SendInvitesAsync メソッド**を呼び出します。</span><span class="sxs-lookup"><span data-stu-id="85b55-206">To create an invite handle, the title calls the **MultiplayerService.SendInvitesAsync Method**.</span></span> <span data-ttu-id="85b55-207">このメソッドは、受信者が招待を受け入れるために操作できる UI トーストの形式で、指定されたユーザーに招待を送信します。</span><span class="sxs-lookup"><span data-stu-id="85b55-207">The method sends an invite to the specified users in the form of a UI toast that the recipients can act on to accept the invite.</span></span>


### <a name="creating-an-activity-handle"></a><span data-ttu-id="85b55-208">アクティビティ ハンドルの作成</span><span class="sxs-lookup"><span data-stu-id="85b55-208">Creating an Activity Handle</span></span>

<span data-ttu-id="85b55-209">アクティビティ ハンドルを作成するには、タイトルで **MultiplayerService.SetActivityAsync メソッド**を呼び出します。</span><span class="sxs-lookup"><span data-stu-id="85b55-209">To create an activity handle, the title calls the **MultiplayerService.SetActivityAsync Method**.</span></span> <span data-ttu-id="85b55-210">MPSD は、セッション メンバーのバインドされたアクティビティとして新しいハンドル ID を設定します。</span><span class="sxs-lookup"><span data-stu-id="85b55-210">MPSD sets the new handle ID as the session member's bound activity.</span></span> <span data-ttu-id="85b55-211">以前にバインドされたアクティビティがあった場合、MPSD は対応するハンドルを削除します。</span><span class="sxs-lookup"><span data-stu-id="85b55-211">If there was a previous bound activity, MPSD deletes the corresponding handle.</span></span> <span data-ttu-id="85b55-212">アクティブなメンバーが非アクティブになるか、またはセッションから離れると、MPSD は、バインドされているアクティビティ ハンドルを削除します。</span><span class="sxs-lookup"><span data-stu-id="85b55-212">When the active member becomes inactive or leaves the session, MPSD deletes the bound activity handle.</span></span>


### <a name="using-handles"></a><span data-ttu-id="85b55-213">ハンドルの使用</span><span class="sxs-lookup"><span data-stu-id="85b55-213">Using Handles</span></span>

<span data-ttu-id="85b55-214">タイトルがハンドルを使用するのは、ユーザーが招待を受け入れたとき (招待ハンドル)、およびユーザーがフレンドの現在のアクティビティに参加したとき (アクティビティ ハンドル) です。</span><span class="sxs-lookup"><span data-stu-id="85b55-214">The title uses handles when a user accepts an invite (invite handle) and when a user joins a friend's current activity (activity handle).</span></span> <span data-ttu-id="85b55-215">どちらの場合も、タイトルは以下を行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="85b55-215">In both of these cases, the title must:</span></span>

1.  <span data-ttu-id="85b55-216">タイトルのアクティベーション パラメーターからハンドル ID を取得します。</span><span class="sxs-lookup"><span data-stu-id="85b55-216">Get the handle ID from the title activation parameters.</span></span>
2.  <span data-ttu-id="85b55-217">ローカル MPSD セッション オブジェクトを作成し、それをアクティブとして参加させます。</span><span class="sxs-lookup"><span data-stu-id="85b55-217">Create a local MPSD session object and join it as active.</span></span>
3.  <span data-ttu-id="85b55-218">適切なハンドルを渡して、セッションを書き込みます。</span><span class="sxs-lookup"><span data-stu-id="85b55-218">Write the session, passing in the appropriate handle.</span></span>

## <a name="synchronization-of-session-updates"></a><span data-ttu-id="85b55-219">セッション更新の同期</span><span class="sxs-lookup"><span data-stu-id="85b55-219">Synchronization of Session Updates</span></span>

<span data-ttu-id="85b55-220">セッションはメンバーのだれもが作成したり更新したりできる共有リソースであるため、書き込みが競合する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="85b55-220">Because a session is a shared resource that can be created or updated by any of its members, there is the potential for conflicting writes.</span></span> <span data-ttu-id="85b55-221">これが予期しない結果につながることがあります。たとえば、あるタイトルが行った変更を別のタイトルが偶然に上書きしてしまう可能性があります。</span><span class="sxs-lookup"><span data-stu-id="85b55-221">This can lead to unexpected outcomes, for example, one title can unknowingly overwrite the changes made by another title.</span></span> <span data-ttu-id="85b55-222">MPSD でのこれらの競合の解決方法は、オプティミスティック同時実行制御および読み取り/変更/書き込みパターンをサポートすることです。</span><span class="sxs-lookup"><span data-stu-id="85b55-222">MPSD's approach to resolving these conflicts is to support optimistic concurrency and a read-modify-write pattern.</span></span>

<span data-ttu-id="85b55-223">MPSD によるセッション更新の同期では、2 つの関連する高レベルの実装パターンを使用します。</span><span class="sxs-lookup"><span data-stu-id="85b55-223">Synchronization of session updates by MPSD use two related high-level implementation patterns:</span></span>

-   <span data-ttu-id="85b55-224">アービターは、セッションの共有部分を更新します。</span><span class="sxs-lookup"><span data-stu-id="85b55-224">Arbiter updates shared portions of the session.</span></span> <span data-ttu-id="85b55-225">実装に関わるアービターが 1 つの場合は、ほとんどの書き込み操作について同期更新の使用を回避できます。</span><span class="sxs-lookup"><span data-stu-id="85b55-225">If your implementation involves a single arbiter, you can avoid using synchronized updates for most write operations.</span></span> <span data-ttu-id="85b55-226">タイトルは、(1) セッションの共有部分に対してアービターが加えた更新 (アービターの ID の通信に関連がない限り)、および (2) セッション内のメンバー領域に対してタイトルが加えた更新の同期を回避できます。</span><span class="sxs-lookup"><span data-stu-id="85b55-226">The title can avoid synchronization for (1) any update that the arbiter makes to shared portions of the session, unless they are related to communicating the arbiter's identity, and (2) any update that a title makes to the member area within the session.</span></span>

| <span data-ttu-id="85b55-227">注意</span><span class="sxs-lookup"><span data-stu-id="85b55-227">Note</span></span>                                                                                                                                                                                                                                                                                                                                              |
|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="85b55-228">上記の種類の更新は同期を必要としませんが、\*\* MultiplayerSessionProperties.HostDeviceToken プロパティ \*\* の更新はすべて同期することが引き続き重要です。</span><span class="sxs-lookup"><span data-stu-id="85b55-228">Although the above update types do not need synchronization, it is still important to synchronize any updates to the \*\* MultiplayerSessionProperties.HostDeviceToken Property \*\*.</span></span> <span data-ttu-id="85b55-229">このプロパティは、アービター移行時などにアービターの識別情報を伝達するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="85b55-229">That property is used to communicate the identity of the arbiter, for example, as part of arbiter migration.</span></span> |

-   <span data-ttu-id="85b55-230">すべてのクライアントがセッションの共有部分を更新します。</span><span class="sxs-lookup"><span data-stu-id="85b55-230">All clients update shared portions of the session.</span></span> <span data-ttu-id="85b55-231">この場合は、セッションの共有部分のすべての更新を同期する必要があります。</span><span class="sxs-lookup"><span data-stu-id="85b55-231">In this case, all updates to shared portions of the session must be synchronized.</span></span> <span data-ttu-id="85b55-232">ただし、タイトルが自身のメンバー領域に書き込む場合は同期しなくてもかまいません。</span><span class="sxs-lookup"><span data-stu-id="85b55-232">However, titles can still write to their own member areas without synchronization.</span></span>


### <a name="session-update-synchronization-using-the-multiplayer-winrt-api"></a><span data-ttu-id="85b55-233">マルチプレイヤー WinRT API を使用したセッション更新の同期</span><span class="sxs-lookup"><span data-stu-id="85b55-233">Session Update Synchronization Using the Multiplayer WinRT API</span></span>

<span data-ttu-id="85b55-234">次のマルチプレイヤー WinRT API のメソッドは、オプティミスティック同時実行制御を実装します。</span><span class="sxs-lookup"><span data-stu-id="85b55-234">The following multiplayer WinRT API methods implement optimistic concurrency:</span></span>

-   **<span data-ttu-id="85b55-235">MultiplayerService.WriteSessionAsync メソッド</span><span class="sxs-lookup"><span data-stu-id="85b55-235">MultiplayerService.WriteSessionAsync Method</span></span>**
-   **<span data-ttu-id="85b55-236">MultiplayerService.WriteSessionByHandleAsync メソッド</span><span class="sxs-lookup"><span data-stu-id="85b55-236">MultiplayerService.WriteSessionByHandleAsync Method</span></span>**
-   **<span data-ttu-id="85b55-237">MultiplayerService.TryWriteSessionAsync メソッド</span><span class="sxs-lookup"><span data-stu-id="85b55-237">MultiplayerService.TryWriteSessionAsync Method</span></span>**
-   **<span data-ttu-id="85b55-238">MultiplayerService.TryWriteSessionByHandleAsync メソッド</span><span class="sxs-lookup"><span data-stu-id="85b55-238">MultiplayerService.TryWriteSessionByHandleAsync Method</span></span>**

<span data-ttu-id="85b55-239">それぞれの書き込みメソッドは、**MultiplayerSessionWriteMode 列挙**値を受け取ります。</span><span class="sxs-lookup"><span data-stu-id="85b55-239">Each write method accepts a **MultiplayerSessionWriteMode Enumeration** value.</span></span> <span data-ttu-id="85b55-240">値 SynchronizedUpdate を渡すことによって、更新でオプティミスティック同時実行制御を使用します。</span><span class="sxs-lookup"><span data-stu-id="85b55-240">Passing the value SynchronizedUpdate makes use of optimistic concurrency for updates.</span></span>

<span data-ttu-id="85b55-241">列挙内のその他の値は、セッションの最初の作成時の潜在的な競合の解決に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="85b55-241">Other values in the enumeration help resolve potential conflicts upon the initial creation of a session.</span></span> <span data-ttu-id="85b55-242">他のタイトルが書き込む可能性がある MPSD セッション部分への書き込みでは必ず、同期更新を使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="85b55-242">Any write to a portion of the MPSD session that can potentially be written to by another title must use a synchronized update.</span></span> <span data-ttu-id="85b55-243">ただし、すべての書き込みを保護する必要があるわけではありません。</span><span class="sxs-lookup"><span data-stu-id="85b55-243">However, not all writes must be protected.</span></span>

<span data-ttu-id="85b55-244">タイトルがローカル セッション オブジェクトをいずれかの書き込みセッション メソッドを使用して MPSD に書き込もうとし、HTTP/412 ステータス コードを受け取った場合、再び書き込みを試みる前に、**MultiplayerService.GetCurrentSessionAsync メソッド**呼び出しを発行して最新のサーバー バージョンのセッションを取得してローカル コピーを更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="85b55-244">If your title attempts to write the local session object to MPSD using one of the write session methods and receives an HTTP/412 status code, it should refresh the local copy by issuing a **MultiplayerService.GetCurrentSessionAsync Method** call to get the latest server version of the session before attempting the write again.</span></span> <span data-ttu-id="85b55-245">そうしないと、ローカル セッション ドキュメントに正しくないデータが残り、セッションを書き込むための呼び出しの失敗が続きます。</span><span class="sxs-lookup"><span data-stu-id="85b55-245">Otherwise, the local session document continues to contain the bad data and the calls to write the session continue to fail.</span></span>

| <span data-ttu-id="85b55-246">注意</span><span class="sxs-lookup"><span data-stu-id="85b55-246">Note</span></span>                                                                                                                                                                                  |
|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="85b55-247">タイトルが **TryWrite\*** メソッドのいずれかを使用している場合、更新されたセッションは HTTP/412 ステータス コードで返されます。</span><span class="sxs-lookup"><span data-stu-id="85b55-247">If the title is using one of the **TryWrite\*** methods, the updated session is returned in the case of an HTTP/412 status code.</span></span> <span data-ttu-id="85b55-248">この動作は、**GetCurrentSessionAsync** を呼び出す必要性を回避します。</span><span class="sxs-lookup"><span data-stu-id="85b55-248">This behavior avoids the need to call **GetCurrentSessionAsync**.</span></span> |

<span data-ttu-id="85b55-249">タイトルがいずれかの書き込みセッション メソッドを呼び出すと、更新されたバージョンのセッションが返される場合があります。</span><span class="sxs-lookup"><span data-stu-id="85b55-249">When the title calls one of the write session methods, an updated version of the session might be returned.</span></span> <span data-ttu-id="85b55-250">その場合、タイトルは、スレッドセーフの方法で、そのローカル キャッシュ コピーを新しいバージョンに切り替える必要があります。</span><span class="sxs-lookup"><span data-stu-id="85b55-250">If it is, the title should switch its local cached copy to this new version in a thread-safe way.</span></span>


### <a name="session-update-synchronization-using-the-multiplayer-rest-api"></a><span data-ttu-id="85b55-251">Multiplayer REST API を使用したセッション更新の同期</span><span class="sxs-lookup"><span data-stu-id="85b55-251">Session Update Synchronization Using the Multiplayer REST API</span></span>

<span data-ttu-id="85b55-252">MPSD は、HTTP の "if-match" ヘッダーと ETag 設定および読み取り/変更/書き込みパターンを使用して、REST 機能を通じてセッション更新でオプティミスティック同時実行制御をサポートします。</span><span class="sxs-lookup"><span data-stu-id="85b55-252">MPSD supports optimistic concurrency in session updates through REST functionality by using the HTTP "if-match" header with ETag settings and the read-modify-write pattern.</span></span> <span data-ttu-id="85b55-253">書き込み要求に渡される ETag は、MPSD が前の読み取り要求で返したものである必要があります。</span><span class="sxs-lookup"><span data-stu-id="85b55-253">The ETag passed in the write request should be the one that the MPSD returns with the previous read request.</span></span>

## <a name="calling-mpsd"></a><span data-ttu-id="85b55-254">MPSD の呼び出し</span><span class="sxs-lookup"><span data-stu-id="85b55-254">Calling MPSD</span></span>

<span data-ttu-id="85b55-255">タイトルで MPSD にアクセスしてマルチプレイヤー システムとマッチメイキングを使用する方法は 2 つあります。</span><span class="sxs-lookup"><span data-stu-id="85b55-255">There are two ways for the title to access MPSD in order to use the multiplayer system and matchmaking:</span></span>
-   <span data-ttu-id="85b55-256">推奨。</span><span class="sxs-lookup"><span data-stu-id="85b55-256">Recommended.</span></span> <span data-ttu-id="85b55-257">RESTful 機能のラッパーとして動作するクラスが含まれている Multiplayer WinRT API を使用します。</span><span class="sxs-lookup"><span data-stu-id="85b55-257">Use the multiplayer WinRT API, which contains classes that act as wrappers for RESTful functionality.</span></span> <span data-ttu-id="85b55-258">「**Microsoft.Xbox.Services.Multiplayer 名前空間**」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="85b55-258">See **Microsoft.Xbox.Services.Multiplayer Namespace**.</span></span> <span data-ttu-id="85b55-259">SmartMatch マッチメイキングの場合は、**Microsoft.Xbox.Services.Matchmaking 名前空間**によって表されるMatchmaking WinRT API を使用します。</span><span class="sxs-lookup"><span data-stu-id="85b55-259">For SmartMatch matchmaking, use the matchmaking WinRT API, represented by the **Microsoft.Xbox.Services.Matchmaking Namespace**.</span></span>
-   <span data-ttu-id="85b55-260">**Xbox Live サービス RESTful リファレンス**に含まれている、Multiplayer および Matchmaking REST API への直接の標準 HTTP 呼び出しを使用します。</span><span class="sxs-lookup"><span data-stu-id="85b55-260">Use direct standard HTTP calls to the multiplayer and matchmaking REST APIs, included in the **Xbox Live Services RESTful Reference**.</span></span> <span data-ttu-id="85b55-261">適用可能な URI は、「**セッション ディレクトリ URI**」(マルチプレイヤー用) および「**マッチメイキング URI**」(マッチメイキング用) に記述されています。</span><span class="sxs-lookup"><span data-stu-id="85b55-261">The applicable URIs are described in **Session Directory URIs** (for multiplayer) and **Matchmaking URIs** (for matchmaking).</span></span> <span data-ttu-id="85b55-262">関連する JSON オブジェクトは「**JavaScript Object Notation (JSON) オブジェクト リファレンス**」に記載されています。</span><span class="sxs-lookup"><span data-stu-id="85b55-262">Related JSON objects are described in the **JavaScript Object Notation (JSON) Object Reference**.</span></span>


### <a name="using-the-multiplayer-winrt-api-to-call-mpsd"></a><span data-ttu-id="85b55-263">Multiplayer WinRT API を使用した MPSD の呼び出し</span><span class="sxs-lookup"><span data-stu-id="85b55-263">Using the Multiplayer WinRT API to Call MPSD</span></span>

<span data-ttu-id="85b55-264">MPSD を呼び出すための推奨方法は、Multiplayer WinRT API および Matchmaking WinRT API の使用です。</span><span class="sxs-lookup"><span data-stu-id="85b55-264">The recommended way to call MPSD is to use the multiplayer WinRT API and the matchmaking WinRT API.</span></span>

| <span data-ttu-id="85b55-265">注意</span><span class="sxs-lookup"><span data-stu-id="85b55-265">Note</span></span>                                                                                             |
|---------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="85b55-266">XDK サンプルは、Multiplayer および Matchmaking WinRT API と XSAPI のその他の要素を使用して記述されています。</span><span class="sxs-lookup"><span data-stu-id="85b55-266">The XDK samples are written using the multiplayer and matchmaking WinRT APIs and the other elements of XSAPI.</span></span> |

<span data-ttu-id="85b55-267">基になる REST 機能のラッパー コードの使用により、呼び出しごとに HTTP トラフィックを処理することなく、より従来的な方法でクライアント側 API メソッドを使用できます。</span><span class="sxs-lookup"><span data-stu-id="85b55-267">Use of wrapper code for the underlying REST functionality allows for a more traditional approach to using client-side API methods without having to handle HTTP traffic for each call.</span></span> <span data-ttu-id="85b55-268">XSAPI のバイナリとソースの両方が XDK に付属しています。</span><span class="sxs-lookup"><span data-stu-id="85b55-268">Both a binary and a source for XSAPI are shipped with the XDK.</span></span> <span data-ttu-id="85b55-269">バイナリを直接使用するか、ソースを変更して必要に応じてタイトルに取り込むことができます。</span><span class="sxs-lookup"><span data-stu-id="85b55-269">You can use the binary directly, or modify the source and incorporate it into your title as needed.</span></span>


### <a name="using-the-multiplayer-rest-api-to-interact-with-mpsd"></a><span data-ttu-id="85b55-270">Multiplayer REST API を使用した MPSD との対話</span><span class="sxs-lookup"><span data-stu-id="85b55-270">Using the Multiplayer REST API to Interact with MPSD</span></span>

<span data-ttu-id="85b55-271">タイトル、またはそのサービスでは、Multiplayer REST API および Matchmaking REST API への標準 HTTP 呼び出しを使用できます。</span><span class="sxs-lookup"><span data-stu-id="85b55-271">The title, or its service, can use standard HTTP calls to the multiplayer REST API and the matchmaking REST API.</span></span> <span data-ttu-id="85b55-272">REST の機能を直接利用するとき、呼び出し元は、セッション ディレクトリの URI に対して DELETE、PUT、POST、および GET 呼び出しを発行してほとんどの操作を行います。</span><span class="sxs-lookup"><span data-stu-id="85b55-272">When using REST functionality directly, the caller issues DELETE, PUT, POST, and GET calls against the session directory URIs for most actions.</span></span> <span data-ttu-id="85b55-273">PUT 要求では、要求本文は既存のセッションにマージされます。</span><span class="sxs-lookup"><span data-stu-id="85b55-273">On a PUT request, the request body is merged into the existing session.</span></span> <span data-ttu-id="85b55-274">既存のセッションがない場合は、要求本文は、 [Xbox デベロッパー ポータル (XDP)](https://xdp.xboxlive.com)または[Windows デベロッパー センター](https://developer.microsoft.com/dashboard/windows/overview)に保存されているセッション テンプレートと共に新しいセッションの作成に使用されます。</span><span class="sxs-lookup"><span data-stu-id="85b55-274">If there is no existing session, the request body is used to create a new session, along with the session template stored on [Xbox Developer Portal (XDP)](https://xdp.xboxlive.com) or [Windows Dev Center](https://developer.microsoft.com/dashboard/windows/overview).</span></span> <span data-ttu-id="85b55-275">すべてのフィールドはオプションで、指定する必要があるのは差分だけです。</span><span class="sxs-lookup"><span data-stu-id="85b55-275">All fields are optional, and only deltas must be specified.</span></span> <span data-ttu-id="85b55-276">そのため、{}ゼロの差分で有効な PUT 要求です。</span><span class="sxs-lookup"><span data-stu-id="85b55-276">Therefore, {} is a valid PUT request with zero deltas.</span></span>

<span data-ttu-id="85b55-277">サーバーのセッションの公式コピーに影響を与えずにマージの結果を返す仮定の PUT 要求を実行するには、クエリ文字列 "?nocommit=true" を PUT 要求に追加できます。</span><span class="sxs-lookup"><span data-stu-id="85b55-277">To perform a hypothetical PUT request that returns the result of the merge without affecting the server's official copy of the session, you can append the query-string "?nocommit=true" to the PUT request.</span></span>

<span data-ttu-id="85b55-278">Multiplayer および Matchmaking REST API メソッドの要求および応答は JSON ドキュメントです。</span><span class="sxs-lookup"><span data-stu-id="85b55-278">The requests and responses for the multiplayer and matchmaking REST API methods are JSON documents.</span></span> <span data-ttu-id="85b55-279">マルチプレイヤー セッションの要求構造については、「**MultiplayerSessionRequest (JSON)**」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="85b55-279">For a multiplayer session request structure, see **MultiplayerSessionRequest (JSON)**.</span></span> <span data-ttu-id="85b55-280">関連する応答構造については、「**MultiplayerSession (JSON)**」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="85b55-280">An associated response structure is shown in **MultiplayerSession (JSON)**.</span></span> <span data-ttu-id="85b55-281">応答構造は、セッション メンバーをリンク リストとして構成し、セッションとそのメンバーのその他の読み取り専用プロパティを格納します。</span><span class="sxs-lookup"><span data-stu-id="85b55-281">The response structure frames the session members as a linked list and fills in other read-only properties of the session and its members.</span></span>


### <a name="querying-for-sessions-and-session-templates-rest"></a><span data-ttu-id="85b55-282">セッションおよびセッション テンプレートのクエリ (REST)</span><span class="sxs-lookup"><span data-stu-id="85b55-282">Querying for Sessions and Session Templates (REST)</span></span>

<span data-ttu-id="85b55-283">タイトルでは、サービス構成およびセッション テンプレート レベルでセッション情報をクエリできます。</span><span class="sxs-lookup"><span data-stu-id="85b55-283">Your titles can query for session information at the service configuration and the session template levels.</span></span> <span data-ttu-id="85b55-284">このトピックでは、Multiplayer REST API を使用するクエリについて説明します。</span><span class="sxs-lookup"><span data-stu-id="85b55-284">This topic discusses queries that use the multiplayer REST API.</span></span>


#### <a name="query-for-basic-session-information"></a><span data-ttu-id="85b55-285">基本的なセッション情報のクエリ</span><span class="sxs-lookup"><span data-stu-id="85b55-285">Query for Basic Session Information</span></span>

<span data-ttu-id="85b55-286">セッション ディレクトリおよびマッチメイキング URI を使用して、基本的なセッション情報のクエリを設定できます。</span><span class="sxs-lookup"><span data-stu-id="85b55-286">You can set up queries for basic session information using the session directory and matchmaking URIs.</span></span> <span data-ttu-id="85b55-287">クエリの結果はセッション参照の JSON 配列であり、一部のセッション データはインラインで取り込まれます。</span><span class="sxs-lookup"><span data-stu-id="85b55-287">The result of a query is a JSON array of session references, with some session data included inline.</span></span> <span data-ttu-id="85b55-288">既定では、クエリは、最大 100 件のプライベートでないセッションを取得します。</span><span class="sxs-lookup"><span data-stu-id="85b55-288">By default, a query retrieves up to 100 non-private sessions.</span></span>

| <span data-ttu-id="85b55-289">注意</span><span class="sxs-lookup"><span data-stu-id="85b55-289">Note</span></span>                                                          |
|----------------------------------------------------------------------------|
| <span data-ttu-id="85b55-290">すべてのクエリには、キーワード フィルター、XUID フィルターのどちらか一方、またはその両方が含まれている必要があります。</span><span class="sxs-lookup"><span data-stu-id="85b55-290">Every query must include either a keyword filter, an XUID filter, or both.</span></span> |


#### <a name="query-for-session-templates"></a><span data-ttu-id="85b55-291">セッション テンプレートのクエリ</span><span class="sxs-lookup"><span data-stu-id="85b55-291">Query for Session Templates</span></span>

<span data-ttu-id="85b55-292">SCID のセッション テンプレートの一覧および特定のセッション テンプレートの詳細を取得するには、次のいずれかの URI に対して GET メソッドを使用します。</span><span class="sxs-lookup"><span data-stu-id="85b55-292">To retrieve the list of session templates for the SCID, as well as the details of a specific session template, use the GET method for one of the following URIs:</span></span>
-   **<span data-ttu-id="85b55-293">/serviceconfigs/{scid}/sessiontemplates</span><span class="sxs-lookup"><span data-stu-id="85b55-293">/serviceconfigs/{scid}/sessiontemplates</span></span>**
-   **<span data-ttu-id="85b55-294">/serviceconfigs/{scid}/sessiontemplates/{sessionTemplateName}</span><span class="sxs-lookup"><span data-stu-id="85b55-294">/serviceconfigs/{scid}/sessiontemplates/{sessionTemplateName}</span></span>**


#### <a name="query-for-session-state"></a><span data-ttu-id="85b55-295">セッション状態のクエリ</span><span class="sxs-lookup"><span data-stu-id="85b55-295">Query for Session State</span></span>

<span data-ttu-id="85b55-296">セッション状態をクエリするには、次のいずれかの URI に対して GET メソッドを使用します。</span><span class="sxs-lookup"><span data-stu-id="85b55-296">To query for session state, use the GET method for one of these URIs:</span></span>
-   **<span data-ttu-id="85b55-297">/serviceconfigs/{scid}/sessions</span><span class="sxs-lookup"><span data-stu-id="85b55-297">/serviceconfigs/{scid}/sessions</span></span>**
-   **<span data-ttu-id="85b55-298">/serviceconfigs/{scid}/sessiontemplates/{sessionTemplateName}/sessions</span><span class="sxs-lookup"><span data-stu-id="85b55-298">/serviceconfigs/{scid}/sessiontemplates/{sessionTemplateName}/sessions</span></span>**

## <a name="multiplayer-session-explorer"></a><span data-ttu-id="85b55-299">マルチプレイヤー セッション エクスプローラー</span><span class="sxs-lookup"><span data-stu-id="85b55-299">Multiplayer Session Explorer</span></span>

<span data-ttu-id="85b55-300">マルチプレイヤー セッション エクスプローラーは MPSD に組み込まれたツールであり、セッション、セッション テンプレート、およびローカライズ文字列の参照に使用します。</span><span class="sxs-lookup"><span data-stu-id="85b55-300">Multiplayer Session Explorer is a tool built into MPSD for browsing sessions, session templates, and localization strings.</span></span> <span data-ttu-id="85b55-301">このツールは、開発サンド ボックスでの使用のみを目的としています。</span><span class="sxs-lookup"><span data-stu-id="85b55-301">The tool is intended only to be used for development sandboxes.</span></span>


### <a name="accessing-multiplayer-session-explorer"></a><span data-ttu-id="85b55-302">マルチプレイヤー セッション エクスプローラーへのアクセス</span><span class="sxs-lookup"><span data-stu-id="85b55-302">Accessing Multiplayer Session Explorer</span></span>

| <span data-ttu-id="85b55-303">注意</span><span class="sxs-lookup"><span data-stu-id="85b55-303">Note</span></span>                                                                                                      |
|------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="85b55-304">ツールを使用するには、サインインしている必要があります。</span><span class="sxs-lookup"><span data-stu-id="85b55-304">To use the tool, you must be signed in.</span></span> <span data-ttu-id="85b55-305">参照は、サインしているユーザーがそのメンバーであるセッションに制限されます。</span><span class="sxs-lookup"><span data-stu-id="85b55-305">Your browsing is limited to sessions that have the signed-in user as a member.</span></span> |

<span data-ttu-id="85b55-306">マルチプレイヤー セッション エクスプローラーにアクセスするには、Xbox One 上で Internet Explorer を開き、**ビュー** ボタンを押し、**アドレス** フィールドに「<https://sessiondirectory.xboxlive.com/debug>」と入力します。</span><span class="sxs-lookup"><span data-stu-id="85b55-306">To access Multiplayer Session Explorer, open Internet Explorer on your Xbox One, press the **View** button, and enter <https://sessiondirectory.xboxlive.com/debug> in the **Address** field.</span></span>

| <span data-ttu-id="85b55-307">注意</span><span class="sxs-lookup"><span data-stu-id="85b55-307">Note</span></span>                                                                                                                                                                                |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="85b55-308">RETAIL サンドボックスでこのツールにアクセスしようとすると、HTTP/404 ステータス コードが発生します。</span><span class="sxs-lookup"><span data-stu-id="85b55-308">You will receive an HTTP/404 status code if you attempt to access the tool in the RETAIL sandbox.</span></span> <span data-ttu-id="85b55-309">このコードの詳細については、「[マルチプレイヤー セッション ステータス コード](multiplayer-session-status-codes.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="85b55-309">For more about this code, see [Multiplayer Session Status Codes](multiplayer-session-status-codes.md).</span></span> |


### <a name="using-multiplayer-session-explorer"></a><span data-ttu-id="85b55-310">マルチプレイヤー セッション エクスプローラーの使用</span><span class="sxs-lookup"><span data-stu-id="85b55-310">Using Multiplayer Session Explorer</span></span>


#### <a name="open-the-main-page"></a><span data-ttu-id="85b55-311">メイン ページを開く</span><span class="sxs-lookup"><span data-stu-id="85b55-311">Open the Main Page</span></span>

1.  <span data-ttu-id="85b55-312">ツールのメイン ページにアクセスします。</span><span class="sxs-lookup"><span data-stu-id="85b55-312">Access the main page of the tool.</span></span> <span data-ttu-id="85b55-313">サンドボックス内のセキュリティ コンテキスト (サインインしたユーザーおよびサンドボックス) と、サービス構成 ID (SCID) のリストが表示されます。</span><span class="sxs-lookup"><span data-stu-id="85b55-313">It displays the security context (signed-in user and sandbox) and a list of service configuration IDs (SCIDs) in the sandbox.</span></span>
2.  <span data-ttu-id="85b55-314">**メニュー** ボタンを押すと、このページがホームにピン留めされ、URI を毎回入力する必要がなくなります。</span><span class="sxs-lookup"><span data-stu-id="85b55-314">Press the **Menu** button to pin this page to Home so that you don't have to type the URI each time.</span></span>


#### <a name="display-available-sessions-and-templates"></a><span data-ttu-id="85b55-315">利用可能なセッションとテンプレートの表示</span><span class="sxs-lookup"><span data-stu-id="85b55-315">Display Available Sessions and Templates</span></span>

1.  <span data-ttu-id="85b55-316">ツールで SCID をクリックすると、その SCID に含まれていて、サインインしたユーザーがメンバーになっているセッションの一覧が表示されます。</span><span class="sxs-lookup"><span data-stu-id="85b55-316">Click on an SCID in the tool to display a list of sessions in that SCID of which the signed-in user is a member.</span></span>
2.  <span data-ttu-id="85b55-317">この同じページで SCID をクリックすると、SCID のサービス構成内にあるセッション テンプレートとローカライズ文字列を表示できます。</span><span class="sxs-lookup"><span data-stu-id="85b55-317">On this same page, you can click on the SCID and display the session templates and localization strings in the service configuration for the SCID.</span></span> <span data-ttu-id="85b55-318">これらの項目は[XDP](https://xdp.xboxlive.com)または[Windows デベロッパー センター](https://developer.microsoft.com/dashboard/windows/overview)を通じて取り込まれます。</span><span class="sxs-lookup"><span data-stu-id="85b55-318">These items are ingested through [XDP](https://xdp.xboxlive.com) or the [Windows Dev Center](https://developer.microsoft.com/dashboard/windows/overview).</span></span>


#### <a name="display-the-full-contents-of-a-session"></a><span data-ttu-id="85b55-319">セッションのすべての内容の表示</span><span class="sxs-lookup"><span data-stu-id="85b55-319">Display the Full Contents of a Session</span></span>

<span data-ttu-id="85b55-320">マルチプレイヤー セッション エクスプローラーで、セッション名をクリックし、対応するセッションのすべての内容を表示します。</span><span class="sxs-lookup"><span data-stu-id="85b55-320">In Multiplayer Session Explorer, click on a session name to display the full contents of the corresponding session.</span></span>

<span data-ttu-id="85b55-321">MPSD によって示されるセッションは、いくつかの理由により、セッションの URI に対する標準の GET メソッドへの応答とは異なる場合があります。</span><span class="sxs-lookup"><span data-stu-id="85b55-321">The session as shown by MPSD might differ from the response to a standard GET method for the session's URI for a few reasons:</span></span>

-   <span data-ttu-id="85b55-322">GET 呼び出しは X-Xbl-Contract-Version ヘッダーで古いコントラクト バージョンを使用している場合があります。</span><span class="sxs-lookup"><span data-stu-id="85b55-322">The GET call might be using an older contract version in the X-Xbl-Contract-Version header.</span></span> <span data-ttu-id="85b55-323">セッション エクスプローラーは常に最新のコントラクト バージョンでセッションを表示します。</span><span class="sxs-lookup"><span data-stu-id="85b55-323">Session Explorer always displays the session using the most up-to-date contract version.</span></span>
-   <span data-ttu-id="85b55-324">セッションが通常どおり GET を介して要求されたときに、期限の切れるタイムアウトなど、変換や副作用がトリガーされる場合があります。</span><span class="sxs-lookup"><span data-stu-id="85b55-324">When a session is requested normally via GET, transformations and side-effects can be triggered, for example, expired timeouts.</span></span> <span data-ttu-id="85b55-325">セッション エクスプローラーはロジックの実行、変換、または副作用を伴うことなく、保存されているセッションのスナップショットをそのまま表示します。</span><span class="sxs-lookup"><span data-stu-id="85b55-325">Session Explorer displays a snapshot of the session as it is stored, without executing any logic, transformations, or side-effects.</span></span>
-   <span data-ttu-id="85b55-326">nextTimer JSON オブジェクト フィールドはこの副作用と同時に計算されるので、MPSD セッションには存在しません。</span><span class="sxs-lookup"><span data-stu-id="85b55-326">Since the nextTimer JSON object field is computed at the same time as the side-effects, it is not present on MPSD sessions.</span></span>

## <a name="see-also"></a><span data-ttu-id="85b55-327">関連項目</span><span class="sxs-lookup"><span data-stu-id="85b55-327">See also</span></span>

[<span data-ttu-id="85b55-328">セッションの概要</span><span class="sxs-lookup"><span data-stu-id="85b55-328">Session Overview</span></span>](mpsd-session-details.md)

[<span data-ttu-id="85b55-329">マルチプレイヤー セッション ステータス コード</span><span class="sxs-lookup"><span data-stu-id="85b55-329">Multiplayer Session Status Codes</span></span>](multiplayer-session-status-codes.md)

[<span data-ttu-id="85b55-330">方法: マルチプレイヤー セッションの更新</span><span class="sxs-lookup"><span data-stu-id="85b55-330">How to: Update a Multiplayer Session</span></span>](multiplayer-how-tos.md)

[<span data-ttu-id="85b55-331">方法: タイトルのアクティベーションからの MPSD セッションへの参加</span><span class="sxs-lookup"><span data-stu-id="85b55-331">How to: Join an MPSD Session from a Title Activation</span></span>](multiplayer-how-tos.md)

[<span data-ttu-id="85b55-332">方法: MPSD セッション変更通知のサブスクライブ</span><span class="sxs-lookup"><span data-stu-id="85b55-332">How to: Subscribe for MPSD Session Change Notifications</span></span>](multiplayer-how-tos.md)

[<span data-ttu-id="85b55-333">SmartMatch マッチメイキング</span><span class="sxs-lookup"><span data-stu-id="85b55-333">SmartMatch Matchmaking</span></span>](smartmatch-matchmaking.md)