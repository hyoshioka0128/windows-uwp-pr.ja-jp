---
title: ゲーム セッションの可視性と参加可能性
author: KevinAsgari
description: Xbox Live ゲーム セッションおよびゲーム パーティーの可視性と参加可能性について説明します。
ms.assetid: 39b6dac1-0c6b-4dc1-9fe0-3cb7c471fbab
ms.author: kevinasg
ms.date: 04/04/2017
ms.topic: article
keywords: xbox live, xbox, ゲーム, uwp, windows 10, xbox one
ms.localizationpriority: medium
ms.openlocfilehash: c039a2c78824de64c503786d911bb3427e53cf64
ms.sourcegitcommit: 753e0a7160a88830d9908b446ef0907cc71c64e7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/30/2018
ms.locfileid: "5761026"
---
# <a name="game-session-and-game-party-visibility-and-joinability"></a><span data-ttu-id="b0981-104">ゲーム セッションおよびゲーム パーティーの可視性と参加可能性</span><span class="sxs-lookup"><span data-stu-id="b0981-104">Game session and game party visibility and joinability</span></span>

<span data-ttu-id="b0981-105">Xbox One では、ゲーム セッションに対する*可視性*およびゲーム パーティーに対する*参加可能性*によってマルチプレイヤー エクスペリエンスに対するアクセスが制御されます。</span><span class="sxs-lookup"><span data-stu-id="b0981-105">On Xbox One, the *visibility* and *joinability* settings for game sessions and game parties, respectively, control access to multiplayer experiences.</span></span> <span data-ttu-id="b0981-106">セッションへの参加およびゲーム セッションやパーティーへのプレイヤーの招待に対して優れたユーザー エクスペリエンスを提供するには、タイトル デベロッパーはこれらの設定を理解する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b0981-106">To provide a great user experience for session joining, and for inviting players into game sessions and parties, title developers need to understand these settings.</span></span> <span data-ttu-id="b0981-107">このホワイト ペーパーでは、可視性と参加可能性の違い、およびユーザーに最善のマルチプレイヤー ユーザー フローを提供するためにタイトルで使用することが推奨される具体的な設定について説明します。</span><span class="sxs-lookup"><span data-stu-id="b0981-107">This white paper reviews the differences between visibility and joinability, and it discusses the specific settings we recommend that titles use to give their consumers the best multiplayer user flow.</span></span>

## <a name="game-session-visibility"></a><span data-ttu-id="b0981-108">ゲーム セッションの可視性</span><span class="sxs-lookup"><span data-stu-id="b0981-108">Game session visibility</span></span>


<span data-ttu-id="b0981-109">マルチプレイヤー セッション ディレクトリ (MPSD) のセッション アクセスは、セッションの*可視性*とセッションの*参加可能性*という 2 つの設定によって制御されます。</span><span class="sxs-lookup"><span data-stu-id="b0981-109">Multiplayer Session Directory (MPSD) session access is gated by two settings: session *visibility* and session *joinability*.</span></span> <span data-ttu-id="b0981-110">これらの設定を使用すると、セッションへのアクセスを MPSD レベルで制限できます。</span><span class="sxs-lookup"><span data-stu-id="b0981-110">These settings can be used to limit session access at the MPSD level.</span></span>

<span data-ttu-id="b0981-111">1 番目のアクセス制御方法はセッションの可視性です。</span><span class="sxs-lookup"><span data-stu-id="b0981-111">The first aspect of access control is session visibility.</span></span> <span data-ttu-id="b0981-112">セッションの可視性は、セッションの作成時に設定される定数です。</span><span class="sxs-lookup"><span data-stu-id="b0981-112">Session visibility is a constant that is set at the time of session creation.</span></span> <span data-ttu-id="b0981-113">この定数は、通常、セッション テンプレートで定義され、セッションに対する読み取りアクセスと書き込みアクセスができるユーザーの種類を決定します。</span><span class="sxs-lookup"><span data-stu-id="b0981-113">It is typically defined in the session template and determines which types of users have read and write access to a session.</span></span> <span data-ttu-id="b0981-114">可視性設定の値は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="b0981-114">The values for the visibility setting are:</span></span>

-   <span data-ttu-id="b0981-115">*Open* - すべてのユーザーがセッションを読み書きできます。</span><span class="sxs-lookup"><span data-stu-id="b0981-115">*Open—* All users can read and write to the session.</span></span>

-   <span data-ttu-id="b0981-116">*Visible* - セッションの読み取りはすべてのユーザーが可能ですが、セッションの書き込みは参加済みで予約済みのプレイヤーだけが可能です。</span><span class="sxs-lookup"><span data-stu-id="b0981-116">*Visible—* All users can read, but only joined and reserved players can write to, the session.</span></span>

-   <span data-ttu-id="b0981-117">*Private* - 参加済みで予約済みのプレイヤーだけがセッションを読み書きできます。</span><span class="sxs-lookup"><span data-stu-id="b0981-117">*Private—* Only joined and reserved players can read or write to the session.</span></span>

> <span data-ttu-id="b0981-118">**注意:** 可視性を private に設定すると、招待されたプレイヤーは **join()** を繰り返し呼び出すことが必要になる場合があります。</span><span class="sxs-lookup"><span data-stu-id="b0981-118">**Note:** Setting visibility to private can require retries on the **join()** call by the invited player.</span></span> <span data-ttu-id="b0981-119">招待がプラットフォーム UI を介して送信される場合は、そのプレイヤーがセッションで予約される前に、他のプレイヤーがそれを受信する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="b0981-119">If an invite is sent through the platform UI, it can be received by another player before that player has been reserved in the session.</span></span> <span data-ttu-id="b0981-120">このような競合状態では、参加しているプレイヤーに対する予約がプライベート セッションまたは可視セッションで必要になるため、招待されたプレイヤーに対する **join()** の呼び出しが失敗する場合があります。</span><span class="sxs-lookup"><span data-stu-id="b0981-120">This race condition can cause a **join()** call for an invited player to fail because private or visible sessions require a reservation for the joining player.</span></span>
>
> <span data-ttu-id="b0981-121">予約が存在しない場合、セッションでアクセス エラー (HTTP/403) が発生します。</span><span class="sxs-lookup"><span data-stu-id="b0981-121">If no reservation exists, an access error on the session (HTTP/403) is raised.</span></span> <span data-ttu-id="b0981-122">その場合、招待されたプレイヤーは **join()** 操作を繰り返す必要がありますが、5 秒間隔以上の頻度では再試行しないようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="b0981-122">The invited player would then have to retry the **join()** operation, but retries should not be attempted more frequently than every five seconds.</span></span> <span data-ttu-id="b0981-123">プレイヤーに対する参加フローの間の競合状態を避けるため、タイトルではセッション可視性を open に設定することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="b0981-123">We recommend that titles set session visibility to open to avoid race conditions during the join flow for a player.</span></span>

## <a name="game-session-joinability"></a><span data-ttu-id="b0981-124">ゲーム セッションの参加可能性</span><span class="sxs-lookup"><span data-stu-id="b0981-124">Game session joinability</span></span>


<span data-ttu-id="b0981-125">2 番目のアクセス制御方法は参加可能性です。</span><span class="sxs-lookup"><span data-stu-id="b0981-125">The second aspect to access control is joinability.</span></span> <span data-ttu-id="b0981-126">参加可能性は、セッションの有効期間の間に動的に設定でき、セッションに参加できるユーザーの種類を決定します。</span><span class="sxs-lookup"><span data-stu-id="b0981-126">It can be set dynamically during the session lifetime and determines which types of users can join a session.</span></span> <span data-ttu-id="b0981-127">セッション joinabilityare の値:</span><span class="sxs-lookup"><span data-stu-id="b0981-127">The values for session joinabilityare:</span></span>

-   <span data-ttu-id="b0981-128">*なし* (既定値) - セッションに参加できるユーザーに制限はありません。</span><span class="sxs-lookup"><span data-stu-id="b0981-128">*None* (default value)—There are no restrictions on who can join the session.</span></span>

-   <span data-ttu-id="b0981-129">*Local* - ローカル ユーザーのみがセッションに参加できます。</span><span class="sxs-lookup"><span data-stu-id="b0981-129">*Local*—Only local users can join the session.</span></span>

-   <span data-ttu-id="b0981-130">*Followed* - ローカル ユーザーおよび他のセッション メンバーによってフォローされているユーザーのみが、予約なしでセッションに参加できます。</span><span class="sxs-lookup"><span data-stu-id="b0981-130">*Followed—* Only local users and users who are followed by other session members can join the session without a reservation.</span></span>

<span data-ttu-id="b0981-131">セッション ホストまたはアービターは、参加可能性の設定を使用してプライベート セッションを作成できます。参加可能性を Local または Followed にすると、ゲーム セッションへのアクセスを制限してプライベートにできます。</span><span class="sxs-lookup"><span data-stu-id="b0981-131">A session host or arbiter can create a private session through the joinability setting: making joinability either local or followed will restrict access to a game session and make it private.</span></span>

<span data-ttu-id="b0981-132">さらに、必要に応じて古いセッション招待をホスト レベルで拒否できるように、セッション ホストまたはアービターはセッションの参加可能性を追跡する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b0981-132">Additionally, the session host or arbiter should keep track of the joinability of a session, so that older session invites can be rejected at the host level if needed.</span></span> <span data-ttu-id="b0981-133">たとえば、セッションがいっぱいになるまでに招待されたプレイヤーがセッションまたはパーティーに参加するために到着しなかった場合、ホストまたはアービターは、参加しているプレイヤーに対し、セッションがロックされたため、セッションおよびパーティーから自動的に離脱する必要があることを指示できます。</span><span class="sxs-lookup"><span data-stu-id="b0981-133">For example, if any invited players have not arrived to join a session and/or party until the session is already full, the host or arbiter can instruct any joining players that the session has been locked and they need to leave the session and/or party automatically.</span></span>

<span data-ttu-id="b0981-134">**注意:** ゲーム セッションの参加可能性は、パーティー アプリの UI には反映されません。</span><span class="sxs-lookup"><span data-stu-id="b0981-134">**Note:** Game session joinability is not reflected in the Party App UI.</span></span> <span data-ttu-id="b0981-135">参加可能性が制限されている場合であっても、パーティー アプリの招待 UI および **ShowSendInvitesAsync** はゲーム セッションの招待を許可します。</span><span class="sxs-lookup"><span data-stu-id="b0981-135">Even if joinability is restricted, the Party App invite UI and **ShowSendInvitesAsync** will allow game session invites.</span></span>

## <a name="game-party-joinability"></a><span data-ttu-id="b0981-136">ゲーム パーティーの参加可能性</span><span class="sxs-lookup"><span data-stu-id="b0981-136">Game party joinability</span></span>


<span data-ttu-id="b0981-137">MPSD セッションの制御に加えて、タイトルはゲーム パーティーの参加可能性状態を制御することもできます。</span><span class="sxs-lookup"><span data-stu-id="b0981-137">In addition to controlling the MPSD session, the title also has control over the game party joinability state.</span></span> <span data-ttu-id="b0981-138">この設定を使用して、ゲーム パーティーのアクセスをパーティー レベルで制限できます。</span><span class="sxs-lookup"><span data-stu-id="b0981-138">This setting can be used to limit game party access at the party level.</span></span>

<span data-ttu-id="b0981-139">ゲーム パーティーを作成した後は、パーティーの参加可能性を動的に変更できます。</span><span class="sxs-lookup"><span data-stu-id="b0981-139">Party joinability can be changed dynamically once the game party is created.</span></span> <span data-ttu-id="b0981-140">ゲーム パーティーの参加可能性の状態はパーティー招待 UI に反映されます。</span><span class="sxs-lookup"><span data-stu-id="b0981-140">The state of the joinability of a game party is reflected in the Party invite UI.</span></span> <span data-ttu-id="b0981-141">次の値に設定できます。</span><span class="sxs-lookup"><span data-stu-id="b0981-141">It can be set to:</span></span>

-   <span data-ttu-id="b0981-142">*Invite-only* - ゲーム パーティーに参加するためには招待が必要です。</span><span class="sxs-lookup"><span data-stu-id="b0981-142">*Invite-only—* This setting requires an invite to join the game party.</span></span>

-   <span data-ttu-id="b0981-143">*Joinable by Friends* (既定値) *—* プレイヤーがゲーム パーティーに参加するためにはフレンド関係が必要です (パーティーに参加するには、パーティー メンバーが参加しているプレイヤーをフォローしている必要があります)。</span><span class="sxs-lookup"><span data-stu-id="b0981-143">*Joinable by Friends* (default value)*—* This setting requires a friend relationship for a player to join the game party (to join a party, a party member has to follow the joining player).</span></span>

<span data-ttu-id="b0981-144">参加可能性を使用して招待のみのゲーム パーティーを作成できます。</span><span class="sxs-lookup"><span data-stu-id="b0981-144">Joinability can be used to create an invite-only game party.</span></span> <span data-ttu-id="b0981-145">パーティーへのアクセスを制限し、プレイヤーが参加するための招待を受け取ることを必須にするには、参加可能性を "招待のみ" に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b0981-145">To restrict access to a party and require that players have received an invite to join, joinability should be set to “invite only”.</span></span>

<span data-ttu-id="b0981-146">**注意:** パーティーの参加可能性はセッションの参加可能性に影響を与えませんが、パーティーの参加可能性はパーティー アプリの UI に反映されます。</span><span class="sxs-lookup"><span data-stu-id="b0981-146">**Note:** Party joinability does not influence session joinability, but the party joinability is reflected in the Party App UI.</span></span> <span data-ttu-id="b0981-147">プレイヤーは、タイトルの外部でパーティー アプリのパーティーの参加可能性を手動で変更できます。</span><span class="sxs-lookup"><span data-stu-id="b0981-147">Players can change the party joinability in the Party App manually outside of a title.</span></span>

## <a name="recommendations"></a><span data-ttu-id="b0981-148">推奨事項</span><span class="sxs-lookup"><span data-stu-id="b0981-148">Recommendations</span></span>


<span data-ttu-id="b0981-149">以下の推奨事項は、最も一般的なタイトル シナリオに適用されます。</span><span class="sxs-lookup"><span data-stu-id="b0981-149">The following recommendations apply for the most common title scenarios.</span></span> <span data-ttu-id="b0981-150">タイトルは、可能であればこれらの設定に従う必要があり、新しいプレイヤーがセッションで許可されるかどうかに関する最終的で正式な決定を、タイトル内ロジックを使用して行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="b0981-150">Titles should follow these settings, if possible, and they should use in-title logic to make the final, authoritative determination as to whether a new player is admitted into the session or not.</span></span>

### <a name="recommended-game-session-visibility-open"></a><span data-ttu-id="b0981-151">ゲーム セッションの推奨される可視性: open</span><span class="sxs-lookup"><span data-stu-id="b0981-151">Recommended game session visibility: open</span></span>

<span data-ttu-id="b0981-152">オープン状態のゲーム セッションではプレイヤーの予約が必要なく、招待のフローが簡単になります。</span><span class="sxs-lookup"><span data-stu-id="b0981-152">Open game sessions do not require player reservations, thereby simplifying the flow for invites.</span></span> <span data-ttu-id="b0981-153">招待が送信された後、セッション ホストまたはアービターはプレイヤーをセッション ドキュメントで予約しません。</span><span class="sxs-lookup"><span data-stu-id="b0981-153">The session host or arbiter does not reserve players in the session document after an invite has been sent.</span></span> <span data-ttu-id="b0981-154">セッション ホストまたはアービターは、代わりに、招待されたプレイヤーをローカルにのみ追跡します。</span><span class="sxs-lookup"><span data-stu-id="b0981-154">Instead, the session host or arbiter only tracks invited players locally.</span></span> <span data-ttu-id="b0981-155">これにより、プレイヤーはホストにすぐに接続し、セッションに参加する必要があるかどうか、拒否されたかどうか、待機する必要があるかどうか (待機プレイヤーがサポートされる場合) を判別できます。</span><span class="sxs-lookup"><span data-stu-id="b0981-155">This allows players to immediately connect to the host and determine whether they should join a session, are rejected, or should wait (if waiting players are supported).</span></span> <span data-ttu-id="b0981-156">アービターまたはホストは最終的な権限であり、新しいメンバーにセッションに留まるか退出するかを応答および指示します。</span><span class="sxs-lookup"><span data-stu-id="b0981-156">The arbiter or host is the ultimate authority and responds and instructs the new member to either stay in or leave the session.</span></span>

<span data-ttu-id="b0981-157">**注意:** 招待されたプレイヤーは、最終的な決定が行われる前に、タイトルを起動してホストまたはアービターに接続する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b0981-157">**Note:** This will require the invited player to launch a title and connect to the host or arbiter before the final decision has been made.</span></span> <span data-ttu-id="b0981-158">セッションに空きがない場合、または招待が拒否された場合は、ユーザーにエラー メッセージを表示してもかまいません。</span><span class="sxs-lookup"><span data-stu-id="b0981-158">It is acceptable to display an error message to the user if a session is full or an invite has been rejected.</span></span>

> <span data-ttu-id="b0981-159">**注意:** ホストまたはアービターへの接続を確立するには、セキュア デバイス アドレスが必要です。</span><span class="sxs-lookup"><span data-stu-id="b0981-159">**Note:** To establish a connection to the host or arbiter, a Secure Device Address is required.</span></span> <span data-ttu-id="b0981-160">どのセッション メンバーがセッションの現在のホストまたはアービターか、および招待されたプレイヤーがどのセキュア デバイス アドレスに接続する必要があるかということは、セッションの **HostDeviceToken** を使用して示す必要があります。</span><span class="sxs-lookup"><span data-stu-id="b0981-160">The **HostDeviceToken** in the session should be used to indicate which session member is the current host or arbiter of a session and which Secure Device Address an invited player should connect to.</span></span>

### <a name="recommended-game-session-joinability-default-not-set"></a><span data-ttu-id="b0981-161">推奨されるゲーム セッションの参加可能性: 既定 (*設定しない*)</span><span class="sxs-lookup"><span data-stu-id="b0981-161">Recommended game session joinability: default (*not set*)</span></span>

<span data-ttu-id="b0981-162">現在、ゲーム セッションの参加可能性はパーティー アプリ UI に反映されず、ユーザーには表示されません。</span><span class="sxs-lookup"><span data-stu-id="b0981-162">Currently game session joinability does not influence the Party App UI and is not surfaced to the user.</span></span> <span data-ttu-id="b0981-163">タイトルのフローを単純にするため、ゲームの参加可能性は既定値のままにする必要があり、すべての参加権限はアービターまたはホストによって処理される必要があります。</span><span class="sxs-lookup"><span data-stu-id="b0981-163">To simplify the title flow, game joinability should remain at the default value, and all join authority should be handled through the arbiter or host.</span></span>

### <a name="recommended-game-party-joinability"></a><span data-ttu-id="b0981-164">ゲーム パーティーの推奨される参加可能性</span><span class="sxs-lookup"><span data-stu-id="b0981-164">Recommended game party joinability</span></span>

<span data-ttu-id="b0981-165">ゲーム パーティーの参加可能性は、タイトルがユーザーに提供しようとしているセッションの種類に依存します。</span><span class="sxs-lookup"><span data-stu-id="b0981-165">Game party joinability is dependent on the type of session that a title is trying to provide to a user.</span></span> <span data-ttu-id="b0981-166">次の 2 つのシナリオがあります。</span><span class="sxs-lookup"><span data-stu-id="b0981-166">The two scenarios are:</span></span>

-   <span data-ttu-id="b0981-167">Open game - オープン状態のゲームの場合、ゲーム パーティーの参加可能性は、既定値 (Joinable by Friends) のままにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="b0981-167">Open game—For an open game, the game party joinability should be left at the default value: Joinable by Friends.</span></span> <span data-ttu-id="b0981-168">これにより、フレンドは招待がなくてもゲーム パーティーに (および拡張によってゲーム セッションに) 参加できます。</span><span class="sxs-lookup"><span data-stu-id="b0981-168">This allows friends to join the game party (and by extension the game session) without an invite.</span></span>

-   <span data-ttu-id="b0981-169">Private game - プライベート状態またはクローズド状態のゲームの場合、ゲーム パーティーの参加可能性は Invite-only に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b0981-169">Private game—For a private or closed game, the game party joinability should be set to Invite Only.</span></span> <span data-ttu-id="b0981-170">これは、招待なしでの他のプレイヤーによるパーティー (および拡張によるゲーム セッション) への参加を制限します。</span><span class="sxs-lookup"><span data-stu-id="b0981-170">This restricts other players from joining the party (and by extension the game session) without an invite.</span></span>

<span data-ttu-id="b0981-171">**注意**: プレイヤーは、パーティー アプリを使用してゲーム セッションの参加可能性を手動で変更できます。</span><span class="sxs-lookup"><span data-stu-id="b0981-171">**Note**: Players can manually change the joinability of a game session through the Party App.</span></span>

<span data-ttu-id="b0981-172">どちらの種類のゲームについても、アービターまたはホストはセッションへの参加を許可されるユーザーを決定する最終的な権限であり続ける必要があります。</span><span class="sxs-lookup"><span data-stu-id="b0981-172">For both game types, the arbiter or host should still remain the ultimate authority to determine who is accepted into a session.</span></span> <span data-ttu-id="b0981-173">これにより、open から private にゲーム フローを切り替えることで発生する可能性がある競合状態を解決します。</span><span class="sxs-lookup"><span data-stu-id="b0981-173">This addresses any race conditions that can occur from switching game flow from open to private.</span></span> <span data-ttu-id="b0981-174">アービター/ホストがプレイヤーを拒否した場合、拒否されたタイトル インスタンスは、そのプレイヤーをセッションから削除し、プレイヤーがパーティーを離れることもできるようにするためのゲーム内 UI を表示する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b0981-174">If the arbiter/host rejects a player, the rejected title instance should remove the player from the session and show an in-game UI to also allow a player to leave the party.</span></span>

### <a name="maximum-session-size"></a><span data-ttu-id="b0981-175">セッションの最大サイズ</span><span class="sxs-lookup"><span data-stu-id="b0981-175">Maximum session size</span></span>

<span data-ttu-id="b0981-176">セッションの最大メンバー サイズを使用して、ゲーム セッションに参加するプレイヤーの数を制限できます。</span><span class="sxs-lookup"><span data-stu-id="b0981-176">The maximum member size for a session can be used to limit the number of players joining a game session.</span></span> <span data-ttu-id="b0981-177">ただし、この方法で制限すると、特定の切断シナリオの間に空きスポットが埋まっているものと表示されることがあります。</span><span class="sxs-lookup"><span data-stu-id="b0981-177">However, this limit can cause an open spot to still appear as full during certain disconnect scenarios.</span></span> <span data-ttu-id="b0981-178">たとえば、ネットワークまたは電源の障害によりプレイヤーが切断された場合、遅延はセッションに直ちに反映されません。</span><span class="sxs-lookup"><span data-stu-id="b0981-178">For example, if a player becomes disconnected as a result of a network or power failure, the delay is not immediately reflected in the session.</span></span> <span data-ttu-id="b0981-179">プレゼンス サービスが切断を検出すると直ちに (最大 20 秒) メンバーは非アクティブに設定され、非アクティブ タイムアウトが過ぎるとプレイヤーは削除されます。</span><span class="sxs-lookup"><span data-stu-id="b0981-179">The member will be set to inactive as soon as the Presence service detects the disconnect (up to 20 seconds), and the player will then be removed after the inactive timeout has expired.</span></span>

<span data-ttu-id="b0981-180">一方、ハートビートを使用して切断を検出するピア メッシュは、通常、2 ～ 3 秒以内に切断を認識して、プレイヤー スロットをすぐに空けることができます。</span><span class="sxs-lookup"><span data-stu-id="b0981-180">In comparison, a peer mesh that uses a heartbeat to detect a disconnection is often aware of a disconnect within two to three seconds and could open up the player slot immediately.</span></span> <span data-ttu-id="b0981-181">ただし、アービターまたはホストは他のメンバーを削除できません。</span><span class="sxs-lookup"><span data-stu-id="b0981-181">However, the arbiter or host cannot remove other members.</span></span>

<span data-ttu-id="b0981-182">この問題に対処するには、セッション メンバーの最大サイズを常に、タイトルが実際にサポートしているプレイヤーの最大数よりも大きい値に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b0981-182">To address this issue, the maximum member size of a session should always be set higher than the maximum number of players that a title actually supports.</span></span> <span data-ttu-id="b0981-183">たとえば、プレイヤー数が 8 の場合、最大セッション サイズを 12 などと設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b0981-183">For instance, if the player number is 8, the title should set the maximum session size at 12.</span></span> <span data-ttu-id="b0981-184">こうすると、古いプレイヤーがまだタイムアウトしていない場合でも、新しいプレイヤーが参加できます。アービターまたはホストは、セッションに空きがないかどうかを判別し、新しいプレイヤーがまだ参加できるかどうかを決定するカスタム セッション プロパティを設定します (**IsFull** : “true”)。</span><span class="sxs-lookup"><span data-stu-id="b0981-184">In this way new players can join even if old players have not yet timed out. The arbiter or host determines whether the session is full and then sets a custom session property that will determines whether new players can still join (**IsFull** : “true”).</span></span> <span data-ttu-id="b0981-185">これにより、セッションが参加可能かどうかを参加しているプレイヤーがすばやくチェックできます。</span><span class="sxs-lookup"><span data-stu-id="b0981-185">This allows for a quick check from joining players if the session is joinable.</span></span>

<span data-ttu-id="b0981-186">また、アービターまたはホストは、タイムアウトしたメンバーをインデックスで示すカスタム プロパティも保持する必要があります (例: **TimedOutPlayers** : “3, 5, 9”)。</span><span class="sxs-lookup"><span data-stu-id="b0981-186">The arbiter or host should also maintain a custom property that indicates which members, by index, have timed out (for example, **TimedOutPlayers** : “3, 5, 9”).</span></span> <span data-ttu-id="b0981-187">これにより、新しいプレイヤーは現在のセッション メンバーを正しく識別できます。</span><span class="sxs-lookup"><span data-stu-id="b0981-187">This allows new players to correctly identify the current session members.</span></span>

### <a name="notifying-waiting-players"></a><span data-ttu-id="b0981-188">待機しているプレイヤーへの通知</span><span class="sxs-lookup"><span data-stu-id="b0981-188">Notifying waiting players</span></span>

<span data-ttu-id="b0981-189">タイトルでは、ゲーム パーティーに加えて、キュー内のプレイヤー リストを管理することによって待機しているプレイヤーをサポートできます。</span><span class="sxs-lookup"><span data-stu-id="b0981-189">A title can support waiting players by managing a queued player list in addition to the game party.</span></span> <span data-ttu-id="b0981-190">プレイヤーがホストに接続したときにゲーム セッションに空きがない場合、プレイヤーはホストの内部待機リストに追加されます。</span><span class="sxs-lookup"><span data-stu-id="b0981-190">When a player connects to the host and the game session is full, the player is added to the internal wait list on the host.</span></span> <span data-ttu-id="b0981-191">キューに入れられたプレイヤーは、ゲーム セッションには参加しませんが、ゲーム パーティーには留まっています。</span><span class="sxs-lookup"><span data-stu-id="b0981-191">The queued player does not join the game session, but remains in the game party.</span></span> <span data-ttu-id="b0981-192">ネットワーク トラフィックを最小にするため、待機しているプレイヤーはこの時点でホストから切断します。</span><span class="sxs-lookup"><span data-stu-id="b0981-192">To minimize network traffic, the waiting player disconnects from the host at this point.</span></span>

<span data-ttu-id="b0981-193">ゲーム セッションのスロットが待機プレイヤー用に空くと、アービターまたはホストは **AddMemberReservation** メソッドを呼び出してプレイヤーのための予約を追加します。</span><span class="sxs-lookup"><span data-stu-id="b0981-193">When a slot in the game session opens for the waiting player, the arbiter or host adds a reservation for the player by calling the **AddMemberReservation** method.</span></span> <span data-ttu-id="b0981-194">この段階では待機プレイヤーはこの予約をまだ認識しないので、アービターまたはホストは **PullReservedPlayersAsync** メソッドを呼び出す必要があります。</span><span class="sxs-lookup"><span data-stu-id="b0981-194">At this point the waiting player is not yet aware of this reservation, therefore the arbiter or host has to call the **PullReservedPlayersAsync** method.</span></span> <span data-ttu-id="b0981-195">これにより、トーストの構成およびタイトルのフォーカスの状態に応じて、予約されているすべてのプレイヤーに対して UI トーストまたは **GameSessionReady** 通知が発生します。</span><span class="sxs-lookup"><span data-stu-id="b0981-195">This causes a UI toast or **GameSessionReady** notification for all reserved players, depending on toast configuration and title focus state.</span></span> <span data-ttu-id="b0981-196">この通知を受け取ると、新しいプレイヤーはホストに再接続してセッションに参加します。</span><span class="sxs-lookup"><span data-stu-id="b0981-196">The new player reconnects to the host when this notification is received and joins the session.</span></span>

<span data-ttu-id="b0981-197">あるいは、プレイヤーはホストに接続したままにして、スロットが空いたことをホストがプレイヤーに通知した時点でセッションに参加することもできます。</span><span class="sxs-lookup"><span data-stu-id="b0981-197">Alternatively, a player can remain connected to the host and join the session when the host alerts the player that a slot is available.</span></span> <span data-ttu-id="b0981-198">ただし、このフローでは、タイトル以外の UI トーストを表示できません。</span><span class="sxs-lookup"><span data-stu-id="b0981-198">However, in this flow a UI toast outside of the title cannot be displayed.</span></span>

<span data-ttu-id="b0981-199">**注意:** タイトルが一時停止または終了されるとプレイヤーは自動的にゲーム パーティーから削除されて、それ以上通知を受け取りません。</span><span class="sxs-lookup"><span data-stu-id="b0981-199">**Note:** Players will automatically be removed from the game party if the title is suspended and/or terminated and will receive no further notifications.</span></span>

<a name="client-multiplayer-flow"></a><span data-ttu-id="b0981-200">クライアント マルチプレイヤーのフロー</span><span class="sxs-lookup"><span data-stu-id="b0981-200">Client multiplayer flow</span></span>
-----------------------

![](../../images/whitepapers/gamesessionvisibility_image1.png)
![](../../images/whitepapers/gamesessionvisibility_image2.png)
