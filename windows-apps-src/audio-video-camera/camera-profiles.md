---
ms.assetid: 42A06423-670F-4CCC-88B7-3DCEEDDEBA57
description: この記事では、カメラ プロファイルを使ってさまざまなビデオ キャプチャ デバイスの機能を検出および管理する方法について説明します。 これには、特定の解像度やフレーム レートをサポートするプロファイル、複数のカメラへの同時アクセスをサポートするプロファイル、HDR をサポートするプロファイルを選ぶなどのタスクが含まれます。
title: カメラ プロファイルを使用したカメラ機能の検出と選択
ms.date: 02/08/2017
ms.topic: article
keywords: Windows 10, UWP
ms.localizationpriority: medium
ms.openlocfilehash: fe876b362f09eaca68d84516d413d3f458edf0a6
ms.sourcegitcommit: 89ff8ff88ef58f4fe6d3b1368fe94f62e59118ad
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/29/2018
ms.locfileid: "8204092"
---
# <a name="discover-and-select-camera-capabilities-with-camera-profiles"></a><span data-ttu-id="f7914-105">カメラ プロファイルを使用したカメラ機能の検出と選択</span><span class="sxs-lookup"><span data-stu-id="f7914-105">Discover and select camera capabilities with camera profiles</span></span>



<span data-ttu-id="f7914-106">この記事では、カメラ プロファイルを使ってさまざまなビデオ キャプチャ デバイスの機能を検出および管理する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="f7914-106">This article discusses how to use camera profiles to discover and manage the capabilities of different video capture devices.</span></span> <span data-ttu-id="f7914-107">これには、特定の解像度やフレーム レートをサポートするプロファイル、複数のカメラへの同時アクセスをサポートするプロファイル、HDR をサポートするプロファイルを選ぶなどのタスクが含まれます。</span><span class="sxs-lookup"><span data-stu-id="f7914-107">This includes tasks such as selecting profiles that support specific resolutions or frame rates, profiles that support simultaneous access to multiple cameras, and profiles that support HDR.</span></span>

> [!NOTE] 
> <span data-ttu-id="f7914-108">この記事の内容は、写真やビデオの基本的なキャプチャ機能を実装するための手順を紹介した「[MediaCapture を使った基本的な写真、ビデオ、およびオーディオのキャプチャ](basic-photo-video-and-audio-capture-with-MediaCapture.md)」で取り上げた概念やコードに基づいています。</span><span class="sxs-lookup"><span data-stu-id="f7914-108">This article builds on concepts and code discussed in [Basic photo, video, and audio capture with MediaCapture](basic-photo-video-and-audio-capture-with-MediaCapture.md), which describes the steps for implementing basic photo and video capture.</span></span> <span data-ttu-id="f7914-109">そちらの記事で基本的なメディア キャプチャのパターンを把握してから、高度なキャプチャ シナリオに進むことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="f7914-109">It is recommended that you familiarize yourself with the basic media capture pattern in that article before moving on to more advanced capture scenarios.</span></span> <span data-ttu-id="f7914-110">この記事で紹介しているコードは、MediaCapture のインスタンスが既に作成され、適切に初期化されていることを前提としています。</span><span class="sxs-lookup"><span data-stu-id="f7914-110">The code in this article assumes that your app already has an instance of MediaCapture that has been properly initialized.</span></span>

 

## <a name="about-camera-profiles"></a><span data-ttu-id="f7914-111">カメラ プロファイルについて</span><span class="sxs-lookup"><span data-stu-id="f7914-111">About camera profiles</span></span>

<span data-ttu-id="f7914-112">カメラが搭載されているデバイスによって、キャプチャ解像度、ビデオ キャプチャのフレーム レート、HDR または可変フレーム レート キャプチャなど、サポートされている機能も異なります。</span><span class="sxs-lookup"><span data-stu-id="f7914-112">Cameras on different devices support different capabilities including the set of supported capture resolutions, frame rate for video captures, and whether HDR or variable frame rate captures are supported.</span></span> <span data-ttu-id="f7914-113">ユニバーサル Windows プラットフォーム (UWP) メディア キャプチャ フレームワークでは、この機能セットが [**MediaCaptureVideoProfileMediaDescription**](https://msdn.microsoft.com/library/windows/apps/dn926695) に格納されます。</span><span class="sxs-lookup"><span data-stu-id="f7914-113">The Universal Windows Platform (UWP) media capture framework stores this set of capabilities in a [**MediaCaptureVideoProfileMediaDescription**](https://msdn.microsoft.com/library/windows/apps/dn926695).</span></span> <span data-ttu-id="f7914-114">[**MediaCaptureVideoProfile**](https://msdn.microsoft.com/library/windows/apps/dn926694) オブジェクトで表されるカメラ プロファイルには、メディア記述のコレクションが 3 つ含まれています。1 つは写真のキャプチャ用、1 つはビデオ キャプチャ用、もう 1 つはビデオ プレビュー用です。</span><span class="sxs-lookup"><span data-stu-id="f7914-114">A camera profile, represented by a [**MediaCaptureVideoProfile**](https://msdn.microsoft.com/library/windows/apps/dn926694) object, has three collections of media descriptions; one for photo capture, one for video capture, and another for video preview.</span></span>

<span data-ttu-id="f7914-115">[MediaCapture](capture-photos-and-video-with-mediacapture.md) オブジェクトを初期化する前に、現在のデバイスのキャプチャ デバイスを照会して、サポートされているプロファイルを確認することができます。</span><span class="sxs-lookup"><span data-stu-id="f7914-115">Before initializing your [MediaCapture](capture-photos-and-video-with-mediacapture.md) object, you can query the capture devices on the current device to see what profiles are supported.</span></span> <span data-ttu-id="f7914-116">サポートされているプロファイルを選択すると、機能、プロファイルのメディア記述に含まれているすべての機能がすべてキャプチャ デバイスでサポートされることがわかります。</span><span class="sxs-lookup"><span data-stu-id="f7914-116">When you select a supported profile, you know that the capture device supports all of the capabilities in the profile's media descriptions.</span></span> <span data-ttu-id="f7914-117">これにより、特定のデバイスでどのような組み合わせの機能がサポートされているか確認するために試行錯誤する必要がなくなります。</span><span class="sxs-lookup"><span data-stu-id="f7914-117">This eliminates the need for a trial and error approach to determining which combinations of capabilities are supported on a particular device.</span></span>

[!code-cs[BasicInitExample](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetBasicInitExample)]

<span data-ttu-id="f7914-118">この記事のコード例では、最小限の初期化が、さまざまな機能をサポートするカメラ プロファイルの検出に置き換わっています。検出されたプロファイルは、メディア キャプチャ デバイスの初期化に使用されます。</span><span class="sxs-lookup"><span data-stu-id="f7914-118">The code examples in this article replace this minimal initialization with the discovery of camera profiles supporting various capabilities, which are then used to initialize the media capture device.</span></span>

## <a name="find-a-video-device-that-supports-camera-profiles"></a><span data-ttu-id="f7914-119">カメラ プロファイルをサポートするビデオ デバイスを検出する</span><span class="sxs-lookup"><span data-stu-id="f7914-119">Find a video device that supports camera profiles</span></span>

<span data-ttu-id="f7914-120">サポートされているカメラ プロファイルを検索する前に、カメラ プロファイルの使用がサポートされるキャプチャ デバイスを検出する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f7914-120">Before searching for supported camera profiles, you should find a capture device that supports the use of camera profiles.</span></span> <span data-ttu-id="f7914-121">次の例で定義されている **GetVideoProfileSupportedDeviceIdAsync** ヘルパー メソッドでは、[**DeviceInformaion.FindAllAsync**](https://msdn.microsoft.com/library/windows/apps/br225432) メソッドを使って、すべての利用可能なビデオ キャプチャ デバイスの一覧を取得しています。</span><span class="sxs-lookup"><span data-stu-id="f7914-121">The **GetVideoProfileSupportedDeviceIdAsync** helper method defined in the example below uses the [**DeviceInformaion.FindAllAsync**](https://msdn.microsoft.com/library/windows/apps/br225432) method to retrieve a list of all available video capture devices.</span></span> <span data-ttu-id="f7914-122">個々のデバイスについて静的メソッド [**IsVideoProfileSupported**](https://msdn.microsoft.com/library/windows/apps/dn926714) を呼び出し、ビデオ プロファイルがサポートされるかどうかを確認する処理が、一覧内のすべてのデバイスに対してループで実行されます。</span><span class="sxs-lookup"><span data-stu-id="f7914-122">It loops through all of the devices in the list, calling the static method, [**IsVideoProfileSupported**](https://msdn.microsoft.com/library/windows/apps/dn926714), for each device to see if it supports video profiles.</span></span> <span data-ttu-id="f7914-123">また、各デバイスの [**EnclosureLocation.Panel**](https://msdn.microsoft.com/library/windows/apps/br229906) プロパティで、使用するカメラがデバイスの前面にあるか背面にあるかを指定することができます。</span><span class="sxs-lookup"><span data-stu-id="f7914-123">Also, the [**EnclosureLocation.Panel**](https://msdn.microsoft.com/library/windows/apps/br229906) property for each device, allowing you to specify wether you want a camera on the front or back of the device.</span></span>

<span data-ttu-id="f7914-124">指定された面に、カメラ プロファイルをサポートするデバイスが見つかった場合は、デバイスの ID 文字列が含まれている [**Id**](https://msdn.microsoft.com/library/windows/apps/br225437) 値が返されます。</span><span class="sxs-lookup"><span data-stu-id="f7914-124">If a device that supports camera profiles is found on the specified panel, the [**Id**](https://msdn.microsoft.com/library/windows/apps/br225437) value, containing the device's ID string, is returned.</span></span>

[!code-cs[GetVideoProfileSupportedDeviceIdAsync](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetGetVideoProfileSupportedDeviceIdAsync)]

<span data-ttu-id="f7914-125">**GetVideoProfileSupportedDeviceIdAsync** ヘルパー メソッドから返されたデバイス ID が null または空の文字列であれば、指定された面にはカメラ プロファイルをサポートするデバイスがありません。</span><span class="sxs-lookup"><span data-stu-id="f7914-125">If the device ID returned from the **GetVideoProfileSupportedDeviceIdAsync** helper method is null or an empty string, there is no device on the specified panel that supports camera profiles.</span></span> <span data-ttu-id="f7914-126">この場合は、プロファイルを使用せずにメディア キャプチャ デバイスを初期化する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f7914-126">In this case, you should initialize your media capture device without using profiles.</span></span>

[!code-cs[GetDeviceWithProfileSupport](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetGetDeviceWithProfileSupport)]

## <a name="select-a-profile-based-on-supported-resolution-and-frame-rate"></a><span data-ttu-id="f7914-127">サポートされている解像度とフレーム レートに基づいてプロファイルを選択する</span><span class="sxs-lookup"><span data-stu-id="f7914-127">Select a profile based on supported resolution and frame rate</span></span>

<span data-ttu-id="f7914-128">特定の解像度やフレーム レートを確保できるなど、特定の機能が含まれたプロファイルを選択するには、先ほど定義したヘルパー メソッドをまず呼び出して、カメラ プロファイルの使用をサポートするキャプチャ デバイスの ID を取得する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f7914-128">To select a profile with particular capabilities, such as with the ability to achieve a particular resolution and frame rate, you should first call the helper method defined above to get the ID of a capture device that supports using camera profiles.</span></span>

<span data-ttu-id="f7914-129">選択されたデバイス ID を渡して、新しい [**MediaCaptureInitializationSettings**](https://msdn.microsoft.com/library/windows/apps/br226573) オブジェクトを作成します。</span><span class="sxs-lookup"><span data-stu-id="f7914-129">Create a new [**MediaCaptureInitializationSettings**](https://msdn.microsoft.com/library/windows/apps/br226573) object, passing in the selected device ID.</span></span> <span data-ttu-id="f7914-130">次に、静的メソッド [**MediaCapture.FindAllVideoProfiles**](https://msdn.microsoft.com/library/windows/apps/dn926708) を呼び出して、デバイスでサポートされているすべてのカメラ プロファイルの一覧を取得します。</span><span class="sxs-lookup"><span data-stu-id="f7914-130">Next, call the static method [**MediaCapture.FindAllVideoProfiles**](https://msdn.microsoft.com/library/windows/apps/dn926708) to get a list of all camera profiles supported by the device.</span></span>

<span data-ttu-id="f7914-131">この例では、**System.Linq** 名前空間に含まれている Linq クエリの手法を使用して、[**Width**](https://msdn.microsoft.com/library/windows/apps/dn926700)、[**Height**](https://msdn.microsoft.com/library/windows/apps/dn926697)、[**FrameRate**](https://msdn.microsoft.com/library/windows/apps/dn926696) の各プロパティが要求値に一致する [**SupportedRecordMediaDescription**](https://msdn.microsoft.com/library/windows/apps/dn926705) オブジェクトが含まれたプロパティを選択しています。</span><span class="sxs-lookup"><span data-stu-id="f7914-131">This example uses a Linq query method, included in the using **System.Linq** namespace, to select a profile that contains a [**SupportedRecordMediaDescription**](https://msdn.microsoft.com/library/windows/apps/dn926705) object where the [**Width**](https://msdn.microsoft.com/library/windows/apps/dn926700), [**Height**](https://msdn.microsoft.com/library/windows/apps/dn926697), and [**FrameRate**](https://msdn.microsoft.com/library/windows/apps/dn926696) properties match the requested values.</span></span> <span data-ttu-id="f7914-132">一致が見つかった場合、**MediaCaptureInitializationSettings** の [**VideoProfile**](https://msdn.microsoft.com/library/windows/apps/dn926679) と [**RecordMediaDescription**](https://msdn.microsoft.com/library/windows/apps/dn926678) が、Linq クエリから返された匿名型の値に設定されます。</span><span class="sxs-lookup"><span data-stu-id="f7914-132">If a match is found, [**VideoProfile**](https://msdn.microsoft.com/library/windows/apps/dn926679) and [**RecordMediaDescription**](https://msdn.microsoft.com/library/windows/apps/dn926678) of the **MediaCaptureInitializationSettings** are set to the values from the anonymous type returned from the Linq query.</span></span> <span data-ttu-id="f7914-133">一致が見つからなかった場合は、既定のプロパティが使われます。</span><span class="sxs-lookup"><span data-stu-id="f7914-133">If no match is found, the default profile is used.</span></span>

[!code-cs[FindWVGA30FPSProfile](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetFindWVGA30FPSProfile)]

<span data-ttu-id="f7914-134">目的のカメラ プロファイルを **MediaCaptureInitializationSettings** に設定した後、メディア キャプチャ オブジェクトで [**InitializeAsync**](https://msdn.microsoft.com/library/windows/apps/br226598) を呼び出して、目的のプロファイルに構成します。</span><span class="sxs-lookup"><span data-stu-id="f7914-134">After you populate the **MediaCaptureInitializationSettings** with your desired camera profile, you simply call [**InitializeAsync**](https://msdn.microsoft.com/library/windows/apps/br226598) on your media capture object to configure it to the desired profile.</span></span>

[!code-cs[InitCaptureWithProfile](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetInitCaptureWithProfile)]

## <a name="use-media-frame-source-groups-to-get-profiles"></a><span data-ttu-id="f7914-135">メディア フレーム ソース グループを使用してプロファイルを取得する</span><span class="sxs-lookup"><span data-stu-id="f7914-135">Use media frame source groups to get profiles</span></span>

<span data-ttu-id="f7914-136">Windows 10、バージョン 1803 以降では、[**MediaFrameSourceGroup**](https://docs.microsoft.com/uwp/api/windows.media.capture.frames.mediaframesourcegroup) クラスを使用して、特定の機能を備えたカメラ プロファイルを取得した後に、**MediaCapture** オブジェクトを初期化できます。</span><span class="sxs-lookup"><span data-stu-id="f7914-136">Starting with Windows 10, version 1803, you can use the [**MediaFrameSourceGroup**](https://docs.microsoft.com/uwp/api/windows.media.capture.frames.mediaframesourcegroup) class to get camera profiles with specific capabilities before initializing the **MediaCapture** object.</span></span> <span data-ttu-id="f7914-137">デバイス メーカーは、フレーム ソース グループを使用して、一連のセンサー機能やキャプチャ機能を 1 つの仮想デバイスとして表すことができます。</span><span class="sxs-lookup"><span data-stu-id="f7914-137">Frame source groups allow device manufacturers to represent groups of sensors or capture capabilities as a single virtual device.</span></span> <span data-ttu-id="f7914-138">これにより、深度とカラー カメラを組み合わせるなどのコンピュテーショナル フォトグラフィー (計算写真学) のシナリオが可能になるだけでなく、単純なキャプチャのシナリオでカメラ プロファイルを選択するためにも使用できます。</span><span class="sxs-lookup"><span data-stu-id="f7914-138">This enables computational photography scenarios such as using depth and color cameras together, but can also be used to select camera profiles for simple capture scenarios.</span></span> <span data-ttu-id="f7914-139">**MediaFrameSourceGroup** の使用方法について詳しくは、「[MediaFrameReader を使ったメディア フレームの処理](process-media-frames-with-mediaframereader.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="f7914-139">For more information on using **MediaFrameSourceGroup**, see [Process media frames with MediaFrameReader](process-media-frames-with-mediaframereader.md).</span></span>

<span data-ttu-id="f7914-140">次のサンプル メソッドでは、**MediaFrameSourceGroup** オブジェクトを使用して、既知のビデオ プロファイルをサポートしているカメラ プロファイル (HDR や可変の写真シーケンスをサポートするカメラ プロファイルなど) を検索する方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="f7914-140">The example method below shows how to use **MediaFrameSourceGroup** objects to find a camera profile that supports a known video profile, such as one that supports HDR or variable photo sequence.</span></span> <span data-ttu-id="f7914-141">まず、[**MediaFrameSourceGroup.FindAllAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.Frames.MediaFrameSourceGroup.FindAllAsync) を呼び出して、現在のデバイス上で利用可能なすべてのメディア フレーム ソース グループの一覧を取得します。</span><span class="sxs-lookup"><span data-stu-id="f7914-141">First, call [**MediaFrameSourceGroup.FindAllAsync**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.Frames.MediaFrameSourceGroup.FindAllAsync) to get a list of all media frame source groups available on the current device.</span></span> <span data-ttu-id="f7914-142">ループ処理によって各ソース グループで [**MediaCapture.FindKnownVideoProfiles**](https://docs.microsoft.com/uwp/api/windows.media.capture.mediacapture.findknownvideoprofiles) を呼び出し、現在のソース グループについて、指定したプロファイル (この例では HDR/WCG 写真) をサポートしているすべてのビデオ プロファイルの一覧を取得します。</span><span class="sxs-lookup"><span data-stu-id="f7914-142">Loop through each source group and call [**MediaCapture.FindKnownVideoProfiles**](https://docs.microsoft.com/uwp/api/windows.media.capture.mediacapture.findknownvideoprofiles) to get a list of all of the video profiles for the current source group that support the specified profile, in this case HDR with WCG photo.</span></span> <span data-ttu-id="f7914-143">条件に適合するプロファイルが見つかった場合、新しい **MediaCaptureInitializationSettings** オブジェクトが作成され、**VideoProfile** が選択したプロファイルに設定されると共に、**VideoDeviceId** が現在のメディア フレーム ソース グループの **Id** プロパティに設定されます。</span><span class="sxs-lookup"><span data-stu-id="f7914-143">If a profile that meets the criteria is found, create a new **MediaCaptureInitializationSettings** object and set the **VideoProfile** to the select profile and the **VideoDeviceId** to the **Id** property of the current media frame source group.</span></span> <span data-ttu-id="f7914-144">これにより、たとえば **KnownVideoProfile.HdrWithWcgVideo** をこのメソッドに渡すと、HDR ビデオをサポートしているメディア キャプチャ設定を取得できます。</span><span class="sxs-lookup"><span data-stu-id="f7914-144">So, for example, you could pass the value **KnownVideoProfile.HdrWithWcgVideo** into this method to get media capture settings that support HDR video.</span></span> <span data-ttu-id="f7914-145">また **KnownVideoProfile.VariablePhotoSequence** を渡すと、加変の写真シーケンスをサポートしている設定を取得できます。</span><span class="sxs-lookup"><span data-stu-id="f7914-145">Pass **KnownVideoProfile.VariablePhotoSequence** to get settings that support variable photo sequence.</span></span>

 [!code-cs[FindKnownVideoProfile](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetFindKnownVideoProfile)]

## <a name="use-known-profiles-to-find-a-profile-that-supports-hdr-video-legacy-technique"></a><span data-ttu-id="f7914-146">既知のプロファイルを使用して HDR ビデオをサポートするプロファイルを検出する (従来の手法)</span><span class="sxs-lookup"><span data-stu-id="f7914-146">Use known profiles to find a profile that supports HDR video (legacy technique)</span></span>

> [!NOTE] 
> <span data-ttu-id="f7914-147">このセクションで説明されている API は、Windows 10、バージョン 1803 以降では非推奨です。</span><span class="sxs-lookup"><span data-stu-id="f7914-147">The APIs described in this section are deprecated starting with Windows 10, version 1803.</span></span> <span data-ttu-id="f7914-148">上記の「**メディア フレーム ソース グループを使用してプロファイルを取得する**」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="f7914-148">See the previous section, **Use media frame source groups to get profiles**.</span></span>

<span data-ttu-id="f7914-149">HDR をサポートするプロファイルの選択も、他のシナリオと同じように始まります。</span><span class="sxs-lookup"><span data-stu-id="f7914-149">Selecting a profile that supports HDR begins like the other scenarios.</span></span> <span data-ttu-id="f7914-150">キャプチャ デバイス ID を保持するために、 **MediaCaptureInitializationSettings**と文字列を作成します。</span><span class="sxs-lookup"><span data-stu-id="f7914-150">Create a **MediaCaptureInitializationSettings** and a string to hold the capture device ID.</span></span> <span data-ttu-id="f7914-151">HDR ビデオがサポートされているかどうかを追跡するためのブール変数を追加します。</span><span class="sxs-lookup"><span data-stu-id="f7914-151">Add a boolean variable that will track whether HDR video is supported.</span></span>

[!code-cs[GetHdrProfileSetup](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetGetHdrProfileSetup)]

<span data-ttu-id="f7914-152">上で定義した **GetVideoProfileSupportedDeviceIdAsync** ヘルパー メソッドを使って、カメラ プロファイルをサポートしているキャプチャ デバイスのデバイス ID を取得します。</span><span class="sxs-lookup"><span data-stu-id="f7914-152">Use the **GetVideoProfileSupportedDeviceIdAsync** helper method defined above to get the device ID for a capture device that supports camera profiles.</span></span>

[!code-cs[FindDeviceHDR](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetFindDeviceHDR)]

<span data-ttu-id="f7914-153">静的メソッド [**MediaCapture.FindKnownVideoProfiles**](https://msdn.microsoft.com/library/windows/apps/dn926710) により、指定の [**KnownVideoProfile**](https://msdn.microsoft.com/library/windows/apps/dn948843) 値で分類された指定のデバイスでサポートされるカメラ プロファイルが返されます。</span><span class="sxs-lookup"><span data-stu-id="f7914-153">The static method [**MediaCapture.FindKnownVideoProfiles**](https://msdn.microsoft.com/library/windows/apps/dn926710) returns the camera profiles supported by the specified device that is categorized by the specified [**KnownVideoProfile**](https://msdn.microsoft.com/library/windows/apps/dn948843) value.</span></span> <span data-ttu-id="f7914-154">このシナリオでは、ビデオ録画をサポートするカメラ プロファイルのみが返されるように、**VideoRecording** 値が指定されています。</span><span class="sxs-lookup"><span data-stu-id="f7914-154">For this scenario, the **VideoRecording** value is specified to limit the returned camera profiles to ones that support video recording.</span></span>

<span data-ttu-id="f7914-155">返されたカメラ プロファイルの一覧をループ処理します。</span><span class="sxs-lookup"><span data-stu-id="f7914-155">Loop through the returned list of camera profiles.</span></span> <span data-ttu-id="f7914-156">各カメラ プロファイルで、プロファイル内の各 [**VideoProfileMediaDescription**](https://msdn.microsoft.com/library/windows/apps/dn926695) をループ処理して、[**IsHdrVideoSupported**](https://msdn.microsoft.com/library/windows/apps/dn926698) プロパティの値が true かどうかをチェックします。</span><span class="sxs-lookup"><span data-stu-id="f7914-156">For each camera profile, loop through each [**VideoProfileMediaDescription**](https://msdn.microsoft.com/library/windows/apps/dn926695) in the profile checking to see if the [**IsHdrVideoSupported**](https://msdn.microsoft.com/library/windows/apps/dn926698) property is true.</span></span> <span data-ttu-id="f7914-157">適切なメディア記述が見つかったら、ループを抜けて、プロファイルと記述のオブジェクトを **MediaCaptureInitializationSettings** オブジェクトに割り当てます。</span><span class="sxs-lookup"><span data-stu-id="f7914-157">After a suitable media description is found, break out of the loop and assign the profile and description objects to the **MediaCaptureInitializationSettings** object.</span></span>

[!code-cs[FindHDRProfile](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetFindHDRProfile)]

## <a name="determine-if-a-device-supports-simultaneous-photo-and-video-capture"></a><span data-ttu-id="f7914-158">写真とビデオの同時キャプチャがデバイスでサポートされているかどうかを確認する</span><span class="sxs-lookup"><span data-stu-id="f7914-158">Determine if a device supports simultaneous photo and video capture</span></span>

<span data-ttu-id="f7914-159">多くのデバイスでは、写真とビデオの同時キャプチャがサポートされます。</span><span class="sxs-lookup"><span data-stu-id="f7914-159">Many devices support capturing photos and video simultaneously.</span></span> <span data-ttu-id="f7914-160">キャプチャ デバイスでこの動作がサポートされているかどうかを確認するには、[**MediaCapture.FindAllVideoProfiles**](https://msdn.microsoft.com/library/windows/apps/dn926708) を呼び出して、デバイスでサポートされているすべてのカメラ プロファイルを取得します。</span><span class="sxs-lookup"><span data-stu-id="f7914-160">To determine if a capture device supports this, call [**MediaCapture.FindAllVideoProfiles**](https://msdn.microsoft.com/library/windows/apps/dn926708) to get all of the camera profiles supported by the device.</span></span> <span data-ttu-id="f7914-161">Linq クエリを使って、[**SupportedPhotoMediaDescription**](https://msdn.microsoft.com/library/windows/apps/dn926703) と [**SupportedRecordMediaDescription**](https://msdn.microsoft.com/library/windows/apps/dn926705) に 1 つ以上のエントリがある (プロファイルで同時キャプチャがサポートされていることを意味する) プロファイルを検出します。</span><span class="sxs-lookup"><span data-stu-id="f7914-161">Use a link query to find a profile that has at least one entry for both [**SupportedPhotoMediaDescription**](https://msdn.microsoft.com/library/windows/apps/dn926703) and [**SupportedRecordMediaDescription**](https://msdn.microsoft.com/library/windows/apps/dn926705) which means that the profile supports simultaneous capture.</span></span>

[!code-cs[GetPhotoAndVideoSupport](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetGetPhotoAndVideoSupport)]

<span data-ttu-id="f7914-162">このクエリを調整して、同時ビデオ録画以外にも、特定の解像度やその他の機能をサポートするプロファイルを検出することもできます。</span><span class="sxs-lookup"><span data-stu-id="f7914-162">You can refine this query to look for profiles that support specific resolutions or other capabilities in addition to simultaneous video record.</span></span> <span data-ttu-id="f7914-163">また、[**MediaCapture.FindKnownVideoProfiles**](https://msdn.microsoft.com/library/windows/apps/dn926710) を使って [**BalancedVideoAndPhoto**](https://msdn.microsoft.com/library/windows/apps/dn948843) 値を指定し、同時キャプチャをサポートするプロファイルを取得することもできますが、すべてのプロファイルを照会する方が完全な結果を得ることができます。</span><span class="sxs-lookup"><span data-stu-id="f7914-163">You can also use the [**MediaCapture.FindKnownVideoProfiles**](https://msdn.microsoft.com/library/windows/apps/dn926710) and specify the [**BalancedVideoAndPhoto**](https://msdn.microsoft.com/library/windows/apps/dn948843) value to retrieve profiles that support simultaneous capture, but querying all profiles will provide more complete results.</span></span>

## <a name="related-topics"></a><span data-ttu-id="f7914-164">関連トピック</span><span class="sxs-lookup"><span data-stu-id="f7914-164">Related topics</span></span>

* [<span data-ttu-id="f7914-165">カメラ</span><span class="sxs-lookup"><span data-stu-id="f7914-165">Camera</span></span>](camera.md)
* [<span data-ttu-id="f7914-166">MediaCapture を使った基本的な写真、ビデオ、およびオーディオのキャプチャ</span><span class="sxs-lookup"><span data-stu-id="f7914-166">Basic photo, video, and audio capture with MediaCapture</span></span>](basic-photo-video-and-audio-capture-with-MediaCapture.md)
 

 




