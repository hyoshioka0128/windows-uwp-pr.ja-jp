---
author: drewbatgit
ms.assetid: eb690f2b-3bf8-4a65-99a4-2a3a8c7760b7
description: この記事では、システム メディア トランスポート コントロールを操作する方法について説明します。
title: システム メディア トランスポート コントロールとの統合
ms.author: drewbat
ms.date: 02/08/2017
ms.topic: article
keywords: Windows 10, UWP
ms.localizationpriority: medium
ms.openlocfilehash: 15d7e3b3e822081a751aa791a76e674b07af8d9d
ms.sourcegitcommit: 144f5f127fc4fbd852f2f6780ef26054192d68fc
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/02/2018
ms.locfileid: "5988309"
---
# <a name="integrate-with-the-system-media-transport-controls"></a><span data-ttu-id="41cd0-104">システム メディア トランスポート コントロールとの統合</span><span class="sxs-lookup"><span data-stu-id="41cd0-104">Integrate with the System Media Transport Controls</span></span>

<span data-ttu-id="41cd0-105">この記事では、システム メディア トランスポート コントロール (SMTC) を操作する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="41cd0-105">This article shows you how to interact with the System Media Transport Controls (SMTC).</span></span> <span data-ttu-id="41cd0-106">SMTC は、すべての Windows 10 デバイスに共通する一連のコントロールで、再生に [**MediaPlayer**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer) を使うすべての実行中のアプリのメディア再生をユーザーが制御するための一貫した方法を提供します。</span><span class="sxs-lookup"><span data-stu-id="41cd0-106">The SMTC is a set of controls that are common to all Windows 10 devices and that provide a consistent way for users to control media playback for all running apps that use [**MediaPlayer**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer) for playback.</span></span>

<span data-ttu-id="41cd0-107">SMTC との統合を示す完全なサンプルについては、[github のシステム メディア トランスポート コントロールのサンプル](https://github.com/Microsoft/Windows-universal-samples/tree/dev/Samples/SystemMediaTransportControls)をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="41cd0-107">For a complete sample that demonstrates integration with the SMTC, see [System Media Tranport Controls sample on github](https://github.com/Microsoft/Windows-universal-samples/tree/dev/Samples/SystemMediaTransportControls).</span></span>
                    
## <a name="automatic-integration-with-smtc"></a><span data-ttu-id="41cd0-108">SMTC との自動統合</span><span class="sxs-lookup"><span data-stu-id="41cd0-108">Automatic integration with SMTC</span></span>
<span data-ttu-id="41cd0-109">Windows 10 バージョン 1607 以降、メディアの再生に [**MediaPlayer**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer) クラスを使う UWP アプリは、既定で SMTC と自動的に統合されます。</span><span class="sxs-lookup"><span data-stu-id="41cd0-109">Starting with Windows 10, version 1607, UWP apps that use the [**MediaPlayer**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer) class to play media are automatically integrated with the SMTC by default.</span></span> <span data-ttu-id="41cd0-110">**MediaPlayer** の新しいインスタンスをインスタンス化し、[**MediaSource**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.MediaSource)、[**MediaPlaybackItem**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItem)、または [**MediaPlaybackList**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackList) をプレーヤーの [**Source**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.Source) プロパティに割り当てるだけで、SMTC にアプリ名が表示され、SMTC コントロールを使って再生リストから再生、一時停止、再生リスト内の移動を行うことができます。</span><span class="sxs-lookup"><span data-stu-id="41cd0-110">Simply instantiate a new instance of **MediaPlayer** and assign a [**MediaSource**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Core.MediaSource), [**MediaPlaybackItem**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItem), or [**MediaPlaybackList**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackList) to the player's [**Source**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.Source) property and the user will see your app name in the SMTC and can play, pause, and move through your playback lists by using the SMTC controls.</span></span> 

<span data-ttu-id="41cd0-111">アプリは一度に複数の **MediaPlayer** オブジェクトを作成し、使うことができます。</span><span class="sxs-lookup"><span data-stu-id="41cd0-111">Your app can create and use multiple **MediaPlayer** objects at once.</span></span> <span data-ttu-id="41cd0-112">アプリ内のアクティブな **MediaPlayer** インスタンスごとに、SMTC に個別のタブが作成されるため、ユーザーはアクティブなメディア プレーヤーとその他の実行中のアプリのメディア プレーヤーを切り替えることができます。</span><span class="sxs-lookup"><span data-stu-id="41cd0-112">For each active **MediaPlayer** instance in your app, a separate tab is created in the SMTC, allowing the user to switch between your active media players and those of other running apps.</span></span> <span data-ttu-id="41cd0-113">SMTC で現在選択されているメディア プレーヤーが、コントロールが影響を与えるメディア プレーヤーとなります。</span><span class="sxs-lookup"><span data-stu-id="41cd0-113">Whichever media player is currently selected in the SMTC is the one that the controls will affect.</span></span>

<span data-ttu-id="41cd0-114">アプリで **MediaPlayer** を使う方法 (XAML ページで [**MediaPlayerElement**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.MediaPlayerElement) にバインドするなど) について詳しくは、「[MediaPlayer を使ったオーディオとビデオの再生](play-audio-and-video-with-mediaplayer.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="41cd0-114">For more information on using **MediaPlayer** in your app, including binding it to a [**MediaPlayerElement**](https://msdn.microsoft.com/library/windows/apps/Windows.UI.Xaml.Controls.MediaPlayerElement) in your XAML page, see [Play audio and video with MediaPlayer](play-audio-and-video-with-mediaplayer.md).</span></span> 

<span data-ttu-id="41cd0-115">**MediaSource**、**MediaPlaybackItem**、**MediaPlaybackList** の操作について詳しくは、「[メディア項目、プレイリスト、トラック](media-playback-with-mediasource.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="41cd0-115">For more information on working with **MediaSource**, **MediaPlaybackItem**, and **MediaPlaybackList**, see [Media items, playlists, and tracks](media-playback-with-mediasource.md).</span></span>

## <a name="add-metadata-to-be-displayed-by-the-smtc"></a><span data-ttu-id="41cd0-116">SMTC で表示するメタデータを追加する</span><span class="sxs-lookup"><span data-stu-id="41cd0-116">Add metadata to be displayed by the SMTC</span></span>
<span data-ttu-id="41cd0-117">ビデオや曲のタイトルなど、SMTC でメディア項目に表示するメタデータを追加または変更する場合、メディア項目を表す **MediaPlaybackItem** の表示プロパティを更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="41cd0-117">If you want add or modify the metadata that is displayed for your media items in the SMTC, such as a video or song title, you need to update the display properties for the **MediaPlaybackItem** representing your media item.</span></span> <span data-ttu-id="41cd0-118">まず、[**GetDisplayProperties**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItem.GetDisplayProperties) を呼び出して、[**MediaItemDisplayProperties**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaItemDisplayProperties) オブジェクトへの参照を取得します。</span><span class="sxs-lookup"><span data-stu-id="41cd0-118">First, get a reference to the [**MediaItemDisplayProperties**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaItemDisplayProperties) object by calling [**GetDisplayProperties**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackItem.GetDisplayProperties).</span></span> <span data-ttu-id="41cd0-119">次に、[**Type**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaItemDisplayProperties.Type) プロパティを持つ項目に、メディアの種類 (音楽またはビデオ) を設定します。</span><span class="sxs-lookup"><span data-stu-id="41cd0-119">Next, set the type of media, music or video, for the item with the [**Type**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaItemDisplayProperties.Type) property.</span></span> <span data-ttu-id="41cd0-120">その後、指定したメディアの種類によって、[**MusicProperties**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaItemDisplayProperties.MusicProperties) または [**VideoProperties**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaItemDisplayProperties.VideoProperties) のフィールドを設定できます。</span><span class="sxs-lookup"><span data-stu-id="41cd0-120">Then you can populate the fields of the [**MusicProperties**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaItemDisplayProperties.MusicProperties) or [**VideoProperties**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaItemDisplayProperties.VideoProperties), depending on which media type you specified.</span></span> <span data-ttu-id="41cd0-121">最後に、[**ApplyDisplayProperties**](https://msdn.microsoft.com/library/windows/apps/mt489923) を呼び出して、メディア項目のメタデータを更新します。</span><span class="sxs-lookup"><span data-stu-id="41cd0-121">Finally, update the metadata for the media item by calling [**ApplyDisplayProperties**](https://msdn.microsoft.com/library/windows/apps/mt489923).</span></span>

[!code-cs[SetVideoProperties](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetSetVideoProperties)]

[!code-cs[SetMusicProperties](./code/MediaSource_RS1/cs/MainPage.xaml.cs#SnippetSetMusicProperties)]

## <a name="use-commandmanager-to-modify-or-override-the-default-smtc-commands"></a><span data-ttu-id="41cd0-122">CommandManager を使って既定の SMTC コマンドを変更またはオーバーライドする</span><span class="sxs-lookup"><span data-stu-id="41cd0-122">Use CommandManager to modify or override the default SMTC commands</span></span>
<span data-ttu-id="41cd0-123">アプリでは、[**MediaPlaybackCommandManager**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManager) クラスを使って SMTC コントロールの動作を変更または完全にオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="41cd0-123">Your app can modify or completely override the behavior of the SMTC controls with the [**MediaPlaybackCommandManager**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManager) class.</span></span> <span data-ttu-id="41cd0-124">[**CommandManager**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.CommandManager) プロパティにアクセスすると、**MediaPlayer** クラスのインスタンスごとにコマンド マネージャー インスタンスを取得できます。</span><span class="sxs-lookup"><span data-stu-id="41cd0-124">A command manager instance can be obtained for each instance of the **MediaPlayer** class by accessing the [**CommandManager**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlayer.CommandManager) property.</span></span>

<span data-ttu-id="41cd0-125">既定では **MediaPlaybackList** の次の項目にスキップする *Next* コマンドなどのすべてのコマンドに、コマンド マネージャーは [**NextReceived**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManager.NextReceived) のような受信イベントと、[**NextBehavior**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManager.NextBehavior) のようにコマンドの動作を管理するオブジェクトを公開します。</span><span class="sxs-lookup"><span data-stu-id="41cd0-125">For every command, such as the *Next* command which by default skips to the next item in a **MediaPlaybackList**, the command manager exposes a received event, like [**NextReceived**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManager.NextReceived), and an object that manages the behavior of the command, like [**NextBehavior**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManager.NextBehavior).</span></span> 

<span data-ttu-id="41cd0-126">次の例では、**NextReceived** イベントのハンドラーと、**NextBehavior** の [**IsEnabledChanged**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManagerCommandBehavior.IsEnabledChanged) イベントのハンドラーを登録します。</span><span class="sxs-lookup"><span data-stu-id="41cd0-126">The following example registers a handler for the **NextReceived** event and for the [**IsEnabledChanged**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManagerCommandBehavior.IsEnabledChanged) event of the **NextBehavior**.</span></span>

[!code-cs[AddNextHandler](./code/SMTC_RS1/cs/MainPage.xaml.cs#SnippetAddNextHandler)]

<span data-ttu-id="41cd0-127">次の例は、ユーザーが再生リスト内の 5 個の項目をクリックスルーした後、アプリが *Next* コマンドを無効にするシナリオを示しています。おそらくは、コンテンツを引き続き再生する前に、何らかのユーザー操作が必要になります。</span><span class="sxs-lookup"><span data-stu-id="41cd0-127">The following example illustrates a scenario where the app wants to disable the *Next* command after the user has clicked through five items in the playlist, perhaps requiring some user interaction before continuing playing content.</span></span> <span data-ttu-id="41cd0-128">**NextReceived** イベントが発生するたびに、カウンターがインクリメントされます。</span><span class="sxs-lookup"><span data-stu-id="41cd0-128">Each ## the **NextReceived** event is raised, a counter is incremented.</span></span> <span data-ttu-id="41cd0-129">カウンターが目標の数値に達すると、*Next* コマンドの [**EnablingRule**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManagerCommandBehavior.EnablingRule) が [**Never**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaCommandEnablingRule) に設定され、コマンドが無効になります。</span><span class="sxs-lookup"><span data-stu-id="41cd0-129">Once the counter reaches the target number, the [**EnablingRule**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManagerCommandBehavior.EnablingRule) for the *Next* command is set to [**Never**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaCommandEnablingRule), which disables the command.</span></span> 

[!code-cs[NextReceived](./code/SMTC_RS1/cs/MainPage.xaml.cs#SnippetNextReceived)]

<span data-ttu-id="41cd0-130">コマンドを **Always** に設定することもできます。これは、*Next* コマンドの例では、再生リスト内にこれ以上項目がない場合でも、コマンドが常に有効になっていることを示します。</span><span class="sxs-lookup"><span data-stu-id="41cd0-130">You can also set the command to **Always**, which means the command will always be enabled even if, for the *Next* command example, there are no more items in the playlist.</span></span> <span data-ttu-id="41cd0-131">または、コマンドを **Auto** に設定することもできます。この設定では、現在再生中のコンテンツに基づいてコマンドを有効にする必要があるかどうかがシステムによって判断されます。</span><span class="sxs-lookup"><span data-stu-id="41cd0-131">Or you can set the command to **Auto**, where the system determines whether the command should be enabled based on the current content being played.</span></span>

<span data-ttu-id="41cd0-132">上記のシナリオでは、ある時点でアプリが *Next* コマンドを再度有効にする必要があるため、**EnablingRule** を **Auto** に設定することでそれを行います。</span><span class="sxs-lookup"><span data-stu-id="41cd0-132">For the scenario described above, at some point the app will want to reenable the *Next* command and does so by setting the **EnablingRule** to **Auto**.</span></span>

[!code-cs[EnableNextButton](./code/SMTC_RS1/cs/MainPage.xaml.cs#SnippetEnableNextButton)]

<span data-ttu-id="41cd0-133">アプリには、アプリがフォアグラウンドで動作しているときに再生を制御するための独自の UI が備わっている可能性があるため、[**IsEnabledChanged**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManagerCommandBehavior.IsEnabledChanged) イベントを使って独自の UI を SMTC と一致するように更新し、ハンドラーに渡された [**MediaPlaybackCommandManagerCommandBehavior**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManagerCommandBehavior) の [**IsEnabled**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManagerCommandBehavior.IsEnabled) にアクセスすることによってコマンドを有効または無効にすることができます。</span><span class="sxs-lookup"><span data-stu-id="41cd0-133">Because your app may have it's own UI for controlling playback while it is in the foreground, you can use the [**IsEnabledChanged**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManagerCommandBehavior.IsEnabledChanged) events to update your own UI to match the SMTC as commands are enabled or disabled by accessing the [**IsEnabled**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManagerCommandBehavior.IsEnabled) of the [**MediaPlaybackCommandManagerCommandBehavior**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManagerCommandBehavior) passed into the handler.</span></span>

[!code-cs[IsEnabledChanged](./code/SMTC_RS1/cs/MainPage.xaml.cs#SnippetIsEnabledChanged)]

<span data-ttu-id="41cd0-134">場合によっては、SMTC コマンドの動作を完全にオーバーライドすることもできます。</span><span class="sxs-lookup"><span data-stu-id="41cd0-134">In some cases, you may want to completely override the behavior of an SMTC command.</span></span> <span data-ttu-id="41cd0-135">次の例は、アプリが *Next* コマンドと *Previous* コマンドを使って、現在の再生リスト内のトラック間をスキップするのではなく、インターネット ラジオ局どうしを切り替えるシナリオを示しています。</span><span class="sxs-lookup"><span data-stu-id="41cd0-135">The example below illustrates a scenario where an app uses the *Next* and *Previous* commands to switch between internet radio stations instead of skipping between tracks in the current playlist.</span></span> <span data-ttu-id="41cd0-136">前の例と同様に、ハンドラーはコマンドの受信時に登録されます。ここでは、[**PreviousReceived**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManager.PreviousReceived) イベントの受信時となります。</span><span class="sxs-lookup"><span data-stu-id="41cd0-136">As in the previous example, a handler is registered for when a command is received, in this case it is the [**PreviousReceived**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManager.PreviousReceived) event.</span></span>

[!code-cs[AddPreviousHandler](./code/SMTC_RS1/cs/MainPage.xaml.cs#SnippetAddPreviousHandler)]

<span data-ttu-id="41cd0-137">**PreviousReceived** ハンドラーでは、まず、ハンドラーに渡された [**MediaPlaybackCommandManagerPreviousReceivedEventArgs**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManagerPreviousReceivedEventArgs) の [**GetDeferral**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManagerPreviousReceivedEventArgs.GetDeferral) を呼び出すことによって、[**Deferral**](https://msdn.microsoft.com/library/windows/apps/Windows.Foundation.Deferral) が取得されます。</span><span class="sxs-lookup"><span data-stu-id="41cd0-137">In the **PreviousReceived** handler, first a [**Deferral**](https://msdn.microsoft.com/library/windows/apps/Windows.Foundation.Deferral) is obtained by calling the  [**GetDeferral**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManagerPreviousReceivedEventArgs.GetDeferral) of the [**MediaPlaybackCommandManagerPreviousReceivedEventArgs**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManagerPreviousReceivedEventArgs) passed into the handler.</span></span> <span data-ttu-id="41cd0-138">これにより、システムは Deferral が完了するのを待機してからコマンドを実行するよう通知されます。</span><span class="sxs-lookup"><span data-stu-id="41cd0-138">This tells the system to wait for until the deferall is complete before executing the command.</span></span> <span data-ttu-id="41cd0-139">これは、ハンドラーで非同期呼び出しを行う場合に非常に重要です。</span><span class="sxs-lookup"><span data-stu-id="41cd0-139">This is extremely important if you are going to make asynchronous calls in the handler.</span></span> <span data-ttu-id="41cd0-140">この時点で、この例では前のラジオ局を表す **MediaPlaybackItem** を返すカスタム メソッドを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="41cd0-140">At this point, the example calls a custom method that returns a **MediaPlaybackItem** representing the previous radio station.</span></span>

<span data-ttu-id="41cd0-141">次に、[**Handled**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManagerPreviousReceivedEventArgs.Handled) プロパティで、イベントが別のハンドラーによってまだ処理されていないかどうかが確認されます。</span><span class="sxs-lookup"><span data-stu-id="41cd0-141">Next, the [**Handled**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Playback.MediaPlaybackCommandManagerPreviousReceivedEventArgs.Handled) property is checked to make sure that the event wasn't already handled by another handler.</span></span> <span data-ttu-id="41cd0-142">処理済みの場合、**Handled** プロパティが true に設定されます。</span><span class="sxs-lookup"><span data-stu-id="41cd0-142">If not, the **Handled** property is set to true.</span></span> <span data-ttu-id="41cd0-143">これにより、SMTC と、その他の受信登録されたハンドラーは、イベントが既に処理済みなのでこのコマンドを実行する必要がないことを把握できます。</span><span class="sxs-lookup"><span data-stu-id="41cd0-143">This lets the SMTC, and any other subscribed handlers, know that they should take no action to execute this command because it has already been handled.</span></span> <span data-ttu-id="41cd0-144">その後、コードはメディア プレーヤーの新しいソースを設定し、プレーヤーを開始します。</span><span class="sxs-lookup"><span data-stu-id="41cd0-144">The code then sets the new source for the media player and starts the player.</span></span>

<span data-ttu-id="41cd0-145">最後に、保留オブジェクトで [**Complete**](https://msdn.microsoft.com/library/windows/apps/Windows.Foundation.Deferral.Complete) が呼び出されて、システムはコマンドの処理が完了したことを把握できます。</span><span class="sxs-lookup"><span data-stu-id="41cd0-145">Finally, [**Complete**](https://msdn.microsoft.com/library/windows/apps/Windows.Foundation.Deferral.Complete) is called on the deferral object to let the system know that you are done processing the command.</span></span>

[!code-cs[PreviousReceived](./code/SMTC_RS1/cs/MainPage.xaml.cs#SnippetPreviousReceived)]
                
## <a name="manual-control-of-the-smtc"></a><span data-ttu-id="41cd0-146">SMTC の手動制御</span><span class="sxs-lookup"><span data-stu-id="41cd0-146">Manual control of the SMTC</span></span>
<span data-ttu-id="41cd0-147">この記事で既に説明したように、SMTC はアプリによって作成される **MediaPlayer** のすべてのインスタンスに関する情報を自動的に検出して表示します。</span><span class="sxs-lookup"><span data-stu-id="41cd0-147">As mentioned previously in this article, the SMTC will automatically detect and display information for every instance of **MediaPlayer** that your app creates.</span></span> <span data-ttu-id="41cd0-148">**MediaPlayer** のインスタンスを複数使うが、SMTC ではアプリのエントリを 1 つだけ提供する場合、自動統合を使うのではなく、SMTC を手動で制御する必要があります。</span><span class="sxs-lookup"><span data-stu-id="41cd0-148">If you want to use multiple instances of **MediaPlayer** but want the SMTC to provide a single entry for your app, then you must manually control the behavior of the SMTC instead of relying on automatic integration.</span></span> <span data-ttu-id="41cd0-149">また、[**MediaTimelineController**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.MediaTimelineController) を使って 1 つ以上のメディア プレーヤーを制御する場合、手動 SMTC 統合を使う必要があります。</span><span class="sxs-lookup"><span data-stu-id="41cd0-149">Also, if you are using [**MediaTimelineController**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.MediaTimelineController) to control one or more media players, you must use manual SMTC integration.</span></span> <span data-ttu-id="41cd0-150">アプリが **MediaPlayer** 以外の API ([**AudioGraph**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Audio.AudioGraph) クラスなど) を使ってメディアを再生する場合も、ユーザーが SMTC を使ってアプリを制御できるように、手動 SMTC 統合を実装する必要があります。</span><span class="sxs-lookup"><span data-stu-id="41cd0-150">Also, if your app uses an API other than **MediaPlayer**, such as the [**AudioGraph**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Audio.AudioGraph) class, to play media, you must implement manual SMTC integration for the user to use the SMTC to control your app.</span></span> <span data-ttu-id="41cd0-151">SMTC を手動で制御する方法について詳しくは、「[システム メディア トランスポート コントロールの手動制御](system-media-transport-controls.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="41cd0-151">For information on how to manually control the SMTC, see [Manual control of the System Media Transport Controls](system-media-transport-controls.md).</span></span>



## <a name="related-topics"></a><span data-ttu-id="41cd0-152">関連トピック</span><span class="sxs-lookup"><span data-stu-id="41cd0-152">Related topics</span></span>
* [<span data-ttu-id="41cd0-153">メディア再生</span><span class="sxs-lookup"><span data-stu-id="41cd0-153">Media playback</span></span>](media-playback.md)
* [<span data-ttu-id="41cd0-154">MediaPlayer を使ったオーディオとビデオの再生</span><span class="sxs-lookup"><span data-stu-id="41cd0-154">Play audio and video with MediaPlayer</span></span>](play-audio-and-video-with-mediaplayer.md)
* [<span data-ttu-id="41cd0-155">システム メディア トランスポート コントロールの手動制御</span><span class="sxs-lookup"><span data-stu-id="41cd0-155">Manual control of the System Media Transport Controls</span></span>](system-media-transport-controls.md)
* [<span data-ttu-id="41cd0-156">github のシステム メディア トランスポート コントロールのサンプル</span><span class="sxs-lookup"><span data-stu-id="41cd0-156">System Media Tranport Controls sample on github</span></span>](https://github.com/Microsoft/Windows-universal-samples/tree/dev/Samples/SystemMediaTransportControls)
 

 




