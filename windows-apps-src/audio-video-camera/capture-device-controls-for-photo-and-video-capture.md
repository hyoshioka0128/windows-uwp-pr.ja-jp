---
author: drewbatgit
ms.assetid: 831123A7-1F40-4B74-AE9F-69AC9883B4AD
description: この記事では、光学式手ブレ補正やスムーズ ズームなど、写真とビデオのキャプチャに関する拡張シナリオを可能にするために、手動デバイス制御を使う方法について説明します。
title: 写真とビデオのキャプチャのための手動カメラ制御
ms.author: drewbat
ms.date: 02/08/2017
ms.topic: article
ms.prod: windows
ms.technology: uwp
keywords: Windows 10, UWP
ms.openlocfilehash: d0d7a429cf702455d969e1ac1c62def6181e8dd0
ms.sourcegitcommit: 64cfb79fd27b09d49df99e8c9c46792c884593a7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.locfileid: "247149"
---
# <a name="manual-camera-controls-for-photo-and-video-capture"></a><span data-ttu-id="59c73-104">写真とビデオのキャプチャのための手動カメラ制御</span><span class="sxs-lookup"><span data-stu-id="59c73-104">Manual camera controls for photo and video capture</span></span>

<span data-ttu-id="59c73-105">\[Windows 10 の UWP アプリ向けに更新。</span><span class="sxs-lookup"><span data-stu-id="59c73-105">\[ Updated for UWP apps on Windows 10.</span></span> <span data-ttu-id="59c73-106">Windows 8.x の記事については、[アーカイブ](http://go.microsoft.com/fwlink/p/?linkid=619132)をご覧ください\]</span><span class="sxs-lookup"><span data-stu-id="59c73-106">For Windows 8.x articles, see the [archive](http://go.microsoft.com/fwlink/p/?linkid=619132) \]</span></span>


<span data-ttu-id="59c73-107">この記事では、光学式手ブレ補正やスムーズ ズームなど、写真とビデオのキャプチャに関する拡張シナリオを可能にするために、手動デバイス制御を使う方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="59c73-107">This article shows you how to use manual device controls to enable enhanced photo and video capture scenarios including optical image stabilization and smooth zoom.</span></span>

<span data-ttu-id="59c73-108">この記事で説明するコントロールはすべて、同じパターンを使ってアプリに追加されます。</span><span class="sxs-lookup"><span data-stu-id="59c73-108">The controls discussed in this article are all added to your app using the same pattern.</span></span> <span data-ttu-id="59c73-109">まず、アプリが実行されている現在のデバイスで、コントロールがサポートされているかどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="59c73-109">First, check to see if the control is supported on the current device on which your app is running.</span></span> <span data-ttu-id="59c73-110">コントロールがサポートされている場合は、コントロールに対して必要なモードを設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-110">If the control is supported, set the desired mode for the control.</span></span> <span data-ttu-id="59c73-111">一般的に、現在のデバイスで特定のコントロールがサポートされていない場合は、ユーザーがその機能を有効にできるような UI 要素を無効または非表示にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="59c73-111">Typically, if a particular control is unsupported on the current device, you should disable or hide the UI element that allows the user to enable the feature.</span></span>

<span data-ttu-id="59c73-112">この記事のコードは、[カメラの手動コントロール SDK のサンプル](https://go.microsoft.com/fwlink/?linkid=845228)を基にしています。</span><span class="sxs-lookup"><span data-stu-id="59c73-112">The code in this article was adapted from the [Camera Manual Controls SDK sample](https://go.microsoft.com/fwlink/?linkid=845228).</span></span> <span data-ttu-id="59c73-113">このサンプルをダウンロードし、該当するコンテキストで使用されているコードを確認することも、サンプルを独自のアプリの開始点として使用することもできます。</span><span class="sxs-lookup"><span data-stu-id="59c73-113">You can download the sample to see the code used in context or to use the sample as a starting point for your own app.</span></span>

> [!NOTE]
> <span data-ttu-id="59c73-114">この記事の内容は、写真やビデオの基本的なキャプチャ機能を実装するための手順を紹介した「[MediaCapture を使った基本的な写真、ビデオ、およびオーディオのキャプチャ](basic-photo-video-and-audio-capture-with-MediaCapture.md)」で取り上げた概念やコードに基づいています。</span><span class="sxs-lookup"><span data-stu-id="59c73-114">This article builds on concepts and code discussed in [Basic photo, video, and audio capture with MediaCapture](basic-photo-video-and-audio-capture-with-MediaCapture.md), which describes the steps for implementing basic photo and video capture.</span></span> <span data-ttu-id="59c73-115">そちらの記事で基本的なメディア キャプチャのパターンを把握してから、高度なキャプチャ シナリオに進むことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="59c73-115">We recommend that you familiarize yourself with the basic media capture pattern in that article before moving on to more advanced capture scenarios.</span></span> <span data-ttu-id="59c73-116">この記事で紹介しているコードは、MediaCapture のインスタンスが既に作成され、適切に初期化されていることを前提としています。</span><span class="sxs-lookup"><span data-stu-id="59c73-116">The code in this article assumes that your app already has an instance of MediaCapture that has been properly initialized.</span></span>

<span data-ttu-id="59c73-117">この記事で説明するデバイス制御 API はすべて、[**Windows.Media.Devices**](https://msdn.microsoft.com/library/windows/apps/br206902) 名前空間のメンバーです。</span><span class="sxs-lookup"><span data-stu-id="59c73-117">All of the device control APIs discussed in this article are members of the [**Windows.Media.Devices**](https://msdn.microsoft.com/library/windows/apps/br206902) namespace.</span></span>

[!code-cs[<span data-ttu-id="59c73-118">VideoControllersUsing</span><span class="sxs-lookup"><span data-stu-id="59c73-118">VideoControllersUsing</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetVideoControllersUsing)]

## <a name="exposure"></a><span data-ttu-id="59c73-119">露出</span><span class="sxs-lookup"><span data-stu-id="59c73-119">Exposure</span></span>

<span data-ttu-id="59c73-120">[**ExposureControl**](https://msdn.microsoft.com/library/windows/apps/dn278910) によって、写真やビデオのキャプチャ時に使用されるシャッター速度を設定できます。</span><span class="sxs-lookup"><span data-stu-id="59c73-120">The [**ExposureControl**](https://msdn.microsoft.com/library/windows/apps/dn278910) allows you to set the shutter speed used during photo or video capture.</span></span>

<span data-ttu-id="59c73-121">この例では、[**スライダー**](https://msdn.microsoft.com/library/windows/apps/br209614) コントロールを使って現在の露出値を調整し、チェック ボックスを使って自動露出調整のオンとオフを切り替えます。</span><span class="sxs-lookup"><span data-stu-id="59c73-121">This example uses a [**Slider**](https://msdn.microsoft.com/library/windows/apps/br209614) control to adjust the current exposure value and a checkbox to toggle automatic exposure adjustment.</span></span>

[!code-xml[<span data-ttu-id="59c73-122">ExposureXAML</span><span class="sxs-lookup"><span data-stu-id="59c73-122">ExposureXAML</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.xaml#SnippetExposureXAML)]

<span data-ttu-id="59c73-123">現在のキャプチャ デバイスで **ExposureControl** がサポートされているかどうかを確認するには、[**Supported**](https://msdn.microsoft.com/library/windows/apps/dn297710) プロパティを確認します。</span><span class="sxs-lookup"><span data-stu-id="59c73-123">Check to see if the current capture device supports the **ExposureControl** by checking the [**Supported**](https://msdn.microsoft.com/library/windows/apps/dn297710) property.</span></span> <span data-ttu-id="59c73-124">コントロールがサポートされている場合は、この機能の UI を表示し、有効にすることができます。</span><span class="sxs-lookup"><span data-stu-id="59c73-124">If the control is supported, you can show and enable the UI for this feature.</span></span> <span data-ttu-id="59c73-125">自動露出調整が現在アクティブであるかどうかを示すために、チェック ボックスのオンの状態を [**Auto**](https://msdn.microsoft.com/library/windows/apps/dn278911) プロパティの値に設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-125">Set the checked state of the checkbox to indicate if automatic exposure adjustment is currently active to the value of the [**Auto**](https://msdn.microsoft.com/library/windows/apps/dn278911) property.</span></span>

<span data-ttu-id="59c73-126">露出値は、デバイスでサポートされている範囲内である必要があり、サポートされているステップ サイズのインクリメントである必要があります。</span><span class="sxs-lookup"><span data-stu-id="59c73-126">The exposure value must be within the range supported by the device and must be an increment of the supported step size.</span></span> <span data-ttu-id="59c73-127">現在のデバイスでサポートされている値を取得するには、[**Min**](https://msdn.microsoft.com/library/windows/apps/dn278919)、[**Max**](https://msdn.microsoft.com/library/windows/apps/dn278914)、および [**Step**](https://msdn.microsoft.com/library/windows/apps/dn278930) プロパティを確認します。これらのプロパティは、対応するスライダー コントロールのプロパティを設定するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="59c73-127">Get the supported values for the current device by checking the [**Min**](https://msdn.microsoft.com/library/windows/apps/dn278919), [**Max**](https://msdn.microsoft.com/library/windows/apps/dn278914), and [**Step**](https://msdn.microsoft.com/library/windows/apps/dn278930) properties, which are used to set the corresponding properties of the slider control.</span></span>

<span data-ttu-id="59c73-128">値が設定されたときにイベントがトリガーされないように、[**ValueChanged**](https://msdn.microsoft.com/library/windows/apps/br209737) イベント ハンドラーの登録を解除した後、スライダー コントロールの値を **ExposureControl** の現在値に設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-128">Set the slider control's value to the current value of the **ExposureControl** after unregistering the [**ValueChanged**](https://msdn.microsoft.com/library/windows/apps/br209737) event handler so that the event is not triggered when the value is set.</span></span>

[!code-cs[<span data-ttu-id="59c73-129">ExposureControl</span><span class="sxs-lookup"><span data-stu-id="59c73-129">ExposureControl</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetExposureControl)]

<span data-ttu-id="59c73-130">**ValueChanged** イベント ハンドラーで、コントロールの現在の値を取得し、[**SetValueAsync**](https://msdn.microsoft.com/library/windows/apps/dn278927) を呼び出して露出値を設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-130">In the **ValueChanged** event handler, get the current value of the control and the set the exposure value by calling [**SetValueAsync**](https://msdn.microsoft.com/library/windows/apps/dn278927).</span></span>

[!code-cs[<span data-ttu-id="59c73-131">ExposureSlider</span><span class="sxs-lookup"><span data-stu-id="59c73-131">ExposureSlider</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetExposureSlider)]

<span data-ttu-id="59c73-132">自動露出チェック ボックスの **CheckedChanged** イベント ハンドラーで、[**SetAutoAsync**](https://msdn.microsoft.com/library/windows/apps/dn278920) を呼び出してブール値を渡すことにより、自動露出調整のオンとオフを切り替えます。</span><span class="sxs-lookup"><span data-stu-id="59c73-132">In the **CheckedChanged** event handler of the auto exposure checkbox, turn automatic exposure adjustment on or off by calling [**SetAutoAsync**](https://msdn.microsoft.com/library/windows/apps/dn278920) and passing in a boolean value.</span></span>

[!code-cs[<span data-ttu-id="59c73-133">ExposureCheckBox</span><span class="sxs-lookup"><span data-stu-id="59c73-133">ExposureCheckBox</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetExposureCheckBox)]

> [!IMPORTANT]
> <span data-ttu-id="59c73-134">自動露出モードは、プレビュー ストリームが実行中であるときにのみサポートされます。</span><span class="sxs-lookup"><span data-stu-id="59c73-134">Automatic exposure mode is only supported while the preview stream is running.</span></span> <span data-ttu-id="59c73-135">自動露出をオンにする前に、プレビュー ストリームが実行されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="59c73-135">Check to make sure that the preview stream is running before turning on automatic exposure.</span></span>

## <a name="exposure-compensation"></a><span data-ttu-id="59c73-136">露出補正</span><span class="sxs-lookup"><span data-stu-id="59c73-136">Exposure compensation</span></span>

<span data-ttu-id="59c73-137">[**ExposureCompensationControl**](https://msdn.microsoft.com/library/windows/apps/dn278897) によって、写真やビデオのキャプチャ時に使用される露出補正を設定できます。</span><span class="sxs-lookup"><span data-stu-id="59c73-137">The [**ExposureCompensationControl**](https://msdn.microsoft.com/library/windows/apps/dn278897) allows you to set the exposure compensation used during photo or video capture.</span></span>

<span data-ttu-id="59c73-138">この例では、[**スライダー**](https://msdn.microsoft.com/library/windows/apps/br209614) コントロールを使って、現在の露出補正値を調整します。</span><span class="sxs-lookup"><span data-stu-id="59c73-138">This example uses a [**Slider**](https://msdn.microsoft.com/library/windows/apps/br209614) control to adjust the current exposure compensation value.</span></span>

[!code-xml[<span data-ttu-id="59c73-139">EvXAML</span><span class="sxs-lookup"><span data-stu-id="59c73-139">EvXAML</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.xaml#SnippetEvXAML)]

<span data-ttu-id="59c73-140">現在のキャプチャ デバイスで **ExposureCompensationControl** がサポートされているかどうかを確認するには、[Supported](supported-codecs.md) プロパティを確認します。</span><span class="sxs-lookup"><span data-stu-id="59c73-140">Check to see if the current capture device supports the **ExposureCompensationControl** by checking the [Supported](supported-codecs.md) property.</span></span> <span data-ttu-id="59c73-141">コントロールがサポートされている場合は、この機能の UI を表示し、有効にすることができます。</span><span class="sxs-lookup"><span data-stu-id="59c73-141">If the control is supported, you can show and enable the UI for this feature.</span></span>

<span data-ttu-id="59c73-142">露出補正値は、デバイスでサポートされている範囲内である必要があり、サポートされているステップ サイズのインクリメントである必要があります。</span><span class="sxs-lookup"><span data-stu-id="59c73-142">The exposure compensation value must be within the range supported by the device and must be an increment of the supported step size.</span></span> <span data-ttu-id="59c73-143">現在のデバイスでサポートされている値を取得するには、[**Min**](https://msdn.microsoft.com/library/windows/apps/dn278901)、[**Max**](https://msdn.microsoft.com/library/windows/apps/dn278899)、および [**Step**](https://msdn.microsoft.com/library/windows/apps/dn278904) プロパティを確認します。これらのプロパティは、対応するスライダー コントロールのプロパティを設定するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="59c73-143">Get the supported values for the current device by checking the [**Min**](https://msdn.microsoft.com/library/windows/apps/dn278901), [**Max**](https://msdn.microsoft.com/library/windows/apps/dn278899), and [**Step**](https://msdn.microsoft.com/library/windows/apps/dn278904) properties, which are used to set the corresponding properties of the slider control.</span></span>

<span data-ttu-id="59c73-144">値が設定されたときにイベントがトリガーされないように、[**ValueChanged**](https://msdn.microsoft.com/library/windows/apps/br209737) イベント ハンドラーの登録を解除した後、スライダー コントロールの値を **ExposureCompensationControl** の現在値に設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-144">Set slider control's value to the current value of the **ExposureCompensationControl** after unregistering the [**ValueChanged**](https://msdn.microsoft.com/library/windows/apps/br209737) event handler so that the event is not triggered when the value is set.</span></span>

[!code-cs[<span data-ttu-id="59c73-145">EvControl</span><span class="sxs-lookup"><span data-stu-id="59c73-145">EvControl</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetEvControl)]

<span data-ttu-id="59c73-146">**ValueChanged** イベント ハンドラーで、コントロールの現在の値を取得し、[**SetValueAsync**](https://msdn.microsoft.com/library/windows/apps/dn278903) を呼び出して露出値を設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-146">In the **ValueChanged** event handler, get the current value of the control and the set the exposure value by calling [**SetValueAsync**](https://msdn.microsoft.com/library/windows/apps/dn278903).</span></span>

[!code-cs[<span data-ttu-id="59c73-147">EvValueChanged</span><span class="sxs-lookup"><span data-stu-id="59c73-147">EvValueChanged</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetEvValueChanged)]

## <a name="flash"></a><span data-ttu-id="59c73-148">フラッシュ</span><span class="sxs-lookup"><span data-stu-id="59c73-148">Flash</span></span>

<span data-ttu-id="59c73-149">[**FlashControl**](https://msdn.microsoft.com/library/windows/apps/dn297725) によって、フラッシュを有効または無効にしたり、フラッシュを使うかどうかをシステムが動的に判断する、自動フラッシュを有効にしたりすることができます。</span><span class="sxs-lookup"><span data-stu-id="59c73-149">The [**FlashControl**](https://msdn.microsoft.com/library/windows/apps/dn297725) allows you to enable or disable the flash or to enable automatic flash, where the system dynamically determines whether to use the flash.</span></span> <span data-ttu-id="59c73-150">このコントロールによって、サポートされているデバイスで自動赤目軽減を有効にすることもできます。</span><span class="sxs-lookup"><span data-stu-id="59c73-150">This control also allows you to enable automatic red eye reduction on devices that support it.</span></span> <span data-ttu-id="59c73-151">これらの設定はすべて写真のキャプチャに適用されます。</span><span class="sxs-lookup"><span data-stu-id="59c73-151">These settings all apply to capturing photos.</span></span> <span data-ttu-id="59c73-152">[**TorchControl**](https://msdn.microsoft.com/library/windows/apps/dn279077) は、ビデオ キャプチャ時のトーチのオンとオフを切り替える別のコントロールです。</span><span class="sxs-lookup"><span data-stu-id="59c73-152">The [**TorchControl**](https://msdn.microsoft.com/library/windows/apps/dn279077) is a separate control for turning the torch on or off for video capture.</span></span>

<span data-ttu-id="59c73-153">この例では、一連のラジオ ボタンを使って、ユーザーがオン、オフ、自動のフラッシュ設定を切り替えることができるようにします。</span><span class="sxs-lookup"><span data-stu-id="59c73-153">This example uses a set of radio buttons to allow the user to switch between on, off, and auto flash settings.</span></span> <span data-ttu-id="59c73-154">赤目軽減とビデオ トーチのオンとオフを切り替えるためのチェック ボックスも用意されています。</span><span class="sxs-lookup"><span data-stu-id="59c73-154">A checkbox is also provided to allow toggling of red eye reduction and the video torch.</span></span>

[!code-xml[<span data-ttu-id="59c73-155">FlashXAML</span><span class="sxs-lookup"><span data-stu-id="59c73-155">FlashXAML</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.xaml#SnippetFlashXAML)]

<span data-ttu-id="59c73-156">現在のキャプチャ デバイスで **FlashControl** がサポートされているかどうかを確認するには、[**Supported**](https://msdn.microsoft.com/library/windows/apps/dn297837) プロパティを確認します。</span><span class="sxs-lookup"><span data-stu-id="59c73-156">Check to see if the current capture device supports the **FlashControl** by checking the [**Supported**](https://msdn.microsoft.com/library/windows/apps/dn297837) property.</span></span> <span data-ttu-id="59c73-157">コントロールがサポートされている場合は、この機能の UI を表示し、有効にすることができます。</span><span class="sxs-lookup"><span data-stu-id="59c73-157">If the control is supported, you can show and enable the UI for this feature.</span></span> <span data-ttu-id="59c73-158">**FlashControl** がサポートされている場合でも、自動赤目軽減はサポートされている場合とサポートされていない場合があるため、UI を有効にする前に [**RedEyeReductionSupported**](https://msdn.microsoft.com/library/windows/apps/dn297766) プロパティを確認します。</span><span class="sxs-lookup"><span data-stu-id="59c73-158">If the **FlashControl** is supported, automatic red eye reduction may or may not be supported, so check the [**RedEyeReductionSupported**](https://msdn.microsoft.com/library/windows/apps/dn297766) property before enabling the UI.</span></span> <span data-ttu-id="59c73-159">**TorchControl** はフラッシュ コントロールとは別であるため、使用する前にその [**Supported**](https://msdn.microsoft.com/library/windows/apps/dn279081) プロパティも確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="59c73-159">Because the **TorchControl** is separate from the flash control, you must also check its [**Supported**](https://msdn.microsoft.com/library/windows/apps/dn279081) property before using it.</span></span>

<span data-ttu-id="59c73-160">フラッシュの各ラジオ ボタンの [**Checked**](https://msdn.microsoft.com/library/windows/apps/br209796) イベント ハンドラーで、適切な対応するフラッシュの設定を有効または無効にします。</span><span class="sxs-lookup"><span data-stu-id="59c73-160">In the [**Checked**](https://msdn.microsoft.com/library/windows/apps/br209796) event handler for each of the flash radio buttons, enable or disable the appropriate corresponding flash setting.</span></span> <span data-ttu-id="59c73-161">フラッシュが常に使用されるように設定するには、[**Enabled**](https://msdn.microsoft.com/library/windows/apps/dn297733) プロパティを true に、[**Auto**](https://msdn.microsoft.com/library/windows/apps/dn297728) プロパティを false に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="59c73-161">Note that to set the flash to always be used, you must set the [**Enabled**](https://msdn.microsoft.com/library/windows/apps/dn297733) property to true and the [**Auto**](https://msdn.microsoft.com/library/windows/apps/dn297728) property to false.</span></span>

[!code-cs[<span data-ttu-id="59c73-162">FlashControl</span><span class="sxs-lookup"><span data-stu-id="59c73-162">FlashControl</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetFlashControl)]

[!code-cs[<span data-ttu-id="59c73-163">FlashRadioButtons</span><span class="sxs-lookup"><span data-stu-id="59c73-163">FlashRadioButtons</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetFlashRadioButtons)]

<span data-ttu-id="59c73-164">赤目軽減チェック ボックスのハンドラーで、[**RedEyeReduction**](https://msdn.microsoft.com/library/windows/apps/dn297758) プロパティを適切な値に設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-164">In the handler for the red eye reduction checkbox, set the [**RedEyeReduction**](https://msdn.microsoft.com/library/windows/apps/dn297758) property to the appropriate value.</span></span>

[!code-cs[<span data-ttu-id="59c73-165">RedEye</span><span class="sxs-lookup"><span data-stu-id="59c73-165">RedEye</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetRedEye)]

<span data-ttu-id="59c73-166">最後に、ビデオ トーチ チェック ボックスのハンドラーで、[**Enabled**](https://msdn.microsoft.com/library/windows/apps/dn279078) プロパティを適切な値に設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-166">Finally, in the handler for the video torch checkbox, set the [**Enabled**](https://msdn.microsoft.com/library/windows/apps/dn279078) property to the appropriate value.</span></span>

[!code-cs[<span data-ttu-id="59c73-167">Torch</span><span class="sxs-lookup"><span data-stu-id="59c73-167">Torch</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetTorch)]

> [!NOTE] 
>  <span data-ttu-id="59c73-168">一部のデバイスでは、[**TorchControl.Enabled**](https://msdn.microsoft.com/library/windows/apps/dn279078) が true に設定されている場合でも、デバイスがプレビュー ストリームを実行中で、アクティブにビデオをキャプチャ中ではない限り、トーチは発光しません。</span><span class="sxs-lookup"><span data-stu-id="59c73-168">On some devices the torch will not emit light, even if [**TorchControl.Enabled**](https://msdn.microsoft.com/library/windows/apps/dn279078) is set to true, unless the device has a preview stream running and is actively capturing video.</span></span> <span data-ttu-id="59c73-169">推奨される処理の順序は、ビデオのプレビューを有効にし、**Enabled** を true に設定してトーチを有効にした後、ビデオ キャプチャを開始するという順序です。</span><span class="sxs-lookup"><span data-stu-id="59c73-169">The recommended order of operations is to turn on the video preview, turn on the torch by setting **Enabled** to true, and then initiate video capture.</span></span> <span data-ttu-id="59c73-170">一部のデバイスでは、プレビューを開始した後もトーチが点灯しません。</span><span class="sxs-lookup"><span data-stu-id="59c73-170">On some devices the torch will light up after the preview is started.</span></span> <span data-ttu-id="59c73-171">その他のデバイスでは、トーチはビデオのキャプチャを開始するまで点灯しません。</span><span class="sxs-lookup"><span data-stu-id="59c73-171">On other devices, the torch may not light up until video capture is started.</span></span>

## <a name="focus"></a><span data-ttu-id="59c73-172">フォーカス</span><span class="sxs-lookup"><span data-stu-id="59c73-172">Focus</span></span>

<span data-ttu-id="59c73-173">[**FocusControl**](https://msdn.microsoft.com/library/windows/apps/dn297788) オブジェクトでは、カメラのフォーカスを調整するためによく使用される 3 種類の方法である、連続オート フォーカス、タップしてフォーカス、手動フォーカスがサポートされています。</span><span class="sxs-lookup"><span data-stu-id="59c73-173">Three different commonly used methods for adjusting the focus of the camera are supported by the [**FocusControl**](https://msdn.microsoft.com/library/windows/apps/dn297788) object, continuous autofocus, tap to focus, and manual focus.</span></span> <span data-ttu-id="59c73-174">カメラ アプリでこれらの 3 つの方法がすべてをサポートされている可能性がありますが、分かりやすくするために、この記事ではそれぞれの手法を個別に説明します。</span><span class="sxs-lookup"><span data-stu-id="59c73-174">A camera app may support all three of these methods, but for readability, this article discusses each technique separately.</span></span> <span data-ttu-id="59c73-175">このセクションでは、フォーカス アシスト ライトを有効にする方法も説明します。</span><span class="sxs-lookup"><span data-stu-id="59c73-175">This section also discusses how to enable the focus assist light.</span></span>

### <a name="continuous-autofocus"></a><span data-ttu-id="59c73-176">連続オート フォーカス</span><span class="sxs-lookup"><span data-stu-id="59c73-176">Continuous autofocus</span></span>

<span data-ttu-id="59c73-177">連続オート フォーカスを有効にすると、カメラに対して、動的にフォーカスを調整して、写真やビデオの被写体にフォーカスを合わせ続けるように指示されます。</span><span class="sxs-lookup"><span data-stu-id="59c73-177">Enabling continuous autofocus instructs the camera to adjust the focus dynamically to try to keep the subject of the photo or video in focus.</span></span> <span data-ttu-id="59c73-178">この例では、ラジオ ボタンを使用して連続オート フォーカスのオンとオフを切り替えます。</span><span class="sxs-lookup"><span data-stu-id="59c73-178">This example uses a radio button to toggle continuous autofocus on and off.</span></span>

[!code-xml[<span data-ttu-id="59c73-179">CAFXAML</span><span class="sxs-lookup"><span data-stu-id="59c73-179">CAFXAML</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.xaml#SnippetCAFXAML)]

<span data-ttu-id="59c73-180">現在のキャプチャ デバイスで **FocusControl** がサポートされているかどうかを確認するには、[**Supported**](https://msdn.microsoft.com/library/windows/apps/dn297785) プロパティを確認します。</span><span class="sxs-lookup"><span data-stu-id="59c73-180">Check to see if the current capture device supports the **FocusControl** by checking the [**Supported**](https://msdn.microsoft.com/library/windows/apps/dn297785) property.</span></span> <span data-ttu-id="59c73-181">次に、連続オート フォーカスがサポートされている場合は、[**SupportedFocusModes**](https://msdn.microsoft.com/library/windows/apps/dn608079) の一覧を確認して値 [**FocusMode.Continuous**](https://msdn.microsoft.com/library/windows/apps/dn608084) が含まれていることを確認します。この値が含まれている場合は、連続オート フォーカスのラジオ ボタンを表示します。</span><span class="sxs-lookup"><span data-stu-id="59c73-181">Next, determine if continuous autofocus is supported by checking the [**SupportedFocusModes**](https://msdn.microsoft.com/library/windows/apps/dn608079) list to see if it contains the value [**FocusMode.Continuous**](https://msdn.microsoft.com/library/windows/apps/dn608084), and if so, show the continuous autofocus radio button.</span></span>

[!code-cs[<span data-ttu-id="59c73-182">CAF</span><span class="sxs-lookup"><span data-stu-id="59c73-182">CAF</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetCAF)]

<span data-ttu-id="59c73-183">連続オート フォーカス ラジオ ボタンの [**Checked**](https://msdn.microsoft.com/library/windows/apps/br209796) イベント ハンドラーで、[**VideoDeviceController.FocusControl**](https://msdn.microsoft.com/library/windows/apps/dn279091) プロパティを使ってコントロールのインスタンスを取得します。</span><span class="sxs-lookup"><span data-stu-id="59c73-183">In the [**Checked**](https://msdn.microsoft.com/library/windows/apps/br209796) event handler for the continuous autofocus radio button, use the [**VideoDeviceController.FocusControl**](https://msdn.microsoft.com/library/windows/apps/dn279091) property to get an instance of the control.</span></span> <span data-ttu-id="59c73-184">アプリが以前に [**LockAsync**](https://msdn.microsoft.com/library/windows/apps/dn608075) を呼び出して他のフォーカス モードのいずれかを有効にしていた場合は、[**UnlockAsync**](https://msdn.microsoft.com/library/windows/apps/dn608081) を呼び出してコントロールのロックを解除します。</span><span class="sxs-lookup"><span data-stu-id="59c73-184">Call [**UnlockAsync**](https://msdn.microsoft.com/library/windows/apps/dn608081) to unlock the control in case your app has previously called [**LockAsync**](https://msdn.microsoft.com/library/windows/apps/dn608075) to enable one of the other focus modes.</span></span>

<span data-ttu-id="59c73-185">新しい [**FocusSettings**](https://msdn.microsoft.com/library/windows/apps/dn608085) オブジェクトを作成し、[**Mode**](https://msdn.microsoft.com/library/windows/apps/dn608090) プロパティを **Continuous** に設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-185">Create a new [**FocusSettings**](https://msdn.microsoft.com/library/windows/apps/dn608085) object and set the [**Mode**](https://msdn.microsoft.com/library/windows/apps/dn608090) property to **Continuous**.</span></span> <span data-ttu-id="59c73-186">[**AutoFocusRange**](https://msdn.microsoft.com/library/windows/apps/dn608086) プロパティをアプリのシナリオに適した値またはユーザーが UI で選択した値に設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-186">Set the [**AutoFocusRange**](https://msdn.microsoft.com/library/windows/apps/dn608086) property to a value appropriate for your app scenario or selected by the user from your UI.</span></span> <span data-ttu-id="59c73-187">**FocusSettings** オブジェクトを [**Configure**](https://msdn.microsoft.com/library/windows/apps/dn608067) メソッドに渡し、[**FocusAsync**](https://msdn.microsoft.com/library/windows/apps/dn297794) を呼び出して連続オート フォーカスを開始します。</span><span class="sxs-lookup"><span data-stu-id="59c73-187">Pass your **FocusSettings** object into the [**Configure**](https://msdn.microsoft.com/library/windows/apps/dn608067) method, and then call [**FocusAsync**](https://msdn.microsoft.com/library/windows/apps/dn297794) to initiate continuous autofocus.</span></span>

[!code-cs[<span data-ttu-id="59c73-188">CafFocusRadioButton</span><span class="sxs-lookup"><span data-stu-id="59c73-188">CafFocusRadioButton</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetCafFocusRadioButton)]

> [!IMPORTANT]
> <span data-ttu-id="59c73-189">オート フォーカス モードは、プレビュー ストリームが実行中であるときにのみサポートされます。</span><span class="sxs-lookup"><span data-stu-id="59c73-189">Autofocus mode is only supported while the preview stream is running.</span></span> <span data-ttu-id="59c73-190">連続オート フォーカスをオンにする前に、プレビュー ストリームが実行されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="59c73-190">Check to make sure that the preview stream is running before turning on continuous autofocus.</span></span>

### <a name="tap-to-focus"></a><span data-ttu-id="59c73-191">タップしてフォーカス</span><span class="sxs-lookup"><span data-stu-id="59c73-191">Tap to focus</span></span>

<span data-ttu-id="59c73-192">タップしてフォーカスの手法では、[**FocusControl**](https://msdn.microsoft.com/library/windows/apps/dn297788) と [**RegionsOfInterestControl**](https://msdn.microsoft.com/library/windows/apps/dn279064) を使って、キャプチャ デバイスでフォーカスを合わせるキャプチャ フレームのサブ領域を指定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-192">The tap-to-focus technique uses the [**FocusControl**](https://msdn.microsoft.com/library/windows/apps/dn297788) and the [**RegionsOfInterestControl**](https://msdn.microsoft.com/library/windows/apps/dn279064) to specify a subregion of the capture frame where the capture device should focus.</span></span> <span data-ttu-id="59c73-193">フォーカスの領域は、プレビュー ストリームが表示されている画面をユーザーがタップすることによって決定されます。</span><span class="sxs-lookup"><span data-stu-id="59c73-193">The region of focus is determined by the user tapping on the screen displaying the preview stream.</span></span>

<span data-ttu-id="59c73-194">この例では、ラジオ ボタンを使って、タップしてフォーカス モードを有効または無効にします。</span><span class="sxs-lookup"><span data-stu-id="59c73-194">This example uses a radio button to enable and disable tap-to-focus mode.</span></span>

[!code-xml[<span data-ttu-id="59c73-195">TapFocusXAML</span><span class="sxs-lookup"><span data-stu-id="59c73-195">TapFocusXAML</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.xaml#SnippetTapFocusXAML)]

<span data-ttu-id="59c73-196">現在のキャプチャ デバイスで **FocusControl** がサポートされているかどうかを確認するには、[**Supported**](https://msdn.microsoft.com/library/windows/apps/dn297785) プロパティを確認します。</span><span class="sxs-lookup"><span data-stu-id="59c73-196">Check to see if the current capture device supports the **FocusControl** by checking the [**Supported**](https://msdn.microsoft.com/library/windows/apps/dn297785) property.</span></span> <span data-ttu-id="59c73-197">この手法を使うには、**RegionsOfInterestControl** がサポートされており、少なくとも 1 つの領域をサポートしている必要があります。</span><span class="sxs-lookup"><span data-stu-id="59c73-197">The **RegionsOfInterestControl** must be supported, and must support at least one region, in order to use this technique.</span></span> <span data-ttu-id="59c73-198">[**AutoFocusSupported**](https://msdn.microsoft.com/library/windows/apps/dn279066) および [**MaxRegions**](https://msdn.microsoft.com/library/windows/apps/dn279069) プロパティを確認して、タップしてフォーカスのラジオ ボタンを表示するか、非表示にするかを決定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-198">Check the [**AutoFocusSupported**](https://msdn.microsoft.com/library/windows/apps/dn279066) and [**MaxRegions**](https://msdn.microsoft.com/library/windows/apps/dn279069) properties to determine whether to show or hide the radio button for tap-to-focus.</span></span>

[!code-cs[<span data-ttu-id="59c73-199">TapFocus</span><span class="sxs-lookup"><span data-stu-id="59c73-199">TapFocus</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetTapFocus)]

<span data-ttu-id="59c73-200">タップしてフォーカスのラジオ ボタンの [**Checked**](https://msdn.microsoft.com/library/windows/apps/br209796) イベント ハンドラーで、[**VideoDeviceController.FocusControl**](https://msdn.microsoft.com/library/windows/apps/dn279091) プロパティを使ってコントロールのインスタンスを取得します。</span><span class="sxs-lookup"><span data-stu-id="59c73-200">In the [**Checked**](https://msdn.microsoft.com/library/windows/apps/br209796) event handler for the tap-to-focus radio button, use the [**VideoDeviceController.FocusControl**](https://msdn.microsoft.com/library/windows/apps/dn279091) property to get an instance of the control.</span></span> <span data-ttu-id="59c73-201">アプリが以前に [**UnlockAsync**](https://msdn.microsoft.com/library/windows/apps/dn608081) を呼び出して連続オート フォーカスを有効にしていた場合は、[**LockAsync**](https://msdn.microsoft.com/library/windows/apps/dn608075) を呼び出してコントロールをロックし、ユーザーが画面をタップしてフォーカスを変更するまで待機します。</span><span class="sxs-lookup"><span data-stu-id="59c73-201">Call [**LockAsync**](https://msdn.microsoft.com/library/windows/apps/dn608075) to lock the control in case your app has previously called [**UnlockAsync**](https://msdn.microsoft.com/library/windows/apps/dn608081) to enable continuous autofocus, and then wait for the user to tap the screen to change the focus.</span></span>

[!code-cs[<span data-ttu-id="59c73-202">TapFocusRadioButton</span><span class="sxs-lookup"><span data-stu-id="59c73-202">TapFocusRadioButton</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetTapFocusRadioButton)]

<span data-ttu-id="59c73-203">この例は、ユーザーが画面をタップすると領域にフォーカスを合わせ、ユーザーがもう一度タップすると、トグルのように、その領域からフォーカスを削除します。</span><span class="sxs-lookup"><span data-stu-id="59c73-203">This example focuses on a region when the user taps the screen, and then removes the focus from that region when the user taps again, like a toggle.</span></span> <span data-ttu-id="59c73-204">現在のトグルの状態を追跡するには、ブール変数を使います。</span><span class="sxs-lookup"><span data-stu-id="59c73-204">Use a boolean variable to track the current toggled state.</span></span>

[!code-cs[<span data-ttu-id="59c73-205">IsFocused</span><span class="sxs-lookup"><span data-stu-id="59c73-205">IsFocused</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetIsFocused)]

<span data-ttu-id="59c73-206">次の手順では、ユーザーが画面をタップしたときのイベントをリッスンします。そのためには、現在キャプチャ プレビュー ストリームを表示している [**CaptureElement**](https://msdn.microsoft.com/library/windows/apps/br209278) の [**Tapped**](https://msdn.microsoft.com/library/windows/apps/br208985) イベントを処理します。</span><span class="sxs-lookup"><span data-stu-id="59c73-206">The next step is to listen for the event when the user taps the screen by handling the [**Tapped**](https://msdn.microsoft.com/library/windows/apps/br208985) event of the [**CaptureElement**](https://msdn.microsoft.com/library/windows/apps/br209278) that is currently displaying the capture preview stream.</span></span> <span data-ttu-id="59c73-207">カメラが現在プレビューを表示していない場合や、タップしてフォーカス モードが無効である場合は、何もせずにハンドラーから制御を戻します。</span><span class="sxs-lookup"><span data-stu-id="59c73-207">If the camera isn't currently previewing, or if tap-to-focus mode is disabled, return from the handler without doing anything.</span></span>

<span data-ttu-id="59c73-208">追跡変数 *\_isFocused* が false になっており、カメラが現在フォーカスを処理していない場合 (**FocusControl** の [**FocusState**](https://msdn.microsoft.com/library/windows/apps/dn608074) プロパティによって特定される)、タップしてフォーカスの処理を開始します。</span><span class="sxs-lookup"><span data-stu-id="59c73-208">If the tracking variable *\_isFocused* is toggled to false, and if the camera isn't currently in the process of focus (determined by the [**FocusState**](https://msdn.microsoft.com/library/windows/apps/dn608074) property of the **FocusControl**), begin the tap-to-focus process.</span></span> <span data-ttu-id="59c73-209">ハンドラーに渡されるイベント引数から、ユーザーのタップの位置を取得します。</span><span class="sxs-lookup"><span data-stu-id="59c73-209">Get the position of the user's tap from the event args passed into the handler.</span></span> <span data-ttu-id="59c73-210">また、この例では、この機会を利用して、フォーカスが設定される領域のサイズを取得します。</span><span class="sxs-lookup"><span data-stu-id="59c73-210">This example also uses this opportunity to pick the size of the region that will be focused upon.</span></span> <span data-ttu-id="59c73-211">この場合、サイズは、キャプチャ要素の最小サイズの 1/4 です。</span><span class="sxs-lookup"><span data-stu-id="59c73-211">In this case, the size is 1/4 of the smallest dimension of the capture element.</span></span> <span data-ttu-id="59c73-212">タップの位置と領域のサイズを、次のセクションで定義される **TapToFocus** ヘルパー メソッドに渡します。</span><span class="sxs-lookup"><span data-stu-id="59c73-212">Pass the tap position and the region size into the **TapToFocus** helper method that is defined in the next section.</span></span>

<span data-ttu-id="59c73-213">*\_isFocused* トグルが true に設定されている場合、ユーザーのタップによって、前の領域からフォーカスがクリアされます。</span><span class="sxs-lookup"><span data-stu-id="59c73-213">If the *\_isFocused* toggle is set to true, the user tap should clear the focus from the previous region.</span></span> <span data-ttu-id="59c73-214">これは、次に示す **TapUnfocus** ヘルパー メソッドで行われます。</span><span class="sxs-lookup"><span data-stu-id="59c73-214">This is done in the **TapUnfocus** helper method shown below.</span></span>

[!code-cs[<span data-ttu-id="59c73-215">TapFocusPreviewControl</span><span class="sxs-lookup"><span data-stu-id="59c73-215">TapFocusPreviewControl</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetTapFocusPreviewControl)]

<span data-ttu-id="59c73-216">**TapToFocus** ヘルパー メソッドで、最初に *\_isFocused* トグルを true に設定します。これにより、次に画面をタップしたときに、タップした領域からフォーカスが解除されます。</span><span class="sxs-lookup"><span data-stu-id="59c73-216">In the **TapToFocus** helper method, first set the *\_isFocused* toggle to true so that the next screen tap will release the focus from the tapped region.</span></span>

<span data-ttu-id="59c73-217">このヘルパー メソッドの次のタスクでは、フォーカス コントロールに割り当てられるプレビュー ストリーム内の四角形を決定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-217">The next task in this helper method is to determine the rectangle within the preview stream that will be assigned to the focus control.</span></span> <span data-ttu-id="59c73-218">これには 2 つのステップが必要です。</span><span class="sxs-lookup"><span data-stu-id="59c73-218">This requires two steps.</span></span> <span data-ttu-id="59c73-219">最初のステップは、[**CaptureElement**](https://msdn.microsoft.com/library/windows/apps/br209278) コントロール内でプレビュー ストリームが占有する四角形を特定することです。</span><span class="sxs-lookup"><span data-stu-id="59c73-219">The first step is to determine the rectangle that the preview stream takes up within the [**CaptureElement**](https://msdn.microsoft.com/library/windows/apps/br209278) control.</span></span> <span data-ttu-id="59c73-220">これは、プレビュー ストリームのサイズとデバイスの向きに依存します。</span><span class="sxs-lookup"><span data-stu-id="59c73-220">This depends on the dimensions of the preview stream and the orientation of the device.</span></span> <span data-ttu-id="59c73-221">ヘルパー メソッド **GetPreviewStreamRectInControl** (このセクションの最後に示されている) は、このタスクを実行し、プレビュー ストリームが含まれている四角形を返します。</span><span class="sxs-lookup"><span data-stu-id="59c73-221">The helper method **GetPreviewStreamRectInControl**, shown at the end of this section, performs this task and returns the rectangle containing the preview stream.</span></span>

<span data-ttu-id="59c73-222">**TapToFocus** の次のタスクは、**CaptureElement.Tapped** イベント ハンドラーで特定された、タップの位置と目的のフォーカスの四角形のサイズを、キャプチャ ストリーム内の座標に変換することです。</span><span class="sxs-lookup"><span data-stu-id="59c73-222">The next task in **TapToFocus** is to convert the tap location and desired focus rectangle size, which were determined within the **CaptureElement.Tapped** event handler, into coordinates within capture stream.</span></span> <span data-ttu-id="59c73-223">**ConvertUiTapToPreviewRect** ヘルパー メソッド (このセクションで後で説明されている) は、フォーカスが要求されている四角形をキャプチャ ストリームの座標で返します。</span><span class="sxs-lookup"><span data-stu-id="59c73-223">The **ConvertUiTapToPreviewRect** helper method, shown later in this section, performs this conversion and returns the rectangle, in capture stream coordinates, where the focus will be requested.</span></span>

<span data-ttu-id="59c73-224">ターゲットの四角形が取得されたら、[**Bounds**](https://msdn.microsoft.com/library/windows/apps/dn279062) プロパティを前の手順で取得されたターゲットの四角形に設定して、新しい [**RegionOfInterest**](https://msdn.microsoft.com/library/windows/apps/dn279058) オブジェクトを作成します。</span><span class="sxs-lookup"><span data-stu-id="59c73-224">Now that the target rectangle has been obtained, create a new [**RegionOfInterest**](https://msdn.microsoft.com/library/windows/apps/dn279058) object, setting the [**Bounds**](https://msdn.microsoft.com/library/windows/apps/dn279062) property to the target rectangle obtained in the previous steps.</span></span>

<span data-ttu-id="59c73-225">キャプチャ デバイスの [**FocusControl**](https://msdn.microsoft.com/library/windows/apps/dn297788) を取得します。</span><span class="sxs-lookup"><span data-stu-id="59c73-225">Get the capture device's [**FocusControl**](https://msdn.microsoft.com/library/windows/apps/dn297788).</span></span> <span data-ttu-id="59c73-226">新しい [**FocusSettings**](https://msdn.microsoft.com/library/windows/apps/dn608085) オブジェクトを作成し、**FocusControl** でサポートされていることを確認した後、[**Mode**](https://msdn.microsoft.com/library/windows/apps/dn608076) と [**AutoFocusRange**](https://msdn.microsoft.com/library/windows/apps/dn608086) を目的の値に設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-226">Create a new [**FocusSettings**](https://msdn.microsoft.com/library/windows/apps/dn608085) object and set the [**Mode**](https://msdn.microsoft.com/library/windows/apps/dn608076) and [**AutoFocusRange**](https://msdn.microsoft.com/library/windows/apps/dn608086) to your desired values, after checking to make sure that they are supported by the **FocusControl**.</span></span> <span data-ttu-id="59c73-227">最後に、**FocusControl** で [**Configure**](https://msdn.microsoft.com/library/windows/apps/dn608067) を呼び出して、設定をアクティブにし、指定された領域へのフォーカスを開始するようにデバイスに通知します。</span><span class="sxs-lookup"><span data-stu-id="59c73-227">Call [**Configure**](https://msdn.microsoft.com/library/windows/apps/dn608067) on the **FocusControl** to make your settings active and signal the device to begin focusing on the specified region.</span></span>

<span data-ttu-id="59c73-228">次に、キャプチャ デバイスの [**RegionsOfInterestControl**](https://msdn.microsoft.com/library/windows/apps/dn279064) を取得し、[**SetRegionsAsync**](https://msdn.microsoft.com/library/windows/apps/dn279070) を呼び出してアクティブな領域を設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-228">Next, get the capture device's [**RegionsOfInterestControl**](https://msdn.microsoft.com/library/windows/apps/dn279064) and call [**SetRegionsAsync**](https://msdn.microsoft.com/library/windows/apps/dn279070) to set the active region.</span></span> <span data-ttu-id="59c73-229">サポートされているデバイスでは複数の対象領域を設定できますが、この例では単一の領域のみを設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-229">Multiple regions of interest can be set on devices that support it, but this example only sets a single region.</span></span>

<span data-ttu-id="59c73-230">最後に、**FocusControl** で [**FocusAsync**](https://msdn.microsoft.com/library/windows/apps/dn297794) を呼び出して、フォーカス設定を開始します。</span><span class="sxs-lookup"><span data-stu-id="59c73-230">Finally, call [**FocusAsync**](https://msdn.microsoft.com/library/windows/apps/dn297794) on the **FocusControl** to initiate focusing.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="59c73-231">タップによるフォーカスを実装する場合、操作の順序が重要になります。</span><span class="sxs-lookup"><span data-stu-id="59c73-231">When implementing tap to focus, the order of operations is important.</span></span> <span data-ttu-id="59c73-232">これらの API は、次の順序で呼び出す必要があります。</span><span class="sxs-lookup"><span data-stu-id="59c73-232">You should call these APIs in the following order:</span></span>
>
> 1. [**<span data-ttu-id="59c73-233">FocusControl.Configure</span><span class="sxs-lookup"><span data-stu-id="59c73-233">FocusControl.Configure</span></span>**](https://msdn.microsoft.com/library/windows/apps/dn608067)
> 2. [**<span data-ttu-id="59c73-234">RegionsOfInterestControl.SetRegionsAsync</span><span class="sxs-lookup"><span data-stu-id="59c73-234">RegionsOfInterestControl.SetRegionsAsync</span></span>**](https://msdn.microsoft.com/library/windows/apps/dn279070)
> 3. [**<span data-ttu-id="59c73-235">FocusControl.FocusAsync</span><span class="sxs-lookup"><span data-stu-id="59c73-235">FocusControl.FocusAsync</span></span>**](https://msdn.microsoft.com/library/windows/apps/dn297794)

[!code-cs[<span data-ttu-id="59c73-236">TapToFocus</span><span class="sxs-lookup"><span data-stu-id="59c73-236">TapToFocus</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetTapToFocus)]

<span data-ttu-id="59c73-237">**TapUnfocus** ヘルパー メソッドで、**RegionsOfInterestControl** を取得し、[**ClearRegionsAsync**](https://msdn.microsoft.com/library/windows/apps/dn279068) を呼び出して、**TapToFocus** ヘルパー メソッドでコントロールに登録された領域をクリアします。</span><span class="sxs-lookup"><span data-stu-id="59c73-237">In the **TapUnfocus** helper method, obtain the **RegionsOfInterestControl** and call [**ClearRegionsAsync**](https://msdn.microsoft.com/library/windows/apps/dn279068) to clear the region that was registered with the control within the **TapToFocus** helper method.</span></span> <span data-ttu-id="59c73-238">次に、**FocusControl** を取得し、[**FocusAsync**](https://msdn.microsoft.com/library/windows/apps/dn297794) を呼び出して、対象領域を指定せずにデバイスで再びフォーカスを設定できるようにします。</span><span class="sxs-lookup"><span data-stu-id="59c73-238">Then, get the **FocusControl** and call [**FocusAsync**](https://msdn.microsoft.com/library/windows/apps/dn297794) to cause the device to refocus without a region of interest.</span></span>

[!code-cs[<span data-ttu-id="59c73-239">TapUnfocus</span><span class="sxs-lookup"><span data-stu-id="59c73-239">TapUnfocus</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetTapUnfocus)]

<span data-ttu-id="59c73-240">**GetPreviewStreamRectInControl** ヘルパー メソッドは、プレビュー ストリームの解像度とデバイスの向きを使い、コントロールがストリームの縦横比を維持するために提供する可能性があるレターボックス化されたパディングをトリミングして、プレビュー ストリームを含むプレビュー要素内の四角形を特定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-240">The **GetPreviewStreamRectInControl** helper method uses the resolution of the preview stream and the orientation of the device to determine the rectangle within the preview element that contains the preview stream, trimming off any letterboxed padding that the control may provide to maintain the stream's aspect ratio.</span></span> <span data-ttu-id="59c73-241">このメソッドは、「[MediaCapture を使った基本的な写真、ビデオ、およびオーディオのキャプチャ](basic-photo-video-and-audio-capture-with-MediaCapture.md)」に示されている基本的なメディア キャプチャのコード例で定義されているクラス メンバー変数を使います。</span><span class="sxs-lookup"><span data-stu-id="59c73-241">This method uses class member variables defined in the basic media capture example code found in [Basic photo, video, and audio capture with MediaCapture](basic-photo-video-and-audio-capture-with-MediaCapture.md).</span></span>

[!code-cs[<span data-ttu-id="59c73-242">GetPreviewStreamRectInControl</span><span class="sxs-lookup"><span data-stu-id="59c73-242">GetPreviewStreamRectInControl</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetGetPreviewStreamRectInControl)]

<span data-ttu-id="59c73-243">**ConvertUiTapToPreviewRect** ヘルパー メソッドは、引数として、タップ イベントの場所、目的のフォーカス領域のサイズ、**GetPreviewStreamRectInControl** ヘルパー メソッドで取得したプレビュー ストリームを含む四角形を受け取ります。</span><span class="sxs-lookup"><span data-stu-id="59c73-243">The **ConvertUiTapToPreviewRect** helper method takes as arguments the location of the tap event, the desired size of the focus region, and the rectangle containing the preview stream obtained from the **GetPreviewStreamRectInControl** helper method.</span></span> <span data-ttu-id="59c73-244">このメソッドは、これらの値とデバイスの現在の向きを使って、目的の地域を含むプレビュー ストリーム内の四角形を計算します。</span><span class="sxs-lookup"><span data-stu-id="59c73-244">This method uses these values and the device's current orientation to calculate the rectangle within the preview stream that contains the desired region.</span></span> <span data-ttu-id="59c73-245">ここでも、このメソッドは、「[MediaCapture を使った写真とビデオのキャプチャ](capture-photos-and-video-with-mediacapture.md)」に示されている基本的なメディア キャプチャのコード例で定義されているクラス メンバー変数を使います。</span><span class="sxs-lookup"><span data-stu-id="59c73-245">Once again, this method uses class member variables defined in the basic media capture example code found in [Capture Photos and Video with MediaCapture](capture-photos-and-video-with-mediacapture.md).</span></span>

[!code-cs[<span data-ttu-id="59c73-246">ConvertUiTapToPreviewRect</span><span class="sxs-lookup"><span data-stu-id="59c73-246">ConvertUiTapToPreviewRect</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetConvertUiTapToPreviewRect)]

### <a name="manual-focus"></a><span data-ttu-id="59c73-247">手動フォーカス</span><span class="sxs-lookup"><span data-stu-id="59c73-247">Manual focus</span></span>

<span data-ttu-id="59c73-248">手動フォーカスの手法では、**スライダー** コントロールを使って、キャプチャ デバイスの現在フォーカスの深度を設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-248">The manual focus technique uses a **Slider** control to set the current focus depth of the capture device.</span></span> <span data-ttu-id="59c73-249">ラジオ ボタンを使って、手動フォーカスのオンとオフを切り替えます。</span><span class="sxs-lookup"><span data-stu-id="59c73-249">A radio button is used to toggle manual focus on and off.</span></span>

[!code-xml[<span data-ttu-id="59c73-250">ManualFocusXAML</span><span class="sxs-lookup"><span data-stu-id="59c73-250">ManualFocusXAML</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.xaml#SnippetManualFocusXAML)]

<span data-ttu-id="59c73-251">現在のキャプチャ デバイスで **FocusControl** がサポートされているかどうかを確認するには、[**Supported**](https://msdn.microsoft.com/library/windows/apps/dn297837) プロパティを確認します。</span><span class="sxs-lookup"><span data-stu-id="59c73-251">Check to see if the current capture device supports the **FocusControl** by checking the [**Supported**](https://msdn.microsoft.com/library/windows/apps/dn297837) property.</span></span> <span data-ttu-id="59c73-252">コントロールがサポートされている場合は、この機能の UI を表示し、有効にすることができます。</span><span class="sxs-lookup"><span data-stu-id="59c73-252">If the control is supported, you can show and enable the UI for this feature.</span></span>

<span data-ttu-id="59c73-253">フォーカス値は、デバイスでサポートされている範囲内である必要があり、サポートされているステップ サイズのインクリメントである必要があります。</span><span class="sxs-lookup"><span data-stu-id="59c73-253">The focus value must be within the range supported by the device and must be an increment of the supported step size.</span></span> <span data-ttu-id="59c73-254">現在のデバイスでサポートされている値を取得するには、[**Min**](https://msdn.microsoft.com/library/windows/apps/dn297808)、[**Max**](https://msdn.microsoft.com/library/windows/apps/dn297802)、および [**Step**](https://msdn.microsoft.com/library/windows/apps/dn297833) プロパティを確認します。これらのプロパティは、対応するスライダー コントロールのプロパティを設定するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="59c73-254">Get the supported values for the current device by checking the [**Min**](https://msdn.microsoft.com/library/windows/apps/dn297808), [**Max**](https://msdn.microsoft.com/library/windows/apps/dn297802), and [**Step**](https://msdn.microsoft.com/library/windows/apps/dn297833) properties, which are used to set the corresponding properties of the slider control.</span></span>

<span data-ttu-id="59c73-255">値が設定されたときにイベントがトリガーされないように、[**ValueChanged**](https://msdn.microsoft.com/library/windows/apps/br209737) イベント ハンドラーの登録を解除した後、スライダー コントロールの値を **FocusControl** の現在値に設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-255">Set the slider control's value to the current value of the **FocusControl** after unregistering the [**ValueChanged**](https://msdn.microsoft.com/library/windows/apps/br209737) event handler so that the event is not triggered when the value is set.</span></span>

[!code-cs[<span data-ttu-id="59c73-256">Focus</span><span class="sxs-lookup"><span data-stu-id="59c73-256">Focus</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetFocus)]

<span data-ttu-id="59c73-257">アプリが以前に [**UnlockAsync**](https://msdn.microsoft.com/library/windows/apps/dn608081) を呼び出してフォーカスのロックを解除していた場合は、手動フォーカスのラジオ ボタンの **Checked** イベント ハンドラーで、**FocusControl** オブジェクトを取得し、[**LockAsync**](https://msdn.microsoft.com/library/windows/apps/dn608075) を呼び出します。</span><span class="sxs-lookup"><span data-stu-id="59c73-257">In the **Checked** event handler for the manual focus radio button, get the **FocusControl** object and call [**LockAsync**](https://msdn.microsoft.com/library/windows/apps/dn608075) in case your app had previously unlocked the focus with a call to [**UnlockAsync**](https://msdn.microsoft.com/library/windows/apps/dn608081).</span></span>

[!code-cs[<span data-ttu-id="59c73-258">ManualFocusChecked</span><span class="sxs-lookup"><span data-stu-id="59c73-258">ManualFocusChecked</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetManualFocusChecked)]

<span data-ttu-id="59c73-259">手動フォーカス スライダーの **ValueChanged** イベント ハンドラーで、コントロールの現在の値を取得し、[**SetValueAsync**](https://msdn.microsoft.com/library/windows/apps/dn297828) を呼び出してフォーカス値を設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-259">In the **ValueChanged** event handler of the manual focus slider, get the current value of the control and the set the focus value by calling [**SetValueAsync**](https://msdn.microsoft.com/library/windows/apps/dn297828).</span></span>

[!code-cs[<span data-ttu-id="59c73-260">FocusSlider</span><span class="sxs-lookup"><span data-stu-id="59c73-260">FocusSlider</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetFocusSlider)]

### <a name="enable-the-focus-light"></a><span data-ttu-id="59c73-261">フォーカス ライトの有効化</span><span class="sxs-lookup"><span data-stu-id="59c73-261">Enable the focus light</span></span>

<span data-ttu-id="59c73-262">サポートされているデバイスで、デバイスのフォーカスを支援するフォーカス アシスト ライトを有効にすることができます。</span><span class="sxs-lookup"><span data-stu-id="59c73-262">On devices that support it, you can enable a focus assist light to help the device focus.</span></span> <span data-ttu-id="59c73-263">この例では、チェック ボックスを使って、フォーカス アシスト ライトを有効または無効にします。</span><span class="sxs-lookup"><span data-stu-id="59c73-263">This example uses a checkbox to enable or disable the focus assist light.</span></span>

[!code-xml[<span data-ttu-id="59c73-264">FocusLightXAML</span><span class="sxs-lookup"><span data-stu-id="59c73-264">FocusLightXAML</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.xaml#SnippetFocusLightXAML)]

<span data-ttu-id="59c73-265">現在のキャプチャ デバイスで **FlashControl** がサポートされているかどうかを確認するには、[**Supported**](https://msdn.microsoft.com/library/windows/apps/dn297785) プロパティを確認します。</span><span class="sxs-lookup"><span data-stu-id="59c73-265">Check to see if the current capture device supports the **FlashControl** by checking the [**Supported**](https://msdn.microsoft.com/library/windows/apps/dn297785) property.</span></span> <span data-ttu-id="59c73-266">また、[**AssistantLightSupported**](https://msdn.microsoft.com/library/windows/apps/dn608066) を確認してアシスト ライトがサポートされていることも確認します。</span><span class="sxs-lookup"><span data-stu-id="59c73-266">Also check the [**AssistantLightSupported**](https://msdn.microsoft.com/library/windows/apps/dn608066) to make sure the assist light is also supported.</span></span> <span data-ttu-id="59c73-267">これらがいずれもサポートされている場合は、この機能の UI を表示し、有効にすることができます。</span><span class="sxs-lookup"><span data-stu-id="59c73-267">If these are both supported, you can show and enable the UI for this feature.</span></span>

[!code-cs[<span data-ttu-id="59c73-268">FocusLight</span><span class="sxs-lookup"><span data-stu-id="59c73-268">FocusLight</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetFocusLight)]

<span data-ttu-id="59c73-269">**CheckedChanged** イベント ハンドラーで、キャプチャ デバイスの [**FlashControl**](https://msdn.microsoft.com/library/windows/apps/dn297725) オブジェクトを取得します。</span><span class="sxs-lookup"><span data-stu-id="59c73-269">In the **CheckedChanged** event handler, get the capture devices [**FlashControl**](https://msdn.microsoft.com/library/windows/apps/dn297725) object.</span></span> <span data-ttu-id="59c73-270">[**AssistantLightEnabled**](https://msdn.microsoft.com/library/windows/apps/dn608065) プロパティを設定して、フォーカス ライトを有効または無効にします。</span><span class="sxs-lookup"><span data-stu-id="59c73-270">Set the [**AssistantLightEnabled**](https://msdn.microsoft.com/library/windows/apps/dn608065) property to enable or disable the focus light.</span></span>

[!code-cs[<span data-ttu-id="59c73-271">FocusLightCheckBox</span><span class="sxs-lookup"><span data-stu-id="59c73-271">FocusLightCheckBox</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetFocusLightCheckBox)]

## <a name="iso-speed"></a><span data-ttu-id="59c73-272">ISO 速度</span><span class="sxs-lookup"><span data-stu-id="59c73-272">ISO speed</span></span>

<span data-ttu-id="59c73-273">[**IsoSpeedControl**](https://msdn.microsoft.com/library/windows/apps/dn297850) によって、写真やビデオのキャプチャ時に使用される ISO 速度を設定できます。</span><span class="sxs-lookup"><span data-stu-id="59c73-273">The [**IsoSpeedControl**](https://msdn.microsoft.com/library/windows/apps/dn297850) allows you to set the ISO speed used during photo or video capture.</span></span>

<span data-ttu-id="59c73-274">この例では、[**スライダー**](https://msdn.microsoft.com/library/windows/apps/br209614) コントロールを使って現在の露出補正値を調整し、チェック ボックスを使って自動 ISO 速度調整のオンとオフを切り替えます。</span><span class="sxs-lookup"><span data-stu-id="59c73-274">This example uses a [**Slider**](https://msdn.microsoft.com/library/windows/apps/br209614) control to adjust the current exposure compensation value and a checkbox to toggle automatic ISO speed adjustment.</span></span>

[!code-xml[<span data-ttu-id="59c73-275">IsoXAML</span><span class="sxs-lookup"><span data-stu-id="59c73-275">IsoXAML</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.xaml#SnippetIsoXAML)]

<span data-ttu-id="59c73-276">現在のキャプチャ デバイスで **IsoSpeedControl** がサポートされているかどうかを確認するには、[**Supported**](https://msdn.microsoft.com/library/windows/apps/dn297869) プロパティを確認します。</span><span class="sxs-lookup"><span data-stu-id="59c73-276">Check to see if the current capture device supports the **IsoSpeedControl** by checking the [**Supported**](https://msdn.microsoft.com/library/windows/apps/dn297869) property.</span></span> <span data-ttu-id="59c73-277">コントロールがサポートされている場合は、この機能の UI を表示し、有効にすることができます。</span><span class="sxs-lookup"><span data-stu-id="59c73-277">If the control is supported, you can show and enable the UI for this feature.</span></span> <span data-ttu-id="59c73-278">自動 ISO 速度調整が現在アクティブであるかどうかを示すために、チェック ボックスのオンの状態を [**Auto**](https://msdn.microsoft.com/library/windows/apps/dn608093) プロパティの値に設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-278">Set the checked state of the checkbox to indicate if automatic ISO speed adjustment is currently active to the value of the [**Auto**](https://msdn.microsoft.com/library/windows/apps/dn608093) property.</span></span>

<span data-ttu-id="59c73-279">ISO 速度値は、デバイスでサポートされている範囲内である必要があり、サポートされているステップ サイズのインクリメントである必要があります。</span><span class="sxs-lookup"><span data-stu-id="59c73-279">The ISO speed value must be within the range supported by the device and must be an increment of the supported step size.</span></span> <span data-ttu-id="59c73-280">現在のデバイスでサポートされている値を取得するには、[**Min**](https://msdn.microsoft.com/library/windows/apps/dn608095)、[**Max**](https://msdn.microsoft.com/library/windows/apps/dn608094)、および [**Step**](https://msdn.microsoft.com/library/windows/apps/dn608129) プロパティを確認します。これらのプロパティは、対応するスライダー コントロールのプロパティを設定するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="59c73-280">Get the supported values for the current device by checking the [**Min**](https://msdn.microsoft.com/library/windows/apps/dn608095), [**Max**](https://msdn.microsoft.com/library/windows/apps/dn608094), and [**Step**](https://msdn.microsoft.com/library/windows/apps/dn608129) properties, which are used to set the corresponding properties of the slider control.</span></span>

<span data-ttu-id="59c73-281">値が設定されたときにイベントがトリガーされないように、[**ValueChanged**](https://msdn.microsoft.com/library/windows/apps/br209737) イベント ハンドラーの登録を解除した後、スライダー コントロールの値を **IsoSpeedControl** の現在値に設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-281">Set the slider control's value to the current value of the **IsoSpeedControl** after unregistering the [**ValueChanged**](https://msdn.microsoft.com/library/windows/apps/br209737) event handler so that the event is not triggered when the value is set.</span></span>

[!code-cs[<span data-ttu-id="59c73-282">IsoControl</span><span class="sxs-lookup"><span data-stu-id="59c73-282">IsoControl</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetIsoControl)]

<span data-ttu-id="59c73-283">**ValueChanged** イベント ハンドラーで、コントロールの現在の値を取得し、[**SetValueAsync**](https://msdn.microsoft.com/library/windows/apps/dn608128) を呼び出して ISO 速度を設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-283">In the **ValueChanged** event handler, get the current value of the control and the set the ISO speed value by calling [**SetValueAsync**](https://msdn.microsoft.com/library/windows/apps/dn608128).</span></span>

[!code-cs[<span data-ttu-id="59c73-284">IsoSlider</span><span class="sxs-lookup"><span data-stu-id="59c73-284">IsoSlider</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetIsoSlider)]

<span data-ttu-id="59c73-285">自動 ISO 速度チェック ボックスの **CheckedChanged** イベント ハンドラーで、[**SetAutoAsync**](https://msdn.microsoft.com/library/windows/apps/dn608127) を呼び出すことによって、自動 ISO 速度調整をオンにします。</span><span class="sxs-lookup"><span data-stu-id="59c73-285">In the **CheckedChanged** event handler of the auto ISO speed checkbox, turn on automatic ISO speed adjustment by calling [**SetAutoAsync**](https://msdn.microsoft.com/library/windows/apps/dn608127).</span></span> <span data-ttu-id="59c73-286">自動 ISO 速度調整をオフにするには、[**SetValueAsync**](https://msdn.microsoft.com/library/windows/apps/dn608128) を呼び出して、スライダー コントロールの現在の値を渡します。</span><span class="sxs-lookup"><span data-stu-id="59c73-286">Turn automatic ISO speed adjustment off by calling [**SetValueAsync**](https://msdn.microsoft.com/library/windows/apps/dn608128) and passing in the current value of the slider control.</span></span>

[!code-cs[<span data-ttu-id="59c73-287">IsoCheckBox</span><span class="sxs-lookup"><span data-stu-id="59c73-287">IsoCheckBox</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetIsoCheckBox)]

## <a name="optical-image-stabilization"></a><span data-ttu-id="59c73-288">光学式手ブレ補正</span><span class="sxs-lookup"><span data-stu-id="59c73-288">Optical image stabilization</span></span>

<span data-ttu-id="59c73-289">光学式手ブレ補正 (OIS) は、ハードウェア キャプチャ デバイスを物理的に操作することで、キャプチャしたビデオ ストリームを補正します。これにより、デジタル補正より優れた結果が生まれます。</span><span class="sxs-lookup"><span data-stu-id="59c73-289">Optical image stabilization (OIS) stabilizes a the captured video stream by mechanically manipulating the hardware capture device, which can provide a superior result than digital stabilization.</span></span> <span data-ttu-id="59c73-290">OIS がサポートされていないデバイスでは、VideoStabilizationEffect を使用して、キャプチャしたビデオにデジタル手ブレ補正を行うことができます。</span><span class="sxs-lookup"><span data-stu-id="59c73-290">On devices that don't support OIS, you can use the VideoStabilizationEffect to perform digital stabilization on your captured vide.</span></span> <span data-ttu-id="59c73-291">詳しくは、「[ビデオ キャプチャの効果](effects-for-video-capture.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="59c73-291">For more information, see [Effects for video capture](effects-for-video-capture.md).</span></span>

<span data-ttu-id="59c73-292">現在のデバイスで OIS がサポートされているかどうかを確認するには、[**OpticalImageStabilizationControl.Supported**](https://msdn.microsoft.com/library/windows/apps/dn926689) プロパティをチェックします。</span><span class="sxs-lookup"><span data-stu-id="59c73-292">Determine if OIS is supported on the current device by checking the [**OpticalImageStabilizationControl.Supported**](https://msdn.microsoft.com/library/windows/apps/dn926689) property.</span></span>

<span data-ttu-id="59c73-293">OIS コントロールでは、3 つのモード (オン、オフ、自動) がサポートされています。自動モードでは、OIS によってメディア キャプチャが改善されるかどうかをデバイスが動的に判断し、改善される場合は OIS が有効になります。</span><span class="sxs-lookup"><span data-stu-id="59c73-293">The OIS control supports three modes: on, off, and automatic, which means that the device dynamically determines if OIS would improve the media capture and, if so, enables OIS.</span></span> <span data-ttu-id="59c73-294">現在のデバイスで特定のモードがサポートされているかどうかを確認するには、[**OpticalImageStabilizationControl.SupportedModes**](https://msdn.microsoft.com/library/windows/apps/dn926690) コレクションに目的のモードが含まれているかどうかをチェックします。</span><span class="sxs-lookup"><span data-stu-id="59c73-294">To determine if a particular mode is supported on a device, check to see if the [**OpticalImageStabilizationControl.SupportedModes**](https://msdn.microsoft.com/library/windows/apps/dn926690) collection contains the desired mode.</span></span>

<span data-ttu-id="59c73-295">OIS を有効または無効にするには、[**OpticalImageStabilizationControl.Mode**](https://msdn.microsoft.com/library/windows/apps/dn926691) を目的のモードに設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-295">Enable or disable OIS by setting the [**OpticalImageStabilizationControl.Mode**](https://msdn.microsoft.com/library/windows/apps/dn926691) to the desired mode.</span></span>

[!code-cs[<span data-ttu-id="59c73-296">SetOpticalImageStabilizationMode</span><span class="sxs-lookup"><span data-stu-id="59c73-296">SetOpticalImageStabilizationMode</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetSetOpticalImageStabilizationMode)]

## <a name="powerline-frequency"></a><span data-ttu-id="59c73-297">電源周波数</span><span class="sxs-lookup"><span data-stu-id="59c73-297">Powerline frequency</span></span>
<span data-ttu-id="59c73-298">一部のカメラ デバイスでは、現在の環境の AC 電源周波数を認識し、それに応じたアンチフリッカー処理をサポートします。</span><span class="sxs-lookup"><span data-stu-id="59c73-298">Some camera devices support anti-flicker processing that depends on knowing the AC frequency of the powerlines in the current environment.</span></span> <span data-ttu-id="59c73-299">電源周波数の自動認識をサポートするデバイスもあれば、周波数を手動で設定する必要があるデバイスもあります。</span><span class="sxs-lookup"><span data-stu-id="59c73-299">Some devices support automatic determination of the powerline frequency, while others require that the frequency be set manually.</span></span> <span data-ttu-id="59c73-300">次のコード例は、デバイスの電源周波数のサポートを判別し、必要に応じて、周波数を手動で設定する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="59c73-300">The following code example shows how to determine powerline frequency support on the device and, if needed, how to set the frequency manually.</span></span> 

<span data-ttu-id="59c73-301">まず [**PowerlineFrequency**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.PowerlineFrequency) 型の出力パラメーターを渡して **VideoDeviceController** メソッド [**TryGetPowerlineFrequency**](https://msdn.microsoft.com/library/windows/apps/br206898) を呼び出します。この呼び出しが失敗した場合、現在のデバイスでは電源周波数の制御がサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="59c73-301">First, call the **VideoDeviceController** method [**TryGetPowerlineFrequency**](https://msdn.microsoft.com/library/windows/apps/br206898), passing in an output parameter of type [**PowerlineFrequency**](https://msdn.microsoft.com/library/windows/apps/Windows.Media.Capture.PowerlineFrequency); if this call fails, the powerline frequency control is not supported on the current device.</span></span> <span data-ttu-id="59c73-302">機能がサポートされている場合、自動モードの設定を試みることで、自動モードがサポートされているかどうかを確認できます。</span><span class="sxs-lookup"><span data-stu-id="59c73-302">If the feature is supported, you can determine if automatic mode is available on the device by trying to set auto mode.</span></span> <span data-ttu-id="59c73-303">これを行うには、値 **Auto ** を渡して [**TrySetPowerlineFrequency** ](https://msdn.microsoft.com/library/windows/apps/br206899) を呼び出します。</span><span class="sxs-lookup"><span data-stu-id="59c73-303">Do this by calling [**TrySetPowerlineFrequency**](https://msdn.microsoft.com/library/windows/apps/br206899) and passing in the value **Auto**.</span></span> <span data-ttu-id="59c73-304">呼び出しに成功した場合、自動電源周波数機能がサポートされています。</span><span class="sxs-lookup"><span data-stu-id="59c73-304">If the call succeeds, that means that your auto powerline frequency is supported.</span></span> <span data-ttu-id="59c73-305">デバイスで電源周波数の制御はサポートされているが、周波数の自動検出はサポートされていない場合、**TrySetPowerlineFrequency** を使って周波数を手動で設定できます。</span><span class="sxs-lookup"><span data-stu-id="59c73-305">If the powerline frequency controller is supported on the device but automatic frequency detection is not, you can still manually set the frequency by using **TrySetPowerlineFrequency**.</span></span> <span data-ttu-id="59c73-306">次の例で、**MyCustomFrequencyLookup** は、デバイスの現在の場所における正しい周波数を判定するために実装するカスタム メソッドです。</span><span class="sxs-lookup"><span data-stu-id="59c73-306">In this example, **MyCustomFrequencyLookup** is a custom method that you implement to determine the correct frequency for the device's current location.</span></span> 

[!code-cs[<span data-ttu-id="59c73-307">PowerlineFrequency</span><span class="sxs-lookup"><span data-stu-id="59c73-307">PowerlineFrequency</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetPowerlineFrequency)]

## <a name="white-balance"></a><span data-ttu-id="59c73-308">ホワイト バランス</span><span class="sxs-lookup"><span data-stu-id="59c73-308">White balance</span></span>

<span data-ttu-id="59c73-309">[**WhiteBalanceControl**](https://msdn.microsoft.com/library/windows/apps/dn279104) によって、写真やビデオのキャプチャ時に使用されるホワイト バランスを設定できます。</span><span class="sxs-lookup"><span data-stu-id="59c73-309">The [**WhiteBalanceControl**](https://msdn.microsoft.com/library/windows/apps/dn279104) allows you to set the white balance used during photo or video capture.</span></span>

<span data-ttu-id="59c73-310">この例では、[**ComboBox**](https://msdn.microsoft.com/library/windows/apps/br209348) コントロールを使って組み込みの色温度のプリセットを選択し、[**スライダー**](https://msdn.microsoft.com/library/windows/apps/br209614) コントロールを使って手動でホワイト バランスを調整します。</span><span class="sxs-lookup"><span data-stu-id="59c73-310">This example uses a [**ComboBox**](https://msdn.microsoft.com/library/windows/apps/br209348) control to select from built-in color temperature presets and a [**Slider**](https://msdn.microsoft.com/library/windows/apps/br209614) control for manual white balance adjustment.</span></span>

[!code-xml[<span data-ttu-id="59c73-311">WhiteBalanceXAML</span><span class="sxs-lookup"><span data-stu-id="59c73-311">WhiteBalanceXAML</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.xaml#SnippetWhiteBalanceXAML)]

<span data-ttu-id="59c73-312">現在のキャプチャ デバイスで **WhiteBalanceControl** がサポートされているかどうかを確認するには、[**Supported**](https://msdn.microsoft.com/library/windows/apps/dn279120) プロパティを確認します。</span><span class="sxs-lookup"><span data-stu-id="59c73-312">Check to see if the current capture device supports the **WhiteBalanceControl** by checking the [**Supported**](https://msdn.microsoft.com/library/windows/apps/dn279120) property.</span></span> <span data-ttu-id="59c73-313">コントロールがサポートされている場合は、この機能の UI を表示し、有効にすることができます。</span><span class="sxs-lookup"><span data-stu-id="59c73-313">If the control is supported, you can show and enable the UI for this feature.</span></span> <span data-ttu-id="59c73-314">コンボ ボックスの項目を、[**ColorTemperaturePreset**](https://msdn.microsoft.com/library/windows/apps/dn278894) 列挙体の値に設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-314">Set the items of the combo box to the values of the [**ColorTemperaturePreset**](https://msdn.microsoft.com/library/windows/apps/dn278894) enumeration.</span></span> <span data-ttu-id="59c73-315">また、選ばれた項目を、[**Preset**](https://msdn.microsoft.com/library/windows/apps/dn279110) プロパティの現在の値に設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-315">And set the selected item to the current value of the [**Preset**](https://msdn.microsoft.com/library/windows/apps/dn279110) property.</span></span>

<span data-ttu-id="59c73-316">手動コントロールの場合、ホワイト バランス値は、デバイスでサポートされている範囲内である必要があり、サポートされているステップ サイズのインクリメントである必要があります。</span><span class="sxs-lookup"><span data-stu-id="59c73-316">For manual control, the white balance value must be within the range supported by the device and must be an increment of the supported step size.</span></span> <span data-ttu-id="59c73-317">現在のデバイスでサポートされている値を取得するには、[**Min**](https://msdn.microsoft.com/library/windows/apps/dn279109)、[**Max**](https://msdn.microsoft.com/library/windows/apps/dn279107)、および [**Step**](https://msdn.microsoft.com/library/windows/apps/dn279119) プロパティを確認します。これらのプロパティは、対応するスライダー コントロールのプロパティを設定するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="59c73-317">Get the supported values for the current device by checking the [**Min**](https://msdn.microsoft.com/library/windows/apps/dn279109), [**Max**](https://msdn.microsoft.com/library/windows/apps/dn279107), and [**Step**](https://msdn.microsoft.com/library/windows/apps/dn279119) properties, which are used to set the corresponding properties of the slider control.</span></span> <span data-ttu-id="59c73-318">手動コントロールを有効にする前に、サポートされている最小値と最大値の間の範囲がステップ サイズよりも大きいことを確認します。</span><span class="sxs-lookup"><span data-stu-id="59c73-318">Before enabling manual control, check to make sure that the range between the minimum and maximum supported values is greater than the step size.</span></span> <span data-ttu-id="59c73-319">このようになっていない場合、手動コントロールは、現在のデバイスではサポートされません。</span><span class="sxs-lookup"><span data-stu-id="59c73-319">If it is not, manual control is not supported on the current device.</span></span>

<span data-ttu-id="59c73-320">値が設定されたときにイベントがトリガーされないように、[**ValueChanged**](https://msdn.microsoft.com/library/windows/apps/br209737) イベント ハンドラーの登録を解除した後、スライダー コントロールの値を **WhiteBalanceControl** の現在値に設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-320">Set the slider control's value to the current value of the **WhiteBalanceControl** after unregistering the [**ValueChanged**](https://msdn.microsoft.com/library/windows/apps/br209737) event handler so that the event is not triggered when the value is set.</span></span>

[!code-cs[<span data-ttu-id="59c73-321">WhiteBalance</span><span class="sxs-lookup"><span data-stu-id="59c73-321">WhiteBalance</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetWhiteBalance)]

<span data-ttu-id="59c73-322">色温度プリセットのコンボ ボックスの [**SelectionChanged**](https://msdn.microsoft.com/library/windows/apps/br209776) イベント ハンドラーで、現在選択されているプリセットを取得し、[**SetPresetAsync**](https://msdn.microsoft.com/library/windows/apps/dn279113) を呼び出してコントロールの値を設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-322">In the [**SelectionChanged**](https://msdn.microsoft.com/library/windows/apps/br209776) event handler of the color temperature preset combo box, get the currently selected preset and set the value of the control by calling [**SetPresetAsync**](https://msdn.microsoft.com/library/windows/apps/dn279113).</span></span> <span data-ttu-id="59c73-323">選択されたプリセット値が **Manual** でない場合は、手動のホワイト バランス スライダーを無効にします。</span><span class="sxs-lookup"><span data-stu-id="59c73-323">If the selected preset value is not **Manual**, disable the manual white balance slider.</span></span>

[!code-cs[<span data-ttu-id="59c73-324">WhiteBalanceComboBox</span><span class="sxs-lookup"><span data-stu-id="59c73-324">WhiteBalanceComboBox</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetWhiteBalanceComboBox)]

<span data-ttu-id="59c73-325">**ValueChanged** イベント ハンドラーで、コントロールの現在の値を取得し、[**SetValueAsync**](https://msdn.microsoft.com/library/windows/apps/dn278927) を呼び出してホワイト バランス値を設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-325">In the **ValueChanged** event handler, get the current value of the control and the set the white balance value by calling [**SetValueAsync**](https://msdn.microsoft.com/library/windows/apps/dn278927).</span></span>

[!code-cs[<span data-ttu-id="59c73-326">WhiteBalanceSlider</span><span class="sxs-lookup"><span data-stu-id="59c73-326">WhiteBalanceSlider</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetWhiteBalanceSlider)]

> [!IMPORTANT]
> <span data-ttu-id="59c73-327">ホワイト バランスの調整は、プレビュー ストリームが実行中であるときにのみサポートされます。</span><span class="sxs-lookup"><span data-stu-id="59c73-327">Adjusting the white balance is only supported while the preview stream is running.</span></span> <span data-ttu-id="59c73-328">ホワイト バランス値またはプリセットを設定する前に、プレビュー ストリームが実行されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="59c73-328">Check to make sure that the preview stream is running before setting the white balance value or preset.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="59c73-329">**ColorTemperaturePreset.Auto** プリセット値は、ホワイト バランス レベルを自動調整するようにシステムに指示します。</span><span class="sxs-lookup"><span data-stu-id="59c73-329">The **ColorTemperaturePreset.Auto** preset value instructs the system to automatically adjust the white balance level.</span></span> <span data-ttu-id="59c73-330">ホワイト バランス レベルが各フレームで同じである必要がある写真シーケンスのキャプチャなど、一部のシナリオでは、現在の自動値にコントロールをロックすることもできます。</span><span class="sxs-lookup"><span data-stu-id="59c73-330">For some scenarios, such as capturing a photo sequence where the white balance levels should be the same for each frame, you may want to lock the control to the current automatic value.</span></span> <span data-ttu-id="59c73-331">これを行うには、[**SetPresetAsync**](https://msdn.microsoft.com/library/windows/apps/dn279113) を呼び出して、**Manual** プリセットを指定します。[**SetValueAsync**](https://msdn.microsoft.com/library/windows/apps/dn279114) を使って、コントロールの値を設定しないでください。</span><span class="sxs-lookup"><span data-stu-id="59c73-331">To do this, call [**SetPresetAsync**](https://msdn.microsoft.com/library/windows/apps/dn279113) and specify the **Manual** preset and do not set a value on the control using [**SetValueAsync**](https://msdn.microsoft.com/library/windows/apps/dn279114).</span></span> <span data-ttu-id="59c73-332">これにより、デバイスは現在の値にロックされます。</span><span class="sxs-lookup"><span data-stu-id="59c73-332">This will cause the device to lock the current value.</span></span> <span data-ttu-id="59c73-333">現在のコントロールの値を読み取って、返された値を **SetValueAsync** に渡すことはしないでください。この値が正しいことは保証されないためです。</span><span class="sxs-lookup"><span data-stu-id="59c73-333">Do not attempt to read the current control value and then pass the returned value into **SetValueAsync** because this value is not guaranteed to be correct.</span></span>

## <a name="zoom"></a><span data-ttu-id="59c73-334">ズーム</span><span class="sxs-lookup"><span data-stu-id="59c73-334">Zoom</span></span>

<span data-ttu-id="59c73-335">[**ZoomControl**](https://msdn.microsoft.com/library/windows/apps/dn608149) によって、写真やビデオのキャプチャ時に使用されるズーム レベルを設定できます。</span><span class="sxs-lookup"><span data-stu-id="59c73-335">The [**ZoomControl**](https://msdn.microsoft.com/library/windows/apps/dn608149) allows you to set the zoom level used during photo or video capture.</span></span>

<span data-ttu-id="59c73-336">この例では、[**スライダー**](https://msdn.microsoft.com/library/windows/apps/br209614) コントロールを使って、現在のズーム レベルを調整します。</span><span class="sxs-lookup"><span data-stu-id="59c73-336">This example uses a [**Slider**](https://msdn.microsoft.com/library/windows/apps/br209614) control to adjust the current zoom level.</span></span> <span data-ttu-id="59c73-337">次のセクションでは、画面上のピンチ ジェスチャに基づいてズームを調整する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="59c73-337">The following section shows how to adjust zoom based on a pinch gesture on the screen.</span></span>

[!code-xml[<span data-ttu-id="59c73-338">ZoomXAML</span><span class="sxs-lookup"><span data-stu-id="59c73-338">ZoomXAML</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.xaml#SnippetZoomXAML)]

<span data-ttu-id="59c73-339">現在のキャプチャ デバイスで **ZoomControl** がサポートされているかどうかを確認するには、[**Supported**](https://msdn.microsoft.com/library/windows/apps/dn633819) プロパティを確認します。</span><span class="sxs-lookup"><span data-stu-id="59c73-339">Check to see if the current capture device supports the **ZoomControl** by checking the [**Supported**](https://msdn.microsoft.com/library/windows/apps/dn633819) property.</span></span> <span data-ttu-id="59c73-340">コントロールがサポートされている場合は、この機能の UI を表示し、有効にすることができます。</span><span class="sxs-lookup"><span data-stu-id="59c73-340">If the control is supported, you can show and enable the UI for this feature.</span></span>

<span data-ttu-id="59c73-341">ズーム レベル値は、デバイスでサポートされている範囲内である必要があり、サポートされているステップ サイズのインクリメントである必要があります。</span><span class="sxs-lookup"><span data-stu-id="59c73-341">The zoom level value must be within the range supported by the device and must be an increment of the supported step size.</span></span> <span data-ttu-id="59c73-342">現在のデバイスでサポートされている値を取得するには、[**Min**](https://msdn.microsoft.com/library/windows/apps/dn633817)、[**Max**](https://msdn.microsoft.com/library/windows/apps/dn608150)、および [**Step**](https://msdn.microsoft.com/library/windows/apps/dn633818) プロパティを確認します。これらのプロパティは、対応するスライダー コントロールのプロパティを設定するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="59c73-342">Get the supported values for the current device by checking the [**Min**](https://msdn.microsoft.com/library/windows/apps/dn633817), [**Max**](https://msdn.microsoft.com/library/windows/apps/dn608150), and [**Step**](https://msdn.microsoft.com/library/windows/apps/dn633818) properties, which are used to set the corresponding properties of the slider control.</span></span>

<span data-ttu-id="59c73-343">値が設定されたときにイベントがトリガーされないように、[**ValueChanged**](https://msdn.microsoft.com/library/windows/apps/br209737) イベント ハンドラーの登録を解除した後、スライダー コントロールの値を **ZoomControl** の現在値に設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-343">Set the slider control's value to the current value of the **ZoomControl** after unregistering the [**ValueChanged**](https://msdn.microsoft.com/library/windows/apps/br209737) event handler so that the event is not triggered when the value is set.</span></span>

[!code-cs[<span data-ttu-id="59c73-344">ZoomControl</span><span class="sxs-lookup"><span data-stu-id="59c73-344">ZoomControl</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetZoomControl)]

<span data-ttu-id="59c73-345">**ValueChanged** イベント ハンドラーで、[**Value**](https://msdn.microsoft.com/library/windows/apps/dn926724) プロパティをズーム スライダー コントロールの現在の値に設定して、[**ZoomSettings**](https://msdn.microsoft.com/library/windows/apps/dn926722) クラスの新しいインスタンスを作成します。</span><span class="sxs-lookup"><span data-stu-id="59c73-345">In the **ValueChanged** event handler, create a new instance of the [**ZoomSettings**](https://msdn.microsoft.com/library/windows/apps/dn926722) class, setting the [**Value**](https://msdn.microsoft.com/library/windows/apps/dn926724) property to the current value of the zoom slider control.</span></span> <span data-ttu-id="59c73-346">**ZoomControl** の [**SupportedModes**](https://msdn.microsoft.com/library/windows/apps/dn926721) プロパティに [**ZoomTransitionMode.Smooth**](https://msdn.microsoft.com/library/windows/apps/dn926726) が含まれている場合、デバイスがズーム レベルのスムーズな切り替えをサポートしていることを意味します。</span><span class="sxs-lookup"><span data-stu-id="59c73-346">If the [**SupportedModes**](https://msdn.microsoft.com/library/windows/apps/dn926721) property of the **ZoomControl** contains [**ZoomTransitionMode.Smooth**](https://msdn.microsoft.com/library/windows/apps/dn926726), it means the device supports smooth transitions between zoom levels.</span></span> <span data-ttu-id="59c73-347">このモードではユーザー エクスペリエンスが向上するため、通常、**ZoomSettings** オブジェクトの [**Mode**](https://msdn.microsoft.com/library/windows/apps/dn926723) プロパティにはこの値を使います。</span><span class="sxs-lookup"><span data-stu-id="59c73-347">Since this modes provides a better user experience, you will typically want to use this value for the [**Mode**](https://msdn.microsoft.com/library/windows/apps/dn926723) property of the **ZoomSettings** object.</span></span>

<span data-ttu-id="59c73-348">最後に、**ZoomSettings** オブジェクトを、**ZoomControl** オブジェクトの [**Configure**](https://msdn.microsoft.com/library/windows/apps/dn926719) メソッドに渡すことによって、現在のズーム設定を変更します。</span><span class="sxs-lookup"><span data-stu-id="59c73-348">Finally, change the current zoom settings by passing your **ZoomSettings** object into the [**Configure**](https://msdn.microsoft.com/library/windows/apps/dn926719) method of the **ZoomControl** object.</span></span>

[!code-cs[<span data-ttu-id="59c73-349">ZoomSlider</span><span class="sxs-lookup"><span data-stu-id="59c73-349">ZoomSlider</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.ManualControls.xaml.cs#SnippetZoomSlider)]

### <a name="smooth-zoom-using-pinch-gesture"></a><span data-ttu-id="59c73-350">ピンチ ジェスチャを使ったスムーズなズーム</span><span class="sxs-lookup"><span data-stu-id="59c73-350">Smooth zoom using pinch gesture</span></span>

<span data-ttu-id="59c73-351">前のセクションで説明したように、スムーズ ズームがサポートされているキャプチャ デバイスでスムーズ ズーム モードを使用すると、異なるデジタル ズーム レベル間での切り替えがスムーズになります。これによりユーザーは、キャプチャ操作中にズーム レベルを動的に調整することができます。切り替えを個々に行う必要がなく、不快感もありません。</span><span class="sxs-lookup"><span data-stu-id="59c73-351">As discussed in the previous section, on devices that support it, smooth zoom mode allows the capture device to smoothly transition between digital zoom levels, allowing the user to dynamically adjust the zoom level during the capture operation without discrete and jarring transitions.</span></span> <span data-ttu-id="59c73-352">このセクションでは、ピンチ ジェスチャに応答してズーム レベルを調整する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="59c73-352">This section describes how to adjust the zoom level in response to a pinch gesture.</span></span>

<span data-ttu-id="59c73-353">まず、[**ZoomControl.Supported**](https://msdn.microsoft.com/library/windows/apps/dn633819) プロパティをチェックして、現在のデバイスでデジタル ズーム コントロールがサポートされているかどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="59c73-353">First, determine if the digital zoom control is supported on the current device by checking the [**ZoomControl.Supported**](https://msdn.microsoft.com/library/windows/apps/dn633819) property.</span></span> <span data-ttu-id="59c73-354">次に、[**ZoomControl.SupportedModes**](https://msdn.microsoft.com/library/windows/apps/dn926721) の値として [**ZoomTransitionMode.Smooth**](https://msdn.microsoft.com/library/windows/apps/dn926726) が含まれているかどうかをチェックすることによって、スムーズ ズーム モードが利用可能かどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="59c73-354">Next, determine if smooth zoom mode is available by checking the [**ZoomControl.SupportedModes**](https://msdn.microsoft.com/library/windows/apps/dn926721) to see if it contains the value [**ZoomTransitionMode.Smooth**](https://msdn.microsoft.com/library/windows/apps/dn926726).</span></span>

[!code-cs[<span data-ttu-id="59c73-355">IsSmoothZoomSupported</span><span class="sxs-lookup"><span data-stu-id="59c73-355">IsSmoothZoomSupported</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetIsSmoothZoomSupported)]

<span data-ttu-id="59c73-356">マルチタッチ操作対応デバイスでは、2 本指でのピンチ ジェスチャに基づいてズーム倍率を調整するのが一般的です。</span><span class="sxs-lookup"><span data-stu-id="59c73-356">On a multi-touch enabled device, a typical scenario is to adjust the zoom factor based on a two-finger pinch gesture.</span></span> <span data-ttu-id="59c73-357">ピンチ ジェスチャを有効にするには、[**CaptureElement**](https://msdn.microsoft.com/library/windows/apps/br209278) コントロールの [**ManipulationMode**](https://msdn.microsoft.com/library/windows/apps/br208948) プロパティを [**ManipulationModes.Scale**](https://msdn.microsoft.com/library/windows/apps/br227934) に設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-357">Set the [**ManipulationMode**](https://msdn.microsoft.com/library/windows/apps/br208948) property of the [**CaptureElement**](https://msdn.microsoft.com/library/windows/apps/br209278) control to [**ManipulationModes.Scale**](https://msdn.microsoft.com/library/windows/apps/br227934) to enable the pinch gesture.</span></span> <span data-ttu-id="59c73-358">次に、ピンチ ジェスチャでサイズ変更されたときに発生する [**ManipulationDelta**](https://msdn.microsoft.com/library/windows/apps/br208946) イベントを登録します。</span><span class="sxs-lookup"><span data-stu-id="59c73-358">Then, register for the [**ManipulationDelta**](https://msdn.microsoft.com/library/windows/apps/br208946) event which is raised when the pinch gesture changes size.</span></span>

[!code-cs[<span data-ttu-id="59c73-359">RegisterPinchGestureHandler</span><span class="sxs-lookup"><span data-stu-id="59c73-359">RegisterPinchGestureHandler</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetRegisterPinchGestureHandler)]

<span data-ttu-id="59c73-360">**ManipulationDelta** イベント用のハンドラーでは、ユーザーのピンチ ジェスチャの変化に基づいてズーム倍率を更新します。</span><span class="sxs-lookup"><span data-stu-id="59c73-360">In the handler for the **ManipulationDelta** event, update the zoom factor based on the change in the user's pinch gesture.</span></span> <span data-ttu-id="59c73-361">[**ManipulationDelta.Scale**](https://msdn.microsoft.com/library/windows/apps/br242016) 値は、ピンチ ジェスチャによるズーム倍率の変化を表します。たとえば、ピンチ サイズがわずかに大きくなった場合は 1.0 よりわずかに大きい数値、ピンチ サイズがわずかに小さくなった場合は 1.0 よりわずかに小さい数値になります。</span><span class="sxs-lookup"><span data-stu-id="59c73-361">The [**ManipulationDelta.Scale**](https://msdn.microsoft.com/library/windows/apps/br242016) value represents the change in scale of the pinch gesture such that a small increase in the size of the pinch is a number slightly larger than 1.0 and a small decrease in the pinch size is a number slightly smaller than 1.0.</span></span> <span data-ttu-id="59c73-362">この例では、ズーム コントロールの現在の値にスケール デルタを掛けています。</span><span class="sxs-lookup"><span data-stu-id="59c73-362">In this example, the current value of the zoom control is multiplied by the scale delta.</span></span>

<span data-ttu-id="59c73-363">ズーム倍率を設定する前に、デバイスでサポートされている ([**ZoomControl.Min**](https://msdn.microsoft.com/library/windows/apps/dn633817) プロパティで示されている) 最小値より小さい値になっていないか確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="59c73-363">Before setting the zoom factor, you must make sure that the value is not less than the minimum value supported by the device as indicated by the [**ZoomControl.Min**](https://msdn.microsoft.com/library/windows/apps/dn633817) property.</span></span> <span data-ttu-id="59c73-364">また、値が [**ZoomControl.Max**](https://msdn.microsoft.com/library/windows/apps/dn608150) 値以下であることを確認します。</span><span class="sxs-lookup"><span data-stu-id="59c73-364">Also, make sure that the value is less than or equal to the [**ZoomControl.Max**](https://msdn.microsoft.com/library/windows/apps/dn608150) value.</span></span> <span data-ttu-id="59c73-365">最後に、ズーム倍率が、デバイスでサポートされている ([**Step**](https://msdn.microsoft.com/library/windows/apps/dn633818) プロパティで示されている) ズーム ステップ サイズの倍数になっていることを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="59c73-365">Finally, you must make sure that the the zoom factor is a multiple of the zoom step size supported by the device as indicated by the [**Step**](https://msdn.microsoft.com/library/windows/apps/dn633818) property.</span></span> <span data-ttu-id="59c73-366">ズーム倍率がこれらの要件を満たしていない場合は、キャプチャ デバイスでズーム レベルを設定しようとすると、例外がスローされます。</span><span class="sxs-lookup"><span data-stu-id="59c73-366">If your zoom factor does not meet these requirements, an exception will be thrown when you attempt to set the zoom level on the capture device.</span></span>

<span data-ttu-id="59c73-367">キャプチャ デバイスでズーム レベルを設定するには、新しい [**ZoomSettings**](https://msdn.microsoft.com/library/windows/apps/dn926722) オブジェクトを作成します。</span><span class="sxs-lookup"><span data-stu-id="59c73-367">Set the zoom level on the capture device by creating a new [**ZoomSettings**](https://msdn.microsoft.com/library/windows/apps/dn926722) object.</span></span> <span data-ttu-id="59c73-368">[**Mode**](https://msdn.microsoft.com/library/windows/apps/dn926723) プロパティを [**ZoomTransitionMode.Smooth**](https://msdn.microsoft.com/library/windows/apps/dn926726) に設定し、[**Value**](https://msdn.microsoft.com/library/windows/apps/dn926724) プロパティを目的のズーム倍率に設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-368">Set the [**Mode**](https://msdn.microsoft.com/library/windows/apps/dn926723) property to [**ZoomTransitionMode.Smooth**](https://msdn.microsoft.com/library/windows/apps/dn926726) and then set the [**Value**](https://msdn.microsoft.com/library/windows/apps/dn926724) property to your desired zoom factor.</span></span> <span data-ttu-id="59c73-369">最後に、[**ZoomControl.Configure**](https://msdn.microsoft.com/library/windows/apps/dn926719) を呼び出して、デバイスの新しいズーム値を設定します。</span><span class="sxs-lookup"><span data-stu-id="59c73-369">Finally, call [**ZoomControl.Configure**](https://msdn.microsoft.com/library/windows/apps/dn926719) to set the new zoom value on the device.</span></span> <span data-ttu-id="59c73-370">デバイスは新しいズーム値への切り替えをスムーズに行います。</span><span class="sxs-lookup"><span data-stu-id="59c73-370">The device will smoothly transition to the new zoom value.</span></span>

[!code-cs[<span data-ttu-id="59c73-371">ManipulationDelta</span><span class="sxs-lookup"><span data-stu-id="59c73-371">ManipulationDelta</span></span>](./code/BasicMediaCaptureWin10/cs/MainPage.xaml.cs#SnippetManipulationDelta)]

## <a name="related-topics"></a><span data-ttu-id="59c73-372">関連トピック</span><span class="sxs-lookup"><span data-stu-id="59c73-372">Related topics</span></span>

* [<span data-ttu-id="59c73-373">カメラ</span><span class="sxs-lookup"><span data-stu-id="59c73-373">Camera</span></span>](camera.md)
* [<span data-ttu-id="59c73-374">MediaCapture を使った基本的な写真、ビデオ、およびオーディオのキャプチャ</span><span class="sxs-lookup"><span data-stu-id="59c73-374">Basic photo, video, and audio capture with MediaCapture</span></span>](basic-photo-video-and-audio-capture-with-MediaCapture.md)
